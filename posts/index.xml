<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Posts on HoÃ ng DÆ°Æ¡ng</title><link>https://tech.nguuyen.io.vn/posts/</link><description>Recent content in Posts on HoÃ ng DÆ°Æ¡ng</description><generator>Hugo -- gohugo.io</generator><language>vi</language><lastBuildDate>Sun, 25 Jan 2026 00:00:00 +0000</lastBuildDate><atom:link href="https://tech.nguuyen.io.vn/posts/index.xml" rel="self" type="application/rss+xml"/><item><title>Docker cÆ¡ báº£n: Image vs Container</title><link>https://tech.nguuyen.io.vn/posts/docker/docker-basics-image-vs-container/</link><pubDate>Sun, 25 Jan 2026 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/docker/docker-basics-image-vs-container/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/docker/docker-basics-image-vs-container.webp" alt="Featured image of post Docker cÆ¡ báº£n: Image vs Container" />&lt;h2 id="docker-image-vÃ -container---hai-khÃ¡i-niá»‡m-thiáº¿t-yáº¿u">Docker Image vÃ  Container - Hai khÃ¡i niá»‡m thiáº¿t yáº¿u
&lt;/h2>&lt;p>Khi báº¯t Ä‘áº§u vá»›i Docker, hai khÃ¡i niá»‡m quan trá»ng nháº¥t báº¡n cáº§n hiá»ƒu lÃ  &lt;strong>Image&lt;/strong> vÃ  &lt;strong>Container&lt;/strong>. Nhiá»u ngÆ°á»i má»›i thÆ°á»ng nháº§m láº«n giá»¯a chÃºng, nhÆ°ng thá»±c cháº¥t chÃºng Ä‘Ã³ng vai trÃ² khÃ¡c nhau trong há»‡ sinh thÃ¡i Docker. Image giá»‘ng nhÆ° &lt;strong>kho chá»©a recipe&lt;/strong> (lÃ m cÃ´ng thá»©c), cÃ²n Container lÃ  &lt;strong>thá»±c táº¿ thá»±c thi&lt;/strong> (mÃ³n Äƒn Ä‘Æ°á»£c chuáº©n bá»‹). ğŸ³&lt;/p>
&lt;p>Trong bÃ i viáº¿t nÃ y, tÃ´i sáº½ giáº£i thÃ­ch chi tiáº¿t sá»± khÃ¡c biá»‡t giá»¯a Image vÃ  Container, cÃ¡ch chÃºng hoáº¡t Ä‘á»™ng cÃ¹ng nhau, vÃ  cung cáº¥p vÃ­ dá»¥ thá»±c táº¿ Ä‘á»ƒ báº¡n dá»… hiá»ƒu hÆ¡n.&lt;/p>
&lt;hr>
&lt;h2 id="i-docker-image-lÃ -gÃ¬">I. Docker Image lÃ  gÃ¬?
&lt;/h2>&lt;p>Docker Image lÃ  má»™t &lt;strong>template&lt;/strong> (khuÃ´n máº«u) Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ táº¡o ra Container. NÃ³ chá»©a táº¥t cáº£ má»i thá»© cáº§n thiáº¿t Ä‘á»ƒ cháº¡y má»™t á»©ng dá»¥ng:&lt;/p>
&lt;ul>
&lt;li>Operating system (Há»‡ Ä‘iá»u hÃ nh) â€” thÆ°á»ng lÃ  Linux minimal&lt;/li>
&lt;li>Runtime environment (MÃ´i trÆ°á»ng cháº¡y) â€” Node.js, Python, Java, v.v.&lt;/li>
&lt;li>Code á»©ng dá»¥ng&lt;/li>
&lt;li>Dependencies (CÃ¡c thÆ° viá»‡n phá»¥ thuá»™c)&lt;/li>
&lt;li>Configuration files (Files cáº¥u hÃ¬nh)&lt;/li>
&lt;li>Environment variables (Biáº¿n mÃ´i trÆ°á»ng)&lt;/li>
&lt;/ul>
&lt;h3 id="1-Ä‘áº·c-Ä‘iá»ƒm-chÃ­nh-cá»§a-docker-image">1. Äáº·c Ä‘iá»ƒm chÃ­nh cá»§a Docker Image
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>Read-only&lt;/strong>: Image lÃ  chá»‰ Ä‘á»c, khÃ´ng thá»ƒ thay Ä‘á»•i sau khi Ä‘Ã£ táº¡o&lt;/li>
&lt;li>&lt;strong>Layered structure&lt;/strong>: Image Ä‘Æ°á»£c xÃ¢y dá»±ng tá»« cÃ¡c lá»›p (layers), má»—i layer Ä‘áº¡i diá»‡n cho má»™t lá»‡nh trong Dockerfile&lt;/li>
&lt;li>&lt;strong>Reusable&lt;/strong>: CÃ³ thá»ƒ sá»­ dá»¥ng cÃ¹ng má»™t image Ä‘á»ƒ táº¡o ra nhiá»u container&lt;/li>
&lt;li>&lt;strong>Version-controlled&lt;/strong>: Má»—i image cÃ³ tag (vd: &lt;code>1.0&lt;/code>, &lt;code>latest&lt;/code>, &lt;code>alpine&lt;/code>) Ä‘á»ƒ quáº£n lÃ½ phiÃªn báº£n&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>VÃ­ dá»¥ vá» cáº¥u trÃºc Image:&lt;/strong>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Layer&lt;/th>
&lt;th>Ná»™i dung&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Layer 1&lt;/td>
&lt;td>Base OS (Alpine Linux)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Layer 2&lt;/td>
&lt;td>System packages (curl, wget)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Layer 3&lt;/td>
&lt;td>Node.js runtime (18.x)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Layer 4&lt;/td>
&lt;td>Application code&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Layer 5&lt;/td>
&lt;td>Environment variables&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="2-cÃ¡c-lá»‡nh-phá»•-biáº¿n-vá»›i-image">2. CÃ¡c lá»‡nh phá»• biáº¿n vá»›i Image
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Pull má»™t image tá»« Docker Hub&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker pull node:18-alpine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Liá»‡t kÃª cÃ¡c images Ä‘Ã£ táº£i vá»&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker images
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># XÃ³a má»™t image khÃ´ng sá»­ dá»¥ng&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker image rm node:18-alpine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># XÃ³a táº¥t cáº£ unused images&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker image prune -a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Build image tá»« Dockerfile&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker build -t myapp:1.0 .
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="ii-docker-container-lÃ -gÃ¬">II. Docker Container lÃ  gÃ¬?
&lt;/h2>&lt;p>Docker Container lÃ  má»™t &lt;strong>thá»±c thá»ƒ Ä‘ang cháº¡y&lt;/strong> (running instance) Ä‘Æ°á»£c táº¡o ra tá»« Docker Image. Container cÃ³:&lt;/p>
&lt;ul>
&lt;li>Má»™t bá»™ file há»‡ thá»‘ng riÃªng (filesystem)&lt;/li>
&lt;li>KhÃ´ng gian máº¡ng riÃªng (network isolation)&lt;/li>
&lt;li>Process riÃªng, hoáº¡t Ä‘á»™ng Ä‘á»™c láº­p&lt;/li>
&lt;li>CÃ¡c biáº¿n mÃ´i trÆ°á»ng riÃªng&lt;/li>
&lt;/ul>
&lt;h3 id="1-Ä‘áº·c-Ä‘iá»ƒm-chÃ­nh-cá»§a-docker-container">1. Äáº·c Ä‘iá»ƒm chÃ­nh cá»§a Docker Container
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>Read-only base + Read-write layer&lt;/strong>: Container cÃ³ read-write layer cho phÃ©p thay Ä‘á»•i dá»¯ liá»‡u&lt;/li>
&lt;li>&lt;strong>Isolated&lt;/strong>: Container cÃ´ láº­p vá»›i host vÃ  cÃ¡c container khÃ¡c&lt;/li>
&lt;li>&lt;strong>Stateful&lt;/strong>: Container cÃ³ thá»ƒ á»Ÿ cÃ¡c tráº¡ng thÃ¡i: running, stopped, paused, exited&lt;/li>
&lt;li>&lt;strong>Ephemeral&lt;/strong>: Container cÃ³ thá»ƒ táº¡o vÃ  xÃ³a nhanh chÃ³ng (&amp;lt; 1 giÃ¢y)&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>VÃ­ dá»¥ vá» Container:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Táº¡o vÃ  cháº¡y container tá»« image&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker run -d --name myapp node:18-alpine node server.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Liá»‡t kÃª cÃ¡c containers Ä‘ang cháº¡y&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Liá»‡t kÃª táº¥t cáº£ containers (ká»ƒ cáº£ Ä‘Ã£ dá»«ng)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker ps -a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Dá»«ng container&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker stop myapp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Khá»Ÿi Ä‘á»™ng láº¡i container&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker start myapp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># XÃ³a container&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker rm myapp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Xem logs cá»§a container&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker logs myapp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="2-so-sÃ¡nh-container-vá»›i-virtual-machine">2. So sÃ¡nh Container vá»›i Virtual Machine
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>TÃ­nh cháº¥t&lt;/th>
&lt;th>Docker Container&lt;/th>
&lt;th>Virtual Machine&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Há»‡ Ä‘iá»u hÃ nh&lt;/td>
&lt;td>Chia sáº» kernel vá»›i host&lt;/td>
&lt;td>CÃ³ OS riÃªng Ä‘áº§y Ä‘á»§&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Thá»i gian khá»Ÿi Ä‘á»™ng&lt;/td>
&lt;td>~ 1-2 giÃ¢y&lt;/td>
&lt;td>~ 1-2 phÃºt&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Dung lÆ°á»£ng&lt;/td>
&lt;td>MB (10-100 MB)&lt;/td>
&lt;td>GB (1-10 GB)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Hiá»‡u nÄƒng&lt;/td>
&lt;td>Gáº§n nhÆ° native&lt;/td>
&lt;td>Cáº§n virtualization overhead&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Sá»‘ lÆ°á»£ng tá»‘i Ä‘a&lt;/td>
&lt;td>HÃ ng trÄƒm host&lt;/td>
&lt;td>Táº½n vÃ i chá»¥c host&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p align="center">
&lt;img src="https://assets.bytebytego.com/diagrams/0414-how-does-docker-work.png" alt="Docker Container Architecture">
&lt;em>Docker Container Architecture&lt;/em>
&lt;/p>
&lt;hr>
&lt;h2 id="iii-so-sÃ¡nh-chi-tiáº¿t-image-vs-container">III. So sÃ¡nh chi tiáº¿t: Image vs Container
&lt;/h2>&lt;p>Äá»ƒ dá»… hÃ¬nh dung, hÃ£y xem báº£ng so sÃ¡nh dÆ°á»›i Ä‘Ã¢y:&lt;/p>
&lt;h3 id="báº£ng-so-sÃ¡nh-Ä‘áº§y-Ä‘á»§">Báº£ng so sÃ¡nh Ä‘áº§y Ä‘á»§
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>KhÃ­a cáº¡nh&lt;/th>
&lt;th>Image&lt;/th>
&lt;th>Container&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>CÃ´ng thá»©c&lt;/strong>&lt;/td>
&lt;td>Kho chá»©a recipe (cÃ´ng thá»©c)&lt;/td>
&lt;td>MÃ³n Äƒn Ä‘Æ°á»£c thá»±c hiá»‡n&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Tráº¡ng thÃ¡i&lt;/strong>&lt;/td>
&lt;td>Static (tÄ©nh, read-only)&lt;/td>
&lt;td>Dynamic (Ä‘á»™ng, read-write)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Thay Ä‘á»•i&lt;/strong>&lt;/td>
&lt;td>KhÃ´ng thay Ä‘á»•i sau khi táº¡o&lt;/td>
&lt;td>CÃ³ thá»ƒ thay Ä‘á»•i khi cháº¡y&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Sá»‘ lÆ°á»£ng&lt;/strong>&lt;/td>
&lt;td>CÃ³ 1 image, táº¡o N container&lt;/td>
&lt;td>Nhiá»u container tá»« cÃ¹ng 1 image&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Thá»i gian táº¡o&lt;/strong>&lt;/td>
&lt;td>Cháº­m (build láº§n Ä‘áº§u ~5-10 phÃºt)&lt;/td>
&lt;td>Nhanh (&amp;lt; 1 giÃ¢y)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>LÆ°u trá»¯&lt;/strong>&lt;/td>
&lt;td>LÆ°u trong Docker cache&lt;/td>
&lt;td>LÆ°u thá»i gian cháº¡y hoáº·c volume&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Portability&lt;/strong>&lt;/td>
&lt;td>Dá»… dÃ ng chia sáº» (push/pull)&lt;/td>
&lt;td>Chá»‰ cháº¡y trÃªn mÃ´i trÆ°á»ng Ä‘Ã£ install Docker&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Version&lt;/strong>&lt;/td>
&lt;td>CÃ³ tag quáº£n lÃ½ (1.0, 2.0, latest)&lt;/td>
&lt;td>KhÃ´ng cÃ³ version riÃªng&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Network&lt;/strong>&lt;/td>
&lt;td>KhÃ´ng&lt;/td>
&lt;td>CÃ³ network riÃªng&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Storage&lt;/strong>&lt;/td>
&lt;td>LÆ°u trá»¯ táº¡i layers&lt;/td>
&lt;td>CÃ³ read-write layer trÃªn cÃ¹ng image&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="quan-há»‡-giá»¯a-image-vÃ -container">Quan há»‡ giá»¯a Image vÃ  Container
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Docker Image (Template)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â†“
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> docker run
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â†“
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Docker Container (Running Instance)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â†“
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> docker commit
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> â†“
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Docker Image má»›i (updated)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>LÆ°u Ã½:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Image&lt;/strong> giá»‘ng nhÆ° &lt;code>class&lt;/code> trong OOP (Object Oriented Programming)&lt;/li>
&lt;li>&lt;strong>Container&lt;/strong> giá»‘ng nhÆ° &lt;code>object&lt;/code> (instance cá»§a class)&lt;/li>
&lt;li>DÃ¹ng &lt;code>docker run&lt;/code> Ä‘á»ƒ táº¡o container tá»« image&lt;/li>
&lt;li>DÃ¹ng &lt;code>docker commit&lt;/code> Ä‘á»ƒ save container thÃ nh image má»›i&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="iv-vÃ­-dá»¥-thá»±c-táº¿-tá»«-Ä‘áº§u-Ä‘áº¿n-cuá»‘i">IV. VÃ­ dá»¥ thá»±c táº¿ tá»« Ä‘áº§u Ä‘áº¿n cuá»‘i
&lt;/h2>&lt;p>Äá»ƒ hiá»ƒu rÃµ hÆ¡n, hÃ£y cÃ¹ng lÃ m má»™t vÃ­ dá»¥ chi tiáº¿t:&lt;/p>
&lt;h3 id="1-táº¡o-dockerfile-Ä‘á»ƒ-build-image">1. Táº¡o Dockerfile (Ä‘á»ƒ build image)
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-dockerfile" data-lang="dockerfile">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># Dockerfile&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="s"> node:18-alpine&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">WORKDIR&lt;/span>&lt;span class="s"> /app&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">COPY&lt;/span> package*.json ./&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">RUN&lt;/span> npm install&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">COPY&lt;/span> . .&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">CMD&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;node&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;server.js&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="2-build-image-tá»«-dockerfile">2. Build image tá»« Dockerfile
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Build image vá»›i tÃªn myapp vÃ  tag 1.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker build -t myapp:1.0 .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Xem image Ä‘Ã£ táº¡o&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker images
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Output:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># REPOSITORY TAG IMAGE ID CREATED SIZE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># myapp 1.0 abc123def456 2 minutes ago 150MB&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="3-táº¡o-vÃ -cháº¡y-container-tá»«-image">3. Táº¡o vÃ  cháº¡y container tá»« image
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Cháº¡y container tá»« image myapp:1.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker run -d &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --name myapp-container &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -p 3000:3000 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> myapp:1.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Xem container Ä‘ang cháº¡y&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Output:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># CONTAINER ID IMAGE COMMAND STATUS PORTS&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># xyz789ghi012 myapp:1.0 &amp;#34;node server.js&amp;#34; Up 2 minutes 0.0.0.0:3000-&amp;gt;3000/tcp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Xem logs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker logs myapp-container
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="4-tÆ°Æ¡ng-tÃ¡c-vá»›i-container">4. TÆ°Æ¡ng tÃ¡c vá»›i container
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Truy cáº­p ná»™i bá»™ container&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker &lt;span class="nb">exec&lt;/span> -it myapp-container sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Trong container â€” báº¡n cÃ³ thá»ƒ:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ls -la /app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl http://localhost:3000
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="5-xÃ³a-container-vÃ -image">5. XÃ³a container vÃ  image
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Dá»«ng container&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker stop myapp-container
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># XÃ³a container&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker rm myapp-container
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># XÃ³a image&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker rmi myapp:1.0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="v-best-practices-vá»›i-image-vÃ -container">V. Best practices vá»›i Image vÃ  Container
&lt;/h2>&lt;h3 id="1-quáº£n-lÃ½-image">1. Quáº£n lÃ½ Image
&lt;/h3>&lt;ul>
&lt;li>âœ… Sá»­ dá»¥ng cá»¥ thá»ƒ hÆ¡n (ex: &lt;code>node:18.12-alpine&lt;/code> thay vÃ¬ &lt;code>node:latest&lt;/code>)&lt;/li>
&lt;li>âœ… Giáº£m kÃ­ch thÆ°á»›c báº±ng base image nhá» (alpine, distroless)&lt;/li>
&lt;li>âœ… Táº­n dá»¥ng cache layer báº±ng cÃ¡ch xáº¿p lá»‡nh theo thá»© tá»±&lt;/li>
&lt;li>âœ… Sá»­ dá»¥ng &lt;code>.dockerignore&lt;/code> Ä‘á»ƒ loáº¡i bá» file khÃ´ng cáº§n thiáº¿t&lt;/li>
&lt;li>âœ… XÃ³a image unused thÆ°á»ng xuyÃªn vá»›i &lt;code>docker image prune&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># VÃ­ dá»¥: Sá»­ dá»¥ng image cá»¥ thá»ƒ&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">FROM node:18.12.1-alpine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># thay vÃ¬&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">FROM node:latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="2-quáº£n-lÃ½-container">2. Quáº£n lÃ½ Container
&lt;/h3>&lt;ul>
&lt;li>âœ… Äáº·t tÃªn container rÃµ rÃ ng (&lt;code>--name app-container&lt;/code>)&lt;/li>
&lt;li>âœ… Sá»­ dá»¥ng &lt;code>-d&lt;/code> (detached mode) Ä‘á»ƒ cháº¡y container background&lt;/li>
&lt;li>âœ… ThÆ°á»ng xuyÃªn quay láº¡i logs khi debug (&lt;code>docker logs -f&lt;/code>)&lt;/li>
&lt;li>âœ… Sá»­ dá»¥ng volumes náº¿u cáº§n persistence dá»¯ liá»‡u&lt;/li>
&lt;li>âœ… Giá»›i háº¡n resource vá»›i &lt;code>--cpus&lt;/code>, &lt;code>--memory&lt;/code>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Run container vá»›i giá»›i háº¡n resource&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker run -d &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --name app &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --cpus&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;1.5&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --memory&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;512m&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -p 8080:80 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> myapp:1.0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="troubleshooting-phá»•-biáº¿n">Troubleshooting phá»• biáº¿n
&lt;/h2>&lt;h3 id="1-container-khÃ´ng-thá»ƒ-táº¡o-tá»«-image">1. Container khÃ´ng thá»ƒ táº¡o tá»« image
&lt;/h3>&lt;p>&lt;strong>Lá»—i:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Error: Cannot start container from image
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>NguyÃªn nhÃ¢n:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Image chÆ°a Ä‘Æ°á»£c build hoáº·c pull vá»&lt;/li>
&lt;li>Image bá»‹ corrupt&lt;/li>
&lt;li>Port Ä‘Ã£ Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi container khÃ¡c&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Giáº£i phÃ¡p:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Kiá»ƒm tra image Ä‘Ã£ tá»“n táº¡i chÆ°a&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker images &lt;span class="p">|&lt;/span> grep myapp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Pull vá» láº¡i náº¿u chÆ°a cÃ³&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker pull myapp:1.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Build láº¡i image&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker build -t myapp:1.0 .
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="2-container-khÃ´ng-lÆ°u-dá»¯-liá»‡u-khi-dá»«ng">2. Container khÃ´ng lÆ°u dá»¯ liá»‡u khi dá»«ng
&lt;/h3>&lt;p>&lt;strong>NguyÃªn nhÃ¢n:&lt;/strong> Container lÃ  &lt;strong>ephemeral&lt;/strong>, dá»¯ liá»‡u trong container sáº½ máº¥t khi nÃ³ dá»«ng hoáº·c xÃ³a.&lt;/p>
&lt;p>&lt;strong>Giáº£i phÃ¡p:&lt;/strong> Sá»­ dá»¥ng Docker Volumes&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Táº¡o volume&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker volume create myapp-data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Gáº¯n volume vÃ o container&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker run -d &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --name app &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -v myapp-data:/app/data &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> myapp:1.0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="3-container-khÃ´ng-truy-cáº­p-Ä‘Æ°á»£c-tá»«-bÃªn-ngoÃ i">3. Container khÃ´ng truy cáº­p Ä‘Æ°á»£c tá»« bÃªn ngoÃ i
&lt;/h3>&lt;p>&lt;strong>Lá»—i:&lt;/strong> KhÃ´ng thá»ƒ truy cáº­p &lt;code>http://localhost:3000&lt;/code> khi run container&lt;/p>
&lt;p>&lt;strong>Giáº£i phÃ¡p:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Äáº£m báº£o Ä‘Æ°á»£c map port tá»« container â†’ host&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker run -d &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --name app &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -p 3000:3000 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> myapp:1.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Náº¿u lÃ  multi-container, sá»­ dá»¥ng docker network&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker network create mynet
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker run -d --network mynet --name app1 myapp:1.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker run -d --network mynet --name app2 myapp:1.0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="ghi-chÃº-triá»ƒn-khai-">Ghi chÃº triá»ƒn khai ğŸ”§
&lt;/h2>&lt;p>&lt;strong>Khi Ã¡p dá»¥ng vÃ o dá»± Ã¡n cá»§a báº¡n&lt;/strong>, hÃ£y lÆ°u Ã½ cÃ¡c Ä‘iá»ƒm quan trá»ng:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Äá»«ng thay Ä‘á»•i trá»±c tiáº¿p container&lt;/strong> â€” HÃ£y build láº¡i image vá»›i Dockerfile&lt;/li>
&lt;li>&lt;strong>Sá»­ dá»¥ng docker-compose.yaml&lt;/strong> Ä‘á»ƒ quáº£n lÃ½ nhiá»u container vÃ  dependencies&lt;/li>
&lt;li>&lt;strong>Sá»­ dá»¥ng CI/CD&lt;/strong> Ä‘á»ƒ tá»± Ä‘á»™ng build vÃ  push image lÃªn Docker Hub/Registry&lt;/li>
&lt;li>&lt;strong>GiÃ¡m sÃ¡t Ñ€ĞµÑÑƒÑ€Ñ&lt;/strong> vá»›i &lt;code>docker stats&lt;/code> hoáº·c Prometheus + Grafana&lt;/li>
&lt;li>&lt;strong>Backup dá»¯ liá»‡u&lt;/strong> thÆ°á»ng xuyÃªn tá»« volumes&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Best practices:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>LuÃ´n Ä‘áº·t tÃªn image vÃ  container rÃµ rÃ ng&lt;/li>
&lt;li>Sá»­ dá»¥ng tags cá»¥ thá»ƒ cho mÃ´i trÆ°á»ng khÃ¡c nhau (dev, staging, prod)&lt;/li>
&lt;li>Viáº¿t &lt;code>.dockerignore&lt;/code> Ä‘á»ƒ giáº£m kÃ­ch thÆ°á»›c image vÃ  tÄƒng tá»‘c build&lt;/li>
&lt;li>Sá»­ dá»¥ng multi-stage build Ä‘á»ƒ táº¡o image nhá» nháº¥t&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Troubleshooting:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Khi container bá»‹ crash, xem logs: &lt;code>docker logs &amp;lt;container-name&amp;gt;&lt;/code>&lt;/li>
&lt;li>Khi container khÃ´ng thá»ƒ pull image, kiá»ƒm tra network: &lt;code>ping registry-1.docker.io&lt;/code>&lt;/li>
&lt;li>Khi container khÃ´ng cÃ³ quyá»n truy cáº­p file, gáº¯n volume Ä‘Ãºng permission&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-lá»i-káº¿t">ğŸ¯ Lá»i káº¿t
&lt;/h2>&lt;p>TÃ³m táº¯t láº¡i:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Docker Image = Kho chá»©a recipe (template read-only)&lt;/strong> â€” Chá»©a táº¥t cáº£ thiáº¿t láº­p Ä‘á»ƒ cháº¡y á»©ng dá»¥ng&lt;/li>
&lt;li>&lt;strong>Docker Container = MÃ³n Äƒn Ä‘Æ°á»£c thá»±c hiá»‡n (running instance)&lt;/strong> â€” Container Ä‘Æ°á»£c táº¡o tá»« image, read-write layer&lt;/li>
&lt;li>Image lÃ  tÄ©nh, Container lÃ  Ä‘á»™ng&lt;/li>
&lt;li>DÃ¹ng &lt;code>docker run&lt;/code> Ä‘á»ƒ táº¡o container tá»« image&lt;/li>
&lt;li>DÃ¹ng &lt;code>docker commit&lt;/code> Ä‘á»ƒ update container thÃ nh image má»›i&lt;/li>
&lt;/ul>
&lt;p>BÃ¢y giá» báº¡n Ä‘Ã£ hiá»ƒu rÃµ sá»± khÃ¡c biá»‡t giá»¯a Image vÃ  Container. BÆ°á»›c tiáº¿p theo: há»c cÃ¡ch sá»­ dá»¥ng Dockerfile Ä‘á»ƒ build image, vÃ  Docker Compose Ä‘á»ƒ quáº£n lÃ½ nhiá»u container. ğŸš€&lt;/p>
&lt;p>Náº¿u báº¡n tháº¥y bÃ i viáº¿t nÃ y há»¯u Ã­ch, hÃ£y nhá»› â­ star repo hoáº·c ğŸ“± chia sáº» vá»›i báº¡n bÃ¨ nhÃ©! ğŸ˜Š&lt;/p>
&lt;hr>
&lt;h2 id="tÃ i-liá»‡u-tham-kháº£o">TÃ i liá»‡u tham kháº£o
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://docs.docker.com/" target="_blank" rel="noopener"
>Docker Official Documentation&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://docs.docker.com/develop/dev-best-practices/" target="_blank" rel="noopener"
>Best practices for writing Dockerfiles&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>CÃ¡ch cÃ i Ä‘áº·t Docker trÃªn Ubuntu ğŸ³</title><link>https://tech.nguuyen.io.vn/posts/installation-guides/setup-docker-on-ubuntu/</link><pubDate>Sun, 30 Nov 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/installation-guides/setup-docker-on-ubuntu/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/installation-guides/docker-installation-ubuntu.webp" alt="Featured image of post CÃ¡ch cÃ i Ä‘áº·t Docker trÃªn Ubuntu ğŸ³" />&lt;h2 id="-giá»›i-thiá»‡u-vá»-docker">ğŸ³ Giá»›i thiá»‡u vá» Docker
&lt;/h2>&lt;p>Docker lÃ  má»™t ná»n táº£ng phá»• biáº¿n trong DevOps Ä‘á»ƒ triá»ƒn khai á»©ng dá»¥ng báº±ng &lt;strong>container&lt;/strong>. Container cho phÃ©p báº¡n Ä‘Ã³ng gÃ³i á»©ng dá»¥ng cÃ¹ng vá»›i táº¥t cáº£ cÃ¡c dependencies vÃ  cáº¥u hÃ¬nh cáº§n thiáº¿t, giÃºp á»©ng dá»¥ng cháº¡y nháº¥t quÃ¡n trÃªn má»i mÃ´i trÆ°á»ng tá»« development Ä‘áº¿n production.&lt;/p>
&lt;p>&lt;strong>Lá»£i Ã­ch cá»§a Docker:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>âš¡ &lt;strong>TÃ­nh nháº¥t quÃ¡n&lt;/strong>: á»¨ng dá»¥ng cháº¡y giá»‘ng nhau trÃªn má»i mÃ´i trÆ°á»ng&lt;/li>
&lt;li>ğŸš€ &lt;strong>Tá»‘c Ä‘á»™&lt;/strong>: Khá»Ÿi Ä‘á»™ng container nhanh hÆ¡n so vá»›i virtual machine&lt;/li>
&lt;li>ğŸ“¦ &lt;strong>ÄÃ³ng gÃ³i&lt;/strong>: Dá»… dÃ ng chia sáº» vÃ  triá»ƒn khai á»©ng dá»¥ng&lt;/li>
&lt;li>ğŸ”„ &lt;strong>Scalability&lt;/strong>: Dá»… dÃ ng má»Ÿ rá»™ng vÃ  quáº£n lÃ½ nhiá»u container&lt;/li>
&lt;/ul>
&lt;p>BÃ i viáº¿t nÃ y hÆ°á»›ng dáº«n báº¡n cÃ¡ch cÃ i Ä‘áº·t Docker trÃªn Ubuntu 20.04 vÃ  22.04 má»™t cÃ¡ch Ä‘Æ¡n giáº£n vÃ  hiá»‡u quáº£, sá»­ dá»¥ng repository chÃ­nh thá»©c cá»§a Docker Ä‘á»ƒ Ä‘áº£m báº£o báº¡n luÃ´n cÃ³ phiÃªn báº£n má»›i nháº¥t vÃ  á»•n Ä‘á»‹nh.&lt;/p>
&lt;hr>
&lt;h2 id="-yÃªu-cáº§u-trÆ°á»›c-khi-cÃ i-Ä‘áº·t">âœ… YÃªu cáº§u trÆ°á»›c khi cÃ i Ä‘áº·t
&lt;/h2>&lt;p>TrÆ°á»›c khi báº¯t Ä‘áº§u, hÃ£y Ä‘áº£m báº£o báº¡n cÃ³:&lt;/p>
&lt;ul>
&lt;li>ğŸ–¥ï¸ &lt;strong>MÃ¡y chá»§ Ubuntu 20.04 hoáº·c 22.04&lt;/strong> Ä‘Ã£ Ä‘Æ°á»£c cÃ i Ä‘áº·t&lt;/li>
&lt;li>ğŸ” &lt;strong>Quyá»n sudo&lt;/strong> Ä‘á»ƒ thá»±c thi cÃ¡c lá»‡nh quáº£n trá»‹&lt;/li>
&lt;li>ğŸŒ &lt;strong>Káº¿t ná»‘i internet&lt;/strong> Ä‘á»ƒ táº£i cÃ¡c gÃ³i cÃ i Ä‘áº·t&lt;/li>
&lt;li>â±ï¸ &lt;strong>Thá»i gian&lt;/strong>: QuÃ¡ trÃ¬nh cÃ i Ä‘áº·t máº¥t khoáº£ng 5-10 phÃºt&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="1-cáº­p-nháº­t-há»‡-thá»‘ng">1. Cáº­p nháº­t há»‡ thá»‘ng
&lt;/h2>&lt;p>TrÆ°á»›c khi cÃ i Ä‘áº·t Docker, hÃ£y Ä‘áº£m báº£o há»‡ thá»‘ng Ä‘Æ°á»£c cáº­p nháº­t Ä‘áº§y Ä‘á»§. Äiá»u nÃ y giÃºp Ä‘áº£m báº£o báº¡n cÃ³ cÃ¡c báº£n vÃ¡ báº£o máº­t má»›i nháº¥t vÃ  cÃ¡c gÃ³i phá»¥ thuá»™c cáº§n thiáº¿t.&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo apt update &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> sudo apt upgrade -y
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>ğŸ’¡ LÆ°u Ã½:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Lá»‡nh &lt;code>apt update&lt;/code> cáº­p nháº­t danh sÃ¡ch cÃ¡c gÃ³i cÃ³ sáºµn tá»« repository&lt;/li>
&lt;li>Lá»‡nh &lt;code>apt upgrade -y&lt;/code> tá»± Ä‘á»™ng cÃ i Ä‘áº·t cÃ¡c báº£n cáº­p nháº­t mÃ  khÃ´ng cáº§n xÃ¡c nháº­n&lt;/li>
&lt;li>QuÃ¡ trÃ¬nh nÃ y cÃ³ thá»ƒ máº¥t vÃ i phÃºt tÃ¹y thuá»™c vÃ o sá»‘ lÆ°á»£ng gÃ³i cáº§n cáº­p nháº­t&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="2-cÃ i-Ä‘áº·t-docker">2. CÃ i Ä‘áº·t Docker
&lt;/h2>&lt;h3 id="21-cÃ i-Ä‘áº·t-cÃ¡c-gÃ³i-phá»¥-thuá»™c">2.1. CÃ i Ä‘áº·t cÃ¡c gÃ³i phá»¥ thuá»™c
&lt;/h3>&lt;p>CÃ¡c gÃ³i nÃ y cáº§n thiáº¿t Ä‘á»ƒ Docker cÃ³ thá»ƒ táº£i vÃ  xÃ¡c thá»±c cÃ¡c gÃ³i tá»« repository chÃ­nh thá»©c:&lt;/p>
&lt;ul>
&lt;li>&lt;code>apt-transport-https&lt;/code>: Cho phÃ©p APT sá»­ dá»¥ng giao thá»©c HTTPS&lt;/li>
&lt;li>&lt;code>ca-certificates&lt;/code>: Cung cáº¥p chá»©ng chá»‰ SSL/TLS Ä‘á»ƒ xÃ¡c thá»±c káº¿t ná»‘i báº£o máº­t&lt;/li>
&lt;li>&lt;code>curl&lt;/code>: CÃ´ng cá»¥ Ä‘á»ƒ táº£i xuá»‘ng cÃ¡c file tá»« internet&lt;/li>
&lt;li>&lt;code>software-properties-common&lt;/code>: Cung cáº¥p cÃ¡c tiá»‡n Ã­ch Ä‘á»ƒ quáº£n lÃ½ repository&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo apt install -y apt-transport-https ca-certificates curl software-properties-common
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="22-thÃªm-repository-docker-chÃ­nh-thá»©c">2.2. ThÃªm repository Docker chÃ­nh thá»©c
&lt;/h3>&lt;p>Äá»ƒ cÃ i Ä‘áº·t Docker tá»« nguá»“n chÃ­nh thá»©c, chÃºng ta cáº§n thÃªm GPG key vÃ  repository cá»§a Docker vÃ o há»‡ thá»‘ng. Äiá»u nÃ y Ä‘áº£m báº£o báº¡n nháº­n Ä‘Æ°á»£c cÃ¡c báº£n cáº­p nháº­t chÃ­nh thá»©c vÃ  báº£o máº­t tá»« Docker.&lt;/p>
&lt;p>&lt;strong>BÆ°á»›c 1: ThÃªm GPG key cá»§a Docker&lt;/strong>&lt;/p>
&lt;p>GPG key Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ xÃ¡c thá»±c tÃ­nh toÃ n váº¹n cá»§a cÃ¡c gÃ³i Docker:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">curl -fsSL https://download.docker.com/linux/ubuntu/gpg &lt;span class="p">|&lt;/span> sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>BÆ°á»›c 2: ThÃªm Docker repository&lt;/strong>&lt;/p>
&lt;p>ThÃªm repository Docker vÃ o danh sÃ¡ch nguá»“n cá»§a APT. Lá»‡nh nÃ y tá»± Ä‘á»™ng phÃ¡t hiá»‡n phiÃªn báº£n Ubuntu cá»§a báº¡n (&lt;code>$(lsb_release -cs)&lt;/code>) vÃ  thÃªm repository phÃ¹ há»£p:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu &lt;/span>&lt;span class="k">$(&lt;/span>lsb_release -cs&lt;span class="k">)&lt;/span>&lt;span class="s2"> stable&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> sudo tee /etc/apt/sources.list.d/docker.list &amp;gt; /dev/null
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>ğŸ’¡ Giáº£i thÃ­ch:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;code>arch=amd64&lt;/code>: Chá»‰ Ä‘á»‹nh kiáº¿n trÃºc 64-bit&lt;/li>
&lt;li>&lt;code>signed-by&lt;/code>: Chá»‰ Ä‘á»‹nh GPG key Ä‘á»ƒ xÃ¡c thá»±c&lt;/li>
&lt;li>&lt;code>$(lsb_release -cs)&lt;/code>: Tá»± Ä‘á»™ng láº¥y tÃªn code name cá»§a Ubuntu (vÃ­ dá»¥: jammy cho Ubuntu 22.04)&lt;/li>
&lt;li>&lt;code>stable&lt;/code>: Sá»­ dá»¥ng channel á»•n Ä‘á»‹nh (cÃ³ thá»ƒ dÃ¹ng &lt;code>test&lt;/code> hoáº·c &lt;code>nightly&lt;/code> cho cÃ¡c phiÃªn báº£n thá»­ nghiá»‡m)&lt;/li>
&lt;/ul>
&lt;h3 id="23-cÃ i-Ä‘áº·t-docker-engine">2.3. CÃ i Ä‘áº·t Docker Engine
&lt;/h3>&lt;p>Sau khi Ä‘Ã£ thÃªm repository, cáº­p nháº­t danh sÃ¡ch gÃ³i vÃ  cÃ i Ä‘áº·t Docker Engine:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo apt update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install -y docker-ce docker-ce-cli containerd.io
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>ğŸ“¦ CÃ¡c gÃ³i Ä‘Æ°á»£c cÃ i Ä‘áº·t:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;code>docker-ce&lt;/code>: Docker Community Edition - phiÃªn báº£n mÃ£ nguá»“n má»Ÿ cá»§a Docker&lt;/li>
&lt;li>&lt;code>docker-ce-cli&lt;/code>: Docker Command Line Interface - cÃ´ng cá»¥ dÃ²ng lá»‡nh Ä‘á»ƒ tÆ°Æ¡ng tÃ¡c vá»›i Docker&lt;/li>
&lt;li>&lt;code>containerd.io&lt;/code>: Container runtime - cÃ´ng cá»¥ quáº£n lÃ½ vÃ²ng Ä‘á»i container á»Ÿ má»©c tháº¥p&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>â±ï¸ Thá»i gian cÃ i Ä‘áº·t:&lt;/strong> QuÃ¡ trÃ¬nh nÃ y thÆ°á»ng máº¥t 2-5 phÃºt tÃ¹y thuá»™c vÃ o tá»‘c Ä‘á»™ internet cá»§a báº¡n.&lt;/p>
&lt;hr>
&lt;h2 id="3-kiá»ƒm-tra-docker">3. Kiá»ƒm tra Docker
&lt;/h2>&lt;p>Sau khi cÃ i Ä‘áº·t, hÃ£y kiá»ƒm tra xem Docker Ä‘Ã£ Ä‘Æ°á»£c khá»Ÿi Ä‘á»™ng vÃ  hoáº¡t Ä‘á»™ng chÆ°a:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo systemctl status docker
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>Káº¿t quáº£ mong Ä‘á»£i:&lt;/strong> Báº¡n sáº½ tháº¥y tráº¡ng thÃ¡i &lt;code>active (running)&lt;/code> náº¿u Docker Ä‘Ã£ khá»Ÿi Ä‘á»™ng thÃ nh cÃ´ng.&lt;/p>
&lt;p>Náº¿u Docker chÆ°a cháº¡y, báº¡n cÃ³ thá»ƒ khá»Ÿi Ä‘á»™ng vÃ  kÃ­ch hoáº¡t Docker Ä‘á»ƒ tá»± Ä‘á»™ng khá»Ÿi Ä‘á»™ng khi há»‡ thá»‘ng boot:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo systemctl start docker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl &lt;span class="nb">enable&lt;/span> docker
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>ğŸ’¡ Giáº£i thÃ­ch cÃ¡c lá»‡nh:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;code>systemctl start docker&lt;/code>: Khá»Ÿi Ä‘á»™ng dá»‹ch vá»¥ Docker ngay láº­p tá»©c&lt;/li>
&lt;li>&lt;code>systemctl enable docker&lt;/code>: Cáº¥u hÃ¬nh Docker tá»± Ä‘á»™ng khá»Ÿi Ä‘á»™ng khi há»‡ thá»‘ng khá»Ÿi Ä‘á»™ng láº¡i&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="4-cháº¡y-thá»­-docker">4. Cháº¡y thá»­ Docker
&lt;/h2>&lt;p>Äá»ƒ xÃ¡c nháº­n Docker Ä‘Ã£ hoáº¡t Ä‘á»™ng Ä‘Ãºng, cháº¡y container máº«u &lt;code>hello-world&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo docker run hello-world
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>Káº¿t quáº£ mong Ä‘á»£i:&lt;/strong> Náº¿u tháº¥y thÃ´ng bÃ¡o &amp;ldquo;Hello from Docker!&amp;rdquo; cÃ¹ng vá»›i cÃ¡c thÃ´ng tin vá» Docker, nghÄ©a lÃ  báº¡n Ä‘Ã£ cÃ i Ä‘áº·t thÃ nh cÃ´ng! ğŸ‰&lt;/p>
&lt;p>&lt;strong>ğŸ” Container &lt;code>hello-world&lt;/code> lÃ m gÃ¬?&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Container nÃ y táº£i xuá»‘ng image &lt;code>hello-world&lt;/code> tá»« Docker Hub (náº¿u chÆ°a cÃ³)&lt;/li>
&lt;li>Cháº¡y container vÃ  hiá»ƒn thá»‹ thÃ´ng bÃ¡o chÃ o má»«ng&lt;/li>
&lt;li>Tá»± Ä‘á»™ng dá»«ng sau khi hoÃ n thÃ nh&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="5-cáº¥u-hÃ¬nh-quyá»n-cho-user">5. Cáº¥u hÃ¬nh quyá»n cho user
&lt;/h2>&lt;p>Máº·c Ä‘á»‹nh, Docker yÃªu cáº§u quyá»n root Ä‘á»ƒ cháº¡y cÃ¡c lá»‡nh. Äá»ƒ cháº¡y Docker khÃ´ng cáº§n &lt;code>sudo&lt;/code>, báº¡n cáº§n thÃªm user hiá»‡n táº¡i vÃ o nhÃ³m &lt;code>docker&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo usermod -aG docker &lt;span class="nv">$USER&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">newgrp docker
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>ğŸ’¡ Giáº£i thÃ­ch:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;code>usermod -aG docker $USER&lt;/code>: ThÃªm user hiá»‡n táº¡i vÃ o nhÃ³m &lt;code>docker&lt;/code> (nhÃ³m nÃ y cÃ³ quyá»n truy cáº­p Docker daemon)&lt;/li>
&lt;li>&lt;code>newgrp docker&lt;/code>: Ãp dá»¥ng thay Ä‘á»•i nhÃ³m ngay láº­p tá»©c mÃ  khÃ´ng cáº§n Ä‘Äƒng xuáº¥t&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>âš ï¸ LÆ°u Ã½ quan trá»ng:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Sau khi thá»±c hiá»‡n lá»‡nh nÃ y, báº¡n cÃ³ thá»ƒ cáº§n Ä‘Äƒng xuáº¥t vÃ  Ä‘Äƒng nháº­p láº¡i Ä‘á»ƒ thay Ä‘á»•i cÃ³ hiá»‡u lá»±c&lt;/li>
&lt;li>Hoáº·c báº¡n cÃ³ thá»ƒ má»Ÿ terminal má»›i Ä‘á»ƒ Ã¡p dá»¥ng thay Ä‘á»•i&lt;/li>
&lt;li>Viá»‡c thÃªm user vÃ o nhÃ³m &lt;code>docker&lt;/code> cho phÃ©p user Ä‘Ã³ cÃ³ quyá»n tÆ°Æ¡ng Ä‘Æ°Æ¡ng root trÃªn Docker daemon, vÃ¬ váº­y chá»‰ thÃªm nhá»¯ng user Ä‘Ã¡ng tin cáº­y&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Kiá»ƒm tra quyá»n má»›i:&lt;/strong>&lt;/p>
&lt;p>Sau khi cáº¥u hÃ¬nh, thá»­ cháº¡y Docker khÃ´ng cáº§n &lt;code>sudo&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">docker run hello-world
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Náº¿u lá»‡nh cháº¡y thÃ nh cÃ´ng mÃ  khÃ´ng cáº§n &lt;code>sudo&lt;/code>, báº¡n Ä‘Ã£ cáº¥u hÃ¬nh Ä‘Ãºng! âœ…&lt;/p>
&lt;hr>
&lt;h2 id="6-gá»¡-cÃ i-Ä‘áº·t-docker-náº¿u-cáº§n">6. Gá»¡ cÃ i Ä‘áº·t Docker (náº¿u cáº§n)
&lt;/h2>&lt;p>Náº¿u báº¡n muá»‘n gá»¡ cÃ i Ä‘áº·t Docker hoÃ n toÃ n khá»i há»‡ thá»‘ng, thá»±c hiá»‡n cÃ¡c bÆ°á»›c sau:&lt;/p>
&lt;p>&lt;strong>BÆ°á»›c 1: Gá»¡ cÃ i Ä‘áº·t cÃ¡c gÃ³i Docker&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo apt remove -y docker-ce docker-ce-cli containerd.io
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>BÆ°á»›c 2: XÃ³a dá»¯ liá»‡u Docker&lt;/strong>&lt;/p>
&lt;p>Dá»¯ liá»‡u Docker (images, containers, volumes, networks) Ä‘Æ°á»£c lÆ°u trong &lt;code>/var/lib/docker&lt;/code>. Äá»ƒ xÃ³a hoÃ n toÃ n:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo rm -rf /var/lib/docker
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>âš ï¸ Cáº£nh bÃ¡o:&lt;/strong> Lá»‡nh nÃ y sáº½ xÃ³a &lt;strong>Táº¤T Cáº¢&lt;/strong> dá»¯ liá»‡u Docker bao gá»“m:&lt;/p>
&lt;ul>
&lt;li>Táº¥t cáº£ images Ä‘Ã£ táº£i vá»&lt;/li>
&lt;li>Táº¥t cáº£ containers (Ä‘ang cháº¡y vÃ  Ä‘Ã£ dá»«ng)&lt;/li>
&lt;li>Táº¥t cáº£ volumes vÃ  networks&lt;/li>
&lt;li>Táº¥t cáº£ dá»¯ liá»‡u trong containers&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>BÆ°á»›c 3: XÃ³a cáº¥u hÃ¬nh Docker (tÃ¹y chá»n)&lt;/strong>&lt;/p>
&lt;p>Náº¿u muá»‘n xÃ³a hoÃ n toÃ n má»i dáº¥u váº¿t cá»§a Docker:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo rm -rf /var/lib/containerd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo rm -rf /etc/docker
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="-cÃ¡c-lá»‡nh-docker-cÆ¡-báº£n">ğŸ“š CÃ¡c lá»‡nh Docker cÆ¡ báº£n
&lt;/h2>&lt;p>Sau khi cÃ i Ä‘áº·t Docker, Ä‘Ã¢y lÃ  má»™t sá»‘ lá»‡nh cÆ¡ báº£n báº¡n nÃªn biáº¿t:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Lá»‡nh&lt;/th>
&lt;th>MÃ´ táº£&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>docker --version&lt;/code>&lt;/td>
&lt;td>Kiá»ƒm tra phiÃªn báº£n Docker&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>docker ps&lt;/code>&lt;/td>
&lt;td>Liá»‡t kÃª cÃ¡c container Ä‘ang cháº¡y&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>docker ps -a&lt;/code>&lt;/td>
&lt;td>Liá»‡t kÃª táº¥t cáº£ containers (bao gá»“m Ä‘Ã£ dá»«ng)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>docker images&lt;/code>&lt;/td>
&lt;td>Liá»‡t kÃª táº¥t cáº£ images&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>docker pull &amp;lt;image&amp;gt;&lt;/code>&lt;/td>
&lt;td>Táº£i image tá»« Docker Hub&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>docker run &amp;lt;image&amp;gt;&lt;/code>&lt;/td>
&lt;td>Cháº¡y container tá»« image&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>docker stop &amp;lt;container&amp;gt;&lt;/code>&lt;/td>
&lt;td>Dá»«ng container Ä‘ang cháº¡y&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>docker rm &amp;lt;container&amp;gt;&lt;/code>&lt;/td>
&lt;td>XÃ³a container&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>docker rmi &amp;lt;image&amp;gt;&lt;/code>&lt;/td>
&lt;td>XÃ³a image&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;hr>
&lt;h2 id="-troubleshooting">ğŸ”§ Troubleshooting
&lt;/h2>&lt;h3 id="váº¥n-Ä‘á»-docker-daemon-khÃ´ng-khá»Ÿi-Ä‘á»™ng">Váº¥n Ä‘á»: Docker daemon khÃ´ng khá»Ÿi Ä‘á»™ng
&lt;/h3>&lt;p>&lt;strong>NguyÃªn nhÃ¢n:&lt;/strong> CÃ³ thá»ƒ do xung Ä‘á»™t vá»›i cÃ¡c dá»‹ch vá»¥ khÃ¡c hoáº·c cáº¥u hÃ¬nh sai.&lt;/p>
&lt;p>&lt;strong>Giáº£i phÃ¡p:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Kiá»ƒm tra log cá»§a Docker&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo journalctl -u docker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Khá»Ÿi Ä‘á»™ng láº¡i Docker&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl restart docker
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="váº¥n-Ä‘á»-permission-denied-khi-cháº¡y-docker">Váº¥n Ä‘á»: Permission denied khi cháº¡y Docker
&lt;/h3>&lt;p>&lt;strong>NguyÃªn nhÃ¢n:&lt;/strong> User chÆ°a Ä‘Æ°á»£c thÃªm vÃ o nhÃ³m &lt;code>docker&lt;/code>.&lt;/p>
&lt;p>&lt;strong>Giáº£i phÃ¡p:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ThÃªm user vÃ o nhÃ³m docker&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo usermod -aG docker &lt;span class="nv">$USER&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ÄÄƒng xuáº¥t vÃ  Ä‘Äƒng nháº­p láº¡i, hoáº·c cháº¡y:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">newgrp docker
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="váº¥n-Ä‘á»-khÃ´ng-thá»ƒ-káº¿t-ná»‘i-Ä‘áº¿n-docker-daemon">Váº¥n Ä‘á»: KhÃ´ng thá»ƒ káº¿t ná»‘i Ä‘áº¿n Docker daemon
&lt;/h3>&lt;p>&lt;strong>NguyÃªn nhÃ¢n:&lt;/strong> Docker daemon chÆ°a Ä‘Æ°á»£c khá»Ÿi Ä‘á»™ng.&lt;/p>
&lt;p>&lt;strong>Giáº£i phÃ¡p:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Kiá»ƒm tra tráº¡ng thÃ¡i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl status docker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Khá»Ÿi Ä‘á»™ng Docker&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl start docker
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="-lá»i-káº¿t">ğŸ¯ Lá»i káº¿t
&lt;/h2>&lt;p>Váº­y lÃ  chÃºng ta Ä‘Ã£ hoÃ n táº¥t cÃ i Ä‘áº·t Docker trÃªn Ubuntu! ğŸ‰ Giá» Ä‘Ã¢y, báº¡n cÃ³ thá»ƒ báº¯t Ä‘áº§u:&lt;/p>
&lt;ul>
&lt;li>ğŸ³ &lt;strong>Táº¡o vÃ  cháº¡y containers&lt;/strong> cho cÃ¡c á»©ng dá»¥ng cá»§a mÃ¬nh&lt;/li>
&lt;li>ğŸ“¦ &lt;strong>Sá»­ dá»¥ng Docker images&lt;/strong> cÃ³ sáºµn tá»« Docker Hub&lt;/li>
&lt;li>ğŸš€ &lt;strong>Triá»ƒn khai á»©ng dá»¥ng&lt;/strong> má»™t cÃ¡ch nháº¥t quÃ¡n vÃ  dá»… dÃ ng&lt;/li>
&lt;li>ğŸ”„ &lt;strong>Quáº£n lÃ½ mÃ´i trÆ°á»ng development&lt;/strong> vÃ  production hiá»‡u quáº£ hÆ¡n&lt;/li>
&lt;/ul>
&lt;p>Docker lÃ  má»™t cÃ´ng cá»¥ máº¡nh máº½ trong tháº¿ giá»›i DevOps. HÃ£y tiáº¿p tá»¥c khÃ¡m phÃ¡ cÃ¡c tÃ­nh nÄƒng cá»§a Docker nhÆ° Docker Compose, Docker Swarm, vÃ  tÃ­ch há»£p vá»›i cÃ¡c cÃ´ng cá»¥ CI/CD Ä‘á»ƒ tá»‘i Æ°u hÃ³a quy trÃ¬nh phÃ¡t triá»ƒn cá»§a báº¡n!&lt;/p>
&lt;p>&lt;strong>ğŸ“– TÃ i liá»‡u tham kháº£o:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://docs.docker.com/" target="_blank" rel="noopener"
>TÃ i liá»‡u chÃ­nh thá»©c cá»§a Docker&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://hub.docker.com/" target="_blank" rel="noopener"
>Docker Hub&lt;/a> - Kho lÆ°u trá»¯ images lá»›n nháº¥t&lt;/li>
&lt;li>&lt;a class="link" href="https://docs.docker.com/develop/dev-best-practices/" target="_blank" rel="noopener"
>Best practices cho Docker&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>ChÃºc báº¡n thÃ nh cÃ´ng vá»›i Docker! ğŸš€ğŸ˜Š&lt;/p></description></item><item><title>Tá»‘i Æ°u Docker cho Java</title><link>https://tech.nguuyen.io.vn/posts/docker-optimization/docker-opt-java/</link><pubDate>Sat, 29 Nov 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/docker-optimization/docker-opt-java/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/docker-optimization/docker-optimization-java.webp" alt="Featured image of post Tá»‘i Æ°u Docker cho Java" />&lt;h2 id="dockerfile-contest-2025--java-tá»‘i-Æ°u-extreme">Dockerfile Contest 2025 â€“ Java tá»‘i Æ°u extreme
&lt;/h2>&lt;p>Dockerfile Contest 2025 thÃºc Ä‘áº©y cá»™ng Ä‘á»“ng DevOps Viá»‡t Nam Ä‘Ã¡nh giÃ¡ láº¡i cÃ¡ch viáº¿t Dockerfile Ä‘á»ƒ Ä‘áº¡t &lt;strong>báº£o máº­t, tá»‘i Æ°u, tÆ°á»ng minh&lt;/strong>. BÃ i viáº¿t nÃ y tá»•ng há»£p riÃªng cho háº¡ng má»¥c &lt;strong>Java Spring Boot&lt;/strong>, nÆ¡i cÃ¡c tÃ¡c giáº£ táº­p trung tá»‘i Æ°u JRE, giáº£m kÃ­ch thÆ°á»›c image vÃ  chuáº©n hÃ³a quy trÃ¬nh build.&lt;/p>
&lt;hr>
&lt;h2 id="i-háº¡ng-má»¥c-java-spring-boot-service">I. Háº¡ng má»¥c JAVA (Spring Boot Service)
&lt;/h2>&lt;p>Háº¡ng má»¥c Java táº­p trung vÃ o cÃ¡c Ã½ tÆ°á»Ÿng:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Tá»‘i Æ°u JRE&lt;/strong>: dÃ¹ng &lt;code>jlink&lt;/code> vÃ  &lt;code>jdeps&lt;/code> Ä‘á»ƒ táº¡o custom JRE chá»‰ chá»©a module cáº§n thiáº¿t.&lt;/li>
&lt;li>&lt;strong>Tá»‘i Æ°u security &amp;amp; dependency&lt;/strong>: tá»± Ä‘á»™ng cáº­p nháº­t dependency an toÃ n, giáº£m CVE.&lt;/li>
&lt;li>&lt;strong>Multi-stage build&lt;/strong>: tÃ¡ch rÃµ stage build vÃ  runtime, dÃ¹ng distroless hoáº·c base image tá»‘i Æ°u.&lt;/li>
&lt;li>&lt;strong>Healthcheck rÃµ rÃ ng&lt;/strong>: dÃ¹ng &lt;code>wget&lt;/code> hoáº·c Java native healthcheck Ä‘á»ƒ giÃ¡m sÃ¡t container.&lt;/li>
&lt;/ul>
&lt;h3 id="1-dockerfile-top-1-java--spring-boot-template--distroless">1. Dockerfile TOP 1 (Java) â€“ Spring Boot Template + Distroless
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Ká»¹ thuáº­t&lt;/th>
&lt;th>Giáº£i thÃ­ch theo tÃ¡c giáº£&lt;/th>
&lt;th>Nguá»“n tham kháº£o&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>Custom JRE báº±ng jlink&lt;/strong>&lt;/td>
&lt;td>DÃ¹ng &lt;code>jdeps&lt;/code> phÃ¢n tÃ­ch fat JAR Ä‘á»ƒ láº¥y danh sÃ¡ch module, sau Ä‘Ã³ &lt;code>jlink&lt;/code> táº¡o JRE chá»‰ chá»©a module cáº§n, giáº£m Ä‘Ã¡ng ká»ƒ kÃ­ch thÆ°á»›c runtime.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Multi-stage build rÃµ rÃ ng&lt;/strong>&lt;/td>
&lt;td>Stage &lt;code>build&lt;/code> dÃ¹ng &lt;code>eclipse-temurin:21-jdk&lt;/code> Ä‘á»ƒ build Gradle; stage runtime dÃ¹ng &lt;code>gcr.io/distroless/base-debian12&lt;/code> chá»‰ cháº¡y JRE.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>PhÃ¢n tÃ¡ch Healthcheck Stage&lt;/strong>&lt;/td>
&lt;td>Táº¡o stage &lt;code>healthcheck&lt;/code> dÃ¹ng BusyBox, copy &lt;code>wget&lt;/code> vÃ o runtime Ä‘á»ƒ healthcheck mÃ  khÃ´ng pháº£i cÃ i thÃªm full curl/wget tá»« package manager.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Distroless Runtime&lt;/strong>&lt;/td>
&lt;td>DÃ¹ng distroless base Ä‘á»ƒ giáº£m attack surface (khÃ´ng shell, khÃ´ng package manager), image gá»n vÃ  an toÃ n hÆ¡n.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Pin nguá»“n &amp;amp; license&lt;/strong>&lt;/td>
&lt;td>ThÃªm LABEL &lt;code>org.opencontainers.image.source&lt;/code>, &lt;code>version&lt;/code>, &lt;code>licenses&lt;/code> Ä‘á»ƒ dá»… truy váº¿t source code vÃ  tuÃ¢n thá»§ license.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>Dockerfile TOP 1 (JAVA)&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Build stage&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">eclipse&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">temurin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">21&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">jdk&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">build&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy gradle wrapper and properties first for better caching&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">gradlew&lt;/span> &lt;span class="n">gradlew&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bat&lt;/span> &lt;span class="n">build&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gradle&lt;/span> &lt;span class="o">./&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">gradle&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="n">gradle&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Download Gradle distribution (cached)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">mount&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">gradle&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">gradlew&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy source code&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Build the application&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">mount&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">gradle&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">gradlew&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">daemon&lt;/span> &lt;span class="n">clean&lt;/span> &lt;span class="n">bootJar&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="n">Dspring&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">framework&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">version&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">6.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">11&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="n">Dtomcat&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">version&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">10.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">47&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Extract the application dependencies&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">jar&lt;/span> &lt;span class="n">xf&lt;/span> &lt;span class="n">build&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">spring&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">boot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">template&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">jar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Analyze the dependencies contained into the fat jar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">jdeps&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">ignore&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">missing&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">deps&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">q&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">recursive&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">multi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">release&lt;/span> &lt;span class="mi">21&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="nb">print&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">module&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">deps&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="k">class&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">path&lt;/span> &lt;span class="s1">&amp;#39;BOOT-INF/lib/*&amp;#39;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">build&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">spring&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">boot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">template&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">jar&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">deps&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">info&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Create the custom JRE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">jlink&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">verbose&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">modules&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">cat&lt;/span> &lt;span class="n">deps&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">info&lt;/span>&lt;span class="p">)&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">compress&lt;/span> &lt;span class="n">zip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">header&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">files&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">man&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pages&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">output&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">custom_jre&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Healthcheck stage&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">busybox&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1.36&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">musl&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">healthcheck&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Runtime stage&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">gcr&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">distroless&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">base&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">debian12&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ENV&lt;/span> &lt;span class="n">JAVA_HOME&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">openjdk&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ENV&lt;/span> &lt;span class="n">PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;$JAVA_HOME/bin:$PATH&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">build&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">custom_jre&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">JAVA_HOME&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy wget for healthcheck&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">healthcheck&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">wget&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">wget&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy application insights config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">applicationinsights&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span> &lt;span class="o">./&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy the built JAR&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">build&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">spring&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">boot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">template&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">jar&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">jar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Add labels&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">LABEL&lt;/span> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">source&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;https://github.com/hmcts/spring-boot-template&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">version&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;0.0.1&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">licenses&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;MIT&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">EXPOSE&lt;/span> &lt;span class="mi">8080&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">HEALTHCHECK&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">interval&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">timeout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">start&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">period&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">retries&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">CMD&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;/usr/bin/wget&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;--quiet&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;--output-document=/dev/null&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;http://localhost:8080/health&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">CMD&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;java&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;-jar&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;/app.jar&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h3 id="2-dockerfile-top-2-java--gradle-auto-dependency-update--custom-healthcheck">2. Dockerfile TOP 2 (Java) â€“ Gradle Auto Dependency Update + Custom Healthcheck
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Ká»¹ thuáº­t&lt;/th>
&lt;th>Giáº£i thÃ­ch theo tÃ¡c giáº£&lt;/th>
&lt;th>Nguá»“n tham kháº£o&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>Gradle Dependency Updates&lt;/strong>&lt;/td>
&lt;td>DÃ¹ng plugin &lt;code>dependencyUpdates&lt;/code> Ä‘á»ƒ sinh report, sau Ä‘Ã³ script shell parse report vÃ  tá»± Ä‘á»™ng update version plugin/ext/dependency trong &lt;code>build.gradle&lt;/code>.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Force Dependency Upgrade&lt;/strong>&lt;/td>
&lt;td>Biáº¿n &lt;code>DEPENDENCIES_FORCE_UPDATE&lt;/code> cho phÃ©p chá»‰ Ä‘á»‹nh &lt;code>group:name:version&lt;/code> Ä‘á»ƒ Ã©p cáº­p nháº­t nhá»¯ng dependency quan trá»ng, thÆ°á»ng lÃ  nhá»¯ng lib dÃ­nh CVE.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Native Java Healthcheck&lt;/strong>&lt;/td>
&lt;td>Viáº¿t class &lt;code>HealthCheck.java&lt;/code> dÃ¹ng &lt;code>HttpURLConnection&lt;/code> gá»i &lt;code>/health&lt;/code>, giÃºp healthcheck khÃ´ng phá»¥ thuá»™c curl/wget.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Distroless Base Java&lt;/strong>&lt;/td>
&lt;td>Runtime dÃ¹ng &lt;code>hmctspublic.azurecr.io/base/java:21-distroless&lt;/code>, image Java 21 tá»‘i Æ°u sáºµn cho production.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Cache Gradle&lt;/strong>&lt;/td>
&lt;td>Mount cache &lt;code>/root/.gradle&lt;/code> Ä‘á»ƒ tÄƒng tá»‘c &lt;code>./gradlew&lt;/code> trong stage build.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>Dockerfile TOP 2 (JAVA)&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Stage 1 â€” Build application using Gradle&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">gradle&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">8.14&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">jdk21&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">alpine&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">builder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Caching wrapper and build configuration before build &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">gradlew&lt;/span> &lt;span class="o">./&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">gradle&lt;/span> &lt;span class="n">gradle&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">build&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gradle&lt;/span> &lt;span class="n">build&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gradle&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Caching gradle/download&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">gradlew&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">daemon&lt;/span> &lt;span class="n">help&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy src code&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">main&lt;/span> &lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Check dependency need to update&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">gradlew&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">daemon&lt;/span> &lt;span class="n">dependencyUpdates&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">Drevision&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">release&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Auto update for auto vulnerability fixing &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">REPORT_FILE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;build/dependencyUpdates/report.txt&amp;#34;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;=== Parsing $REPORT_FILE ===&amp;#34;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PLUGINS_TO_UPGRADE&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">PLUGINS_TO_UPGRADE&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s2">&amp;#34;org.springframework.boot org.sonarqube com.github.ben-manes.versions uk.gov.hmcts.java&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">EXTS_TO_UPGRADE&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">EXTS_TO_UPGRADE&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s2">&amp;#34;org.apache.logging.log4j ch.qos.logback&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">DEPENDENCIES_FORCE_UPDATE&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">DEPENDENCIES_FORCE_UPDATE&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="s2">&amp;#34;org.apache.commons:commons-lang3:3.19.0&amp;#34;&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">escape_sed&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">printf&lt;/span> &lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span> &lt;span class="s2">&amp;#34;$1&amp;#34;&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">sed&lt;/span> &lt;span class="s1">&amp;#39;s/[.[\*^$/&amp;amp;]/&lt;/span>&lt;span class="se">\\&lt;/span>&lt;span class="s1">&amp;amp;/g&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># --- Plugin updates ---&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">plugin&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">PLUGINS_TO_UPGRADE&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">LINE&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">grep&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">A1&lt;/span> &lt;span class="s2">&amp;#34;$plugin&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;$REPORT_FILE&amp;#34;&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">grep&lt;/span> &lt;span class="s1">&amp;#39;\[&amp;#39;&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">head&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="bp">true&lt;/span>&lt;span class="p">);&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">OLD_VERSION&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;$LINE&amp;#34;&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">E&lt;/span> &lt;span class="s1">&amp;#39;s/.*\[(.*) -&amp;gt; .*\].*/&lt;/span>&lt;span class="se">\1&lt;/span>&lt;span class="s1">/&amp;#39;&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="bp">true&lt;/span>&lt;span class="p">);&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">NEW_VERSION&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;$LINE&amp;#34;&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">E&lt;/span> &lt;span class="s1">&amp;#39;s/.*\[.* -&amp;gt; (.*)\].*/&lt;/span>&lt;span class="se">\1&lt;/span>&lt;span class="s1">/&amp;#39;&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="bp">true&lt;/span>&lt;span class="p">);&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="s2">&amp;#34;$NEW_VERSION&amp;#34;&lt;/span> &lt;span class="p">]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="s2">&amp;#34;$NEW_VERSION&amp;#34;&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s2">&amp;#34;$OLD_VERSION&amp;#34;&lt;/span> &lt;span class="p">];&lt;/span> &lt;span class="n">then&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;===== Upgrading plugin $plugin: $OLD_VERSION â†’ $NEW_VERSION&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ESC_OLD&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">escape_sed&lt;/span> &lt;span class="s2">&amp;#34;$OLD_VERSION&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ESC_NEW&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">escape_sed&lt;/span> &lt;span class="s2">&amp;#34;$NEW_VERSION&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="s2">&amp;#34;s#id &amp;#39;$plugin&amp;#39; version &amp;#39;$ESC_OLD&amp;#39;#id &amp;#39;$plugin&amp;#39; version &amp;#39;$ESC_NEW&amp;#39;#g&amp;#34;&lt;/span> &lt;span class="n">build&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gradle&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fi&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">done&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># --- ext{} version updates ---&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">prefix&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">EXTS_TO_UPGRADE&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">LINE&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">grep&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">A1&lt;/span> &lt;span class="s2">&amp;#34;$prefix&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;$REPORT_FILE&amp;#34;&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">grep&lt;/span> &lt;span class="s1">&amp;#39;\[&amp;#39;&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">head&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="bp">true&lt;/span>&lt;span class="p">);&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">OLD_VERSION&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;$LINE&amp;#34;&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">E&lt;/span> &lt;span class="s1">&amp;#39;s/.*\[(.*) -&amp;gt; .*\].*/&lt;/span>&lt;span class="se">\1&lt;/span>&lt;span class="s1">/&amp;#39;&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="bp">true&lt;/span>&lt;span class="p">);&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">NEW_VERSION&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;$LINE&amp;#34;&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">E&lt;/span> &lt;span class="s1">&amp;#39;s/.*\[.* -&amp;gt; (.*)\].*/&lt;/span>&lt;span class="se">\1&lt;/span>&lt;span class="s1">/&amp;#39;&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="bp">true&lt;/span>&lt;span class="p">);&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">n&lt;/span> &lt;span class="s2">&amp;#34;$NEW_VERSION&amp;#34;&lt;/span> &lt;span class="p">]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="s2">&amp;#34;$NEW_VERSION&amp;#34;&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="s2">&amp;#34;$OLD_VERSION&amp;#34;&lt;/span> &lt;span class="p">];&lt;/span> &lt;span class="n">then&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;===== Upgrading prefix $prefix: $OLD_VERSION â†’ $NEW_VERSION&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ESC_OLD&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">escape_sed&lt;/span> &lt;span class="s2">&amp;#34;$OLD_VERSION&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ESC_NEW&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">escape_sed&lt;/span> &lt;span class="s2">&amp;#34;$NEW_VERSION&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="s2">&amp;#34;s/&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">$ESC_OLD&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">/&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">$ESC_NEW&lt;/span>&lt;span class="se">\&amp;#34;&lt;/span>&lt;span class="s2">/g&amp;#34;&lt;/span> &lt;span class="n">build&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gradle&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fi&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">done&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># --- Force dependency updates with explicit GAV ---&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">dep&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">DEPENDENCIES_FORCE_UPDATE&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">GROUP&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;$dep&amp;#34;&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">cut&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="s1">&amp;#39;:&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">f1&lt;/span>&lt;span class="p">);&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">NAME&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;$dep&amp;#34;&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">cut&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="s1">&amp;#39;:&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">f2&lt;/span>&lt;span class="p">);&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">NEW_VERSION&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;$dep&amp;#34;&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">cut&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="s1">&amp;#39;:&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">f3&lt;/span>&lt;span class="p">);&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">z&lt;/span> &lt;span class="s2">&amp;#34;$GROUP&amp;#34;&lt;/span> &lt;span class="p">]&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">z&lt;/span> &lt;span class="s2">&amp;#34;$NAME&amp;#34;&lt;/span> &lt;span class="p">]&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">z&lt;/span> &lt;span class="s2">&amp;#34;$NEW_VERSION&amp;#34;&lt;/span> &lt;span class="p">];&lt;/span> &lt;span class="n">then&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;====== Invalid DEPENDENCIES_FORCE_UPDATE format for $dep, expected group:name:version&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">continue&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fi&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;====== Forcing dependency update: $GROUP:$NAME â†’ $NEW_VERSION&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ESC_GROUP&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">escape_sed&lt;/span> &lt;span class="s2">&amp;#34;$GROUP&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ESC_NAME&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">escape_sed&lt;/span> &lt;span class="s2">&amp;#34;$NAME&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ESC_NEW&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">escape_sed&lt;/span> &lt;span class="s2">&amp;#34;$NEW_VERSION&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">grep&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">q&lt;/span> &lt;span class="s2">&amp;#34;$ESC_GROUP&amp;#34;&lt;/span> &lt;span class="n">build&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gradle&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">grep&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">q&lt;/span> &lt;span class="s2">&amp;#34;$ESC_NAME&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">then&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Replace existing dependency version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="s2">&amp;#34;s#group: &amp;#39;$ESC_GROUP&amp;#39;, name: &amp;#39;$ESC_NAME&amp;#39;, version: &amp;#39;[^&amp;#39;]*&amp;#39;#group: &amp;#39;$ESC_GROUP&amp;#39;, name: &amp;#39;$ESC_NAME&amp;#39;, version: &amp;#39;$ESC_NEW&amp;#39;#g&amp;#34;&lt;/span> &lt;span class="n">build&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gradle&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Insert new dependency inside dependencies { }&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;====== Adding new dependency $GROUP:$NAME:$NEW_VERSION&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sed&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span> &lt;span class="s2">&amp;#34;/dependencies\s*{/a\ implementation group: &amp;#39;$GROUP&amp;#39;, name: &amp;#39;$NAME&amp;#39;, version: &amp;#39;$NEW_VERSION&amp;#39;&amp;#34;&lt;/span> &lt;span class="n">build&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gradle&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fi&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">done&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;Version upgrade complete!&amp;#34;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cat&lt;/span> &lt;span class="n">build&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gradle&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Build the application JAR after dependency check&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">gradlew&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">daemon&lt;/span> &lt;span class="n">bootJar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Generate java healthcheck class&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">mkdir&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">health&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">cat&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">health&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">HealthCheck&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">java&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="s1">&amp;#39;EOF&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">import&lt;/span> &lt;span class="n">java&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">net&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">HttpURLConnection&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">import&lt;/span> &lt;span class="n">java&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">net&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">URL&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">import&lt;/span> &lt;span class="n">java&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">time&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Instant&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">public&lt;/span> &lt;span class="k">class&lt;/span> &lt;span class="n">HealthCheck&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">public&lt;/span> &lt;span class="k">static&lt;/span> &lt;span class="n">void&lt;/span> &lt;span class="n">main&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="ne">String&lt;/span>&lt;span class="p">[]&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ne">String&lt;/span> &lt;span class="n">healthUrl&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;http://localhost:8080/health&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">try&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">URL&lt;/span> &lt;span class="n">url&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">new&lt;/span> &lt;span class="n">URL&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">healthUrl&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">HttpURLConnection&lt;/span> &lt;span class="n">conn&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">HttpURLConnection&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">url&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">openConnection&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">conn&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">setConnectTimeout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2000&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">conn&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">setReadTimeout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2000&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">conn&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">setRequestMethod&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;GET&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ne">int&lt;/span> &lt;span class="n">code&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">conn&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getResponseCode&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">code&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">200&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">System&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Instant&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">now&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;Healthcheck OK (&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">code&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;)&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">System&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">System&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">err&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Instant&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">now&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;Healthcheck failed (&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">code&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;)&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">System&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="n">catch&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">Exception&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">System&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">err&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Instant&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">now&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34; Healthcheck error: &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">e&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">getMessage&lt;/span>&lt;span class="p">());&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">System&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Compile HealthCheck.java file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">javac&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">health&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">HealthCheck&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">java&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Stage 2 â€” Runtime image (auto-updated base)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">hmctspublic&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">azurecr&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">base&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">21&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">distroless&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy compiled app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/*.&lt;/span>&lt;span class="n">jar&lt;/span> &lt;span class="n">app&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">jar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy complied healthcheck class&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">health&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">HealthCheck&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="k">class&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">HealthCheck&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="k">class&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">EXPOSE&lt;/span> &lt;span class="mi">8080&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ENTRYPOINT&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;java&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;-jar&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;app.jar&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">HEALTHCHECK&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">interval&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">15&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">timeout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">start&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">period&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">retries&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">CMD&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;java&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;HealthCheck&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h3 id="3-dockerfile-top-java--dung-cao-alpine-jdkjre-tá»‘i-Æ°u">3. Dockerfile TOP (Java) â€“ Dung Cao (Alpine JDK/JRE tá»‘i Æ°u)
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Ká»¹ thuáº­t&lt;/th>
&lt;th>Giáº£i thÃ­ch theo tÃ¡c giáº£&lt;/th>
&lt;th>Nguá»“n tham kháº£o&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>TÃ¡ch riÃªng JDK/JRE báº±ng ARG&lt;/strong>&lt;/td>
&lt;td>DÃ¹ng &lt;code>ARG BUILD_JDK_IMAGE&lt;/code> vÃ  &lt;code>RUNTIME_IMAGE&lt;/code> Ä‘á»ƒ dá»… Ä‘á»•i base image (JDK cho build, JRE cho runtime), váº«n giá»¯ Dockerfile Ä‘Æ¡n giáº£n.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Gradle cache vá»›i BuildKit&lt;/strong>&lt;/td>
&lt;td>DÃ¹ng &lt;code>--mount=type=cache,target=/cache/.gradle&lt;/code> cho cÃ¡c lá»‡nh &lt;code>./gradlew&lt;/code> Ä‘á»ƒ tá»‘i Æ°u thá»i gian build láº·p láº¡i.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>KhÃ´ng cháº¡y test trong build image&lt;/strong>&lt;/td>
&lt;td>&lt;code>bootJar -x test&lt;/code> giÃºp build nhanh hÆ¡n cho mÃ´i trÆ°á»ng CI/CD vÃ  Docker contest (Æ°u tiÃªn ra artifact).&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Non-root user + chown&lt;/strong>&lt;/td>
&lt;td>Táº¡o user/group &lt;code>app&lt;/code>, &lt;code>--chown=app:app&lt;/code> khi copy JAR Ä‘áº£m báº£o runtime an toÃ n, tuÃ¢n CIS Docker Benchmark.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Healthcheck vá»›i curl&lt;/strong>&lt;/td>
&lt;td>CÃ i &lt;code>curl&lt;/code> (apk add &amp;ndash;no-cache) rá»“i dÃ¹ng &lt;code>curl -fsS&lt;/code> tá»›i &lt;code>/health&lt;/code> cho healthcheck rÃµ rÃ ng, dá»… debug.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>JVM tuning cho container&lt;/strong>&lt;/td>
&lt;td>&lt;code>JAVA_OPTS&lt;/code> báº­t &lt;code>UseContainerSupport&lt;/code>, &lt;code>MaxRAMPercentage=75&lt;/code>, &lt;code>G1GC&lt;/code>, &lt;code>ExitOnOutOfMemoryError&lt;/code>, heap dump pathâ€¦ giÃºp JVM hiá»ƒu giá»›i háº¡n container vÃ  fail-fast khi OOM.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>Dockerfile TOP (JAVA) â€“ Dung Cao&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Dockerfile.txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># === Alpine build optimized for Dockerfile Contest 2025 ===&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Focus: security, lightweight, clear, maintainable&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Build-time arguments&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">BUILD_JDK_IMAGE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">eclipse&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">temurin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">21&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">jdk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">alpine&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">3.22&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">RUNTIME_IMAGE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">eclipse&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">temurin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">21&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">jre&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">alpine&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">3.22&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ---------- Stage: builder ----------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">BUILD_JDK_IMAGE&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">builder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Set non-interactive environment &amp;amp; reproducible timezone&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ENV&lt;/span> &lt;span class="n">TZ&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">UTC&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">LANG&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">UTF&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">LC_ALL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">UTF&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">GRADLE_USER_HOME&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">gradle&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">workspace&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy Gradle wrapper and descriptors&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">gradlew&lt;/span> &lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">gradle&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="n">gradle&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">build&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gradle&lt;/span> &lt;span class="o">./&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">chmod&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">gradlew&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Resolve dependencies using BuildKit cache mount&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">mount&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">gradle&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">./&lt;/span>&lt;span class="n">gradlew&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">daemon&lt;/span> &lt;span class="n">dependencies&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy application source&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">mount&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">gradle&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">./&lt;/span>&lt;span class="n">gradlew&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">daemon&lt;/span> &lt;span class="n">clean&lt;/span> &lt;span class="n">bootJar&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="n">test&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="n">Dspring&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">framework&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">version&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">6.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">11&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="n">Dcommons&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lang3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">version&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">3.18&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="n">Dtomcat&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">version&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">10.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">47&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ---------- Stage: runtime ----------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">RUNTIME_IMAGE&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">runtime&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">VERSION&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">VCS_REF&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">BUILD_DATE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">LICENSE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;MIT License&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">SOURCE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;contest-submission&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># OCI Labels (metadata)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">LABEL&lt;/span> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">title&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;spring-boot-template&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">description&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Spring Boot Java application built for Dockerfile Contest 2025&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;${SOURCE}&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">source&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;${SOURCE}&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">version&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;${VERSION}&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">revision&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;${VCS_REF}&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">licenses&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;${LICENSE}&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">created&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;${BUILD_DATE}&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">authors&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Dung Cao&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Create non-root user&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">addgroup&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">S&lt;/span> &lt;span class="n">app&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">adduser&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">S&lt;/span> &lt;span class="n">app&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">G&lt;/span> &lt;span class="n">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy application jar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">applicationinsights&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span> &lt;span class="n">applicationinsights&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">chown&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">app&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">workspace&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/*.&lt;/span>&lt;span class="n">jar&lt;/span> &lt;span class="n">app&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">jar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Install curl for healthcheck&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">apk&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cache&lt;/span> &lt;span class="n">curl&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">rm&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">rf&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apk&lt;/span>&lt;span class="o">/*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Expose HTTP port&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">EXPOSE&lt;/span> &lt;span class="mi">8080&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Healthcheck&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">HEALTHCHECK&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">interval&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">timeout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">start&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">period&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">retries&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">CMD&lt;/span> &lt;span class="n">curl&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">fsS&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">127.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">8080&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">health&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="n">exit&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># JVM optimization&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ENV&lt;/span> &lt;span class="n">JAVA_OPTS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="s2"> -XX:+UseContainerSupport &lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="s2"> -XX:MaxRAMPercentage=75.0 &lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="s2"> -Djava.security.egd=file:/dev/./urandom &lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="s2"> -Dserver.shutdown=graceful &lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="s2"> -Dspring.lifecycle.timeout-per-shutdown-phase=10s &lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="s2"> -Dfile.encoding=UTF-8 &lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="s2"> -XX:+ExitOnOutOfMemoryError &lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="s2"> -XX:+UseG1GC &lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="s2"> -XX:+HeapDumpOnOutOfMemoryError &lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="s2"> -XX:HeapDumpPath=/tmp &lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="s2"> &amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Graceful termination signal&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">STOPSIGNAL&lt;/span> &lt;span class="n">SIGTERM&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Switch to non-root user&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">USER&lt;/span> &lt;span class="n">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># --- Entry point ---&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ENTRYPOINT&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;sh&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;-c&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;exec java ${JAVA_OPTS} -jar /app/app.jar&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h3 id="4-dockerfile-top-tham-kháº£o--java--hmcts-spring-boot-template-layered--jlink">4. Dockerfile TOP (tham kháº£o â€“ Java) â€“ HMCTS Spring Boot Template (Layered + jlink)
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Ká»¹ thuáº­t&lt;/th>
&lt;th>Giáº£i thÃ­ch theo tÃ¡c giáº£&lt;/th>
&lt;th>Nguá»“n tham kháº£o&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>Gradle cache + tÃ¡ch layer&lt;/strong>&lt;/td>
&lt;td>DÃ¹ng BuildKit cache &lt;code>id=gradle-cache&lt;/code> cho Gradle, sau Ä‘Ã³ dÃ¹ng &lt;code>jarmode=layertools&lt;/code> Ä‘á»ƒ extract cÃ¡c lá»›p &lt;code>dependencies&lt;/code>, &lt;code>spring-boot-loader&lt;/code>, &lt;code>snapshot-dependencies&lt;/code>, &lt;code>application&lt;/code> giÃºp cache Docker layer tá»‘i Ä‘a.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Custom JRE vá»›i jlink&lt;/strong>&lt;/td>
&lt;td>Cháº¡y &lt;code>jlink&lt;/code> vá»›i danh sÃ¡ch module Java chá»n tay Ä‘á»ƒ táº¡o JRE tá»‘i thiá»ƒu (&lt;code>/jre-minimal&lt;/code>), giáº£m hÆ¡n 100MB so vá»›i JDK full.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Alpine runtime tá»‘i thiá»ƒu&lt;/strong>&lt;/td>
&lt;td>Runtime base &lt;code>alpine:3.21&lt;/code> chá»‰ cÃ i &lt;code>ca-certificates&lt;/code>, &lt;code>tzdata&lt;/code>, &lt;code>tini&lt;/code>, &lt;code>curl&lt;/code>, sau Ä‘Ã³ cháº¡y vá»›i non-root &lt;code>appuser&lt;/code>.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>JAVA_TOOL_OPTIONS cho container&lt;/strong>&lt;/td>
&lt;td>Tá»‘i Æ°u JVM: &lt;code>UseContainerSupport&lt;/code>, &lt;code>MaxRAMPercentage&lt;/code>, &lt;code>UseG1GC&lt;/code>, &lt;code>UseStringDeduplication&lt;/code>, &lt;code>ExitOnOutOfMemoryError&lt;/code>,â€¦ Ä‘á»ƒ tá»‘i Æ°u memory &amp;amp; GC trong container.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>OCI labels ráº¥t Ä‘áº§y Ä‘á»§&lt;/strong>&lt;/td>
&lt;td>Ghi rÃµ &lt;code>vendor&lt;/code>, &lt;code>authors&lt;/code>, &lt;code>source&lt;/code>, &lt;code>version&lt;/code>, &lt;code>revision&lt;/code>, &lt;code>base.name&lt;/code>, &lt;code>base.digest&lt;/code>, &lt;code>com.hmcts.*&lt;/code>â€¦ giÃºp traceability cho tá»• chá»©c.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Healthcheck dÃ¹ng curl&lt;/strong>&lt;/td>
&lt;td>Healthcheck &lt;code>/health&lt;/code> qua &lt;code>curl -f&lt;/code>, retry cÃ³ cáº¥u hÃ¬nh há»£p lÃ½ cho Spring Boot khá»Ÿi Ä‘á»™ng.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>Dockerfile TOP (tham kháº£o â€“ JAVA) â€“ HMCTS Spring Boot Template&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># syntax=docker/dockerfile:1.7&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ============================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># STAGE 1: Application builder with optimized caching&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ============================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">eclipse&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">temurin&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">21&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">jdk&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">alpine&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">sha256&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">89517925&lt;/span>&lt;span class="n">fa675c6c4b770bee7c44d38a7763212741b0d6fca5a5103caab21a97&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">builder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Install build dependencies (minimal)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">apk&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cache&lt;/span> &lt;span class="n">binutils&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">rm&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">rf&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apk&lt;/span>&lt;span class="o">/*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">build&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy Gradle wrapper and dependency definition files first&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># This layer will be cached until these files change&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">gradle&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="n">gradle&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">gradlew&lt;/span> &lt;span class="n">build&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gradle&lt;/span> &lt;span class="o">./&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Download dependencies with BuildKit cache mount for faster subsequent builds&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">mount&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">gradle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">gradle&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">sharing&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">locked&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">chmod&lt;/span> &lt;span class="o">+&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="n">gradlew&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">./&lt;/span>&lt;span class="n">gradlew&lt;/span> &lt;span class="n">dependencies&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">daemon&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">parallel&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">console&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">plain&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy only production source code (exclude tests, docs, etc.)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">main&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">main&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Build optimized JAR with cache mount&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">mount&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">gradle&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">gradle&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">sharing&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">locked&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">./&lt;/span>&lt;span class="n">gradlew&lt;/span> &lt;span class="n">bootJar&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">daemon&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">parallel&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">console&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">plain&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">x&lt;/span> &lt;span class="n">test&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mkdir&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mv&lt;/span> &lt;span class="n">build&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">spring&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">boot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">template&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">jar&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">jar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Extract Spring Boot layers for optimal Docker layer caching&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">java&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">Djarmode&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">layertools&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">jar&lt;/span> &lt;span class="n">app&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">jar&lt;/span> &lt;span class="n">extract&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">destination&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">extracted&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Create minimal custom JRE with jlink (reduces size by &amp;gt;100MB)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Only include Java modules actually needed by Spring Boot&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">JAVA_HOME&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">jlink&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">modules&lt;/span> &lt;span class="n">java&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">base&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">compiler&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">desktop&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">instrument&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">management&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">management&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rmi&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">naming&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">net&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">http&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">prefs&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">rmi&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">scripting&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">security&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">jgss&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">security&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sasl&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">java&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sql&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">jdk&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">httpserver&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">jdk&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">jfr&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">jdk&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">unsupported&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">debug&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">man&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pages&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">header&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">files&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">compress&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">zip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">output&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">jre&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">minimal&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ============================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># STAGE 3: Minimal runtime image&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ============================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">alpine&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">3.21&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">sha256&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">5405e8&lt;/span>&lt;span class="n">f36ce1878720f71217d664aa3dea32e5e5df11acbf07fc78ef5661465b&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Install only critical runtime dependencies&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ca-certificates: for HTTPS connections&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># tini: proper init system for PID 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># tzdata: timezone support&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># curl: for healthcheck&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">apk&lt;/span> &lt;span class="n">upgrade&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cache&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">apk&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cache&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ca&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">certificates&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">tzdata&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">tini&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">curl&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">rm&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">rf&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apk&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">/*&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Create non-root user for security (CIS Docker Benchmark compliance)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">addgroup&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">g&lt;/span> &lt;span class="mi">1654&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">S&lt;/span> &lt;span class="n">appgroup&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">adduser&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">u&lt;/span> &lt;span class="mi">1654&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">S&lt;/span> &lt;span class="n">appuser&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">G&lt;/span> &lt;span class="n">appgroup&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy minimal custom JRE from builder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">chown&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1654&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1654&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">jre&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">minimal&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">java&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Set up application directory with proper ownership&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy Spring Boot layers in optimal order (least to most frequently changed)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># This maximizes Docker layer cache efficiency&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">chown&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1654&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1654&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">extracted&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dependencies&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="o">./&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">chown&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1654&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1654&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">extracted&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">spring&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">boot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">loader&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="o">./&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">chown&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1654&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1654&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">extracted&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">snapshot&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dependencies&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="o">./&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">chown&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1654&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1654&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">extracted&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">application&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="o">./&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Switch to non-root user (security best practice)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">USER&lt;/span> &lt;span class="mi">1654&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1654&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Set JAVA_HOME and PATH&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ENV&lt;/span> &lt;span class="n">JAVA_HOME&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">java&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/opt/java/bin:${PATH}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Optimal JVM flags for containerized Spring Boot applications&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># - UseContainerSupport: respect container memory limits&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># - MaxRAMPercentage: use max 75% of container memory for heap&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># - UseG1GC: best GC for containers with predictable pause times&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># - UseStringDeduplication: reduce memory footprint&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># - ExitOnOutOfMemoryError: fail fast on OOM&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># - TieredCompilation with level 1: faster startup, good for short-lived containers&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ENV&lt;/span> &lt;span class="n">JAVA_TOOL_OPTIONS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;-XX:+UseContainerSupport &lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="s2"> -XX:MaxRAMPercentage=75.0 &lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="s2"> -XX:InitialRAMPercentage=50.0 &lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="s2"> -XX:+UseG1GC &lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="s2"> -XX:MaxGCPauseMillis=100 &lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="s2"> -XX:+UseStringDeduplication &lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="s2"> -XX:+ParallelRefProcEnabled &lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="s2"> -XX:+DisableExplicitGC &lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="s2"> -XX:+ExitOnOutOfMemoryError &lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="s2"> -Djava.security.egd=file:/dev/./urandom &lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="s2"> -Djava.awt.headless=true&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Application server port&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">EXPOSE&lt;/span> &lt;span class="mi">8080&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Comprehensive OCI labels for traceability and compliance&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">LABEL&lt;/span> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">title&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Spring Boot Template&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">description&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;HMCTS Spring Boot Template - Optimized for Contest 2025&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">vendor&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;HMCTS Reform Programme&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">authors&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;HMCTS &amp;lt;hmcts@justice.gov.uk&amp;gt;&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">source&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;https://github.com/hmcts/spring-boot-template&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">version&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;0.0.1&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">revision&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;contest-2025&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">licenses&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;MIT&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">base&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;docker.io/library/alpine:3.21&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">base&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">digest&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;sha256:5405e8f36ce1878720f71217d664aa3dea32e5e5df11acbf07fc78ef5661465b&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">maintainer&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;HMCTS Reform Team&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">com&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">hmcts&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;spring-boot-template&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">com&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">hmcts&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">date&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2025-10-27&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Health check using Spring Boot Actuator /health endpoint&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Using curl for lightweight health checks&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">HEALTHCHECK&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">interval&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">timeout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">start&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">period&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">60&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">retries&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">CMD&lt;/span> &lt;span class="n">curl&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">localhost&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">8080&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">health&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="n">exit&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Use tini as init system for proper signal handling&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Ensures graceful shutdown and zombie process reaping&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ENTRYPOINT&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;/sbin/tini&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;--&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Run Spring Boot application&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Using exec form to ensure proper signal propagation&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">CMD&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;java&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;org.springframework.boot.loader.launch.JarLauncher&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="ghi-chÃº-triá»ƒn-khai">Ghi chÃº triá»ƒn khai
&lt;/h2>&lt;ul>
&lt;li>&lt;strong>Khi Ã¡p dá»¥ng cho dá»± Ã¡n Java cá»§a báº¡n&lt;/strong>, hÃ£y giá»¯ nguyÃªn cÃ¡c nguyÃªn táº¯c chÃ­nh mÃ  cÃ¡c Dockerfile trÃªn thá»ƒ hiá»‡n:
&lt;ul>
&lt;li>Multi-stage build rÃµ rÃ ng (builder + runtime).&lt;/li>
&lt;li>Tá»‘i Æ°u JRE (dÃ¹ng &lt;code>jdeps&lt;/code> + &lt;code>jlink&lt;/code>, base image Java distroless hoáº·c JRE-only image).&lt;/li>
&lt;li>Healthcheck rÃµ rÃ ng (native Java hoáº·c wget/curl).&lt;/li>
&lt;li>Tá»‘i Æ°u dependency (tá»± Ä‘á»™ng hoáº·c thá»§ cÃ´ng) Ä‘á»ƒ giáº£m CVE.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Khi copy template vá» dá»± Ã¡n riÃªng, báº¡n nÃªn:
&lt;ul>
&lt;li>Cáº­p nháº­t láº¡i &lt;code>LABEL org.opencontainers.image.source&lt;/code> cho Ä‘Ãºng repository cá»§a báº¡n.&lt;/li>
&lt;li>Äiá»u chá»‰nh endpoint healthcheck (&lt;code>/health&lt;/code>, &lt;code>/actuator/health&lt;/code>&amp;hellip;) cho trÃ¹ng vá»›i app thá»±c táº¿.&lt;/li>
&lt;li>Thá»­ build vÃ  scan image vá»›i cÃ¡c tool nhÆ° Trivy Ä‘á»ƒ kiá»ƒm tra security sau khi tá»‘i Æ°u.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Tá»‘i Æ°u Docker cho Python</title><link>https://tech.nguuyen.io.vn/posts/docker-optimization/docker-opt-python/</link><pubDate>Sun, 23 Nov 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/docker-optimization/docker-opt-python/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/docker-optimization/docker-optimization-python.webp" alt="Featured image of post Tá»‘i Æ°u Docker cho Python" />&lt;h2 id="dockerfile-contest-2025--python-tá»‘i-Æ°u-extreme">Dockerfile Contest 2025 â€“ Python tá»‘i Æ°u extreme
&lt;/h2>&lt;p>Dockerfile Contest 2025 thÃºc Ä‘áº©y cá»™ng Ä‘á»“ng DevOps Viá»‡t Nam Ä‘Ã¡nh giÃ¡ láº¡i cÃ¡ch viáº¿t Dockerfile Ä‘á»ƒ Ä‘áº¡t &lt;strong>báº£o máº­t, tá»‘i Æ°u, tÆ°á»ng minh&lt;/strong>. DÆ°á»›i Ä‘Ã¢y lÃ  pháº§n tá»•ng há»£p riÃªng cho háº¡ng má»¥c Python (á»©ng dá»¥ng FastAPI backend service).&lt;/p>
&lt;hr>
&lt;h2 id="i-háº¡ng-má»¥c-python-tá»‘i-Æ°u-cho-backend-service">I. Háº¡ng má»¥c PYTHON (Tá»‘i Æ°u cho Backend Service)
&lt;/h2>&lt;p>Háº¡ng má»¥c Python táº­p trung vÃ o viá»‡c tá»‘i Æ°u kÃ­ch thÆ°á»›c image, báº£o máº­t (patch CVE), vÃ  hiá»‡u nÄƒng runtime cho cÃ¡c á»©ng dá»¥ng FastAPI. CÃ¡c giáº£i phÃ¡p Ä‘a dáº¡ng tá»« distroless, Alpine tá»‘i giáº£n, Ä‘áº¿n wheel-based builds.&lt;/p>
&lt;h3 id="1-dockerfile-top-1-python--thanh-nguyen-the">1. Dockerfile TOP 1 (Python) â€“ Thanh Nguyen The
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Ká»¹ thuáº­t&lt;/th>
&lt;th>Giáº£i thÃ­ch theo tÃ¡c giáº£&lt;/th>
&lt;th>Nguá»“n tham kháº£o&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>UV Package Manager&lt;/strong>&lt;/td>
&lt;td>Sá»­ dá»¥ng &lt;code>uv&lt;/code> thay vÃ¬ pip Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ cÃ i Ä‘áº·t dependencies vÃ  quáº£n lÃ½ virtual environment hiá»‡u quáº£ hÆ¡n.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Distroless Base Image&lt;/strong>&lt;/td>
&lt;td>DÃ¹ng &lt;code>gcr.io/distroless/base-debian12:nonroot&lt;/code> Ä‘á»ƒ giáº£m attack surface, khÃ´ng cÃ³ shell, package manager, hoáº·c cÃ¡c cÃ´ng cá»¥ khÃ´ng cáº§n thiáº¿t.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Multi-arch Support&lt;/strong>&lt;/td>
&lt;td>Há»— trá»£ cáº£ amd64 vÃ  arm64 báº±ng cÃ¡ch copy shared libraries theo kiáº¿n trÃºc tÆ°Æ¡ng á»©ng.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Shared Libraries Copy&lt;/strong>&lt;/td>
&lt;td>Copy cÃ¡c thÆ° viá»‡n cáº§n thiáº¿t (libc, libm, libz, libgcc_s) tá»« builder stage Ä‘á»ƒ á»©ng dá»¥ng cháº¡y Ä‘Æ°á»£c trong distroless.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Security Patching&lt;/strong>&lt;/td>
&lt;td>NÃ¢ng cáº¥p starlette lÃªn 0.49.1 Ä‘á»ƒ fix CVE-2025-62727 vÃ  CVE-2025-54121 mÃ  khÃ´ng cáº§n sá»­a pyproject.toml.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>LD_LIBRARY_PATH&lt;/strong>&lt;/td>
&lt;td>Thiáº¿t láº­p biáº¿n mÃ´i trÆ°á»ng Ä‘á»ƒ há»‡ thá»‘ng tÃ¬m tháº¥y shared libraries táº¡i thÆ° má»¥c tÃ¹y chá»‰nh.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>Dockerfile TOP 1 (Python)&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;span class="lnt">76
&lt;/span>&lt;span class="lnt">77
&lt;/span>&lt;span class="lnt">78
&lt;/span>&lt;span class="lnt">79
&lt;/span>&lt;span class="lnt">80
&lt;/span>&lt;span class="lnt">81
&lt;/span>&lt;span class="lnt">82
&lt;/span>&lt;span class="lnt">83
&lt;/span>&lt;span class="lnt">84
&lt;/span>&lt;span class="lnt">85
&lt;/span>&lt;span class="lnt">86
&lt;/span>&lt;span class="lnt">87
&lt;/span>&lt;span class="lnt">88
&lt;/span>&lt;span class="lnt">89
&lt;/span>&lt;span class="lnt">90
&lt;/span>&lt;span class="lnt">91
&lt;/span>&lt;span class="lnt">92
&lt;/span>&lt;span class="lnt">93
&lt;/span>&lt;span class="lnt">94
&lt;/span>&lt;span class="lnt">95
&lt;/span>&lt;span class="lnt">96
&lt;/span>&lt;span class="lnt">97
&lt;/span>&lt;span class="lnt">98
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">ghcr&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">astral&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">sh&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">uv&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">python3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">bookworm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">slim&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">sha256&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">b8ac7bb76766ffe9f6cc20f56789755d539e8d0e605d8983131227c5c8b87a1&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">builder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ENV&lt;/span> &lt;span class="n">UV_LINK_MODE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">copy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">TARGETARCH&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy shared libraries Ä‘á»§ Ä‘á»ƒ cháº¡y á»©ng dá»¥ng trong mÃ´i trÆ°á»ng distroless&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Kiá»ƒm tra shared libraries cáº§n thiáº¿t vá»›i lá»‡nh:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ldd $(which python3) vÃ  cÃ¡c thÆ° viá»‡n khÃ¡c trong virtual environment sau khi cÃ i Ä‘áº·t cÃ¡c package cáº§n thiáº¿t (kiá»ƒm tra trÆ°á»›c khi build)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Má»—i kiáº¿n trÃºc sáº½ Ä‘áº·t thÆ° viá»‡n trong cÃ¡c thÆ° má»¥c khÃ¡c nhau, vÃ­ dá»¥: /lib/x86_64-linux-gnu/ cho amd64, /lib/aarch64-linux-gnu/ cho arm64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># do Ä‘Ã³ cáº§n xÃ¡c Ä‘á»‹nh kiáº¿n trÃºc vÃ  copy tá»« thÆ° má»¥c tÆ°Æ¡ng á»©ng. &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># TARGETARCH lÃ  built-in arg cá»§a docker buildx, tá»± Ä‘á»™ng nháº­n giÃ¡ trá»‹ (amd64 hoáº·c arm64) khi build multi-arch&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Shared libraries copy á»Ÿ lá»‡nh phÃ­a dÆ°á»›i lÃ  chÆ°a Ä‘á»§ Ä‘á»ƒ cháº¡y á»©ng dá»¥ng, tuy nhiÃªn gcr.io/distroless/base-debian12 (image sá»­ dá»¥ng lÃ m base image cho runtime táº¡i runtime state) Ä‘Ã£ cÃ³ sáºµn má»™t sá»‘ shared libraries nÃªn chá»‰ cáº§n copy nhá»¯ng thÆ° viá»‡n cÃ²n thiáº¿u.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># gcr.io/distroless/base-debian12:nonroot khÃ´ng cÃ³ shell, kiá»ƒm tra shared libraries báº±ng cÃ¡ch sá»­ dá»¥ng gcr.io/distroless/base-debian12:debug&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># gcr.io/distroless/base-debian12:debug tÆ°Æ¡ng tá»± gcr.io/distroless/base-debian12:nonroot nhÆ°ng cÃ³ thÃªm shell Ä‘á»ƒ phá»¥c vá»¥ debug.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="s2">&amp;#34;$TARGETARCH&amp;#34;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;amd64&amp;#34;&lt;/span> &lt;span class="p">];&lt;/span> &lt;span class="n">then&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">LIBARCH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;x86_64&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="s2">&amp;#34;$TARGETARCH&amp;#34;&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;arm64&amp;#34;&lt;/span> &lt;span class="p">];&lt;/span> &lt;span class="n">then&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">LIBARCH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;aarch64&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">LIBARCH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;unknown&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fi&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mkdir&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">multi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">arch&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cp&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">LIBARCH&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gnu&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">so&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">multi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">arch&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cp&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">LIBARCH&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gnu&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libm&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">so&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">6&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">multi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">arch&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cp&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">LIBARCH&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gnu&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libz&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">so&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">multi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">arch&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cp&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">LIBARCH&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">gnu&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libgcc_s&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">so&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">multi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">arch&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">build&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Sá»­ dá»¥ng cache Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ build&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># CÃ i Ä‘áº·t dependencies trong uv virtual environment&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Sá»­ dá»¥ng mount type=bind Ä‘á»ƒ bind cÃ¡c file uv.lock vÃ  pyproject.toml tá»« host vÃ o container mount thay vÃ¬ copy.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># --frozen Ä‘á»ƒ Ä‘áº£m báº£o chá»‰ cÃ i Ä‘áº·t Ä‘Ãºng phiÃªn báº£n dependencies trong uv.lock, khÃ´ng update uv.lock&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># --no-install-project Ä‘á»ƒ khÃ´ng cÃ i Ä‘áº·t project hiá»‡n táº¡i (chá»‰ cÃ i Ä‘áº·t dependencies)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># --no-dev Ä‘á»ƒ khÃ´ng cÃ i Ä‘áº·t dev dependencies&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># --no-editable Ä‘á»ƒ khÃ´ng cÃ i Ä‘áº·t editable mode&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># starlette 0.46.2 dÃ­nh CVE-2025-62727 CVE-2025-54121, nÃ¢ng cáº¥p Ä‘á»ƒ vÃ¡ lá»—i báº£o máº­t (do thay Ä‘á»•i pyproject.toml vÃ  file uv.lock sáº½ vi pháº¡m ná»™i quy nÃªn cháº¡y lá»‡nh install riÃªng)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">mount&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">uv&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">mount&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">bind&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">source&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">uv&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lock&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">uv&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lock&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">mount&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">bind&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">source&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">pyproject&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">toml&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">pyproject&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">toml&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">uv&lt;/span> &lt;span class="n">sync&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">frozen&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">install&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">project&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dev&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">editable&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">uv&lt;/span> &lt;span class="n">pip&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="s2">&amp;#34;starlette==0.49.1&amp;#34;&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">deps&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Sá»­ dá»¥ng distroless lÃ m base image cho runtime Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh báº£o máº­t vÃ  tá»‘i Æ°u kÃ­ch thÆ°á»›c image&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Chá»n distroless thay vÃ¬ alpine vÃ¬ alpine sá»­ dá»¥ng musl libc, trong khi python vÃ  nhiá»u thÆ° viá»‡n phá»• biáº¿n trong python Ä‘Æ°á»£c biÃªn dá»‹ch vá»›i glibc, dáº«n Ä‘áº¿n cÃ¡c váº¥n Ä‘á» tÆ°Æ¡ng thÃ­ch.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># distroless giÃºp á»©ng dá»¥ng cháº¡y á»•n Ä‘á»‹nh hÆ¡n vÃ  cÅ©ng ráº¥t nháº¹.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># cc-debian12 cÃ³ nhiá»u shared libraries cáº§n thiáº¿t cho python vÃ  cÃ¡c package phá»• biáº¿n hÆ¡n so vá»›i base-debian12&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># tuy nhiÃªn khi Ä‘Ã£ kiá»ƒm tra ká»¹ cÃ¡c shared libraries cáº§n thiáº¿t (vá»›i lá»‡nh ldd) vÃ  copy Ä‘áº§y Ä‘á»§ tá»« builder stage thÃ¬ base-debian12 sáº½ giÃºp tá»‘i Æ°u kÃ­ch thÆ°á»›c image hÆ¡n mÃ  váº«n Ä‘áº£m báº£o á»©ng dá»¥ng cháº¡y á»•n Ä‘á»‹nh.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">gcr&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">io&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">distroless&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">base&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">debian12&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">nonroot&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">sha256&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">10136&lt;/span>&lt;span class="n">f394cbc891efa9f20974a48843f21a6b3cbde55b1778582195d6726fa85&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">runtime&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">LABEL&lt;/span> &lt;span class="n">maintainer&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Thanh Nguyen The&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">LABEL&lt;/span> &lt;span class="n">maintainer&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">email&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;thanhnt.devops@gmail.com&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">LABEL&lt;/span> &lt;span class="n">maintainer&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">company&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;VIETNAM NATIONAL CYBER SECURITY TECHNOLOGY CORPORATION&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">LABEL&lt;/span> &lt;span class="n">maintainer&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">youtube&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;DevOps Mentor&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">LABEL&lt;/span> &lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">description&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Secure, minimal Python app using UV and Distroless&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy cÃ¡c thÆ° viá»‡n vÃ  python tá»« builder stage&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">multi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">arch&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">multi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">arch&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libpython3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">13.&lt;/span>&lt;span class="n">so&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.0&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">libpython3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">13.&lt;/span>&lt;span class="n">so&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">1.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">python3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">python3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">python&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">python3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy virtual environment tá»« builder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">chown&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nonroot&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">nonroot&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">venv&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">venv&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy source code - chá»‰ copy nhá»¯ng gÃ¬ cáº§n thiáº¿t&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">chown&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nonroot&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">nonroot&lt;/span> &lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Thiáº¿t láº­p environment variables&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Do runtime limit lÃ  1 vCPU, 512MB RAM nÃªn thiáº¿t láº­p WORKERS=2 thay vÃ¬ 3 (nguy cÆ¡ OOM). CÃ´ng thá»©c worker = (2 x sá»‘ lÆ°á»£ng vCPU + 1) chá»‰ Ã¡p dá»¥ng trong trÆ°á»ng há»£p &amp;gt; 1GB RAM&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># LD_LIBRARY_PATH Ä‘á»ƒ há»‡ thá»‘ng cÃ³ thá»ƒ tÃ¬m tháº¥y cÃ¡c shared libraries cáº§n thiáº¿t táº¡i thÆ° má»¥c má»›i thay vÃ¬ thÆ° má»¥c máº·c Ä‘inh (/lib/x86_64-linux-gnu hoáº·c /lib/aarch64-linux-gnu)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># shared libraries khÃ´ng cÃ³ trong /lib/multi-arch sáº½ tiáº¿p tá»¥c Ä‘Æ°á»£c load tá»« thÆ° má»¥c máº·c Ä‘á»‹nh cá»§a há»‡ thá»‘ng&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ENV&lt;/span> &lt;span class="n">PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/app/.venv/bin/:$PATH&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PYTHONPATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/app/src/&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">LANG&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">UTF&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">8&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PYTHONUNBUFFERED&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PYTHONFAULTHANDLER&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PYTHONDONTWRITEBYTECODE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PYTHONHASHSEED&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">random&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">HOST&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.0&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PORT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">8080&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">WORKERS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">2&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">LOGGING__LEVEL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">INFO&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">LOGGING__FORMAT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">PLAIN&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">COFFEE_API__HOST&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;https://api.sampleapis.com/coffee/&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">APP_VERSION&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">GIT_COMMIT_SHA&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">sha&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">LD_LIBRARY_PATH&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">multi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">arch&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># nonroot user máº·c Ä‘á»‹nh Ä‘Ã£ Ä‘Æ°á»£c sá»­ dá»¥ng trong distroless base-debian12:nonroot nÃªn khÃ´ng cáº§n thiáº¿t pháº£i thÃªm lá»‡nh phÃ­a dÆ°á»›i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># USER nonroot:nonroot&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Expose port máº·c Ä‘á»‹nh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">EXPOSE&lt;/span> &lt;span class="mi">8080&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Command Ä‘á»ƒ cháº¡y á»©ng dá»¥ng&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ENTRYPOINT&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;python&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;src/python_service_template/app.py&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h3 id="2-dockerfile-top-2-python--newnol">2. Dockerfile TOP 2 (Python) â€“ newnol
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Ká»¹ thuáº­t&lt;/th>
&lt;th>Giáº£i thÃ­ch theo tÃ¡c giáº£&lt;/th>
&lt;th>Nguá»“n tham kháº£o&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>Alpine Base Image&lt;/strong>&lt;/td>
&lt;td>Sá»­ dá»¥ng &lt;code>python:3.13-alpine&lt;/code> Ä‘á»ƒ cÃ³ image nhá» hÆ¡n so vá»›i Debian-based images.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Security Patches&lt;/strong>&lt;/td>
&lt;td>Cáº­p nháº­t cÃ¡c package cÃ³ CVE: starlette, fastapi, aiohttp, pydantic, structlog, uvloop, uvicorn lÃªn phiÃªn báº£n an toÃ n.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Ultra Aggressive Optimization&lt;/strong>&lt;/td>
&lt;td>Strip táº¥t cáº£ &lt;code>.so&lt;/code> files, xÃ³a &lt;code>__pycache__&lt;/code>, test, doc, examples, typing stubs, license files Ä‘á»ƒ giáº£m kÃ­ch thÆ°á»›c.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Python Stdlib Cleanup&lt;/strong>&lt;/td>
&lt;td>XÃ³a cÃ¡c module khÃ´ng cáº§n thiáº¿t nhÆ° pip, setuptools, wheel, tkinter, distutils, lib2to3, idlelib, test, unittest.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Non-root User&lt;/strong>&lt;/td>
&lt;td>Táº¡o user UID 10001 vá»›i quyá»n tá»‘i thiá»ƒu Ä‘á»ƒ tÄƒng báº£o máº­t.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Healthcheck&lt;/strong>&lt;/td>
&lt;td>Sá»­ dá»¥ng wget Ä‘á»ƒ kiá»ƒm tra endpoint &lt;code>/health/&lt;/code> vá»›i timeout ngáº¯n.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>Dockerfile TOP 2 (Python)&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># syntax=docker/dockerfile:1.7&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># =============================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># DOCKERFILE ULTRA OPTIMIZED + SECURITY PATCHED&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Má»¥c tiÃªu: Nháº¹ (&amp;lt;110MB) + Báº£o máº­t cao (0 CVEs)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># =============================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># -----------------------------------------------------------------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Stage 1: Dependencies Builder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># -----------------------------------------------------------------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">python&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">3.13&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">alpine&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">sha256&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">e5fa639e49b85986c4481e28faa2564b45aa8021413f31026c3856e5911618b1&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">deps&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ENV&lt;/span> &lt;span class="n">PIP_NO_CACHE_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PIP_DISABLE_PIP_VERSION_CHECK&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PYTHONDONTWRITEBYTECODE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PYTHONUNBUFFERED&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">mount&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apk&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">apk&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cache&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">virtual&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">deps&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">build&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">base&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">python3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dev&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cargo&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Install dependencies vá»›i PATCHED versions Ä‘á»ƒ fix CVEs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Note: FastAPI 0.116+ required for starlette 0.49.1+ support&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">mount&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pip&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">python&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">m&lt;/span> &lt;span class="n">pip&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dir&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">prefix&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">install&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;aiohttp&amp;gt;=3.12.14,&amp;lt;4.0.0&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;asgi-correlation-id&amp;gt;=4.3.4,&amp;lt;5.0.0&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;fastapi&amp;gt;=0.116.0&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;prometheus-fastapi-instrumentator&amp;gt;=7.0.0,&amp;lt;8.0.0&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;pydantic&amp;gt;=2.11.0,&amp;lt;3.0.0&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;pydantic-settings&amp;gt;=2.9.1,&amp;lt;3.0.0&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;structlog&amp;gt;=25.3.0,&amp;lt;26.0.0&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;uvloop&amp;gt;=0.21.0,&amp;lt;0.22.0&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;uvicorn[standard]&amp;gt;=0.30.0,&amp;lt;0.31.0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ULTRA AGGRESSIVE optimization&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">apk&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cache&lt;/span> &lt;span class="n">binutils&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Strip ALL .so files aggressively&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">find&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">install&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="n">f&lt;/span> \&lt;span class="p">(&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;*.so*&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;*.a&amp;#39;&lt;/span> \&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">exec&lt;/span> &lt;span class="n">strip&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">all&lt;/span> &lt;span class="p">{}&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">&amp;gt;/&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">null&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="bp">true&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Remove all bytecode&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">find&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">install&lt;/span> \&lt;span class="p">(&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="n">d&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="n">__pycache__&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="n">f&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;*.py[co]&amp;#39;&lt;/span> \&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">delete&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">&amp;gt;/&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">null&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="bp">true&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Remove test/doc/examples&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">find&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">install&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="n">d&lt;/span> \&lt;span class="p">(&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="n">tests&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="n">testing&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="n">test&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="n">doc&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="n">docs&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="n">example&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="n">examples&lt;/span> \&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">prune&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">exec&lt;/span> &lt;span class="n">rm&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">rf&lt;/span> &lt;span class="p">{}&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">&amp;gt;/&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">null&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="bp">true&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Minimize .dist-info&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">find&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">install&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;*.dist-info&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="n">d&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">exec&lt;/span> &lt;span class="n">sh&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">c&lt;/span> &lt;span class="s1">&amp;#39;cd &amp;#34;$1&amp;#34; &amp;amp;&amp;amp; find . -type f ! -name &amp;#34;METADATA&amp;#34; ! -name &amp;#34;top_level.txt&amp;#34; ! -name &amp;#34;RECORD&amp;#34; -delete&amp;#39;&lt;/span> &lt;span class="n">_&lt;/span> &lt;span class="p">{}&lt;/span> \&lt;span class="p">;&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">&amp;gt;/&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">null&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="bp">true&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Remove typing stubs, headers, C files&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">find&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">install&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="n">f&lt;/span> \&lt;span class="p">(&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;*.pyi&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;*.c&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;*.h&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;*.cpp&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;*.cc&amp;#39;&lt;/span> \&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">delete&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Remove license files&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">find&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">install&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="n">f&lt;/span> \&lt;span class="p">(&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;LICENSE*&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;COPYING*&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;NOTICE*&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;AUTHORS*&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;CHANGELOG*&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;README*&amp;#39;&lt;/span> \&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">delete&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="o">&amp;gt;/&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">null&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="bp">true&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">apk&lt;/span> &lt;span class="n">del&lt;/span> &lt;span class="n">binutils&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">deps&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># -----------------------------------------------------------------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Stage 2: Runtime (ULTRA MINIMAL + SECURE)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># -----------------------------------------------------------------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">python&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">3.13&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">alpine&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">sha256&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">e5fa639e49b85986c4481e28faa2564b45aa8021413f31026c3856e5911618b1&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">runtime&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">LABEL&lt;/span> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">title&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Python Service Template&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">description&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Production-ready FastAPI service - Optimized &amp;amp; Secured&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">version&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;0.1.0&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">authors&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;newnol &amp;lt;contact@newnol.io.vn&amp;gt;&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">maintainer&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;newnol&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">security&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">scan&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;trivy-passed&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ENV&lt;/span> &lt;span class="n">PYTHONDONTWRITEBYTECODE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PYTHONUNBUFFERED&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PIP_NO_CACHE_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">HOST&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.0&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PORT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5000&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">WORKERS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PYTHONPATH&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">src&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">TZ&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">UTC&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Install ONLY wget for healthcheck&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">mount&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apk&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">apk&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cache&lt;/span> &lt;span class="n">wget&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Create non-root user&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">addgroup&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">g&lt;/span> &lt;span class="mi">10001&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">S&lt;/span> &lt;span class="n">app&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">adduser&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">u&lt;/span> &lt;span class="mi">10001&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">S&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">G&lt;/span> &lt;span class="n">app&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">h&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nologin&lt;/span> &lt;span class="n">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy dependencies&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">deps&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">chown&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">app&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">install&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy source (minimal)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">chown&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">app&lt;/span> &lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Permissions&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">chmod&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">R&lt;/span> &lt;span class="mi">550&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># EXTREME Python stdlib cleanup&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">rm&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">rf&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">python3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ensurepip&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">python3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">site&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">packages&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pip&lt;/span>&lt;span class="o">*&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">python3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">site&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">packages&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">setuptools&lt;/span>&lt;span class="o">*&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">python3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">site&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">packages&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">wheel&lt;/span>&lt;span class="o">*&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">python3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">distutils&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">python3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib2to3&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">python3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">idlelib&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">python3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tkinter&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">python3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">turtledemo&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">python3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">test&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">python3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">13&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">unittest&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">test&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pip&lt;/span>&lt;span class="o">*&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">to3&lt;/span>&lt;span class="o">*&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">bin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">idle&lt;/span>&lt;span class="o">*&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">2&lt;/span>&lt;span class="o">&amp;gt;/&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">null&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Clean up more unused stdlib modules&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">cd&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">python3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">13&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">rm&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">rf&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">turtle&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">py&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pydoc_data&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">2&lt;/span>&lt;span class="o">&amp;gt;/&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">null&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="bp">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">USER&lt;/span> &lt;span class="n">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">EXPOSE&lt;/span> &lt;span class="mi">5000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Heathcheck &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">HEALTHCHECK&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">interval&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">15&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">timeout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">start&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">period&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">retries&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">2&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">CMD&lt;/span> &lt;span class="n">wget&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">verbose&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">tries&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">O&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">null&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="mf">127.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">PORT&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">health&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="n">exit&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">STOPSIGNAL&lt;/span> &lt;span class="n">SIGTERM&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">CMD&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;python&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;src/python_service_template/app.py&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h3 id="3-dockerfile-top-python--wheel-based-build">3. Dockerfile TOP (Python) â€“ Wheel-based Build
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Ká»¹ thuáº­t&lt;/th>
&lt;th>Giáº£i thÃ­ch&lt;/th>
&lt;th>Nguá»“n tham kháº£o&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>Wheel-based Installation&lt;/strong>&lt;/td>
&lt;td>Build táº¥t cáº£ dependencies thÃ nh wheel files, sau Ä‘Ã³ cÃ i Ä‘áº·t offline Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ build vÃ  Ä‘áº£m báº£o reproducibility.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Dynamic Security Patching&lt;/strong>&lt;/td>
&lt;td>Sá»­ dá»¥ng Python script Ä‘á»ƒ parse &lt;code>pyproject.toml&lt;/code>, tá»± Ä‘á»™ng nÃ¢ng cáº¥p fastapi vÃ  starlette lÃªn phiÃªn báº£n an toÃ n mÃ  khÃ´ng cáº§n sá»­a file gá»‘c.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>PIP_ONLY_BINARY&lt;/strong>&lt;/td>
&lt;td>Chá»‰ sá»­ dá»¥ng wheel files, khÃ´ng build tá»« source, giÃºp build nhanh hÆ¡n vÃ  trÃ¡nh lá»—i compilation.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Offline Installation&lt;/strong>&lt;/td>
&lt;td>CÃ i Ä‘áº·t tá»« wheel files local, khÃ´ng cáº§n káº¿t ná»‘i internet á»Ÿ runtime stage.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Native Healthcheck&lt;/strong>&lt;/td>
&lt;td>Sá»­ dá»¥ng Python &lt;code>http.client&lt;/code> thay vÃ¬ external tools nhÆ° curl/wget, giáº£m dependencies.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Non-root User&lt;/strong>&lt;/td>
&lt;td>Táº¡o user UID 10001 vá»›i home directory riÃªng Ä‘á»ƒ tÄƒng báº£o máº­t.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>Dockerfile TOP (Python)&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># syntax=docker/dockerfile:1.7&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">##############################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># builder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">##############################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">python&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">3.13&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">slim&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">builder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ENV&lt;/span> &lt;span class="n">PIP_DISABLE_PIP_VERSION_CHECK&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PIP_NO_CACHE_DIR&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PIP_ONLY_BINARY&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">all&lt;/span>&lt;span class="p">:&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PYTHONDONTWRITEBYTECODE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PYTHONUNBUFFERED&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Pre-cache manifests&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">pyproject&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">toml&lt;/span> &lt;span class="n">README&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">md&lt;/span> &lt;span class="n">LICENSE&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="o">./&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Fix HIGH vulnerable issue: CVE-2025-62727 by upgrading starlette and fastapi.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">mount&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pip&lt;/span> &lt;span class="n">python&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="s1">&amp;#39;PY&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">import&lt;/span> &lt;span class="n">tomllib&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">pathlib&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">re&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">parse_req&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nb">str&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">m&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">match&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;^\s*([A-Za-z0-9_.-]+)(\[[^\]]+\])?\s*(.*)$&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">m&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">extras&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">rest&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">m&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">group&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">group&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">group&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">extras&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">rest&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">re&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">r&lt;/span>&lt;span class="s1">&amp;#39;[&amp;gt;&amp;lt;=~!; ]&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">):]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">tomllib&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">loads&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pathlib&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Path&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;pyproject.toml&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read_text&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">deps&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;project&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{})&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;dependencies&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">safe&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">present&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">set&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">d&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">deps&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">extras&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">rest&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">parse_req&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">norm&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lower&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;_&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;-&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">norm&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;fastapi&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">safe&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="s1">&amp;#39;fastapi{extras}&amp;gt;=0.118,&amp;lt;0.121&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">safe&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">present&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">norm&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="s1">&amp;#39;starlette&amp;#39;&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">present&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">safe&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;starlette&amp;gt;=0.49.1,&amp;lt;0.50&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pathlib&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Path&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/requirements.safe.txt&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">write_text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">join&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">safe&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Resolved safe deps:&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">safe&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sep&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s1">- &amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">PY&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Wheel ALL dependencies from the safe list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">mount&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pip&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pip&lt;/span> &lt;span class="n">wheel&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">wheel&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dir&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">wheels&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">requirements&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">safe&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Build wheel of the project itself&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">mount&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pip&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pip&lt;/span> &lt;span class="n">wheel&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">wheel&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dir&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">wheels&lt;/span> &lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">##############################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># runtime&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">##############################&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">python&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">3.13&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">slim&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">runtime&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">VERSION&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">0.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">VCS_REF&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">sha&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">BUILD_DATE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">LABEL&lt;/span> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">title&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;python-service-template&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">description&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Dockerfile contest build&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">version&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">VERSION&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">revision&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">VCS_REF&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">created&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">BUILD_DATE&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">licenses&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Apache-2.0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ENV&lt;/span> &lt;span class="n">PYTHONDONTWRITEBYTECODE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PYTHONUNBUFFERED&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PYTHONOPTIMIZE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">2&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">HOST&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.0&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PORT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5000&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">WORKERS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">APP_VERSION&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">VERSION&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">GIT_COMMIT_SHA&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">VCS_REF&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Non-root&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">useradd&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">create&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">home&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">uid&lt;/span> &lt;span class="mi">10001&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">shell&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nologin&lt;/span> &lt;span class="n">appuser&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">appuser&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Install offline: install ALL safe deps, then the app wheel with --no-deps&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">wheels&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">wheels&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">requirements&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">safe&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">txt&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">requirements&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">safe&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">pip&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">index&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">find&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">links&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">wheels&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">r&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">requirements&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">safe&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">txt&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">pip&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">index&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">find&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">links&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">wheels&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">deps&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">python&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">service&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">template&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">compile&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">rm&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">rf&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">wheels&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">requirements&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">safe&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">EXPOSE&lt;/span> &lt;span class="mi">5000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">HEALTHCHECK&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">interval&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">timeout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">start&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">period&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">retries&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">CMD&lt;/span> &lt;span class="n">python&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">c&lt;/span> &lt;span class="s2">&amp;#34;import sys, http.client; c=http.client.HTTPConnection(&amp;#39;127.0.0.1&amp;#39;, int(__import__(&amp;#39;os&amp;#39;).environ.get(&amp;#39;PORT&amp;#39;,&amp;#39;5000&amp;#39;)), timeout=1); c.request(&amp;#39;GET&amp;#39;,&amp;#39;/health&amp;#39;); r=c.getresponse(); sys.exit(0 if r.status==200 else 1)&amp;#34;&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="n">exit&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">USER&lt;/span> &lt;span class="mi">10001&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">10001&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">CMD&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;python&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;-m&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;python_service_template.app&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h3 id="4-dockerfile-top-python--khiem-doan">4. Dockerfile TOP (Python) â€“ Khiem Doan
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Ká»¹ thuáº­t&lt;/th>
&lt;th>Giáº£i thÃ­ch&lt;/th>
&lt;th>Nguá»“n tham kháº£o&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>UV Package Manager&lt;/strong>&lt;/td>
&lt;td>Sá»­ dá»¥ng &lt;code>uv&lt;/code> Ä‘á»ƒ quáº£n lÃ½ dependencies nhanh hÆ¡n pip, vá»›i cache mount Ä‘á»ƒ tÄƒng tá»‘c rebuild.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Alpine + Tini&lt;/strong>&lt;/td>
&lt;td>Sá»­ dá»¥ng Alpine Linux nháº¹ vÃ  tini lÃ m init system Ä‘á»ƒ xá»­ lÃ½ signals Ä‘Ãºng cÃ¡ch.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Security Patching&lt;/strong>&lt;/td>
&lt;td>NÃ¢ng cáº¥p starlette lÃªn 0.50.0 Ä‘á»ƒ fix cÃ¡c CVE mÃ  khÃ´ng cáº§n sá»­a pyproject.toml.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Non-root User&lt;/strong>&lt;/td>
&lt;td>Táº¡o user nonroot vá»›i UID/GID 14406, má»™t UID khÃ´ng phá»• biáº¿n Ä‘á»ƒ trÃ¡nh conflict.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Healthcheck vá»›i curl&lt;/strong>&lt;/td>
&lt;td>Sá»­ dá»¥ng curl Ä‘á»ƒ kiá»ƒm tra health endpoint vÃ  grep Ä‘á»ƒ verify response JSON.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>OCI Labels&lt;/strong>&lt;/td>
&lt;td>ThÃªm Ä‘áº§y Ä‘á»§ OCI labels vá»›i metadata vá» version, build date, revision, source.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>Dockerfile TOP (Python)&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;span class="lnt">52
&lt;/span>&lt;span class="lnt">53
&lt;/span>&lt;span class="lnt">54
&lt;/span>&lt;span class="lnt">55
&lt;/span>&lt;span class="lnt">56
&lt;/span>&lt;span class="lnt">57
&lt;/span>&lt;span class="lnt">58
&lt;/span>&lt;span class="lnt">59
&lt;/span>&lt;span class="lnt">60
&lt;/span>&lt;span class="lnt">61
&lt;/span>&lt;span class="lnt">62
&lt;/span>&lt;span class="lnt">63
&lt;/span>&lt;span class="lnt">64
&lt;/span>&lt;span class="lnt">65
&lt;/span>&lt;span class="lnt">66
&lt;/span>&lt;span class="lnt">67
&lt;/span>&lt;span class="lnt">68
&lt;/span>&lt;span class="lnt">69
&lt;/span>&lt;span class="lnt">70
&lt;/span>&lt;span class="lnt">71
&lt;/span>&lt;span class="lnt">72
&lt;/span>&lt;span class="lnt">73
&lt;/span>&lt;span class="lnt">74
&lt;/span>&lt;span class="lnt">75
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># syntax=docker/dockerfile:1.19&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">python&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">3.13&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">alpine3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">22&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">deps&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">mount&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pip&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pip&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">compile&lt;/span> &lt;span class="n">uv&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="mf">0.9&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">pyproject&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">toml&lt;/span> &lt;span class="n">uv&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lock&lt;/span> &lt;span class="o">./&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">mount&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">uv&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">uv&lt;/span> &lt;span class="n">sync&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">frozen&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dev&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">install&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">project&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">uv&lt;/span> &lt;span class="n">pip&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">starlette&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="mf">0.50&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">python&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">3.13&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">alpine3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">22&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">final&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">pip&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">U&lt;/span> &lt;span class="n">pip&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">mount&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apk&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">apk&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cache&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">curl&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">8.14&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r2&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">tini&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">0.19&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">r3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">VERSION&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;0.1.0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">BUILD_DATE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2025-11-10T00:00:00Z&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">REVISION&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;unknown&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">GIT_COMMIT_SHA&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;unknown&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">LABEL&lt;/span> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">title&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;python-service-template&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">description&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;A batteries-included template for building robust, production-ready Python backend services with FastAPI&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">authors&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Khiem Doan&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">version&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">VERSION&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">created&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">BUILD_DATE&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">revision&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">REVISION&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">source&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;https://github.com/khiemdoan/&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">licenses&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;MIT&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ENV&lt;/span> &lt;span class="n">USER&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nonroot&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">GROUP&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nonroot&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">UID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">14406&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">GID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">14406&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">addgroup&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">g&lt;/span> &lt;span class="s2">&amp;#34;$GID&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;$GROUP&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">adduser&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">D&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">u&lt;/span> &lt;span class="s2">&amp;#34;$UID&amp;#34;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">G&lt;/span> &lt;span class="s2">&amp;#34;$GROUP&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;$USER&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">USER&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">USER&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">chown&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">USER&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">GROUP&lt;/span> &lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">deps&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">chown&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">USER&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="n">GROUP&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">venv&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">venv&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ENV&lt;/span> &lt;span class="n">PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/app/.venv/bin:$PATH&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PYTHONPATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/app/src&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PYTHONUNBUFFERED&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PYTHONDONTWRITEBYTECODE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">HOST&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">0.0&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PORT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3000&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">WORKERS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">LOGGING__LEVEL&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">INFO&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">LOGGING__FORMAT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">PLAIN&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">COFFEE_API__HOST&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">api&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sampleapis&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">coffee&lt;/span>&lt;span class="o">/&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">APP_VERSION&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">VERSION&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">GIT_COMMIT_SHA&lt;/span>&lt;span class="o">=$&lt;/span>&lt;span class="n">GIT_COMMIT_SHA&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">EXPOSE&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">PORT&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">HEALTHCHECK&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">timeout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="n">s&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">CMD&lt;/span> &lt;span class="n">curl&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span> &lt;span class="s2">&amp;#34;http://localhost:${PORT}/health/&amp;#34;&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">grep&lt;/span> &lt;span class="s1">&amp;#39;&amp;#34;heartbeat&amp;#34;:&amp;#34;HEALTHY&amp;#34;&amp;#39;&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="n">exit&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ENTRYPOINT&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;/sbin/tini&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;--&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">CMD&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;python&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;src/python_service_template/app.py&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="ghi-chÃº-triá»ƒn-khai">Ghi chÃº triá»ƒn khai
&lt;/h2>&lt;ul>
&lt;li>CÃ¡c Dockerfile trÃªn chá»‰ mang tÃ­nh tham kháº£o kiáº¿n trÃºc; khi Ã¡p dá»¥ng vÃ o dá»± Ã¡n Python/FastAPI cá»§a báº¡n, hÃ£y giá»¯ nguyÃªn nguyÃªn táº¯c: multi-stage build, security patching, non-root user, pin SHA256 cho base images.&lt;/li>
&lt;li>&lt;strong>Distroless vs Alpine&lt;/strong>: Distroless an toÃ n hÆ¡n (khÃ´ng cÃ³ shell, package manager) nhÆ°ng cáº§n copy shared libraries thá»§ cÃ´ng. Alpine nháº¹ vÃ  dá»… debug hÆ¡n nhÆ°ng cÃ³ thá»ƒ gáº·p váº¥n Ä‘á» tÆ°Æ¡ng thÃ­ch vá»›i má»™t sá»‘ Python packages.&lt;/li>
&lt;li>&lt;strong>UV vs PIP&lt;/strong>: UV nhanh hÆ¡n pip Ä‘Ã¡ng ká»ƒ (10-100x) vÃ  quáº£n lÃ½ virtual environment tá»‘t hÆ¡n, nhÆ°ng cáº§n cÃ i Ä‘áº·t thÃªm.&lt;/li>
&lt;li>&lt;strong>Security&lt;/strong>: LuÃ´n cáº­p nháº­t dependencies Ä‘á»ƒ fix CVE, Ä‘áº·c biá»‡t lÃ  cÃ¡c package phá»• biáº¿n nhÆ° starlette, fastapi, uvicorn.&lt;/li>
&lt;li>&lt;strong>Healthcheck&lt;/strong>: NÃªn sá»­ dá»¥ng native Python &lt;code>http.client&lt;/code> hoáº·c curl/wget tÃ¹y vÃ o base image vÃ  yÃªu cáº§u báº£o máº­t.&lt;/li>
&lt;/ul></description></item><item><title>Tá»‘i Æ°u Docker cho Node.js</title><link>https://tech.nguuyen.io.vn/posts/docker-optimization/docker-opt-nodejs/</link><pubDate>Tue, 18 Nov 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/docker-optimization/docker-opt-nodejs/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/docker-optimization/docker-optimization-react.webp" alt="Featured image of post Tá»‘i Æ°u Docker cho Node.js" />&lt;h2 id="dockerfile-contest-2025--reactnode-tá»‘i-Æ°u-extreme">Dockerfile Contest 2025 â€“ React/Node tá»‘i Æ°u extreme
&lt;/h2>&lt;p>Dockerfile Contest 2025 thÃºc Ä‘áº©y cá»™ng Ä‘á»“ng DevOps Viá»‡t Nam Ä‘Ã¡nh giÃ¡ láº¡i cÃ¡ch viáº¿t Dockerfile Ä‘á»ƒ Ä‘áº¡t &lt;strong>báº£o máº­t, tá»‘i Æ°u, tÆ°á»ng minh&lt;/strong>. DÆ°á»›i Ä‘Ã¢y lÃ  pháº§n tá»•ng há»£p riÃªng cho háº¡ng má»¥c React (á»©ng dá»¥ng Node.js build ra static assets).&lt;/p>
&lt;hr>
&lt;h2 id="i-háº¡ng-má»¥c-react-tá»‘i-Æ°u-cho-static-web-serving">I. Háº¡ng má»¥c REACT (Tá»‘i Æ°u cho Static Web Serving)
&lt;/h2>&lt;p>Háº¡ng má»¥c React táº­p trung giáº£m kÃ­ch thÆ°á»›c image vÃ  tÄƒng tá»‘c phá»¥c vá»¥ file tÄ©nh. Má»™t sá»‘ Ä‘á»™i ngÅ© tá»± biÃªn dá»‹ch HTTP server hoáº·c cháº¡y trÃªn &lt;code>FROM scratch&lt;/code> nháº±m Ä‘áº¡t footprint tháº¥p nháº¥t.&lt;/p>
&lt;h3 id="1-giáº£i-docker-image-nháº¹-nháº¥t-top-tinh-gá»n--nguyá»…n-phÃºc-báº£o-lÃ¢m">1. Giáº£i Docker Image nháº¹ nháº¥t (TOP Tinh Gá»n) â€“ Nguyá»…n PhÃºc Báº£o LÃ¢m
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Ká»¹ thuáº­t&lt;/th>
&lt;th>Giáº£i thÃ­ch theo tÃ¡c giáº£&lt;/th>
&lt;th>Nguá»“n tham kháº£o&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>Lá»±a chá»n Project&lt;/strong>&lt;/td>
&lt;td>Táº­n dá»¥ng lá»£i tháº¿ app static (React) Ä‘á»ƒ dá»… Ä‘áº¡t image nhá» hÆ¡n so vá»›i Java/Python.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Base Image Cá»±c Äoan&lt;/strong>&lt;/td>
&lt;td>DÃ¹ng &lt;code>lipanski/docker-static-website:latest&lt;/code>, báº£n BusyBox Ä‘Æ°á»£c tinh gá»n chá»‰ giá»¯ HTTP server (~92 KB).&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Pre-compression NÃ©n Tá»‘i Äa&lt;/strong>&lt;/td>
&lt;td>NÃ©n trÆ°á»›c toÃ n bá»™ asset vá»›i Gzip level 9, xÃ³a file gá»‘c, giÃºp image cuá»‘i cÃ¹ng ~300 KB.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Healthcheck&lt;/strong>&lt;/td>
&lt;td>Ghi &lt;code>&amp;quot;OK&amp;quot;&lt;/code> vÃ o &lt;code>dist/health&lt;/code> Ä‘á»ƒ cÃ³ endpoint kiá»ƒm tra nhanh.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>Dockerfile â€“ Docker Image nháº¹ nháº¥t&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">syntax&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">docker&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">dockerfile&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1.7&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="o">==============================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">Build&lt;/span> &lt;span class="nx">Stage&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nx">Using&lt;/span> &lt;span class="nx">Node&lt;/span> &lt;span class="nx">Alpine&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">minimal&lt;/span> &lt;span class="nx">size&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="o">==============================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">FROM&lt;/span> &lt;span class="nx">node&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">22.21.1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">alpine3&lt;/span>&lt;span class="mf">.21&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="nx">sha256&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">af8023ec879993821f6d5b21382ed915622a1b0f1cc03dbeb6804afaf01f8885&lt;/span> &lt;span class="nx">AS&lt;/span> &lt;span class="nx">builder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">Install&lt;/span> &lt;span class="nx">pnpm&lt;/span> &lt;span class="nx">with&lt;/span> &lt;span class="nx">specific&lt;/span> &lt;span class="nx">version&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="kn">package&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span> &lt;span class="nx">and&lt;/span> &lt;span class="nx">gzip&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">pre&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">compression&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">ENV&lt;/span> &lt;span class="nx">PNPM_HOME&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;/pnpm&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">ENV&lt;/span> &lt;span class="nx">PATH&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;$PNPM_HOME:$PATH&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">RUN&lt;/span> &lt;span class="nx">corepack&lt;/span> &lt;span class="nx">enable&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">corepack&lt;/span> &lt;span class="nx">prepare&lt;/span> &lt;span class="nx">pnpm&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">activate&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">Copy&lt;/span> &lt;span class="kn">package&lt;/span> &lt;span class="nx">files&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">dependency&lt;/span> &lt;span class="nf">installation&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">optimized&lt;/span> &lt;span class="nx">layer&lt;/span> &lt;span class="nx">caching&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">COPY&lt;/span> &lt;span class="kn">package&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span> &lt;span class="nx">pnpm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">lock&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">yaml&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">Install&lt;/span> &lt;span class="nx">dependencies&lt;/span> &lt;span class="nx">with&lt;/span> &lt;span class="nx">cache&lt;/span> &lt;span class="nx">mount&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">faster&lt;/span> &lt;span class="nx">rebuilds&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">Installs&lt;/span> &lt;span class="nx">all&lt;/span> &lt;span class="nf">dependencies&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">including&lt;/span> &lt;span class="nx">devDependencies&lt;/span> &lt;span class="nx">needed&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">build&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">typescript&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">vite&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">tailwindcss&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">etc&lt;/span>&lt;span class="p">.)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">RUN&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">mount&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="kd">type&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">cache&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">id&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">pnpm&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="nx">target&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">pnpm&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">store&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">pnpm&lt;/span> &lt;span class="nx">install&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">frozen&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">lockfile&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">Copy&lt;/span> &lt;span class="nx">only&lt;/span> &lt;span class="nx">necessary&lt;/span> &lt;span class="nx">source&lt;/span> &lt;span class="nf">files&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">exclude&lt;/span> &lt;span class="nx">tests&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">docs&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">config&lt;/span> &lt;span class="nx">files&lt;/span> &lt;span class="nx">not&lt;/span> &lt;span class="nx">needed&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">build&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">COPY&lt;/span> &lt;span class="nx">tsconfig&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span> &lt;span class="nx">tsconfig&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">node&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span> &lt;span class="nx">vite&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">config&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ts&lt;/span> &lt;span class="nx">tailwind&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">config&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ts&lt;/span> &lt;span class="nx">postcss&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">config&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">js&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">COPY&lt;/span> &lt;span class="nx">index&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">html&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">COPY&lt;/span> &lt;span class="nx">public&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">public&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">COPY&lt;/span> &lt;span class="nx">src&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">src&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">Build&lt;/span> &lt;span class="nx">the&lt;/span> &lt;span class="nx">application&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">RUN&lt;/span> &lt;span class="nx">pnpm&lt;/span> &lt;span class="nx">run&lt;/span> &lt;span class="nx">build&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">#&lt;/span> &lt;span class="nx">Verify&lt;/span> &lt;span class="nx">build&lt;/span> &lt;span class="nx">output&lt;/span> &lt;span class="nx">exists&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">test&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">d&lt;/span> &lt;span class="nx">dist&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">test&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">f&lt;/span> &lt;span class="nx">dist&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">index&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">html&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">#&lt;/span> &lt;span class="nx">Remove&lt;/span> &lt;span class="nx">bundle&lt;/span> &lt;span class="nx">visualizer&lt;/span> &lt;span class="nf">output&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">not&lt;/span> &lt;span class="nx">needed&lt;/span> &lt;span class="nx">in&lt;/span> &lt;span class="nx">production&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">saves&lt;/span> &lt;span class="p">~&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="nx">KB&lt;/span> &lt;span class="nx">compressed&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">rm&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">f&lt;/span> &lt;span class="nx">dist&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">stats&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">html&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">#&lt;/span> &lt;span class="nx">Create&lt;/span> &lt;span class="nx">a&lt;/span> &lt;span class="nx">minimal&lt;/span> &lt;span class="nx">health&lt;/span> &lt;span class="nx">check&lt;/span> &lt;span class="nf">endpoint&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="kt">byte&lt;/span> &lt;span class="nx">file&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">ultra&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">fast&lt;/span> &lt;span class="nx">response&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">echo&lt;/span> &lt;span class="s">&amp;#34;OK&amp;#34;&lt;/span> &lt;span class="p">&amp;gt;&lt;/span> &lt;span class="nx">dist&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">health&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">#&lt;/span> &lt;span class="nx">Pre&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">compress&lt;/span> &lt;span class="nx">all&lt;/span> &lt;span class="nx">static&lt;/span> &lt;span class="nx">files&lt;/span> &lt;span class="nx">with&lt;/span> &lt;span class="nf">gzip&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">level&lt;/span> &lt;span class="mi">9&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">maximum&lt;/span> &lt;span class="nx">compression&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">find&lt;/span> &lt;span class="nx">dist&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="kd">type&lt;/span> &lt;span class="nx">f&lt;/span> &lt;span class="err">\&lt;/span>&lt;span class="p">(&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="s">&amp;#34;*.html&amp;#34;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">o&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="s">&amp;#34;*.css&amp;#34;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">o&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="s">&amp;#34;*.js&amp;#34;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">o&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="s">&amp;#34;*.json&amp;#34;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">o&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="s">&amp;#34;*.xml&amp;#34;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">o&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="s">&amp;#34;*.txt&amp;#34;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">o&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="s">&amp;#34;*.svg&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">\&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">exec&lt;/span> &lt;span class="nx">sh&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">c&lt;/span> &lt;span class="err">&amp;#39;&lt;/span>&lt;span class="nx">gzip&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span> &lt;span class="s">&amp;#34;{}&amp;#34;&lt;/span>&lt;span class="err">&amp;#39;&lt;/span> &lt;span class="err">\&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="o">==============================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">Production&lt;/span> &lt;span class="nx">Stage&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nx">Using&lt;/span> &lt;span class="nx">lipanski&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">static&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">website&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">extreme&lt;/span> &lt;span class="nx">minimal&lt;/span> &lt;span class="nf">footprint&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mf">92.5&lt;/span> &lt;span class="nx">KB&lt;/span> &lt;span class="nx">base&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="o">==============================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">FROM&lt;/span> &lt;span class="nx">lipanski&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">static&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">website&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nx">latest&lt;/span> &lt;span class="nx">AS&lt;/span> &lt;span class="nx">production&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">Add&lt;/span> &lt;span class="nx">OCI&lt;/span> &lt;span class="nx">labels&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="nx">metadata&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">LABEL&lt;/span> &lt;span class="nx">org&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">opencontainers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">image&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">title&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;Vite React Template&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">org&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">opencontainers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">image&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">description&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;Production-ready Vite React application with extreme minimal footprint&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">org&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">opencontainers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">image&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">version&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;0.4.0&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">org&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">opencontainers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">image&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">licenses&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;MIT OR Apache-2.0&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">org&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">opencontainers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">image&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">base&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">name&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s">&amp;#34;lipanski/docker-static-website:latest&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">Copy&lt;/span> &lt;span class="nx">built&lt;/span> &lt;span class="nx">assets&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="nx">builder&lt;/span> &lt;span class="nx">stage&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">lipanski&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">docker&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">static&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">website&lt;/span> &lt;span class="nx">serves&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">static&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">from&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="nx">builder&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">dist&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">home&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">static&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">Expose&lt;/span> &lt;span class="nf">port&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">BusyBox&lt;/span> &lt;span class="nx">httpd&lt;/span> &lt;span class="nx">uses&lt;/span> &lt;span class="nx">port&lt;/span> &lt;span class="mi">3000&lt;/span> &lt;span class="nx">by&lt;/span> &lt;span class="k">default&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">EXPOSE&lt;/span> &lt;span class="mi">3000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">The&lt;/span> &lt;span class="nx">base&lt;/span> &lt;span class="nx">image&lt;/span> &lt;span class="nx">already&lt;/span> &lt;span class="nx">has&lt;/span> &lt;span class="nx">CMD&lt;/span> &lt;span class="nx">set&lt;/span> &lt;span class="nx">to&lt;/span> &lt;span class="nx">run&lt;/span> &lt;span class="nx">BusyBox&lt;/span> &lt;span class="nx">httpd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">It&lt;/span> &lt;span class="nx">automatically&lt;/span> &lt;span class="nx">serves&lt;/span> &lt;span class="p">.&lt;/span>&lt;span class="nx">gz&lt;/span> &lt;span class="nx">files&lt;/span> &lt;span class="nx">when&lt;/span> &lt;span class="nx">Accept&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">Encoding&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="nx">gzip&lt;/span> &lt;span class="nx">is&lt;/span> &lt;span class="nx">present&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">No&lt;/span> &lt;span class="nx">additional&lt;/span> &lt;span class="nx">configuration&lt;/span> &lt;span class="nx">needed&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="nx">inherited&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="nx">base&lt;/span> &lt;span class="nx">image&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h3 id="2-dockerfile-top-1-react--nguyá»…n-há»¯u-phÆ°Æ¡ng">2. Dockerfile TOP 1 (React) â€“ Nguyá»…n Há»¯u PhÆ°Æ¡ng
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Ká»¹ thuáº­t&lt;/th>
&lt;th>Giáº£i thÃ­ch theo tÃ¡c giáº£&lt;/th>
&lt;th>Nguá»“n tham kháº£o&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>FROM SCRATCH &amp;amp; Static Linking&lt;/strong>&lt;/td>
&lt;td>Stage cuá»‘i &lt;code>scratch&lt;/code>, nÃªn Nginx pháº£i build tÄ©nh á»Ÿ Stage 2.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Tá»‘i Æ°u Binary Nginx&lt;/strong>&lt;/td>
&lt;td>Táº¯t &amp;gt;30 module, giáº£m binary ~76% (5.2 MB).&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>NÃ©n Binary (UPX)&lt;/strong>&lt;/td>
&lt;td>DÃ¹ng &lt;code>upx --best --lzma&lt;/code>, giáº£m thÃªm ~56%.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>NÃ©n Song Song&lt;/strong>&lt;/td>
&lt;td>Cháº¡y Gzip vÃ  Brotli song song Ä‘á»ƒ chuyá»ƒn táº£i CPU sang build-time.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Báº£o máº­t Image Base&lt;/strong>&lt;/td>
&lt;td>Pin SHA256 cho má»i base image.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Healthcheck tá»‘i giáº£n&lt;/strong>&lt;/td>
&lt;td>DÃ¹ng &lt;code>nginx -t -q&lt;/code>, khÃ´ng cáº§n curl/wget.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>Dockerfile TOP 1 (React)&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;span class="lnt">163
&lt;/span>&lt;span class="lnt">164
&lt;/span>&lt;span class="lnt">165
&lt;/span>&lt;span class="lnt">166
&lt;/span>&lt;span class="lnt">167
&lt;/span>&lt;span class="lnt">168
&lt;/span>&lt;span class="lnt">169
&lt;/span>&lt;span class="lnt">170
&lt;/span>&lt;span class="lnt">171
&lt;/span>&lt;span class="lnt">172
&lt;/span>&lt;span class="lnt">173
&lt;/span>&lt;span class="lnt">174
&lt;/span>&lt;span class="lnt">175
&lt;/span>&lt;span class="lnt">176
&lt;/span>&lt;span class="lnt">177
&lt;/span>&lt;span class="lnt">178
&lt;/span>&lt;span class="lnt">179
&lt;/span>&lt;span class="lnt">180
&lt;/span>&lt;span class="lnt">181
&lt;/span>&lt;span class="lnt">182
&lt;/span>&lt;span class="lnt">183
&lt;/span>&lt;span class="lnt">184
&lt;/span>&lt;span class="lnt">185
&lt;/span>&lt;span class="lnt">186
&lt;/span>&lt;span class="lnt">187
&lt;/span>&lt;span class="lnt">188
&lt;/span>&lt;span class="lnt">189
&lt;/span>&lt;span class="lnt">190
&lt;/span>&lt;span class="lnt">191
&lt;/span>&lt;span class="lnt">192
&lt;/span>&lt;span class="lnt">193
&lt;/span>&lt;span class="lnt">194
&lt;/span>&lt;span class="lnt">195
&lt;/span>&lt;span class="lnt">196
&lt;/span>&lt;span class="lnt">197
&lt;/span>&lt;span class="lnt">198
&lt;/span>&lt;span class="lnt">199
&lt;/span>&lt;span class="lnt">200
&lt;/span>&lt;span class="lnt">201
&lt;/span>&lt;span class="lnt">202
&lt;/span>&lt;span class="lnt">203
&lt;/span>&lt;span class="lnt">204
&lt;/span>&lt;span class="lnt">205
&lt;/span>&lt;span class="lnt">206
&lt;/span>&lt;span class="lnt">207
&lt;/span>&lt;span class="lnt">208
&lt;/span>&lt;span class="lnt">209
&lt;/span>&lt;span class="lnt">210
&lt;/span>&lt;span class="lnt">211
&lt;/span>&lt;span class="lnt">212
&lt;/span>&lt;span class="lnt">213
&lt;/span>&lt;span class="lnt">214
&lt;/span>&lt;span class="lnt">215
&lt;/span>&lt;span class="lnt">216
&lt;/span>&lt;span class="lnt">217
&lt;/span>&lt;span class="lnt">218
&lt;/span>&lt;span class="lnt">219
&lt;/span>&lt;span class="lnt">220
&lt;/span>&lt;span class="lnt">221
&lt;/span>&lt;span class="lnt">222
&lt;/span>&lt;span class="lnt">223
&lt;/span>&lt;span class="lnt">224
&lt;/span>&lt;span class="lnt">225
&lt;/span>&lt;span class="lnt">226
&lt;/span>&lt;span class="lnt">227
&lt;/span>&lt;span class="lnt">228
&lt;/span>&lt;span class="lnt">229
&lt;/span>&lt;span class="lnt">230
&lt;/span>&lt;span class="lnt">231
&lt;/span>&lt;span class="lnt">232
&lt;/span>&lt;span class="lnt">233
&lt;/span>&lt;span class="lnt">234
&lt;/span>&lt;span class="lnt">235
&lt;/span>&lt;span class="lnt">236
&lt;/span>&lt;span class="lnt">237
&lt;/span>&lt;span class="lnt">238
&lt;/span>&lt;span class="lnt">239
&lt;/span>&lt;span class="lnt">240
&lt;/span>&lt;span class="lnt">241
&lt;/span>&lt;span class="lnt">242
&lt;/span>&lt;span class="lnt">243
&lt;/span>&lt;span class="lnt">244
&lt;/span>&lt;span class="lnt">245
&lt;/span>&lt;span class="lnt">246
&lt;/span>&lt;span class="lnt">247
&lt;/span>&lt;span class="lnt">248
&lt;/span>&lt;span class="lnt">249
&lt;/span>&lt;span class="lnt">250
&lt;/span>&lt;span class="lnt">251
&lt;/span>&lt;span class="lnt">252
&lt;/span>&lt;span class="lnt">253
&lt;/span>&lt;span class="lnt">254
&lt;/span>&lt;span class="lnt">255
&lt;/span>&lt;span class="lnt">256
&lt;/span>&lt;span class="lnt">257
&lt;/span>&lt;span class="lnt">258
&lt;/span>&lt;span class="lnt">259
&lt;/span>&lt;span class="lnt">260
&lt;/span>&lt;span class="lnt">261
&lt;/span>&lt;span class="lnt">262
&lt;/span>&lt;span class="lnt">263
&lt;/span>&lt;span class="lnt">264
&lt;/span>&lt;span class="lnt">265
&lt;/span>&lt;span class="lnt">266
&lt;/span>&lt;span class="lnt">267
&lt;/span>&lt;span class="lnt">268
&lt;/span>&lt;span class="lnt">269
&lt;/span>&lt;span class="lnt">270
&lt;/span>&lt;span class="lnt">271
&lt;/span>&lt;span class="lnt">272
&lt;/span>&lt;span class="lnt">273
&lt;/span>&lt;span class="lnt">274
&lt;/span>&lt;span class="lnt">275
&lt;/span>&lt;span class="lnt">276
&lt;/span>&lt;span class="lnt">277
&lt;/span>&lt;span class="lnt">278
&lt;/span>&lt;span class="lnt">279
&lt;/span>&lt;span class="lnt">280
&lt;/span>&lt;span class="lnt">281
&lt;/span>&lt;span class="lnt">282
&lt;/span>&lt;span class="lnt">283
&lt;/span>&lt;span class="lnt">284
&lt;/span>&lt;span class="lnt">285
&lt;/span>&lt;span class="lnt">286
&lt;/span>&lt;span class="lnt">287
&lt;/span>&lt;span class="lnt">288
&lt;/span>&lt;span class="lnt">289
&lt;/span>&lt;span class="lnt">290
&lt;/span>&lt;span class="lnt">291
&lt;/span>&lt;span class="lnt">292
&lt;/span>&lt;span class="lnt">293
&lt;/span>&lt;span class="lnt">294
&lt;/span>&lt;span class="lnt">295
&lt;/span>&lt;span class="lnt">296
&lt;/span>&lt;span class="lnt">297
&lt;/span>&lt;span class="lnt">298
&lt;/span>&lt;span class="lnt">299
&lt;/span>&lt;span class="lnt">300
&lt;/span>&lt;span class="lnt">301
&lt;/span>&lt;span class="lnt">302
&lt;/span>&lt;span class="lnt">303
&lt;/span>&lt;span class="lnt">304
&lt;/span>&lt;span class="lnt">305
&lt;/span>&lt;span class="lnt">306
&lt;/span>&lt;span class="lnt">307
&lt;/span>&lt;span class="lnt">308
&lt;/span>&lt;span class="lnt">309
&lt;/span>&lt;span class="lnt">310
&lt;/span>&lt;span class="lnt">311
&lt;/span>&lt;span class="lnt">312
&lt;/span>&lt;span class="lnt">313
&lt;/span>&lt;span class="lnt">314
&lt;/span>&lt;span class="lnt">315
&lt;/span>&lt;span class="lnt">316
&lt;/span>&lt;span class="lnt">317
&lt;/span>&lt;span class="lnt">318
&lt;/span>&lt;span class="lnt">319
&lt;/span>&lt;span class="lnt">320
&lt;/span>&lt;span class="lnt">321
&lt;/span>&lt;span class="lnt">322
&lt;/span>&lt;span class="lnt">323
&lt;/span>&lt;span class="lnt">324
&lt;/span>&lt;span class="lnt">325
&lt;/span>&lt;span class="lnt">326
&lt;/span>&lt;span class="lnt">327
&lt;/span>&lt;span class="lnt">328
&lt;/span>&lt;span class="lnt">329
&lt;/span>&lt;span class="lnt">330
&lt;/span>&lt;span class="lnt">331
&lt;/span>&lt;span class="lnt">332
&lt;/span>&lt;span class="lnt">333
&lt;/span>&lt;span class="lnt">334
&lt;/span>&lt;span class="lnt">335
&lt;/span>&lt;span class="lnt">336
&lt;/span>&lt;span class="lnt">337
&lt;/span>&lt;span class="lnt">338
&lt;/span>&lt;span class="lnt">339
&lt;/span>&lt;span class="lnt">340
&lt;/span>&lt;span class="lnt">341
&lt;/span>&lt;span class="lnt">342
&lt;/span>&lt;span class="lnt">343
&lt;/span>&lt;span class="lnt">344
&lt;/span>&lt;span class="lnt">345
&lt;/span>&lt;span class="lnt">346
&lt;/span>&lt;span class="lnt">347
&lt;/span>&lt;span class="lnt">348
&lt;/span>&lt;span class="lnt">349
&lt;/span>&lt;span class="lnt">350
&lt;/span>&lt;span class="lnt">351
&lt;/span>&lt;span class="lnt">352
&lt;/span>&lt;span class="lnt">353
&lt;/span>&lt;span class="lnt">354
&lt;/span>&lt;span class="lnt">355
&lt;/span>&lt;span class="lnt">356
&lt;/span>&lt;span class="lnt">357
&lt;/span>&lt;span class="lnt">358
&lt;/span>&lt;span class="lnt">359
&lt;/span>&lt;span class="lnt">360
&lt;/span>&lt;span class="lnt">361
&lt;/span>&lt;span class="lnt">362
&lt;/span>&lt;span class="lnt">363
&lt;/span>&lt;span class="lnt">364
&lt;/span>&lt;span class="lnt">365
&lt;/span>&lt;span class="lnt">366
&lt;/span>&lt;span class="lnt">367
&lt;/span>&lt;span class="lnt">368
&lt;/span>&lt;span class="lnt">369
&lt;/span>&lt;span class="lnt">370
&lt;/span>&lt;span class="lnt">371
&lt;/span>&lt;span class="lnt">372
&lt;/span>&lt;span class="lnt">373
&lt;/span>&lt;span class="lnt">374
&lt;/span>&lt;span class="lnt">375
&lt;/span>&lt;span class="lnt">376
&lt;/span>&lt;span class="lnt">377
&lt;/span>&lt;span class="lnt">378
&lt;/span>&lt;span class="lnt">379
&lt;/span>&lt;span class="lnt">380
&lt;/span>&lt;span class="lnt">381
&lt;/span>&lt;span class="lnt">382
&lt;/span>&lt;span class="lnt">383
&lt;/span>&lt;span class="lnt">384
&lt;/span>&lt;span class="lnt">385
&lt;/span>&lt;span class="lnt">386
&lt;/span>&lt;span class="lnt">387
&lt;/span>&lt;span class="lnt">388
&lt;/span>&lt;span class="lnt">389
&lt;/span>&lt;span class="lnt">390
&lt;/span>&lt;span class="lnt">391
&lt;/span>&lt;span class="lnt">392
&lt;/span>&lt;span class="lnt">393
&lt;/span>&lt;span class="lnt">394
&lt;/span>&lt;span class="lnt">395
&lt;/span>&lt;span class="lnt">396
&lt;/span>&lt;span class="lnt">397
&lt;/span>&lt;span class="lnt">398
&lt;/span>&lt;span class="lnt">399
&lt;/span>&lt;span class="lnt">400
&lt;/span>&lt;span class="lnt">401
&lt;/span>&lt;span class="lnt">402
&lt;/span>&lt;span class="lnt">403
&lt;/span>&lt;span class="lnt">404
&lt;/span>&lt;span class="lnt">405
&lt;/span>&lt;span class="lnt">406
&lt;/span>&lt;span class="lnt">407
&lt;/span>&lt;span class="lnt">408
&lt;/span>&lt;span class="lnt">409
&lt;/span>&lt;span class="lnt">410
&lt;/span>&lt;span class="lnt">411
&lt;/span>&lt;span class="lnt">412
&lt;/span>&lt;span class="lnt">413
&lt;/span>&lt;span class="lnt">414
&lt;/span>&lt;span class="lnt">415
&lt;/span>&lt;span class="lnt">416
&lt;/span>&lt;span class="lnt">417
&lt;/span>&lt;span class="lnt">418
&lt;/span>&lt;span class="lnt">419
&lt;/span>&lt;span class="lnt">420
&lt;/span>&lt;span class="lnt">421
&lt;/span>&lt;span class="lnt">422
&lt;/span>&lt;span class="lnt">423
&lt;/span>&lt;span class="lnt">424
&lt;/span>&lt;span class="lnt">425
&lt;/span>&lt;span class="lnt">426
&lt;/span>&lt;span class="lnt">427
&lt;/span>&lt;span class="lnt">428
&lt;/span>&lt;span class="lnt">429
&lt;/span>&lt;span class="lnt">430
&lt;/span>&lt;span class="lnt">431
&lt;/span>&lt;span class="lnt">432
&lt;/span>&lt;span class="lnt">433
&lt;/span>&lt;span class="lnt">434
&lt;/span>&lt;span class="lnt">435
&lt;/span>&lt;span class="lnt">436
&lt;/span>&lt;span class="lnt">437
&lt;/span>&lt;span class="lnt">438
&lt;/span>&lt;span class="lnt">439
&lt;/span>&lt;span class="lnt">440
&lt;/span>&lt;span class="lnt">441
&lt;/span>&lt;span class="lnt">442
&lt;/span>&lt;span class="lnt">443
&lt;/span>&lt;span class="lnt">444
&lt;/span>&lt;span class="lnt">445
&lt;/span>&lt;span class="lnt">446
&lt;/span>&lt;span class="lnt">447
&lt;/span>&lt;span class="lnt">448
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># syntax=docker/dockerfile:1.7&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Multi-arch support: Automatically provided by buildx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">BUILDPLATFORM&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">TARGETPLATFORM&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">TARGETARCH&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">BUILD_DATE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">GIT_COMMIT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">unknown&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">NGINX_VERSION&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">1.26&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">NODE_VERSION&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">20&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">ALPINE_VERSION&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">3.20&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ==============================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Stage 1: Application Build&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ==============================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">NODE_VERSION&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">alpine&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">sha256&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">d5e8a8a51bc341fd5f2eed6d91455c3a3d147e91a14298fc564b5dc519c1666&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">builder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Setup pnpm with corepack&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ENV&lt;/span> &lt;span class="n">PNPM_HOME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/pnpm&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;$PNPM_HOME:$PATH&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">corepack&lt;/span> &lt;span class="n">enable&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">corepack&lt;/span> &lt;span class="n">prepare&lt;/span> &lt;span class="n">pnpm&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">9.12&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">activate&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Install dependencies with cache mount&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">package&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span> &lt;span class="n">pnpm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lock&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">npmrc&lt;/span> &lt;span class="o">./&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">mount&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">pnpm&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">pnpm&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">store&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pnpm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">frozen&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lockfile&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">prefer&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">offline&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy source and build configuration&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">tsconfig&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span> &lt;span class="n">tsconfig&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span> &lt;span class="n">vite&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ts&lt;/span> &lt;span class="o">./&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">postcss&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">js&lt;/span> &lt;span class="n">tailwind&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ts&lt;/span> &lt;span class="n">biome&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span> &lt;span class="o">./&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">index&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span> &lt;span class="o">./&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">public&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">public&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">src&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">src&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Build and clean artifacts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ENV&lt;/span> &lt;span class="n">NODE_ENV&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">production&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">pnpm&lt;/span> &lt;span class="n">build&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">find&lt;/span> &lt;span class="n">dist&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="n">f&lt;/span> \&lt;span class="p">(&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s2">&amp;#34;*.map&amp;#34;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s2">&amp;#34;.*&amp;#34;&lt;/span> \&lt;span class="p">)&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">delete&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">rm&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span> &lt;span class="n">dist&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">stats&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ==============================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Stage 2: Static Nginx Binary Builder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ==============================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">alpine&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">ALPINE_VERSION&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">sha256&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">765942&lt;/span>&lt;span class="n">a4039992336de8dd5db680586e1a206607dd06170ff0a37267a9e01958&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">nginx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">builder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">NGINX_VERSION&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">TARGETPLATFORM&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">BUILDPLATFORM&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ENV&lt;/span> &lt;span class="n">NGINX_SHA256&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">627&lt;/span>&lt;span class="n">fe086209bba80a2853a0add9d958d7ebbdffa1a8467a5784c9a6b4f03d738&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Log build platform info for multi-arch&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;Building on $BUILDPLATFORM for $TARGETPLATFORM&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Install build dependencies&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">apk&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cache&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">gcc&lt;/span> &lt;span class="n">g&lt;/span>&lt;span class="o">++&lt;/span> &lt;span class="n">musl&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dev&lt;/span> &lt;span class="n">make&lt;/span> &lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">headers&lt;/span> &lt;span class="n">curl&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pcre&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dev&lt;/span> &lt;span class="n">pcre2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dev&lt;/span> &lt;span class="n">zlib&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dev&lt;/span> &lt;span class="n">zlib&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="k">static&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">openssl&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dev&lt;/span> &lt;span class="n">openssl&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">libs&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="k">static&lt;/span> &lt;span class="n">upx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Download and verify nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">curl&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">fSL&lt;/span> &lt;span class="s2">&amp;#34;https://nginx.org/download/nginx-${NGINX_VERSION}.tar.gz&amp;#34;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;${NGINX_SHA256} nginx.tar.gz&amp;#34;&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">sha256sum&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">c&lt;/span> &lt;span class="o">-&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Build fully static nginx with minimal modules&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">tar&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">xzf&lt;/span> &lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cd&lt;/span> &lt;span class="s2">&amp;#34;nginx-${NGINX_VERSION}&amp;#34;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">./&lt;/span>&lt;span class="n">configure&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">prefix&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">conf&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">pid&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pid&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">lock&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lock&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">error&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">stderr&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">http&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">stdout&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nobody&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">group&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nobody&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Performance features&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">with&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">threads&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">with&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">file&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">aio&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">with&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_ssl_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">with&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_v2_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">with&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_gzip_static_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">with&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_stub_status_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">with&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pcre&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">with&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">pcre&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">jit&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Static linking and optimization&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">with&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;-static -Os -ffunction-sections -fdata-sections&amp;#39;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">with&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">ld&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">opt&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;-static -Wl,--gc-sections&amp;#39;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Disable unnecessary modules&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_charset_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_ssi_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_userid_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_auth_basic_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_mirror_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_autoindex_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_geo_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_map_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_split_clients_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_referer_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_rewrite_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_proxy_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_fastcgi_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_uwsgi_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_scgi_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_grpc_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_memcached_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_limit_conn_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_limit_req_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_empty_gif_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_browser_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_upstream_hash_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_upstream_ip_hash_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_upstream_least_conn_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_upstream_random_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_upstream_keepalive_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_upstream_zone_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mail_pop3_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mail_imap_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mail_smtp_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stream_limit_conn_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stream_access_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stream_geo_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stream_map_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stream_split_clients_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stream_return_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stream_set_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stream_upstream_hash_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stream_upstream_least_conn_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stream_upstream_random_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stream_upstream_zone_module&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">make&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="s2">&amp;#34;$(nproc)&amp;#34;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">make&lt;/span> &lt;span class="n">install&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Optimize binary: strip symbols + UPX compression&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">strip&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">all&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">upx&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">best&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">lzma&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">V&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ==============================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Stage 3: Asset Compression&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ==============================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">alpine&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">ALPINE_VERSION&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">sha256&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">765942&lt;/span>&lt;span class="n">a4039992336de8dd5db680586e1a206607dd06170ff0a37267a9e01958&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">compressor&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">apk&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cache&lt;/span> &lt;span class="n">brotli&lt;/span> &lt;span class="n">gzip&lt;/span> &lt;span class="n">findutils&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dist&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">dist&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Parallel compression: gzip + brotli for all text-based assets&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">find&lt;/span> &lt;span class="n">dist&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="n">f&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> \&lt;span class="p">(&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s2">&amp;#34;*.html&amp;#34;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s2">&amp;#34;*.css&amp;#34;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s2">&amp;#34;*.js&amp;#34;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s2">&amp;#34;*.json&amp;#34;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s2">&amp;#34;*.svg&amp;#34;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s2">&amp;#34;*.xml&amp;#34;&lt;/span> \&lt;span class="p">)&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="n">print0&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">xargs&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">P&lt;/span>&lt;span class="s2">&amp;#34;$(nproc)&amp;#34;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">I&lt;/span> &lt;span class="p">{}&lt;/span> &lt;span class="n">sh&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">c&lt;/span> &lt;span class="s1">&amp;#39;gzip -9 -k -f &amp;#34;{}&amp;#34; &amp;amp;&amp;amp; brotli -q 11 -f &amp;#34;{}&amp;#34;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ==============================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Stage 4: Minimal Filesystem Preparation&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ==============================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">alpine&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">ALPINE_VERSION&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">sha256&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">765942&lt;/span>&lt;span class="n">a4039992336de8dd5db680586e1a206607dd06170ff0a37267a9e01958&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">rootfs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Create directory structure&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">mkdir&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">conf&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">html&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">client_body&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">fastcgi&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">uwsgi&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">scgi&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="n">_temp&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">chmod&lt;/span> &lt;span class="mi">1777&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Create minimal user database (nobody user)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;nobody:x:65534:65534:nobody:/:/sbin/nologin&amp;#34;&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">passwd&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;nobody:x:65534:&amp;#34;&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">group&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy nginx configuration&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">conf&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mime&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">types&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mime&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">types&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">compressor&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dist&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Create main nginx.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">cat&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="s1">&amp;#39;EOF&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">worker_processes&lt;/span> &lt;span class="n">auto&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">error_log&lt;/span> &lt;span class="n">stderr&lt;/span> &lt;span class="n">warn&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pid&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pid&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">events&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">worker_connections&lt;/span> &lt;span class="mi">1024&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">use&lt;/span> &lt;span class="n">epoll&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">multi_accept&lt;/span> &lt;span class="n">on&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">http&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">include&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mime&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">types&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">default_type&lt;/span> &lt;span class="n">application&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">octet&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stream&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">access_log&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">stdout&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Performance optimizations&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sendfile&lt;/span> &lt;span class="n">on&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">tcp_nopush&lt;/span> &lt;span class="n">on&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">tcp_nodelay&lt;/span> &lt;span class="n">on&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">keepalive_timeout&lt;/span> &lt;span class="mi">65&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">server_tokens&lt;/span> &lt;span class="n">off&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Compression&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">gzip&lt;/span> &lt;span class="n">on&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">gzip_static&lt;/span> &lt;span class="n">on&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">gzip_vary&lt;/span> &lt;span class="n">on&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">gzip_types&lt;/span> &lt;span class="n">text&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">plain&lt;/span> &lt;span class="n">text&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">css&lt;/span> &lt;span class="n">application&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">json&lt;/span> &lt;span class="n">application&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">javascript&lt;/span> &lt;span class="n">text&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">xml&lt;/span> &lt;span class="n">application&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">xml&lt;/span> &lt;span class="n">image&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">svg&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">xml&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">include&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">conf&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/*.&lt;/span>&lt;span class="n">conf&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Set proper ownership&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">chown&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">R&lt;/span> &lt;span class="mi">65534&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">65534&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">html&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ==============================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Stage 5: Final Distroless Image (FROM SCRATCH)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ==============================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">scratch&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Re-declare build args for metadata&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">BUILD_DATE&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">GIT_COMMIT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">unknown&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># OCI metadata labels&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">LABEL&lt;/span> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">title&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Vite React - Distroless&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">description&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Distroless minimal image (&amp;lt;6MB) - UPX compressed&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">version&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2.2.0-distroless-upx&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">created&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;${BUILD_DATE}&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">revision&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;${GIT_COMMIT}&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">base&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;scratch&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">source&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;https://github.com/riipandi/vite-react-template&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">licenses&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;MIT OR Apache-2.0&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">maintainer&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;contest-2025-optimized&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy static nginx binary and minimal filesystem&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">rootfs&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">rootfs&lt;/span> &lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Run as non-root user (nobody = 65534)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">USER&lt;/span> &lt;span class="mi">65534&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">65534&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">EXPOSE&lt;/span> &lt;span class="mi">3000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Lightweight healthcheck using nginx config test&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">HEALTHCHECK&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">interval&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">timeout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">start&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">period&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">retries&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">CMD&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;/usr/sbin/nginx&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;-t&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;-q&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">STOPSIGNAL&lt;/span> &lt;span class="n">SIGTERM&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ENTRYPOINT&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;/usr/sbin/nginx&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">CMD&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;-g&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;daemon off;&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h3 id="3-dockerfile-top-2-react--tráº§n-quá»‘c-toÃ n">3. Dockerfile TOP 2 (React) â€“ Tráº§n Quá»‘c ToÃ n
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Ká»¹ thuáº­t&lt;/th>
&lt;th>Giáº£i thÃ­ch theo tÃ¡c giáº£&lt;/th>
&lt;th>Nguá»“n tham kháº£o&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>Healthcheck Native C&lt;/strong>&lt;/td>
&lt;td>Viáº¿t chÆ°Æ¡ng trÃ¬nh C má»Ÿ socket Ä‘áº¿n cá»•ng 3000, tráº£ vá» exit code 0/1.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Thu tháº­p Shared Library&lt;/strong>&lt;/td>
&lt;td>DÃ¹ng &lt;code>ldd&lt;/code> Ä‘á»ƒ copy Ä‘Ãºng thÆ° viá»‡n cáº§n cho Nginx khi cháº¡y trong &lt;code>scratch&lt;/code>.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Cáº¥u hÃ¬nh Nginx tá»‘i giáº£n&lt;/strong>&lt;/td>
&lt;td>Táº¯t &lt;code>http_rewrite&lt;/code>, &lt;code>http_proxy&lt;/code>, &lt;code>mail_*&lt;/code>&amp;hellip; vÃ¬ chá»‰ phá»¥c vá»¥ static.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Non-root User&lt;/strong>&lt;/td>
&lt;td>Táº¡o user UID 101 cháº¡y trong image Ä‘á»ƒ tÄƒng báº£o máº­t.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>Dockerfile TOP 2 (React)&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;span class="lnt">163
&lt;/span>&lt;span class="lnt">164
&lt;/span>&lt;span class="lnt">165
&lt;/span>&lt;span class="lnt">166
&lt;/span>&lt;span class="lnt">167
&lt;/span>&lt;span class="lnt">168
&lt;/span>&lt;span class="lnt">169
&lt;/span>&lt;span class="lnt">170
&lt;/span>&lt;span class="lnt">171
&lt;/span>&lt;span class="lnt">172
&lt;/span>&lt;span class="lnt">173
&lt;/span>&lt;span class="lnt">174
&lt;/span>&lt;span class="lnt">175
&lt;/span>&lt;span class="lnt">176
&lt;/span>&lt;span class="lnt">177
&lt;/span>&lt;span class="lnt">178
&lt;/span>&lt;span class="lnt">179
&lt;/span>&lt;span class="lnt">180
&lt;/span>&lt;span class="lnt">181
&lt;/span>&lt;span class="lnt">182
&lt;/span>&lt;span class="lnt">183
&lt;/span>&lt;span class="lnt">184
&lt;/span>&lt;span class="lnt">185
&lt;/span>&lt;span class="lnt">186
&lt;/span>&lt;span class="lnt">187
&lt;/span>&lt;span class="lnt">188
&lt;/span>&lt;span class="lnt">189
&lt;/span>&lt;span class="lnt">190
&lt;/span>&lt;span class="lnt">191
&lt;/span>&lt;span class="lnt">192
&lt;/span>&lt;span class="lnt">193
&lt;/span>&lt;span class="lnt">194
&lt;/span>&lt;span class="lnt">195
&lt;/span>&lt;span class="lnt">196
&lt;/span>&lt;span class="lnt">197
&lt;/span>&lt;span class="lnt">198
&lt;/span>&lt;span class="lnt">199
&lt;/span>&lt;span class="lnt">200
&lt;/span>&lt;span class="lnt">201
&lt;/span>&lt;span class="lnt">202
&lt;/span>&lt;span class="lnt">203
&lt;/span>&lt;span class="lnt">204
&lt;/span>&lt;span class="lnt">205
&lt;/span>&lt;span class="lnt">206
&lt;/span>&lt;span class="lnt">207
&lt;/span>&lt;span class="lnt">208
&lt;/span>&lt;span class="lnt">209
&lt;/span>&lt;span class="lnt">210
&lt;/span>&lt;span class="lnt">211
&lt;/span>&lt;span class="lnt">212
&lt;/span>&lt;span class="lnt">213
&lt;/span>&lt;span class="lnt">214
&lt;/span>&lt;span class="lnt">215
&lt;/span>&lt;span class="lnt">216
&lt;/span>&lt;span class="lnt">217
&lt;/span>&lt;span class="lnt">218
&lt;/span>&lt;span class="lnt">219
&lt;/span>&lt;span class="lnt">220
&lt;/span>&lt;span class="lnt">221
&lt;/span>&lt;span class="lnt">222
&lt;/span>&lt;span class="lnt">223
&lt;/span>&lt;span class="lnt">224
&lt;/span>&lt;span class="lnt">225
&lt;/span>&lt;span class="lnt">226
&lt;/span>&lt;span class="lnt">227
&lt;/span>&lt;span class="lnt">228
&lt;/span>&lt;span class="lnt">229
&lt;/span>&lt;span class="lnt">230
&lt;/span>&lt;span class="lnt">231
&lt;/span>&lt;span class="lnt">232
&lt;/span>&lt;span class="lnt">233
&lt;/span>&lt;span class="lnt">234
&lt;/span>&lt;span class="lnt">235
&lt;/span>&lt;span class="lnt">236
&lt;/span>&lt;span class="lnt">237
&lt;/span>&lt;span class="lnt">238
&lt;/span>&lt;span class="lnt">239
&lt;/span>&lt;span class="lnt">240
&lt;/span>&lt;span class="lnt">241
&lt;/span>&lt;span class="lnt">242
&lt;/span>&lt;span class="lnt">243
&lt;/span>&lt;span class="lnt">244
&lt;/span>&lt;span class="lnt">245
&lt;/span>&lt;span class="lnt">246
&lt;/span>&lt;span class="lnt">247
&lt;/span>&lt;span class="lnt">248
&lt;/span>&lt;span class="lnt">249
&lt;/span>&lt;span class="lnt">250
&lt;/span>&lt;span class="lnt">251
&lt;/span>&lt;span class="lnt">252
&lt;/span>&lt;span class="lnt">253
&lt;/span>&lt;span class="lnt">254
&lt;/span>&lt;span class="lnt">255
&lt;/span>&lt;span class="lnt">256
&lt;/span>&lt;span class="lnt">257
&lt;/span>&lt;span class="lnt">258
&lt;/span>&lt;span class="lnt">259
&lt;/span>&lt;span class="lnt">260
&lt;/span>&lt;span class="lnt">261
&lt;/span>&lt;span class="lnt">262
&lt;/span>&lt;span class="lnt">263
&lt;/span>&lt;span class="lnt">264
&lt;/span>&lt;span class="lnt">265
&lt;/span>&lt;span class="lnt">266
&lt;/span>&lt;span class="lnt">267
&lt;/span>&lt;span class="lnt">268
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># STAGE 1: The Builder (Custom Nginx Build) &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">alpine&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">3.19&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">builder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Multi-arch support&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">TARGETARCH&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">apk&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cache&lt;/span> &lt;span class="n">build&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">base&lt;/span> &lt;span class="n">pcre2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dev&lt;/span> &lt;span class="n">zlib&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dev&lt;/span> &lt;span class="n">openssl&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dev&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Download and verify Nginx source with SHA256 checksum&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">NGINX_VERSION&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">1.27&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ARG&lt;/span> &lt;span class="n">NGINX_SHA256&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">b7230e3cf87eaa2d4b0bc56aadc920a960c7873b9991a1b66ffcc08fc650129c&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ADD&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">checksum&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">sha256&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">NGINX_SHA256&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">org&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">-$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">NGINX_VERSION&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">tar&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">xzf&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">-$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">NGINX_VERSION&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">C&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Configure Nginx with minimal modules (static file serving only)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">cd&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">-$&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="n">NGINX_VERSION&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">./&lt;/span>&lt;span class="n">configure&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">prefix&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">conf&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">pid&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pid&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">error&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">stderr&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">http&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">dev&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">stdout&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nginx&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">group&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nginx&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_rewrite_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_gzip_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_proxy_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_fastcgi_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_uwsgi_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_scgi_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mail_pop3_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mail_imap_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mail_smtp_module&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">make&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">make&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">rm&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">rf&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">/*&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">strip&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Create file Nginx main config (include snippet file)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="p">{&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mkdir&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">conf&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cat&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="n">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">events&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">worker_connections&lt;/span> &lt;span class="mi">1024&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">http&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">include&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mime&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">types&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">client_body_temp_path&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">client_body_temp&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">include&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">conf&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">mkdir&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">conf&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cat&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mime&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">types&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="s1">&amp;#39;EOF&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">types&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">text&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">html&lt;/span> &lt;span class="n">html&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">text&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">css&lt;/span> &lt;span class="n">css&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">application&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">javascript&lt;/span> &lt;span class="n">js&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">image&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">png&lt;/span> &lt;span class="n">png&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">application&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">json&lt;/span> &lt;span class="n">json&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Create minimal user/group files (no full /etc/passwd needed in scratch image)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;nginx:x:101:101:nginx:/var/cache/nginx:/sbin/nologin&amp;#34;&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">passwd&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;nginx:x:101:&amp;#34;&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">group&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Build static healthcheck binary (no external dependencies like wget/curl needed)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="p">{&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cat&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">healthcheck&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">c&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">gcc&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="k">static&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">O2&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">healthcheck&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">healthcheck&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="n">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#include &amp;lt;netdb.h&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#include &amp;lt;unistd.h&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#include &amp;lt;sys/socket.h&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#include &amp;lt;netinet/in.h&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="ne">int&lt;/span> &lt;span class="n">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">struct&lt;/span> &lt;span class="n">hostent&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">h&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">gethostbyname&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;localhost&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">h&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ne">int&lt;/span> &lt;span class="n">sock&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">socket&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">AF_INET&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">SOCK_STREAM&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">sock&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">struct&lt;/span> &lt;span class="n">sockaddr_in&lt;/span> &lt;span class="n">addr&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">addr&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sin_family&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">AF_INET&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">addr&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sin_port&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">htons&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3000&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">addr&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">sin_addr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">struct&lt;/span> &lt;span class="n">in_addr&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">h&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">h_addr_list&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="ne">int&lt;/span> &lt;span class="n">result&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">connect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sock&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">struct&lt;/span> &lt;span class="n">sockaddr&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">addr&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">sizeof&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">addr&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">close&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">sock&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">result&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="err">?&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Collect shared libraries required by Nginx (supports multi-arch)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">mkdir&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">staging&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">staging&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ldd&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">tr&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="s1">&amp;#39;[:space:]&amp;#39;&lt;/span> &lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">grep&lt;/span> &lt;span class="s1">&amp;#39;^/&amp;#39;&lt;/span> &lt;span class="o">|&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">xargs&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">I&lt;/span> &lt;span class="s1">&amp;#39;{}&amp;#39;&lt;/span> &lt;span class="n">sh&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">c&lt;/span> &lt;span class="s1">&amp;#39;mkdir -p /staging$(dirname {}) &amp;amp;&amp;amp; cp -L {} /staging$(dirname {})&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Create mount point directories for tmpfs (writable dirs in read-only container)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">mkdir&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">chown&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">R&lt;/span> &lt;span class="mi">101&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">101&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># STAGE 2: App Builder (Build React App) &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">20.11&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">alpine3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">19&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">app_builder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">corepack&lt;/span> &lt;span class="n">enable&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">corepack&lt;/span> &lt;span class="n">prepare&lt;/span> &lt;span class="n">pnpm&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">9.12&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">activate&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy dependencies files first for caching&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">package&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span> &lt;span class="n">pnpm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lock&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span> &lt;span class="o">./&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">mount&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pnpm&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">store&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">sharing&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">locked&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pnpm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">frozen&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lockfile&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">prefer&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">offline&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy config files&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">tsconfig&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span> &lt;span class="n">tsconfig&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span> &lt;span class="n">vite&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ts&lt;/span> &lt;span class="o">./&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">postcss&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">js&lt;/span> &lt;span class="n">tailwind&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ts&lt;/span> &lt;span class="n">index&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span> &lt;span class="o">./&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy source code (avoid copying tests, stories, etc.)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">public&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">public&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">src&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">pnpm&lt;/span> &lt;span class="n">build&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">test&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">f&lt;/span> &lt;span class="n">dist&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">echo&lt;/span> &lt;span class="s2">&amp;#34;Build failed&amp;#34;&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">exit&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># STAGE 3: Production Image (FROM scratch) &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">scratch&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">LABEL&lt;/span> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">title&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Vite React Template&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">description&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Minimal Vite React SPA with custom Nginx built from scratch&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">version&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;1.0.0&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">licenses&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;MIT&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">base&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;scratch&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">authors&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Contest 2025&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy file user/group&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">passwd&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">group&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy mount points to image&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">chown&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">101&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">101&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">chown&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">101&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">101&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">chown&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">101&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">101&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy Nginx and shared libraries&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">staging&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy main Nginx config (just created)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy file config from project into included location&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">conf&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">default&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy remaining necessary files&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mime&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">types&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mime&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">types&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">app_builder&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dist&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">healthcheck&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">healthcheck&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">USER&lt;/span> &lt;span class="mi">101&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">101&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">EXPOSE&lt;/span> &lt;span class="mi">3000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">HEALTHCHECK&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">interval&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">timeout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">retries&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">CMD&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;/healthcheck&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">CMD&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;/usr/sbin/nginx&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;-g&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;daemon off;&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h3 id="4-dockerfile-top-3-react--go--fasthttp">4. Dockerfile TOP 3 (React) â€“ Go + FastHTTP
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Ká»¹ thuáº­t&lt;/th>
&lt;th>Giáº£i thÃ­ch&lt;/th>
&lt;th>Nguá»“n tham kháº£o&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>Go Server (FastHTTP)&lt;/strong>&lt;/td>
&lt;td>DÃ¹ng &lt;code>github.com/valyala/fasthttp&lt;/code> thay cho Nginx.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Asset Embedding&lt;/strong>&lt;/td>
&lt;td>&lt;code>//go:embed dist&lt;/code> Ä‘á»ƒ nhÃºng toÃ n bá»™ asset vÃ o binary.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>NÃ©n Binary tá»‘i Ä‘a&lt;/strong>&lt;/td>
&lt;td>Build tÄ©nh, strip, rá»“i &lt;code>upx --ultra-brute --lzma&lt;/code>.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Healthcheck tÃ­ch há»£p&lt;/strong>&lt;/td>
&lt;td>Binary Go tá»± Ä‘áº£m nhiá»‡m khi cháº¡y &lt;code>-health&lt;/code>.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>Dockerfile TOP 3 (React)&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;span class="lnt">163
&lt;/span>&lt;span class="lnt">164
&lt;/span>&lt;span class="lnt">165
&lt;/span>&lt;span class="lnt">166
&lt;/span>&lt;span class="lnt">167
&lt;/span>&lt;span class="lnt">168
&lt;/span>&lt;span class="lnt">169
&lt;/span>&lt;span class="lnt">170
&lt;/span>&lt;span class="lnt">171
&lt;/span>&lt;span class="lnt">172
&lt;/span>&lt;span class="lnt">173
&lt;/span>&lt;span class="lnt">174
&lt;/span>&lt;span class="lnt">175
&lt;/span>&lt;span class="lnt">176
&lt;/span>&lt;span class="lnt">177
&lt;/span>&lt;span class="lnt">178
&lt;/span>&lt;span class="lnt">179
&lt;/span>&lt;span class="lnt">180
&lt;/span>&lt;span class="lnt">181
&lt;/span>&lt;span class="lnt">182
&lt;/span>&lt;span class="lnt">183
&lt;/span>&lt;span class="lnt">184
&lt;/span>&lt;span class="lnt">185
&lt;/span>&lt;span class="lnt">186
&lt;/span>&lt;span class="lnt">187
&lt;/span>&lt;span class="lnt">188
&lt;/span>&lt;span class="lnt">189
&lt;/span>&lt;span class="lnt">190
&lt;/span>&lt;span class="lnt">191
&lt;/span>&lt;span class="lnt">192
&lt;/span>&lt;span class="lnt">193
&lt;/span>&lt;span class="lnt">194
&lt;/span>&lt;span class="lnt">195
&lt;/span>&lt;span class="lnt">196
&lt;/span>&lt;span class="lnt">197
&lt;/span>&lt;span class="lnt">198
&lt;/span>&lt;span class="lnt">199
&lt;/span>&lt;span class="lnt">200
&lt;/span>&lt;span class="lnt">201
&lt;/span>&lt;span class="lnt">202
&lt;/span>&lt;span class="lnt">203
&lt;/span>&lt;span class="lnt">204
&lt;/span>&lt;span class="lnt">205
&lt;/span>&lt;span class="lnt">206
&lt;/span>&lt;span class="lnt">207
&lt;/span>&lt;span class="lnt">208
&lt;/span>&lt;span class="lnt">209
&lt;/span>&lt;span class="lnt">210
&lt;/span>&lt;span class="lnt">211
&lt;/span>&lt;span class="lnt">212
&lt;/span>&lt;span class="lnt">213
&lt;/span>&lt;span class="lnt">214
&lt;/span>&lt;span class="lnt">215
&lt;/span>&lt;span class="lnt">216
&lt;/span>&lt;span class="lnt">217
&lt;/span>&lt;span class="lnt">218
&lt;/span>&lt;span class="lnt">219
&lt;/span>&lt;span class="lnt">220
&lt;/span>&lt;span class="lnt">221
&lt;/span>&lt;span class="lnt">222
&lt;/span>&lt;span class="lnt">223
&lt;/span>&lt;span class="lnt">224
&lt;/span>&lt;span class="lnt">225
&lt;/span>&lt;span class="lnt">226
&lt;/span>&lt;span class="lnt">227
&lt;/span>&lt;span class="lnt">228
&lt;/span>&lt;span class="lnt">229
&lt;/span>&lt;span class="lnt">230
&lt;/span>&lt;span class="lnt">231
&lt;/span>&lt;span class="lnt">232
&lt;/span>&lt;span class="lnt">233
&lt;/span>&lt;span class="lnt">234
&lt;/span>&lt;span class="lnt">235
&lt;/span>&lt;span class="lnt">236
&lt;/span>&lt;span class="lnt">237
&lt;/span>&lt;span class="lnt">238
&lt;/span>&lt;span class="lnt">239
&lt;/span>&lt;span class="lnt">240
&lt;/span>&lt;span class="lnt">241
&lt;/span>&lt;span class="lnt">242
&lt;/span>&lt;span class="lnt">243
&lt;/span>&lt;span class="lnt">244
&lt;/span>&lt;span class="lnt">245
&lt;/span>&lt;span class="lnt">246
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Stage 1: Build frontend&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">20&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">alpine&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">builder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">corepack&lt;/span> &lt;span class="n">enable&lt;/span> &lt;span class="n">pnpm&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">package&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span> &lt;span class="n">pnpm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lock&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span> &lt;span class="o">./&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">pnpm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">frozen&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lockfile&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">tsconfig&lt;/span>&lt;span class="o">*.&lt;/span>&lt;span class="n">json&lt;/span> &lt;span class="n">vite&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ts&lt;/span> &lt;span class="n">postcss&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">js&lt;/span> &lt;span class="n">tailwind&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ts&lt;/span> &lt;span class="o">./&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">index&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span> &lt;span class="o">./&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">src&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">src&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">public&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">public&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">pnpm&lt;/span> &lt;span class="n">build&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Clean up dist (remove source maps, licenses, stats, robots.txt, etc.)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">find&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dist&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="n">f&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;*.map&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">delete&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">find&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dist&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="n">f&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;*.LICENSE.*&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">delete&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">find&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dist&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="n">f&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;*.txt&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">delete&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">find&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dist&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="n">f&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;stats.html&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">delete&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">find&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dist&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="n">f&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;robots.txt&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">delete&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">find&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dist&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="n">f&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;_redirects&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">delete&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Stage 2: Build Go server with FastHTTP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">golang&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">1.21&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">alpine&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">go&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">builder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># CÃ i strip vÃ  upx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">apk&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cache&lt;/span> &lt;span class="n">binutils&lt;/span> &lt;span class="n">upx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy dist files Ä‘á»ƒ embed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dist&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">dist&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Táº¡o go.mod vÃ  main.go vá»›i FastHTTP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">cat&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">go&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">mod&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="s1">&amp;#39;GOMOD&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">module&lt;/span> &lt;span class="n">server&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">go&lt;/span> &lt;span class="mf">1.21&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">require&lt;/span> &lt;span class="n">github&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">valyala&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">fasthttp&lt;/span> &lt;span class="n">v1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">51.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">GOMOD&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">cat&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">main&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">go&lt;/span> &lt;span class="o">&amp;lt;&amp;lt;&lt;/span> &lt;span class="s1">&amp;#39;GOSRC&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">package&lt;/span> &lt;span class="n">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;embed&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;path&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;strings&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;github.com/valyala/fasthttp&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">//&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">embed&lt;/span> &lt;span class="n">dist&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="n">distFiles&lt;/span> &lt;span class="n">embed&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">FS&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">func&lt;/span> &lt;span class="n">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Getenv&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;PORT&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">port&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">port&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;3000&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">FastHTTP&lt;/span> &lt;span class="n">handler&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">handler&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="k">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ctx&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">fasthttp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">RequestCtx&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pathStr&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">string&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ctx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Path&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">Check&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">it&lt;/span>&lt;span class="s1">&amp;#39;s a static asset (has file extension)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">strings&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Contains&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Base&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pathStr&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="s2">&amp;#34;.&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">Try&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">serve&lt;/span> &lt;span class="k">static&lt;/span> &lt;span class="n">file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">distFiles&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;dist&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">pathStr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">defer&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">Set&lt;/span> &lt;span class="n">content&lt;/span> &lt;span class="n">type&lt;/span> &lt;span class="n">based&lt;/span> &lt;span class="n">on&lt;/span> &lt;span class="n">extension&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ext&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">path&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Ext&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pathStr&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">switch&lt;/span> &lt;span class="n">ext&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="s2">&amp;#34;.js&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ctx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">SetContentType&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;application/javascript&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="s2">&amp;#34;.css&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ctx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">SetContentType&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;text/css&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="s2">&amp;#34;.svg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ctx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">SetContentType&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;image/svg+xml&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="s2">&amp;#34;.png&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ctx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">SetContentType&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;image/png&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="s2">&amp;#34;.jpg&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;.jpeg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ctx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">SetContentType&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;image/jpeg&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">case&lt;/span> &lt;span class="s2">&amp;#34;.ico&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ctx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">SetContentType&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;image/x-icon&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">default&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ctx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">SetContentType&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;application/octet-stream&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">Copy&lt;/span> &lt;span class="n">file&lt;/span> &lt;span class="n">content&lt;/span> &lt;span class="n">to&lt;/span> &lt;span class="n">response&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ctx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Response&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">SetBodyStream&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">SPA&lt;/span> &lt;span class="n">fallback&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">serve&lt;/span> &lt;span class="n">index&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">all&lt;/span> &lt;span class="n">routes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">distFiles&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Open&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;dist/index.html&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ctx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">SetStatusCode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">404&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ctx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">SetBodyString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Not Found&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">defer&lt;/span> &lt;span class="n">file&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ctx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">SetContentType&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;text/html; charset=utf-8&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ctx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Response&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">SetBodyStream&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">file&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">//&lt;/span> &lt;span class="n">healthcheck&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Args&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;-health&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="p">:&lt;/span>&lt;span class="o">=&lt;/span> &lt;span class="n">fasthttp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nil&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;http://127.0.0.1:&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">port&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">os&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Exit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">log&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;FastHTTP server on :&lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">port&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">log&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Fatal&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fasthttp&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ListenAndServe&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">port&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">handler&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">GOSRC&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Download dependencies vÃ  build vá»›i tá»‘i Æ°u extreme&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">go&lt;/span> &lt;span class="n">mod&lt;/span> &lt;span class="n">tidy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">CGO_ENABLED&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="n">GOOS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">linux&lt;/span> &lt;span class="n">go&lt;/span> &lt;span class="n">build&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">ldflags&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;-s -w&amp;#34;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">trimpath&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="n">server&lt;/span> &lt;span class="n">main&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">go&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">strip&lt;/span> &lt;span class="n">server&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">upx&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">ultra&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">brute&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">lzma&lt;/span> &lt;span class="n">server&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Stage 3: Ultra-minimal runtime (scratch)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">scratch&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Copy binary (chá»©a cáº£ static files)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">go&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">server&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">server&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">EXPOSE&lt;/span> &lt;span class="mi">3000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ThÃªm USER 1000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">USER&lt;/span> &lt;span class="mi">1000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">HEALTHCHECK&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">interval&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">timeout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">start&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">period&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">retries&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">CMD&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;/server&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;-health&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">CMD&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;/server&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h3 id="5-dockerfile-top-react--nginx-tá»±-biÃªn-dá»‹ch-trÃªn-alpine">5. Dockerfile TOP (React) â€“ Nginx tá»± biÃªn dá»‹ch trÃªn Alpine
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Ká»¹ thuáº­t&lt;/th>
&lt;th>Giáº£i thÃ­ch&lt;/th>
&lt;th>Nguá»“n tham kháº£o&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;strong>Nginx BiÃªn Dá»‹ch&lt;/strong>&lt;/td>
&lt;td>Build Nginx 1.27.3 tá»« source, báº­t module cáº§n cho SPA (&lt;code>gzip_static&lt;/code>, &lt;code>ssl&lt;/code>).&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Pre-compression&lt;/strong>&lt;/td>
&lt;td>&lt;code>gzip -k -9&lt;/code> cho asset, phá»¥c vá»¥ qua &lt;code>gzip_static on&lt;/code>.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Security Headers inline&lt;/strong>&lt;/td>
&lt;td>ThÃªm &lt;code>X-Frame-Options&lt;/code>, &lt;code>X-Content-Type-Options&lt;/code>, &lt;code>X-XSS-Protection&lt;/code>.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;strong>Healthcheck&lt;/strong>&lt;/td>
&lt;td>Dá»±a trÃªn &lt;code>wget&lt;/code> kiá»ƒm tra HTTP 200 táº¡i cá»•ng 3000.&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>Dockerfile TOP (React)&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt"> 10
&lt;/span>&lt;span class="lnt"> 11
&lt;/span>&lt;span class="lnt"> 12
&lt;/span>&lt;span class="lnt"> 13
&lt;/span>&lt;span class="lnt"> 14
&lt;/span>&lt;span class="lnt"> 15
&lt;/span>&lt;span class="lnt"> 16
&lt;/span>&lt;span class="lnt"> 17
&lt;/span>&lt;span class="lnt"> 18
&lt;/span>&lt;span class="lnt"> 19
&lt;/span>&lt;span class="lnt"> 20
&lt;/span>&lt;span class="lnt"> 21
&lt;/span>&lt;span class="lnt"> 22
&lt;/span>&lt;span class="lnt"> 23
&lt;/span>&lt;span class="lnt"> 24
&lt;/span>&lt;span class="lnt"> 25
&lt;/span>&lt;span class="lnt"> 26
&lt;/span>&lt;span class="lnt"> 27
&lt;/span>&lt;span class="lnt"> 28
&lt;/span>&lt;span class="lnt"> 29
&lt;/span>&lt;span class="lnt"> 30
&lt;/span>&lt;span class="lnt"> 31
&lt;/span>&lt;span class="lnt"> 32
&lt;/span>&lt;span class="lnt"> 33
&lt;/span>&lt;span class="lnt"> 34
&lt;/span>&lt;span class="lnt"> 35
&lt;/span>&lt;span class="lnt"> 36
&lt;/span>&lt;span class="lnt"> 37
&lt;/span>&lt;span class="lnt"> 38
&lt;/span>&lt;span class="lnt"> 39
&lt;/span>&lt;span class="lnt"> 40
&lt;/span>&lt;span class="lnt"> 41
&lt;/span>&lt;span class="lnt"> 42
&lt;/span>&lt;span class="lnt"> 43
&lt;/span>&lt;span class="lnt"> 44
&lt;/span>&lt;span class="lnt"> 45
&lt;/span>&lt;span class="lnt"> 46
&lt;/span>&lt;span class="lnt"> 47
&lt;/span>&lt;span class="lnt"> 48
&lt;/span>&lt;span class="lnt"> 49
&lt;/span>&lt;span class="lnt"> 50
&lt;/span>&lt;span class="lnt"> 51
&lt;/span>&lt;span class="lnt"> 52
&lt;/span>&lt;span class="lnt"> 53
&lt;/span>&lt;span class="lnt"> 54
&lt;/span>&lt;span class="lnt"> 55
&lt;/span>&lt;span class="lnt"> 56
&lt;/span>&lt;span class="lnt"> 57
&lt;/span>&lt;span class="lnt"> 58
&lt;/span>&lt;span class="lnt"> 59
&lt;/span>&lt;span class="lnt"> 60
&lt;/span>&lt;span class="lnt"> 61
&lt;/span>&lt;span class="lnt"> 62
&lt;/span>&lt;span class="lnt"> 63
&lt;/span>&lt;span class="lnt"> 64
&lt;/span>&lt;span class="lnt"> 65
&lt;/span>&lt;span class="lnt"> 66
&lt;/span>&lt;span class="lnt"> 67
&lt;/span>&lt;span class="lnt"> 68
&lt;/span>&lt;span class="lnt"> 69
&lt;/span>&lt;span class="lnt"> 70
&lt;/span>&lt;span class="lnt"> 71
&lt;/span>&lt;span class="lnt"> 72
&lt;/span>&lt;span class="lnt"> 73
&lt;/span>&lt;span class="lnt"> 74
&lt;/span>&lt;span class="lnt"> 75
&lt;/span>&lt;span class="lnt"> 76
&lt;/span>&lt;span class="lnt"> 77
&lt;/span>&lt;span class="lnt"> 78
&lt;/span>&lt;span class="lnt"> 79
&lt;/span>&lt;span class="lnt"> 80
&lt;/span>&lt;span class="lnt"> 81
&lt;/span>&lt;span class="lnt"> 82
&lt;/span>&lt;span class="lnt"> 83
&lt;/span>&lt;span class="lnt"> 84
&lt;/span>&lt;span class="lnt"> 85
&lt;/span>&lt;span class="lnt"> 86
&lt;/span>&lt;span class="lnt"> 87
&lt;/span>&lt;span class="lnt"> 88
&lt;/span>&lt;span class="lnt"> 89
&lt;/span>&lt;span class="lnt"> 90
&lt;/span>&lt;span class="lnt"> 91
&lt;/span>&lt;span class="lnt"> 92
&lt;/span>&lt;span class="lnt"> 93
&lt;/span>&lt;span class="lnt"> 94
&lt;/span>&lt;span class="lnt"> 95
&lt;/span>&lt;span class="lnt"> 96
&lt;/span>&lt;span class="lnt"> 97
&lt;/span>&lt;span class="lnt"> 98
&lt;/span>&lt;span class="lnt"> 99
&lt;/span>&lt;span class="lnt">100
&lt;/span>&lt;span class="lnt">101
&lt;/span>&lt;span class="lnt">102
&lt;/span>&lt;span class="lnt">103
&lt;/span>&lt;span class="lnt">104
&lt;/span>&lt;span class="lnt">105
&lt;/span>&lt;span class="lnt">106
&lt;/span>&lt;span class="lnt">107
&lt;/span>&lt;span class="lnt">108
&lt;/span>&lt;span class="lnt">109
&lt;/span>&lt;span class="lnt">110
&lt;/span>&lt;span class="lnt">111
&lt;/span>&lt;span class="lnt">112
&lt;/span>&lt;span class="lnt">113
&lt;/span>&lt;span class="lnt">114
&lt;/span>&lt;span class="lnt">115
&lt;/span>&lt;span class="lnt">116
&lt;/span>&lt;span class="lnt">117
&lt;/span>&lt;span class="lnt">118
&lt;/span>&lt;span class="lnt">119
&lt;/span>&lt;span class="lnt">120
&lt;/span>&lt;span class="lnt">121
&lt;/span>&lt;span class="lnt">122
&lt;/span>&lt;span class="lnt">123
&lt;/span>&lt;span class="lnt">124
&lt;/span>&lt;span class="lnt">125
&lt;/span>&lt;span class="lnt">126
&lt;/span>&lt;span class="lnt">127
&lt;/span>&lt;span class="lnt">128
&lt;/span>&lt;span class="lnt">129
&lt;/span>&lt;span class="lnt">130
&lt;/span>&lt;span class="lnt">131
&lt;/span>&lt;span class="lnt">132
&lt;/span>&lt;span class="lnt">133
&lt;/span>&lt;span class="lnt">134
&lt;/span>&lt;span class="lnt">135
&lt;/span>&lt;span class="lnt">136
&lt;/span>&lt;span class="lnt">137
&lt;/span>&lt;span class="lnt">138
&lt;/span>&lt;span class="lnt">139
&lt;/span>&lt;span class="lnt">140
&lt;/span>&lt;span class="lnt">141
&lt;/span>&lt;span class="lnt">142
&lt;/span>&lt;span class="lnt">143
&lt;/span>&lt;span class="lnt">144
&lt;/span>&lt;span class="lnt">145
&lt;/span>&lt;span class="lnt">146
&lt;/span>&lt;span class="lnt">147
&lt;/span>&lt;span class="lnt">148
&lt;/span>&lt;span class="lnt">149
&lt;/span>&lt;span class="lnt">150
&lt;/span>&lt;span class="lnt">151
&lt;/span>&lt;span class="lnt">152
&lt;/span>&lt;span class="lnt">153
&lt;/span>&lt;span class="lnt">154
&lt;/span>&lt;span class="lnt">155
&lt;/span>&lt;span class="lnt">156
&lt;/span>&lt;span class="lnt">157
&lt;/span>&lt;span class="lnt">158
&lt;/span>&lt;span class="lnt">159
&lt;/span>&lt;span class="lnt">160
&lt;/span>&lt;span class="lnt">161
&lt;/span>&lt;span class="lnt">162
&lt;/span>&lt;span class="lnt">163
&lt;/span>&lt;span class="lnt">164
&lt;/span>&lt;span class="lnt">165
&lt;/span>&lt;span class="lnt">166
&lt;/span>&lt;span class="lnt">167
&lt;/span>&lt;span class="lnt">168
&lt;/span>&lt;span class="lnt">169
&lt;/span>&lt;span class="lnt">170
&lt;/span>&lt;span class="lnt">171
&lt;/span>&lt;span class="lnt">172
&lt;/span>&lt;span class="lnt">173
&lt;/span>&lt;span class="lnt">174
&lt;/span>&lt;span class="lnt">175
&lt;/span>&lt;span class="lnt">176
&lt;/span>&lt;span class="lnt">177
&lt;/span>&lt;span class="lnt">178
&lt;/span>&lt;span class="lnt">179
&lt;/span>&lt;span class="lnt">180
&lt;/span>&lt;span class="lnt">181
&lt;/span>&lt;span class="lnt">182
&lt;/span>&lt;span class="lnt">183
&lt;/span>&lt;span class="lnt">184
&lt;/span>&lt;span class="lnt">185
&lt;/span>&lt;span class="lnt">186
&lt;/span>&lt;span class="lnt">187
&lt;/span>&lt;span class="lnt">188
&lt;/span>&lt;span class="lnt">189
&lt;/span>&lt;span class="lnt">190
&lt;/span>&lt;span class="lnt">191
&lt;/span>&lt;span class="lnt">192
&lt;/span>&lt;span class="lnt">193
&lt;/span>&lt;span class="lnt">194
&lt;/span>&lt;span class="lnt">195
&lt;/span>&lt;span class="lnt">196
&lt;/span>&lt;span class="lnt">197
&lt;/span>&lt;span class="lnt">198
&lt;/span>&lt;span class="lnt">199
&lt;/span>&lt;span class="lnt">200
&lt;/span>&lt;span class="lnt">201
&lt;/span>&lt;span class="lnt">202
&lt;/span>&lt;span class="lnt">203
&lt;/span>&lt;span class="lnt">204
&lt;/span>&lt;span class="lnt">205
&lt;/span>&lt;span class="lnt">206
&lt;/span>&lt;span class="lnt">207
&lt;/span>&lt;span class="lnt">208
&lt;/span>&lt;span class="lnt">209
&lt;/span>&lt;span class="lnt">210
&lt;/span>&lt;span class="lnt">211
&lt;/span>&lt;span class="lnt">212
&lt;/span>&lt;span class="lnt">213
&lt;/span>&lt;span class="lnt">214
&lt;/span>&lt;span class="lnt">215
&lt;/span>&lt;span class="lnt">216
&lt;/span>&lt;span class="lnt">217
&lt;/span>&lt;span class="lnt">218
&lt;/span>&lt;span class="lnt">219
&lt;/span>&lt;span class="lnt">220
&lt;/span>&lt;span class="lnt">221
&lt;/span>&lt;span class="lnt">222
&lt;/span>&lt;span class="lnt">223
&lt;/span>&lt;span class="lnt">224
&lt;/span>&lt;span class="lnt">225
&lt;/span>&lt;span class="lnt">226
&lt;/span>&lt;span class="lnt">227
&lt;/span>&lt;span class="lnt">228
&lt;/span>&lt;span class="lnt">229
&lt;/span>&lt;span class="lnt">230
&lt;/span>&lt;span class="lnt">231
&lt;/span>&lt;span class="lnt">232
&lt;/span>&lt;span class="lnt">233
&lt;/span>&lt;span class="lnt">234
&lt;/span>&lt;span class="lnt">235
&lt;/span>&lt;span class="lnt">236
&lt;/span>&lt;span class="lnt">237
&lt;/span>&lt;span class="lnt">238
&lt;/span>&lt;span class="lnt">239
&lt;/span>&lt;span class="lnt">240
&lt;/span>&lt;span class="lnt">241
&lt;/span>&lt;span class="lnt">242
&lt;/span>&lt;span class="lnt">243
&lt;/span>&lt;span class="lnt">244
&lt;/span>&lt;span class="lnt">245
&lt;/span>&lt;span class="lnt">246
&lt;/span>&lt;span class="lnt">247
&lt;/span>&lt;span class="lnt">248
&lt;/span>&lt;span class="lnt">249
&lt;/span>&lt;span class="lnt">250
&lt;/span>&lt;span class="lnt">251
&lt;/span>&lt;span class="lnt">252
&lt;/span>&lt;span class="lnt">253
&lt;/span>&lt;span class="lnt">254
&lt;/span>&lt;span class="lnt">255
&lt;/span>&lt;span class="lnt">256
&lt;/span>&lt;span class="lnt">257
&lt;/span>&lt;span class="lnt">258
&lt;/span>&lt;span class="lnt">259
&lt;/span>&lt;span class="lnt">260
&lt;/span>&lt;span class="lnt">261
&lt;/span>&lt;span class="lnt">262
&lt;/span>&lt;span class="lnt">263
&lt;/span>&lt;span class="lnt">264
&lt;/span>&lt;span class="lnt">265
&lt;/span>&lt;span class="lnt">266
&lt;/span>&lt;span class="lnt">267
&lt;/span>&lt;span class="lnt">268
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># =========================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Giai Ä‘oáº¡n 1: Node base&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># =========================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># MÃ´i trÆ°á»ng build cho Vite/React: chá»‰ cÃ i nhá»¯ng thá»© tá»‘i thiá»ƒu Ä‘á»ƒ biÃªn dá»‹ch&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">alpine&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">3.20&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">sha256&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">765942&lt;/span>&lt;span class="n">a4039992336de8dd5db680586e1a206607dd06170ff0a37267a9e01958&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">base&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">apk&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cache&lt;/span> &lt;span class="n">nodejs&lt;/span> &lt;span class="n">npm&lt;/span> &lt;span class="n">git&lt;/span> &lt;span class="n">python3&lt;/span> &lt;span class="n">g&lt;/span>&lt;span class="o">++&lt;/span> &lt;span class="n">make&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">npm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">g&lt;/span> &lt;span class="n">pnpm&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="mf">9.12&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">2&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">npm&lt;/span> &lt;span class="n">cache&lt;/span> &lt;span class="n">clean&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">force&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># =========================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Giai Ä‘oáº¡n 2: Builder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># =========================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># DÃ¹ng cache mount cho pnpm Ä‘á»ƒ tÄƒng tá»‘c build láº¡i; xÃ³a source map; nÃ©n gzip sáºµn&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">node&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">base&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">builder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">package&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span> &lt;span class="n">pnpm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lock&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">yaml&lt;/span> &lt;span class="o">./&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">mount&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">pnpm&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">custom&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">target&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">root&lt;/span>&lt;span class="o">/.&lt;/span>&lt;span class="n">local&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">pnpm&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">store&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">pnpm&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">frozen&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">lockfile&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">prefer&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">offline&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Sao chÃ©p cáº¥u hÃ¬nh &amp;amp; mÃ£ nguá»“n&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">index&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span> &lt;span class="o">./&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">vite&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ts&lt;/span> &lt;span class="n">tsconfig&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span> &lt;span class="n">tsconfig&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">node&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span> &lt;span class="o">./&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">postcss&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">js&lt;/span> &lt;span class="n">tailwind&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">ts&lt;/span> &lt;span class="o">./&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">public&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">public&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="n">src&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">src&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Build &amp;amp; tá»‘i Æ°u artefact tÄ©nh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">pnpm&lt;/span> &lt;span class="n">run&lt;/span> &lt;span class="n">build&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">find&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dist&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s2">&amp;#34;*.map&amp;#34;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="n">f&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">delete&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="bp">true&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">find&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dist&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">type&lt;/span> &lt;span class="n">f&lt;/span> \&lt;span class="p">(&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;*.html&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;*.js&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;*.css&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;*.svg&amp;#39;&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">o&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">name&lt;/span> &lt;span class="s1">&amp;#39;*.json&amp;#39;&lt;/span> \&lt;span class="p">)&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span>&lt;span class="n">exec&lt;/span> &lt;span class="n">gzip&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">k&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">9&lt;/span> &lt;span class="p">{}&lt;/span> \&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ======================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Giai Ä‘oáº¡n 3: Nginx builder (tá»± biÃªn dá»‹ch)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ======================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># BiÃªn dá»‹ch nginx 1.27.3 vá»›i module tá»‘i thiá»ƒu cho SPA + nÃ©n tÄ©nh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">alpine&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">3.20&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">sha256&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">765942&lt;/span>&lt;span class="n">a4039992336de8dd5db680586e1a206607dd06170ff0a37267a9e01958&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">nginx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">builder&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">apk&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cache&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">virtual&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">deps&lt;/span> &lt;span class="n">gcc&lt;/span> &lt;span class="n">libc&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dev&lt;/span> &lt;span class="n">make&lt;/span> &lt;span class="n">pcre2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dev&lt;/span> &lt;span class="n">zlib&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dev&lt;/span> &lt;span class="n">openssl&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">dev&lt;/span> &lt;span class="n">linux&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">headers&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">wget&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">O&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">org&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.27&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mf">3.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">tar&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">xzf&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">tar&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gz&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">C&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">cd&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">1.27&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="mi">3&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">./&lt;/span>&lt;span class="n">configure&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">prefix&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">modules&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">modules&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">conf&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">conf&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">error&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">error&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">log&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">http&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">access&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">log&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">pid&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pid&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">lock&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">lock&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">http&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">client&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">body&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">temp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">client_temp&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">http&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">temp&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">proxy_temp&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">group&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nginx&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">with&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_ssl_module&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">with&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_v2_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">with&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_gzip_static_module&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">with&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_stub_status_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">with&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">threads&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">with&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">file&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">aio&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_autoindex_module&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_browser_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_geo_module&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_map_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_memcached_module&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_userid_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mail_pop3_module&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mail_imap_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">mail_smtp_module&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_split_clients_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_uwsgi_module&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_scgi_module&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">--&lt;/span>&lt;span class="n">without&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">http_grpc_module&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">make&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">j&lt;/span>&lt;span class="o">$&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">nproc&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">make&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">strip&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">rm&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">rf&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">tmp&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">*&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">apk&lt;/span> &lt;span class="n">del&lt;/span> &lt;span class="o">.&lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">deps&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ======================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Giai Ä‘oáº¡n 4: Runtime base tá»‘i giáº£n&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ======================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Chá»‰ giá»¯ runtime deps; táº¡o user non-root; chuáº©n bá»‹ thÆ° má»¥c vÃ  quyá»n&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">alpine&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mf">3.20&lt;/span>&lt;span class="err">@&lt;/span>&lt;span class="n">sha256&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">765942&lt;/span>&lt;span class="n">a4039992336de8dd5db680586e1a206607dd06170ff0a37267a9e01958&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">custom&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">runtime&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">base&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">apk&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cache&lt;/span> &lt;span class="n">pcre2&lt;/span> &lt;span class="n">zlib&lt;/span> &lt;span class="n">openssl&lt;/span> &lt;span class="n">tzdata&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">addgroup&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">g&lt;/span> &lt;span class="mi">101&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">S&lt;/span> &lt;span class="n">nginx&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">adduser&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">S&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">D&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">H&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">u&lt;/span> &lt;span class="mi">101&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">h&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nologin&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">G&lt;/span> &lt;span class="n">nginx&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">g&lt;/span> &lt;span class="n">nginx&lt;/span> &lt;span class="n">nginx&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">mkdir&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">conf&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">html&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">chown&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">R&lt;/span> &lt;span class="n">nginx&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ======================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Giai Ä‘oáº¡n 5: Runtime cuá»‘i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ======================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">FROM&lt;/span> &lt;span class="n">custom&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">runtime&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">base&lt;/span> &lt;span class="n">AS&lt;/span> &lt;span class="n">runtime&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">LABEL&lt;/span> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">title&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;SvnFrs-Dockerfile_Contest_2025&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">description&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;SPA production trÃªn Alpine vá»›i Nginx tá»± biÃªn dá»‹ch, tá»‘i Æ°u vÃ  báº£o máº­t&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">version&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;1.0.0&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">licenses&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;MIT&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">created&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2025-10-28&amp;#34;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">org&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">opencontainers&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">base&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;alpine:3.20&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># á»¨ng dá»¥ng tÄ©nh Ä‘Ã£ build&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">COPY&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">builder&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">chown&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dist&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Cáº¥u hÃ¬nh Nginx tá»‘i thiá»ƒu (inline) báº­t gzip_static Ä‘á»ƒ phá»¥c vá»¥ file .gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">echo&lt;/span> &lt;span class="s1">&amp;#39;server { &lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">listen&lt;/span> &lt;span class="mi">3000&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">server_name&lt;/span> &lt;span class="n">localhost&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">root&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">index&lt;/span> &lt;span class="n">index&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">gzip_static&lt;/span> &lt;span class="n">on&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">gzip_vary&lt;/span> &lt;span class="n">on&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">location&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">try_files&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">uri&lt;/span> &lt;span class="o">$&lt;/span>&lt;span class="n">uri&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">expires&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">add_header&lt;/span> &lt;span class="n">Cache&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="ne">Control&lt;/span> &lt;span class="s2">&amp;#34;public, immutable&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">location&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">expires&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">add_header&lt;/span> &lt;span class="n">Cache&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="ne">Control&lt;/span> &lt;span class="s2">&amp;#34;no-cache&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">add_header&lt;/span> &lt;span class="n">X&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Frame&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Options&lt;/span> &lt;span class="s2">&amp;#34;SAMEORIGIN&amp;#34;&lt;/span> &lt;span class="n">always&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">add_header&lt;/span> &lt;span class="n">X&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Content&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Type&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Options&lt;/span> &lt;span class="s2">&amp;#34;nosniff&amp;#34;&lt;/span> &lt;span class="n">always&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">add_header&lt;/span> &lt;span class="n">X&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">XSS&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">Protection&lt;/span> &lt;span class="s2">&amp;#34;1; mode=block&amp;#34;&lt;/span> &lt;span class="n">always&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;span class="s1">&amp;#39; &amp;gt; /etc/nginx/conf.d/default.conf &amp;amp;&amp;amp; &lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">echo&lt;/span> &lt;span class="s1">&amp;#39;worker_processes auto; error_log /var/log/nginx/error.log warn; pid /var/run/nginx.pid; &lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">events&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">worker_connections&lt;/span> &lt;span class="mi">1024&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="n">http&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="n">include&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">mime&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">types&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">default_type&lt;/span> &lt;span class="n">application&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">octet&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">stream&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">sendfile&lt;/span> &lt;span class="n">on&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">keepalive_timeout&lt;/span> &lt;span class="mi">65&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">include&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">conf&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/*.&lt;/span>&lt;span class="n">conf&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>&lt;span class="s1">&amp;#39; &amp;gt; /etc/nginx/nginx.conf &amp;amp;&amp;amp; &lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">echo&lt;/span> &lt;span class="s1">&amp;#39;types { &lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">text&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">html&lt;/span> &lt;span class="n">html&lt;/span> &lt;span class="n">htm&lt;/span> &lt;span class="n">shtml&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">text&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">css&lt;/span> &lt;span class="n">css&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">text&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">javascript&lt;/span> &lt;span class="n">js&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">application&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">json&lt;/span> &lt;span class="n">json&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">image&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">svg&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">xml&lt;/span> &lt;span class="n">svg&lt;/span> &lt;span class="n">svgz&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">image&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">icon&lt;/span> &lt;span class="n">ico&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">image&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">png&lt;/span> &lt;span class="n">png&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">image&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">jpeg&lt;/span> &lt;span class="n">jpeg&lt;/span> &lt;span class="n">jpg&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">font&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">woff2&lt;/span> &lt;span class="n">woff2&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">application&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">wasm&lt;/span> &lt;span class="n">wasm&lt;/span>&lt;span class="p">;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;span class="s1">&amp;#39; &amp;gt; /etc/nginx/mime.types&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ThÆ° má»¥c táº¡m/ngáº§m cá»§a Nginx + phÃ¢n quyá»n trÆ°á»›c khi chuyá»ƒn USER&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">mkdir&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">p&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">client_temp&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">proxy_temp&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">fastcgi_temp&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">proxy_temp&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">client_body_temp&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">uwsgi_temp&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">scgi_temp&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">chown&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">R&lt;/span> &lt;span class="n">nginx&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nb">log&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">share&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">html&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">fastcgi_temp&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">proxy_temp&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">client_body_temp&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">uwsgi_temp&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">scgi_temp&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">chmod&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">R&lt;/span> &lt;span class="mi">755&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">cache&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">fastcgi_temp&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">proxy_temp&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">client_body_temp&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">uwsgi_temp&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">scgi_temp&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">touch&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pid&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">chown&lt;/span> &lt;span class="n">nginx&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="k">var&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pid&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Healthcheck ráº»: HTTP 200 á»Ÿ cá»•ng 3000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">RUN&lt;/span> &lt;span class="n">apk&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">no&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">cache&lt;/span> &lt;span class="n">wget&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">HEALTHCHECK&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">interval&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">30&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">timeout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">start&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">period&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">retries&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">3&lt;/span> \
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">CMD&lt;/span> &lt;span class="n">wget&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">quiet&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">tries&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">spider&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">localhost&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">3000&lt;/span>&lt;span class="o">/&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="n">exit&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">EXPOSE&lt;/span> &lt;span class="mi">3000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">STOPSIGNAL&lt;/span> &lt;span class="n">SIGQUIT&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">USER&lt;/span> &lt;span class="n">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">CMD&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;nginx&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;-g&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;daemon off;&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="ghi-chÃº-triá»ƒn-khai">Ghi chÃº triá»ƒn khai
&lt;/h2>&lt;ul>
&lt;li>CÃ¡c Dockerfile trÃªn chá»‰ mang tÃ­nh tham kháº£o kiáº¿n trÃºc; khi Ã¡p dá»¥ng vÃ o dá»± Ã¡n Node.js/React cá»§a báº¡n, hÃ£y giá»¯ nguyÃªn nguyÃªn táº¯c: multi-stage build, pre-compress, non-root, pin SHA.&lt;/li>
&lt;/ul></description></item><item><title>Giá»›i thiá»‡u vá» Nginx ğŸš€</title><link>https://tech.nguuyen.io.vn/posts/website/nginx-introduction-guide/</link><pubDate>Mon, 10 Mar 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/website/nginx-introduction-guide/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/website/nginx-introduction-guide.webp" alt="Featured image of post Giá»›i thiá»‡u vá» Nginx ğŸš€" />&lt;h2 id="-nginx-lÃ -gÃ¬">ğŸ”€ Nginx lÃ  gÃ¬?
&lt;/h2>&lt;p align="center">
&lt;img src="https://wiki.matbao.net/wp-content/uploads/2019/09/nginx-la-gi.jpg" alt="NGINX lÃ  má»™t pháº§n má»m web server mÃ£ nguá»“n má»Ÿ Ä‘Ã¡ng tin cáº­y">
&lt;/p>
&lt;p align="center">&lt;em>NGINX lÃ  má»™t pháº§n má»m web server mÃ£ nguá»“n má»Ÿ Ä‘Ã¡ng tin cáº­y&lt;/em>&lt;/p>
&lt;p>Nginx lÃ  má»™t pháº§n má»m web server mÃ£ nguá»“n má»Ÿ, hoáº¡t Ä‘á»™ng theo kiáº¿n trÃºc báº¥t Ä‘á»“ng bá»™ (asynchronous) hÆ°á»›ng sá»± kiá»‡n (event-driven). ban Ä‘áº§u Ä‘Æ°á»£c phÃ¡t triá»ƒn Ä‘á»ƒ phá»¥c vá»¥ http cache, nhÆ°ng sau nÃ y Ä‘Æ°á»£c má»Ÿ rá»™ng Ä‘á»ƒ há»— trá»£ reverse proxy, http load balancing vÃ  cÃ¡c giao thá»©c truyá»n mail nhÆ° imap4, pop3, smtp.&lt;/p>
&lt;p>Ra máº¯t vÃ o thÃ¡ng 10/2014, Nginx Ä‘Æ°á»£c nhiá»u cÃ´ng ty lá»›n nhÆ° google, adobe, netflix, wordpress sá»­ dá»¥ng nhá» kháº£ nÄƒng xá»­ lÃ½ hÃ ng nghÃ¬n káº¿t ná»‘i Ä‘á»“ng thá»i.&lt;/p>
&lt;h2 id="-cÃ¡ch-hoáº¡t-Ä‘á»™ng-cá»§a-nginx">âš™ï¸ CÃ¡ch hoáº¡t Ä‘á»™ng cá»§a Nginx
&lt;/h2>&lt;p align="center">
&lt;img src="https://wiki.matbao.net/wp-content/uploads/2019/09/nginx-la-gi-nginx-cung-hoat-dong-tuong-tu-nhu-cac-server-khac.jpg" alt="NGINX cÅ©ng hoáº¡t Ä‘á»™ng tÆ°Æ¡ng tá»± nhÆ° cÃ¡c server khÃ¡c">
&lt;/p>
&lt;p align="center">&lt;em>NGINX cÅ©ng hoáº¡t Ä‘á»™ng tÆ°Æ¡ng tá»± nhÆ° cÃ¡c server khÃ¡c&lt;/em>&lt;/p>
&lt;p>Nginx hoáº¡t Ä‘á»™ng theo mÃ´ hÃ¬nh xá»­ lÃ½ báº¥t Ä‘á»“ng bá»™, khÃ¡c vá»›i cÃ¡ch xá»­ lÃ½ tuáº§n tá»± cá»§a cÃ¡c web server truyá»n thá»‘ng.&lt;/p>
&lt;ul>
&lt;li>Má»—i tiáº¿n trÃ¬nh (process) sáº½ cÃ³ nhiá»u worker connections Ä‘á»ƒ xá»­ lÃ½ cÃ¡c yÃªu cáº§u.&lt;/li>
&lt;li>Worker connections gá»­i yÃªu cáº§u Ä‘áº¿n worker process, worker process chuyá»ƒn tiáº¿p Ä‘áº¿n master process Ä‘á»ƒ xá»­ lÃ½.&lt;/li>
&lt;li>Nhá» cÆ¡ cháº¿ nÃ y, má»™t worker connection cÃ³ thá»ƒ xá»­ lÃ½ Ä‘áº¿n 1024 yÃªu cáº§u cÃ¹ng lÃºc, giÃºp Nginx xá»­ lÃ½ hÃ ng ngÃ n yÃªu cáº§u hiá»‡u quáº£.&lt;/li>
&lt;/ul>
&lt;h2 id="-cÃ¡c-tÃ­nh-nÄƒng-cá»§a-nginx">ğŸ”¥ CÃ¡c tÃ­nh nÄƒng cá»§a Nginx
&lt;/h2>&lt;p align="center">
&lt;img src="https://wiki.matbao.net/wp-content/uploads/2019/09/nginx-la-gi-may-chu-nginx-co-nhieu-tinh-nang-va-uu-diem-vuot-troi-trong-lap-trinh.png" alt="MÃ¡y chá»§ NGINX cÃ³ nhiá»u tÃ­nh nÄƒng vÃ  Æ°u Ä‘iá»ƒm vÆ°á»£t trá»™i trong láº­p trÃ¬nh">
&lt;/p>
&lt;p align="center">&lt;em>MÃ¡y chá»§ NGINX cÃ³ nhiá»u tÃ­nh nÄƒng vÃ  Æ°u Ä‘iá»ƒm vÆ°á»£t trá»™i trong láº­p trÃ¬nh&lt;/em>&lt;/p>
&lt;p>Nginx sá»Ÿ há»¯u nhiá»u tÃ­nh nÄƒng vÆ°á»£t trá»™i:&lt;/p>
&lt;ul>
&lt;li>âš¡ xá»­ lÃ½ hÆ¡n 10.000 káº¿t ná»‘i Ä‘á»“ng thá»i vá»›i má»©c sá»­ dá»¥ng bá»™ nhá»› tháº¥p.&lt;/li>
&lt;li>ğŸ“‚ phá»¥c vá»¥ táº­p tin tÄ©nh (static files) vÃ  láº­p chá»‰ má»¥c táº­p tin.&lt;/li>
&lt;li>ğŸ”„ cÃ¢n báº±ng táº£i vÃ  há»— trá»£ proxy ngÆ°á»£c vá»›i bá»™ nhá»› Ä‘á»‡m (cache).&lt;/li>
&lt;li>ğŸš€ há»— trá»£ fastcgi, uwsgi, scgi vÃ  memcached.&lt;/li>
&lt;li>ğŸ› ï¸ kiáº¿n trÃºc modular vÃ  nÃ©n gzip tá»± Ä‘á»™ng.&lt;/li>
&lt;li>ğŸ” há»— trá»£ mÃ£ hÃ³a ssl/tls.&lt;/li>
&lt;li>ğŸ”€ rewrite url báº±ng regular expressions.&lt;/li>
&lt;li>ğŸŒ há»— trá»£ websockets vÃ  giá»›i háº¡n sá»‘ káº¿t ná»‘i Ä‘á»“ng thá»i.&lt;/li>
&lt;li>ğŸ“¡ tÆ°Æ¡ng thÃ­ch vá»›i ipv6.&lt;/li>
&lt;/ul>
&lt;h2 id="-so-sÃ¡nh-nginx-vÃ -apache-server">âš–ï¸ So sÃ¡nh Nginx vÃ  Apache server
&lt;/h2>&lt;p align="center">
&lt;img src="https://wiki.matbao.net/wp-content/uploads/2019/09/nginx-la-gi-so-voi-apache-server-nginx-server-co-kha-nhieu-uu-diem.jpg" alt="So vá»›i Apache server, NGINX server cÃ³ khÃ¡ nhiá»u Æ°u Ä‘iá»ƒm">
&lt;/p>
&lt;p align="center">&lt;em>So vá»›i Apache server, NGINX server cÃ³ khÃ¡ nhiá»u Æ°u Ä‘iá»ƒm&lt;/em>&lt;/p>
&lt;h3 id="-apache-server">&lt;strong>ğŸ–¥ï¸ Apache server:&lt;/strong>
&lt;/h3>&lt;ul>
&lt;li>xá»­ lÃ½ yÃªu cáº§u báº±ng mÃ´ hÃ¬nh chia luá»“ng (forked threaded) hoáº·c keep-alive.&lt;/li>
&lt;li>cÃ³ thá»ƒ xá»­ lÃ½ cáº£ ná»™i dung tÄ©nh vÃ  Ä‘á»™ng.&lt;/li>
&lt;/ul>
&lt;h3 id="-nginx-server">&lt;strong>ğŸŒ Nginx server:&lt;/strong>
&lt;/h3>&lt;ul>
&lt;li>sá»­ dá»¥ng vÃ²ng láº·p sá»± kiá»‡n khÃ´ng Ä‘á»“ng bá»™ (non-blocking event loop).&lt;/li>
&lt;li>xá»­ lÃ½ ná»™i dung tÄ©nh hiá»‡u quáº£ hÆ¡n Apache.&lt;/li>
&lt;li>tá»‘c Ä‘á»™ xá»­ lÃ½ truy váº¥n nhanh hÆ¡n vÃ  tiáº¿t kiá»‡m tÃ i nguyÃªn hÆ¡n.&lt;/li>
&lt;li>cáº§n bá»™ xá»­ lÃ½ riÃªng Ä‘á»ƒ há»— trá»£ ná»™i dung Ä‘á»™ng.&lt;/li>
&lt;/ul>
&lt;h2 id="-hÆ°á»›ng-dáº«n-kiá»ƒm-tra-nginx-cá»§a-website">ğŸ” HÆ°á»›ng dáº«n kiá»ƒm tra Nginx cá»§a website
&lt;/h2>&lt;p align="center">
&lt;img src="https://wiki.matbao.net/wp-content/uploads/2019/09/nginx-la-gi-ban-co-the-dua-vao-cac-cong-cu-san-co-de-kiem-tra-website-co-chay-nginx.png" alt="Báº¡n cÃ³ thá»ƒ dá»±a vÃ o cÃ¡c cÃ´ng cá»¥ sáºµn cÃ³ Ä‘á»ƒ kiáº¿m tra website cÃ³ cháº¡y Nginx">
&lt;/p>
&lt;p align="center">&lt;em>Báº¡n cÃ³ thá»ƒ dá»±a vÃ o cÃ¡c cÃ´ng cá»¥ sáºµn cÃ³ Ä‘á»ƒ kiáº¿m tra website cÃ³ cháº¡y Nginx&lt;/em>&lt;/p>
&lt;p>Báº¡n cÃ³ thá»ƒ kiá»ƒm tra website cÃ³ cháº¡y Nginx hay khÃ´ng báº±ng cÃ¡ch kiá»ƒm tra http header:&lt;/p>
&lt;ol>
&lt;li>Má»Ÿ trang web cáº§n kiá»ƒm tra trÃªn trÃ¬nh duyá»‡t chrome.&lt;/li>
&lt;li>Nháº¥n &lt;strong>ctrl + shift + i&lt;/strong> hoáº·c &lt;strong>f12&lt;/strong> Ä‘á»ƒ má»Ÿ chrome devtools.&lt;/li>
&lt;li>Chuyá»ƒn sang tab &lt;strong>network&lt;/strong>.&lt;/li>
&lt;li>Chá»n má»™t request báº¥t ká»³ vÃ  xem pháº§n &lt;strong>headers&lt;/strong>.&lt;/li>
&lt;/ol>
&lt;p>NgoÃ i ra, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng cÃ´ng cá»¥ nhÆ° &lt;strong>pingdom&lt;/strong> hoáº·c &lt;strong>gtmetrix&lt;/strong> Ä‘á»ƒ kiá»ƒm tra.&lt;/p>
&lt;hr>
&lt;h2 id="-lá»i-káº¿t">ğŸ¯ Lá»i káº¿t
&lt;/h2>&lt;p>Nginx Ä‘Ã£ vÃ  Ä‘ang trá»Ÿ thÃ nh má»™t trong nhá»¯ng web server phá»• biáº¿n nháº¥t nhá» hiá»‡u suáº¥t cao, kháº£ nÄƒng xá»­ lÃ½ hÃ ng nghÃ¬n káº¿t ná»‘i Ä‘á»“ng thá»i vÃ  nhiá»u tÃ­nh nÄƒng máº¡nh máº½. DÃ¹ báº¡n cáº§n má»™t giáº£i phÃ¡p Ä‘á»ƒ phá»¥c vá»¥ ná»™i dung tÄ©nh, cÃ¢n báº±ng táº£i hay lÃ m reverse proxy, Nginx Ä‘á»u cÃ³ thá»ƒ Ä‘Ã¡p á»©ng má»™t cÃ¡ch hiá»‡u quáº£. Hy vá»ng bÃ i viáº¿t nÃ y giÃºp báº¡n hiá»ƒu rÃµ hÆ¡n vá» Nginx vÃ  cÃ¡ch nÃ³ hoáº¡t Ä‘á»™ng. Náº¿u báº¡n Ä‘ang cÃ¢n nháº¯c triá»ƒn khai má»™t web server tá»‘i Æ°u cho dá»± Ã¡n cá»§a mÃ¬nh, hÃ£y thá»­ nghiá»‡m Nginx vÃ  khÃ¡m phÃ¡ nhá»¯ng lá»£i Ã­ch mÃ  nÃ³ mang láº¡i! ğŸš€ğŸ˜Š&lt;/p></description></item><item><title>HÆ°á»›ng dáº«n cÃ i Ä‘áº·t Nginx trÃªn Ubuntu 24.04 âš™ï¸</title><link>https://tech.nguuyen.io.vn/posts/installation-guides/how-to-install-nginx/</link><pubDate>Mon, 10 Mar 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/installation-guides/how-to-install-nginx/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/website/how-to-install-nginx.webp" alt="Featured image of post HÆ°á»›ng dáº«n cÃ i Ä‘áº·t Nginx trÃªn Ubuntu 24.04 âš™ï¸" />&lt;h2 id="-giá»›i-thiá»‡u">ğŸ“Œ Giá»›i thiá»‡u
&lt;/h2>&lt;p>Nginx lÃ  má»™t á»©ng dá»¥ng web server mÃ£ nguá»“n má»Ÿ giÃºp triá»ƒn khai cÃ¡c á»©ng dá»¥ng web tÄ©nh vÃ  Ä‘á»™ng trÃªn mÃ¡y chá»§. Nginx cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng nhÆ° má»™t web server, load balancer, reverse proxy hoáº·c HTTP cache, há»— trá»£ tÃ­ch há»£p vá»›i cÃ¡c á»©ng dá»¥ng hiá»‡n cÃ³ Ä‘á»ƒ xÃ¢y dá»±ng má»™t há»‡ thá»‘ng hoÃ n chá»‰nh hoáº·c phÃ¢n phá»‘i á»©ng dá»¥ng web qua Ä‘á»‹a chá»‰ IP hoáº·c tÃªn miá»n.&lt;/p>
&lt;p>BÃ i viáº¿t nÃ y hÆ°á»›ng dáº«n cÃ¡ch cÃ i Ä‘áº·t Nginx trÃªn Ubuntu 24.04 vÃ  thiáº¿t láº­p á»©ng dá»¥ng web máº«u Ä‘á»ƒ cháº¡y trÃªn mÃ¡y chá»§ cá»§a báº¡n.&lt;/p>
&lt;h2 id="-yÃªu-cáº§u-trÆ°á»›c-khi-báº¯t-Ä‘áº§u">âœ… YÃªu cáº§u trÆ°á»›c khi báº¯t Ä‘áº§u
&lt;/h2>&lt;p>TrÆ°á»›c khi tiáº¿n hÃ nh, hÃ£y Ä‘áº£m báº£o báº¡n Ä‘Ã£ thá»±c hiá»‡n cÃ¡c bÆ°á»›c sau:&lt;/p>
&lt;ul>
&lt;li>ğŸš€ Triá»ƒn khai má»™t mÃ¡y chá»§ Ubuntu 24.04.&lt;/li>
&lt;li>ğŸŒ Táº¡o má»™t báº£n ghi A (A record) cho tÃªn miá»n hoáº·c subdomain trá» Ä‘áº¿n Ä‘á»‹a chá»‰ IP cá»§a mÃ¡y chá»§. VÃ­ dá»¥: &lt;code>app.example.com&lt;/code>.&lt;/li>
&lt;li>ğŸ” Truy cáº­p mÃ¡y chá»§ qua SSH vÃ  táº¡o má»™t ngÆ°á»i dÃ¹ng khÃ´ng pháº£i root cÃ³ quyá»n sudo.&lt;/li>
&lt;li>ğŸ”„ Cáº­p nháº­t há»‡ thá»‘ng.&lt;/li>
&lt;/ul>
&lt;h2 id="-cÃ i-Ä‘áº·t-nginx-trÃªn-ubuntu-2404">âš™ï¸ CÃ i Ä‘áº·t NGINX trÃªn Ubuntu 24.04
&lt;/h2>&lt;p>GÃ³i NGINX má»›i nháº¥t cÃ³ sáºµn trong kho APT máº·c Ä‘á»‹nh trÃªn Ubuntu 24.04. Thá»±c hiá»‡n cÃ¡c bÆ°á»›c sau Ä‘á»ƒ cáº­p nháº­t há»‡ thá»‘ng vÃ  cÃ i Ä‘áº·t NGINX.&lt;/p>
&lt;p>&lt;strong>ğŸ”„ Cáº­p nháº­t danh sÃ¡ch gÃ³i há»‡ thá»‘ng&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo apt update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>ğŸ“¦ CÃ i Ä‘áº·t NGINX&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo apt install nginx -y
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>ğŸ” Kiá»ƒm tra phiÃªn báº£n NGINX Ä‘Ã£ cÃ i Ä‘áº·t&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo nginx -version
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Káº¿t quáº£ Ä‘áº§u ra sáº½ tÆ°Æ¡ng tá»± nhÆ° sau:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">nginx version: nginx/1.24.0 (Ubuntu)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="-quáº£n-lÃ½-dá»‹ch-vá»¥-nginx">âš™ï¸ Quáº£n lÃ½ dá»‹ch vá»¥ NGINX
&lt;/h2>&lt;p>NGINX sá»­ dá»¥ng dá»‹ch vá»¥ &lt;code>nginx&lt;/code> trong &lt;code>systemd&lt;/code> Ä‘á»ƒ quáº£n lÃ½ thá»i gian cháº¡y vÃ  cÃ¡c tiáº¿n trÃ¬nh cá»§a web server trÃªn mÃ¡y chá»§. Thá»±c hiá»‡n cÃ¡c bÆ°á»›c sau Ä‘á»ƒ kÃ­ch hoáº¡t dá»‹ch vá»¥ NGINX vÃ  quáº£n lÃ½ cÃ¡c tiáº¿n trÃ¬nh web server.&lt;/p>
&lt;p>&lt;strong>ğŸš€ KÃ­ch hoáº¡t dá»‹ch vá»¥ NGINX khá»Ÿi Ä‘á»™ng cÃ¹ng há»‡ thá»‘ng&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo systemctl &lt;span class="nb">enable&lt;/span> nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>Káº¿t quáº£:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Synchronizing state of nginx.service with SysV service script with /usr/lib/systemd/systemd-sysv-install.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Executing: /usr/lib/systemd/systemd-sysv-install enable nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>â–¶ï¸ Khá»Ÿi Ä‘á»™ng dá»‹ch vá»¥ NGINX&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo systemctl start nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>â¹ï¸ Dá»«ng dá»‹ch vá»¥ NGINX&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo systemctl stop nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>ğŸ”„ Khá»Ÿi Ä‘á»™ng láº¡i dá»‹ch vá»¥ NGINX&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo systemctl restart nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>ğŸ” Kiá»ƒm tra tráº¡ng thÃ¡i dá»‹ch vá»¥ NGINX&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo systemctl status nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>Káº¿t quáº£ máº«u:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="err">â—&lt;/span> &lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">A&lt;/span> &lt;span class="n">high&lt;/span> &lt;span class="n">performance&lt;/span> &lt;span class="n">web&lt;/span> &lt;span class="n">server&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="n">reverse&lt;/span> &lt;span class="n">proxy&lt;/span> &lt;span class="n">server&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Loaded&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">loaded&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">lib&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">systemd&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">enabled&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">preset&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">enabled&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Active&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">active&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">running&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">since&lt;/span> &lt;span class="n">Wed&lt;/span> &lt;span class="mi">2024&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">06&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">26&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">55&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">50&lt;/span> &lt;span class="n">UTC&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="nb">min&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="n">ago&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Docs&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">man&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Process&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2397&lt;/span> &lt;span class="n">ExecStartPre&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">t&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">q&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">g&lt;/span> &lt;span class="n">daemon&lt;/span> &lt;span class="n">on&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">master_process&lt;/span> &lt;span class="n">on&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">code&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">exited&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">status&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">SUCCESS&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Process&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2399&lt;/span> &lt;span class="n">ExecStart&lt;/span>&lt;span class="o">=/&lt;/span>&lt;span class="n">usr&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">sbin&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="n">g&lt;/span> &lt;span class="n">daemon&lt;/span> &lt;span class="n">on&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="n">master_process&lt;/span> &lt;span class="n">on&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">code&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">exited&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">status&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">SUCCESS&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Main&lt;/span> &lt;span class="n">PID&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2400&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Tasks&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">limit&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1068&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Memory&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">1.7&lt;/span>&lt;span class="n">M&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">peak&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mf">2.4&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">CPU&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="n">ms&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">CGroup&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">slice&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">nginx&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">service&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">â”œâ”€&lt;/span>&lt;span class="mi">2400&lt;/span> &lt;span class="s2">&amp;#34;nginx: master process /usr/sbin/nginx -g daemon on; master_process on;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">â””â”€&lt;/span>&lt;span class="mi">2401&lt;/span> &lt;span class="s2">&amp;#34;nginx: worker process&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>Dá»±a vÃ o giÃ¡ trá»‹ &lt;code>Active: active (running)&lt;/code>, NGINX Ä‘ang cháº¡y trÃªn mÃ¡y chá»§. Náº¿u tráº¡ng thÃ¡i hiá»ƒn thá»‹ &lt;code>Active: active (failed)&lt;/code>, hÃ£y kiá»ƒm tra vÃ  dá»«ng báº¥t ká»³ tiáº¿n trÃ¬nh nÃ o Ä‘ang sá»­ dá»¥ng cá»•ng HTTP &lt;code>80&lt;/code>, sau Ä‘Ã³ khá»Ÿi Ä‘á»™ng láº¡i dá»‹ch vá»¥ NGINX.&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-táº¡o-nginx-virtual-host">ğŸŒ Táº¡o nginx virtual host
&lt;/h2>&lt;p>Nginx virtual host bao gá»“m cÃ¡c cáº¥u hÃ¬nh Ä‘áº·c biá»‡t giÃºp mÃ¡y chá»§ web phÃ¢n phá»‘i cÃ¡c tá»‡p á»©ng dá»¥ng web tá»« má»™t thÆ° má»¥c cá»¥ thá»ƒ báº±ng má»™t tÃªn miá»n cá»¥ thá»ƒ trÃªn mÃ¡y chá»§ cá»§a báº¡n. cÃ¡c bÆ°á»›c sau Ä‘Ã¢y sáº½ hÆ°á»›ng dáº«n táº¡o má»™t cáº¥u hÃ¬nh virtual host máº«u Ä‘á»ƒ phÃ¢n phá»‘i tá»‡p á»©ng dá»¥ng web má»™t cÃ¡ch an toÃ n trÃªn mÃ¡y chá»§.&lt;/p>
&lt;p>&lt;strong>ğŸ“‚ Táº¡o tá»‡p cáº¥u hÃ¬nh virtual host má»›i&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Trong thÆ° má»¥c &lt;code>/etc/nginx/sites-available&lt;/code>, táº¡o má»™t tá»‡p cáº¥u hÃ¬nh má»›i, vÃ­ dá»¥: &lt;code>app.example.com.conf&lt;/code>.&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ sudo nano /etc/nginx/sites-available/app.example.com.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>ThÃªm cÃ¡c cáº¥u hÃ¬nh sau vÃ o tá»‡p:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-nginx" data-lang="nginx">&lt;span class="line">&lt;span class="cl">&lt;span class="k">server&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">listen&lt;/span> &lt;span class="mi">80&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">listen&lt;/span> &lt;span class="s">[::]:80&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">server_name&lt;/span> &lt;span class="s">app.example.com&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">root&lt;/span> &lt;span class="s">/var/www/app.example.com&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">index&lt;/span> &lt;span class="s">index.html&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">location&lt;/span> &lt;span class="s">/&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">try_files&lt;/span> &lt;span class="nv">$uri&lt;/span> &lt;span class="nv">$uri/&lt;/span> &lt;span class="p">=&lt;/span>&lt;span class="mi">404&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>LÆ°u vÃ  Ä‘Ã³ng tá»‡p.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>âœ… Kiá»ƒm tra cáº¥u hÃ¬nh Nginx&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Kiá»ƒm tra xem cáº¥u hÃ¬nh Nginx cÃ³ lá»—i khÃ´ng:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ sudo nginx -t
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>Káº¿t quáº£:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nginx: configuration file /etc/nginx/nginx.conf test is successful
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>ğŸ”— KÃ­ch hoáº¡t virtual host&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>LiÃªn káº¿t tá»‡p cáº¥u hÃ¬nh vÃ o thÆ° má»¥c &lt;code>/etc/nginx/sites-enabled&lt;/code> Ä‘á»ƒ kÃ­ch hoáº¡t virtual host:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ sudo ln -s /etc/nginx/sites-available/app.example.com.conf /etc/nginx/sites-enabled/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>ğŸ“ Táº¡o thÆ° má»¥c web root&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ sudo mkdir -p /var/www/app.example.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>ğŸ“ Táº¡o tá»‡p html máº«u&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Táº¡o tá»‡p &lt;code>index.html&lt;/code> trong thÆ° má»¥c web root:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ sudo nano /var/www/app.example.com/index.html
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>ThÃªm ná»™i dung sau vÃ o tá»‡p:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h1&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>Hello Hoang Duong&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">h1&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>LÆ°u vÃ  Ä‘Ã³ng tá»‡p.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>ğŸ”„ Khá»Ÿi Ä‘á»™ng láº¡i nginx&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ sudo systemctl restart nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>ğŸŒ Kiá»ƒm tra virtual host&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Sá»­ dá»¥ng lá»‡nh &lt;code>curl&lt;/code> Ä‘á»ƒ kiá»ƒm tra virtual host:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ curl http://app.example.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>Káº¿t quáº£:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Hello Hoang Duong
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="-báº£o-máº­t-mÃ¡y-chá»§-web-nginx">ğŸ”’ Báº£o máº­t mÃ¡y chá»§ web Nginx
&lt;/h2>&lt;p>SSL certificates giÃºp mÃ£ hÃ³a giao tiáº¿p giá»¯a trÃ¬nh duyá»‡t cá»§a ngÆ°á»i dÃ¹ng vÃ  mÃ¡y chá»§ Nginx thÃ´ng qua HTTPS. Máº·c Ä‘á»‹nh, Nginx láº¯ng nghe káº¿t ná»‘i Ä‘áº¿n trÃªn cá»•ng HTTP 80 khÃ´ng an toÃ n. Thá»±c hiá»‡n cÃ¡c bÆ°á»›c sau Ä‘á»ƒ táº¡o chá»©ng chá»‰ SSL Ä‘Ã¡ng tin cáº­y tá»« Let&amp;rsquo;s Encrypt vÃ  báº£o máº­t mÃ¡y chá»§ Nginx Ä‘á»ƒ cháº¥p nháº­n cÃ¡c yÃªu cáº§u káº¿t ná»‘i HTTPS Ä‘Æ°á»£c mÃ£ hÃ³a.&lt;/p>
&lt;p>&lt;strong>CÃ i Ä‘áº·t Certbot â€“ Let&amp;rsquo;s Encrypt Client ğŸ”§&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>CÃ i Ä‘áº·t gÃ³i Certbot sá»­ dá»¥ng Snap:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ sudo snap install --classic certbot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>Kiá»ƒm tra phiÃªn báº£n Certbot Ä‘Ã£ cÃ i trÃªn mÃ¡y chá»§:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ sudo certbot --version
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ“Œ &lt;strong>Äáº§u ra máº«u:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">certbot 2.11.0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="-táº¡o-chá»©ng-chá»‰-ssl-cho-nginx">ğŸ›¡ï¸ Táº¡o chá»©ng chá»‰ SSL cho Nginx
&lt;/h2>&lt;ul>
&lt;li>Táº¡o chá»©ng chá»‰ SSL má»›i cho tÃªn miá»n cá»§a báº¡n. Thay tháº¿ &lt;code>app.example.com&lt;/code> báº±ng tÃªn miá»n thá»±c táº¿ trong cáº¥u hÃ¬nh Virtual Host Nginx:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ sudo certbot --nginx -d app.example.com --agree-tos
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>QuÃ¡ trÃ¬nh nÃ y sáº½:&lt;/p>
&lt;ul>
&lt;li>âœ… Táº¡o chá»©ng chá»‰ SSL há»£p lá»‡&lt;/li>
&lt;li>âœ… Tá»± Ä‘á»™ng cáº¥u hÃ¬nh Nginx Ä‘á»ƒ sá»­ dá»¥ng SSL&lt;/li>
&lt;li>âœ… KÃ­ch hoáº¡t HTTPS trÃªn mÃ¡y chá»§ web cá»§a báº¡n&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Kiá»ƒm tra tá»± Ä‘á»™ng gia háº¡n chá»©ng chá»‰ ğŸ”„&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>CÃ¡c chá»©ng chá»‰ SSL tá»« Let&amp;rsquo;s Encrypt cÃ³ thá»i háº¡n 90 ngÃ y. Äá»ƒ Ä‘áº£m báº£o khÃ´ng bá»‹ háº¿t háº¡n, báº¡n cÃ³ thá»ƒ kiá»ƒm tra tiáº¿n trÃ¬nh tá»± Ä‘á»™ng gia háº¡n:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ sudo certbot renew --dry-run
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Náº¿u khÃ´ng cÃ³ lá»—i nÃ o xáº£y ra, nghÄ©a lÃ  chá»©ng chá»‰ sáº½ Ä‘Æ°á»£c tá»± Ä‘á»™ng gia háº¡n Ä‘Ãºng háº¡n.&lt;/p>
&lt;h2 id="-kiá»ƒm-tra-trang-web-hoáº¡t-Ä‘á»™ng-vá»›i-https">ğŸŒ Kiá»ƒm tra trang web hoáº¡t Ä‘á»™ng vá»›i https
&lt;/h2>&lt;ul>
&lt;li>Má»Ÿ trÃ¬nh duyá»‡t vÃ  truy cáº­p:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">https://app.example.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Náº¿u tháº¥y biá»ƒu tÆ°á»£ng á»• khÃ³a ğŸ”’, tá»©c lÃ  SSL Ä‘Ã£ Ä‘Æ°á»£c cÃ i Ä‘áº·t thÃ nh cÃ´ng! ğŸš€&lt;/p>
&lt;hr>
&lt;h2 id="-thiáº¿t-láº­p-quy-táº¯c-tÆ°á»ng-lá»­a-ufw">ğŸ”¥ Thiáº¿t láº­p quy táº¯c tÆ°á»ng lá»­a UFW
&lt;/h2>&lt;p>Uncomplicated Firewall (UFW) Ä‘Æ°á»£c cÃ i Ä‘áº·t vÃ  kÃ­ch hoáº¡t máº·c Ä‘á»‹nh trÃªn Ubuntu 24.04. Thá»±c hiá»‡n cÃ¡c bÆ°á»›c sau Ä‘á»ƒ cáº¥u hÃ¬nh tÆ°á»ng lá»­a, cho phÃ©p mÃ¡y chá»§ Nginx láº¯ng nghe káº¿t ná»‘i HTTP vÃ  HTTPS.&lt;/p>
&lt;p>&lt;strong>Cho phÃ©p káº¿t ná»‘i HTTP (Cá»•ng 80)ğŸ”Œ&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Cháº¡y lá»‡nh sau Ä‘á»ƒ má»Ÿ káº¿t ná»‘i HTTP:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ sudo ufw allow 80/tcp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>Cho phÃ©p káº¿t ná»‘i HTTPS (Cá»•ng 443) ğŸ”&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Cháº¡y lá»‡nh sau Ä‘á»ƒ má»Ÿ káº¿t ná»‘i HTTPS:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ sudo ufw allow 443/tcp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>Kiá»ƒm tra tráº¡ng thÃ¡i tÆ°á»ng lá»­a ğŸ”¢&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Cháº¡y lá»‡nh sau Ä‘á»ƒ xÃ¡c nháº­n quy táº¯c káº¿t ná»‘i:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ sudo ufw status
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ‘‰ &lt;strong>Äáº§u ra máº«u:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Status: active
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">To Action From
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-- ------ ----
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">22/tcp ALLOW Anywhere
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">80/tcp ALLOW Anywhere
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">443/tcp ALLOW Anywhere
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">22/tcp (v6) ALLOW Anywhere (v6)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">80/tcp (v6) ALLOW Anywhere (v6)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">443/tcp (v6) ALLOW Anywhere (v6)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ›¡ï¸ Sau khi thiáº¿t láº­p xong, mÃ¡y chá»§ sáº½ chá»‰ cho phÃ©p káº¿t ná»‘i an toÃ n qua HTTP vÃ  HTTPS&lt;/p>
&lt;hr>
&lt;h2 id="-lá»i-káº¿t">ğŸ¯ Lá»i káº¿t
&lt;/h2>&lt;p>ChÃºc báº¡n cÃ i Ä‘áº·t thÃ nh cÃ´ng Nginx trÃªn mÃ¡y chá»§ Ubuntu 24.04 vÃ  cáº¥u hÃ¬nh web server Ä‘á»ƒ phá»¥c vá»¥ cÃ¡c á»©ng dá»¥ng web. Nginx há»— trá»£ nhiá»u cáº¥u hÃ¬nh virtual host giÃºp báº¡n triá»ƒn khai cÃ¡c á»©ng dá»¥ng web má»™t cÃ¡ch an toÃ n. NgoÃ i ra, báº¡n cÃ³ thá»ƒ tÃ­ch há»£p Nginx vá»›i cÃ¡c á»©ng dá»¥ng khÃ¡c nhÆ° MySQL vÃ  PHP Ä‘á»ƒ xÃ¢y dá»±ng cÃ¡c á»©ng dá»¥ng web Ä‘á»™ng. Äá»ƒ biáº¿t thÃªm thÃ´ng tin chi tiáº¿t vÃ  cÃ¡c tÃ¹y chá»n cáº¥u hÃ¬nh khÃ¡c, vui lÃ²ng truy cáº­p &lt;a class="link" href="https://docs.nginx.com/" target="_blank" rel="noopener"
>tÃ i liá»‡u chÃ­nh thá»©c&lt;/a> chÃ­nh thá»©c cá»§a Nginx. ğŸš€ğŸ˜Š&lt;/p></description></item><item><title>Trá» tÃªn miá»n vá» hosting ğŸŒ</title><link>https://tech.nguuyen.io.vn/posts/website/domain-to-hosting-setup/</link><pubDate>Thu, 27 Feb 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/website/domain-to-hosting-setup/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/website/domain-to-hosting-setup.webp" alt="Featured image of post Trá» tÃªn miá»n vá» hosting ğŸŒ" />&lt;h2 id="-táº¡i-sao-cáº§n-pháº£i-trá»-tÃªn-miá»n-vá»-hosting">ğŸŒ Táº¡i sao cáº§n pháº£i trá» tÃªn miá»n vá» hosting?
&lt;/h2>&lt;p>TÃªn miá»n vÃ  hosting lÃ  hai yáº¿u tá»‘ quan trá»ng giÃºp website hoáº¡t Ä‘á»™ng.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>TÃªn miá»n&lt;/strong> lÃ  Ä‘á»‹a chá»‰ website.&lt;/li>
&lt;li>&lt;strong>Hosting&lt;/strong> lÃ  nÆ¡i lÆ°u trá»¯ dá»¯ liá»‡u website.&lt;/li>
&lt;/ul>
&lt;h3 id="lÃ½-do-cáº§n-trá»-tÃªn-miá»n">LÃ½ do cáº§n trá» tÃªn miá»n
&lt;/h3>&lt;ul>
&lt;li>Káº¿t ná»‘i tÃªn miá»n vá»›i hosting Ä‘á»ƒ website hiá»ƒn thá»‹ trÃªn internet.&lt;/li>
&lt;li>GiÃºp má»i ngÆ°á»i truy cáº­p website báº±ng Ä‘á»‹a chá»‰ dá»… nhá»›.&lt;/li>
&lt;/ul>
&lt;h3 id="cÃ¡ch-thá»±c-hiá»‡n-">CÃ¡ch thá»±c hiá»‡n ğŸ”§
&lt;/h3>&lt;ul>
&lt;li>Láº¥y thÃ´ng tin &lt;strong>nameserver&lt;/strong> hoáº·c &lt;strong>IP&lt;/strong> tá»« nhÃ  cung cáº¥p.&lt;/li>
&lt;li>Cáº¥u hÃ¬nh trong trang quáº£n lÃ½ domain.&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="ba-cÃ¡ch-trá»-tÃªn-miá»n-vá»-hosting-Ä‘Æ¡n-giáº£n-nháº¥t-">Ba cÃ¡ch trá» tÃªn miá»n vá» hosting Ä‘Æ¡n giáº£n nháº¥t ğŸš€
&lt;/h2>&lt;h3 id="trá»-tÃªn-miá»n-báº±ng-nameserver">Trá» tÃªn miá»n báº±ng nameserver
&lt;/h3>&lt;p>&lt;strong>CÃ¡c bÆ°á»›c thá»±c hiá»‡n:&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>ÄÄƒng nháº­p trÃ¬nh quáº£n trá»‹ tÃªn miá»n.&lt;/li>
&lt;li>Chá»n tÃªn miá»n cáº§n trá».&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://image.vietnix.vn/wp-content/uploads/2024/03/chon-ten-mien-muon-tro-ve-hosting-2.webp"
loading="lazy"
alt="Chá»n tÃªn miá»n muá»‘n trá» vá» hosting"
>&lt;/p>
&lt;p align="center">&lt;em>Chá»n tÃªn miá»n muá»‘n trá» vá» hosting&lt;/em>&lt;/p>
&lt;ol start="3">
&lt;li>Thay Ä‘á»•i nameserver máº·c Ä‘á»‹nh thÃ nh nameserver cá»§a hosting (thÃ´ng tin nÃ y cÃ³ trong &lt;em>&lt;strong>email&lt;/strong>&lt;/em> tá»« nhÃ  cung cáº¥p hosting).&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://image.vietnix.vn/wp-content/uploads/2024/03/thay-doi-nameserver-1.webp"
loading="lazy"
alt="Thay Ä‘á»•i Nameserver máº·c Ä‘á»‹nh thÃ nh Nameserver cá»§a hosting Ä‘Ã£ Ä‘Äƒng kÃ½"
>&lt;/p>
&lt;p align="center">&lt;em>Thay Ä‘á»•i Nameserver máº·c Ä‘á»‹nh thÃ nh Nameserver cá»§a hosting Ä‘Ã£ Ä‘Äƒng kÃ½&lt;/em>&lt;/p>
&lt;ol start="4">
&lt;li>Chá» cáº­p nháº­t (vÃ i phÃºt Ä‘áº¿n vÃ i giá», tuá»³ vÃ o server cÃ³ thá»ƒ cao nháº¥t tá»›i &lt;em>&lt;strong>24h&lt;/strong>&lt;/em>).&lt;/li>
&lt;li>Kiá»ƒm tra báº±ng cÃ¡ch truy cáº­p tÃªn miá»n.&lt;/li>
&lt;/ol>
&lt;h3 id="trá»-tÃªn-miá»n-báº±ng-ip-a-record">Trá» tÃªn miá»n báº±ng IP (A record)
&lt;/h3>&lt;p>&lt;strong>CÃ¡c bÆ°á»›c thá»±c hiá»‡n:&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>ÄÄƒng nháº­p trÃ¬nh quáº£n trá»‹ tÃªn miá»n.&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://image.vietnix.vn/wp-content/uploads/2024/03/chon-muc-cau-hinh-dns-1.webp"
loading="lazy"
alt="Chá»n tÃªn miá»n muá»‘n trá» vá» hosting, sau Ä‘Ã³ chá»n má»¥c cáº¥u hÃ¬nh DNS"
>&lt;/p>
&lt;p align="center">&lt;em>Chá»n tÃªn miá»n muá»‘n trá» vá» hosting, sau Ä‘Ã³ chá»n má»¥c cáº¥u hÃ¬nh DNS&lt;/em>&lt;/p>
&lt;ol start="2">
&lt;li>Chá»n má»¥c cáº¥u hÃ¬nh DNS.&lt;/li>
&lt;li>ThÃªm 2 báº£n ghi A record:
&lt;ul>
&lt;li>&lt;code>@&lt;/code> â†’ IP cá»§a hosting (Äá»‹a chá»‰ IP cá»§a hosting tá»« email nhÃ  cung cáº¥p gá»­i).&lt;/li>
&lt;li>&lt;code>www&lt;/code> â†’ IP cá»§a hosting.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://image.vietnix.vn/wp-content/uploads/2024/03/them-2-ban-a-record.webp"
loading="lazy"
alt="ThÃªm hai báº£n A record"
>&lt;/p>
&lt;p align="center">&lt;em>ThÃªm hai báº£n A record&lt;/em>&lt;/p>
&lt;ol start="4">
&lt;li>LÆ°u thay Ä‘á»•i vÃ  chá» cáº­p nháº­t (QuÃ¡ trÃ¬nh nÃ y cÃ³ thá»ƒ nhanh hoáº·c lÃ¢u tÃ¹y thuá»™c vÃ o há»‡ thá»‘ng DNS. CÃ³ thá»ƒ tá»« vÃ i phÃºt Ä‘áº¿n vÃ i giá»).&lt;/li>
&lt;/ol>
&lt;h3 id="trá»-tÃªn-miá»n-báº±ng-nameserver-trung-gian">Trá» tÃªn miá»n báº±ng nameserver trung gian
&lt;/h3>&lt;p>Äá»ƒ trá» tÃªn miá»n vá» hosting báº±ng Nameserver trung gian nhÆ° CloudFlare, Namecheap FreeDNS, Incapsula, báº¡n cÃ³ thá»ƒ thá»±c hiá»‡n theo cÃ¡c bÆ°á»›c sau:&lt;/p>
&lt;p>&lt;strong>CÃ¡c bÆ°á»›c thá»±c hiá»‡n:&lt;/strong>&lt;/p>
&lt;ol>
&lt;li>ÄÄƒng kÃ½ tÃ i khoáº£n táº¡i Nameserver trung gian &amp;gt; XÃ¡c nháº­n cÃ¡c báº£n ghi cáº§n thiáº¿t Ä‘á»ƒ thÃªm website vÃ o Nameserver trung gian.&lt;/li>
&lt;li>Truy cáº­p vÃ o khu vá»±c quáº£n lÃ½ tÃªn miá»n cá»§a nhÃ  cung cáº¥p vÃ  thá»±c hiá»‡n thay Ä‘á»•i Nameserver Ä‘á»ƒ trá» tÃªn miá»n vá» hosting qua Nameserver trung gian.&lt;/li>
&lt;li>Chá» cáº­p nháº­t Ä‘á»ƒ hoÃ n táº¥t.&lt;/li>
&lt;/ol>
&lt;h2 id="má»™t-sá»‘-lá»—i-thÆ°á»ng-gáº·p-khi-trá»-tÃªn-miá»n-vá»-hosting-">Má»™t sá»‘ lá»—i thÆ°á»ng gáº·p khi trá» tÃªn miá»n vá» hosting âš ï¸
&lt;/h2>&lt;p>Khi trá» tÃªn miá»n vá» hosting, báº¡n cÃ³ thá»ƒ gáº·p má»™t sá»‘ lá»—i phá»• biáº¿n khiáº¿n website khÃ´ng hoáº¡t Ä‘á»™ng Ä‘Ãºng cÃ¡ch. Hiá»ƒu vÃ  kháº¯c phá»¥c cÃ¡c lá»—i nÃ y sáº½ giÃºp Ä‘áº£m báº£o quÃ¡ trÃ¬nh cáº¥u hÃ¬nh diá»…n ra suÃ´n sáº».&lt;/p>
&lt;h3 id="-sai-tÃªn-miá»n-cá»§a-hosting">ğŸš« Sai tÃªn miá»n cá»§a hosting
&lt;/h3>&lt;p>Khi Ä‘Äƒng kÃ½ hosting, nhÃ  cung cáº¥p yÃªu cáº§u khai bÃ¡o tÃªn miá»n. Náº¿u nháº­p sai hoáº·c trá» vá» má»™t tÃªn miá»n khÃ´ng khá»›p, website sáº½ khÃ´ng hoáº¡t Ä‘á»™ng.&lt;/p>
&lt;h3 id="-sá»­-dá»¥ng-cáº£-hai-cÃ¡ch-trá»-tÃªn-miá»n">ğŸš« Sá»­ dá»¥ng cáº£ hai cÃ¡ch trá» tÃªn miá»n
&lt;/h3>&lt;p>Náº¿u báº¡n Ä‘Ã£ trá» tÃªn miá»n báº±ng &lt;strong>nameserver&lt;/strong>, khÃ´ng nÃªn thay Ä‘á»•i sang &lt;strong>IP (A record)&lt;/strong> vÃ  ngÆ°á»£c láº¡i, vÃ¬ Ä‘iá»u nÃ y cÃ³ thá»ƒ gÃ¢y lá»—i xung Ä‘á»™t DNS.&lt;/p>
&lt;h3 id="-nháº­p-sai-loáº¡i-báº£n-ghi-dns">ğŸš« Nháº­p sai loáº¡i báº£n ghi DNS
&lt;/h3>&lt;p>CÃ³ nhiá»u loáº¡i báº£n ghi DNS nhÆ°:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>A record&lt;/strong>: Trá» tÃªn miá»n vá» IP cá»§a hosting.&lt;/li>
&lt;li>&lt;strong>CNAME&lt;/strong>: Chuyá»ƒn hÆ°á»›ng má»™t tÃªn miá»n sang tÃªn miá»n khÃ¡c.&lt;/li>
&lt;li>&lt;strong>MX record&lt;/strong>: Cáº¥u hÃ¬nh email.&lt;/li>
&lt;/ul>
&lt;p>Nháº­p sai loáº¡i báº£n ghi cÃ³ thá»ƒ lÃ m giÃ¡n Ä‘oáº¡n káº¿t ná»‘i Ä‘áº¿n hosting.&lt;/p>
&lt;h3 id="-nháº­p-sai-Ä‘á»‹a-chá»‰-ip-cá»§a-hosting">ğŸš« Nháº­p sai Ä‘á»‹a chá»‰ IP cá»§a hosting
&lt;/h3>&lt;p>IP hosting thÆ°á»ng dÃ i vÃ  dá»… nháº­p sai. Báº¡n nÃªn &lt;strong>sao chÃ©p trá»±c tiáº¿p&lt;/strong> tá»« email cá»§a nhÃ  cung cáº¥p Ä‘á»ƒ trÃ¡nh nháº§m láº«n vá»›i IP cá»§a mÃ¡y tÃ­nh cÃ¡ nhÃ¢n hoáº·c thiáº¿t bá»‹ khÃ¡c.&lt;/p>
&lt;p>Náº¿u gáº·p lá»—i, hÃ£y kiá»ƒm tra láº¡i thÃ´ng tin vÃ  chá» má»™t thá»i gian Ä‘á»ƒ DNS cáº­p nháº­t hoÃ n táº¥t.&lt;/p>
&lt;hr>
&lt;h2 id="video-hÆ°á»›ng-dáº«n-chi-tiáº¿t-">Video hÆ°á»›ng dáº«n chi tiáº¿t ğŸ¥
&lt;/h2>&lt;p>Náº¿u báº¡n muá»‘n xem hÆ°á»›ng dáº«n trá»±c quan hÆ¡n, cÃ³ thá»ƒ tham kháº£o video dÆ°á»›i Ä‘Ã¢y. Video nÃ y sáº½ giÃºp báº¡n hiá»ƒu rÃµ tá»«ng bÆ°á»›c trong viá»‡c trá» tÃªn miá»n vá» hosting, tá»« cÃ¡ch láº¥y thÃ´ng tin nameserver Ä‘áº¿n viá»‡c cáº­p nháº­t trong trÃ¬nh quáº£n lÃ½ tÃªn miá»n.&lt;/p>
&lt;p>&lt;div class="video-wrapper">
&lt;iframe loading="lazy"
src="https://www.youtube-nocookie.com/embed/7RjjF8Ee7Ws"
allowfullscreen
title="YouTube Video"
>
&lt;/iframe>
&lt;/div>
&lt;blockquote>
&lt;p>&lt;/p>&lt;span class="cite">&lt;span>â€• &lt;/span>&lt;span>Nguá»“n, &lt;/span>&lt;a href="https://www.youtube.com/@F8VNOfficial">&lt;cite>F8 Official âœ”ï¸&lt;/cite>&lt;/a>&lt;/span>&lt;/blockquote>&lt;/p>
&lt;hr>
&lt;h2 id="lá»i-káº¿t-">Lá»i káº¿t ğŸŒŸ
&lt;/h2>&lt;p>Viá»‡c trá» tÃªn miá»n vá» hosting lÃ  má»™t bÆ°á»›c quan trá»ng Ä‘á»ƒ website cá»§a báº¡n cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng chÃ­nh xÃ¡c trÃªn Internet. DÃ¹ thá»±c hiá»‡n theo cÃ¡ch nÃ oâ€”sá»­ dá»¥ng nameserver, A record, hay nameserver trung gianâ€”báº¡n cÅ©ng cáº§n kiá»ƒm tra ká»¹ thÃ´ng tin vÃ  kiÃªn nháº«n chá» DNS cáº­p nháº­t. Náº¿u gáº·p lá»—i, hÃ£y xem láº¡i cÃ i Ä‘áº·t vÃ  thá»­ láº¡i ğŸ”„. ChÃºc báº¡n thá»±c hiá»‡n thÃ nh cÃ´ng vÃ  website hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh! ğŸš€ Náº¿u cÃ³ váº¥n Ä‘á», cá»© Ä‘á»ƒ láº¡i comment, tÃ´i sáº½ xem thá»­ nhÃ©! ğŸ’¬ğŸ˜Š&lt;/p></description></item><item><title>Deploy Website lÃªn hosting Ä‘Æ¡n giáº£n nháº¥t (HTML/CSS hoáº·c React/Vue.js) ğŸ”¥</title><link>https://tech.nguuyen.io.vn/posts/website/how-to-deploy-a-website/</link><pubDate>Wed, 26 Feb 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/website/how-to-deploy-a-website/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/website/upload-website-on-hosting.webp" alt="Featured image of post Deploy Website lÃªn hosting Ä‘Æ¡n giáº£n nháº¥t (HTML/CSS hoáº·c React/Vue.js) ğŸ”¥" />&lt;h2 id="cÃ¡ch-up-website-lÃªn-hosting-thÃ´ng-qua-file-manager-vÃ -cpanel-nhanh-nháº¥t-tá»«-a-z">CÃ¡ch up website lÃªn Hosting thÃ´ng qua File Manager vÃ  cPanel nhanh nháº¥t tá»« A-Z
&lt;/h2>&lt;hr>
&lt;p>Viá»‡c upload website lÃªn hosting lÃ  bÆ°á»›c thiáº¿t yáº¿u Ä‘á»ƒ Ä‘Æ°a website cá»§a báº¡n hoáº¡t Ä‘á»™ng trÃªn internet. QuÃ¡ trÃ¬nh nÃ y khÃ´ng chá»‰ Ä‘Æ¡n giáº£n lÃ  chuyá»ƒn dá»¯ liá»‡u, mÃ  cÃ²n liÃªn quan Ä‘áº¿n viá»‡c Ä‘áº£m báº£o má»i thá»© hoáº¡t Ä‘á»™ng mÆ°á»£t mÃ  vÃ  an toÃ n. BÃ i viáº¿t nÃ y sáº½ giÃºp báº¡n hiá»ƒu rÃµ cÃ¡c bÆ°á»›c cáº§n thiáº¿t, tá»« chuáº©n bá»‹ file vÃ  database, Ä‘áº¿n cÃ¡c cÃ´ng cá»¥ há»— trá»£ upload hiá»‡u quáº£.&lt;/p>
&lt;hr>
&lt;h2 id="Ä‘iá»ƒm-chÃ­nh-cáº§n-náº¯m">Äiá»ƒm chÃ­nh cáº§n náº¯m
&lt;/h2>&lt;p>TrÆ°á»›c khi báº¯t tay vÃ o viá»‡c upload website lÃªn hosting, báº¡n cáº§n lÆ°u Ã½ má»™t sá»‘ yáº¿u tá»‘ quan trá»ng. MÃ¬nh sáº½ giÃºp báº¡n dá»… dÃ ng hiá»ƒu vÃ  náº¯m báº¯t cÃ¡c bÆ°á»›c thá»±c hiá»‡n:&lt;/p>
&lt;p>âœ… &lt;strong>Báº¡n cáº§n chuáº©n bá»‹ gÃ¬ khi upload website lÃªn hosting&lt;/strong>: Chuáº©n bá»‹ file website, database, quyá»n truy cáº­p control panel vÃ  pháº§n má»m FTP nhÆ° FileZilla.&lt;/p>
&lt;p>âœ… &lt;strong>CÃ¡c cÃ¡ch upload website lÃªn hosting&lt;/strong>: Chá»n hosting uy tÃ­n, sau Ä‘Ã³ sá»­ dá»¥ng File Manager, FTP, plugin WordPress, SSH hoáº·c nhá» há»— trá»£ tá»« nhÃ  cung cáº¥p.&lt;/p>
&lt;p>âœ… &lt;strong>LÃ½ do cáº§n upload website lÃªn hosting&lt;/strong>: GiÃºp cÃ´ng khai website, tÄƒng báº£o máº­t, cáº£i thiá»‡n tá»‘c Ä‘á»™ vÃ  dá»… quáº£n lÃ½.&lt;/p>
&lt;p>âœ… &lt;strong>Bá»‘n bÆ°á»›c Ä‘á»ƒ upload web lÃªn hosting&lt;/strong>:&lt;/p>
&lt;ol>
&lt;li>Upload file website vÃ o thÆ° má»¥c &lt;code>public_html&lt;/code> qua File Manager hoáº·c FTP.&lt;/li>
&lt;li>Kiá»ƒm tra xem cÃ¡c file Ä‘Ã£ Ä‘Ãºng vá»‹ trÃ­ chÆ°a.&lt;/li>
&lt;li>Táº¡o database trÃªn cPanel, import dá»¯ liá»‡u qua phpMyAdmin vÃ  cáº¥u hÃ¬nh káº¿t ná»‘i.&lt;/li>
&lt;li>Truy cáº­p website Ä‘á»ƒ kiá»ƒm tra xem má»i thá»© Ä‘Ã£ hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh chÆ°a.&lt;/li>
&lt;/ol>
&lt;h2 id="cáº§n-chuáº©n-bá»‹-gÃ¬-khi-upload-website-lÃªn-hosting">Cáº§n chuáº©n bá»‹ gÃ¬ khi upload website lÃªn hosting?
&lt;/h2>&lt;p>Äá»ƒ upload website lÃªn hosting, trÆ°á»›c tiÃªn báº¡n cáº§n pháº£i chuáº©n bá»‹ má»™t sá»‘ váº¥n Ä‘á» sau Ä‘Ã¢y:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>File website&lt;/strong>: Nhá»¯ng file nÃ y cÃ³ thá»ƒ lÃ  toÃ n bá»™ dá»¯ liá»‡u bÃªn trong pháº§n &lt;code>public_html&lt;/code> cÅ© hoáº·c file source code hay báº£n backup (sao lÆ°u) dá»¯ liá»‡u má»›i nháº¥t thay cho source code.&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>&lt;strong>ğŸ“Œ LÆ°u Ã½ khi triá»ƒn khai website React/Vue.js&lt;/strong>&lt;/p>
&lt;p>Khi build má»™t á»©ng dá»¥ng &lt;strong>React&lt;/strong> hoáº·c &lt;strong>Vue.js&lt;/strong>, ta khÃ´ng táº£i toÃ n bá»™ mÃ£ nguá»“n lÃªn mÃ¡y chá»§,&lt;br>
mÃ  chá»‰ cáº§n upload &lt;strong>thÆ° má»¥c chá»©a cÃ¡c file tÄ©nh Ä‘Ã£ Ä‘Æ°á»£c build&lt;/strong>.&lt;/p>
&lt;p>&lt;strong>ğŸ”¹ CÃ¡c bÆ°á»›c build vÃ  nÃ©n tá»‡p:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Cháº¡y lá»‡nh build:
&lt;ul>
&lt;li>&lt;strong>React:&lt;/strong>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">npm run build
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>&lt;strong>Vue.js:&lt;/strong>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">npm run build
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Sau khi build xong, thÆ° má»¥c output thÆ°á»ng lÃ  &lt;code>build/&lt;/code> (&lt;strong>React&lt;/strong>) hoáº·c &lt;code>dist/&lt;/code> (&lt;strong>Vue.js&lt;/strong>).&lt;/li>
&lt;li>NÃ©n thÆ° má»¥c &lt;code>build&lt;/code> hoáº·c &lt;code>dist&lt;/code> thÃ nh file ZIP trÆ°á»›c khi táº£i lÃªn mÃ¡y chá»§.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>ğŸ“¤ Khi táº£i lÃªn mÃ¡y chá»§:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Náº¿u dÃ¹ng &lt;strong>cPanel&lt;/strong>, cÃ³ thá»ƒ giáº£i nÃ©n trá»±c tiáº¿p trong thÆ° má»¥c &lt;code>public_html&lt;/code>.&lt;/li>
&lt;li>Náº¿u dÃ¹ng &lt;strong>SSH/SFTP&lt;/strong>, táº£i lÃªn vÃ  giáº£i nÃ©n báº±ng lá»‡nh:
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">unzip build.zip -d /var/www/html/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>Äáº£m báº£o &lt;strong>cáº¥u hÃ¬nh mÃ¡y chá»§ (Apache/Nginx)&lt;/strong> Ä‘á»ƒ trá» vÃ o thÆ° má»¥c chá»©a file &lt;code>index.html&lt;/code>.&lt;/li>
&lt;/ul>&lt;/blockquote>
&lt;ul>
&lt;li>&lt;strong>File database&lt;/strong> (náº¿u cÃ³).&lt;/li>
&lt;li>&lt;strong>Truy cáº­p control panel&lt;/strong> cá»§a tÃ i khoáº£n hosting má»›i.&lt;/li>
&lt;li>&lt;strong>Pháº§n má»m FTP client&lt;/strong> nhÆ° FileZilla.&lt;/li>
&lt;/ul>
&lt;p>Äá»ƒ táº£i trang web lÃªn hosting, báº¡n cáº§n truy cáº­p control panel cá»§a tÃ i khoáº£n hosting báº±ng pháº§n má»m FTP nhÆ° FileZilla. Náº¿u trang web Ä‘Ã£ cÃ³, báº¡n cÃ³ thá»ƒ dá»… dÃ ng sao lÆ°u vÃ  táº£i lÃªn báº±ng tÃ­nh nÄƒng sao lÆ°u cá»§a CMS hoáº·c cPanel.&lt;/p>
&lt;h3 id="chá»n-nhÃ -cung-cáº¥p-hosting-uy-tÃ­n-tin-cáº­y">Chá»n nhÃ  cung cáº¥p hosting uy tÃ­n, tin cáº­y
&lt;/h3>&lt;p>Web Hosting cháº¥t lÆ°á»£ng khÃ´ng chá»‰ Ä‘áº£m báº£o tá»‘c Ä‘á»™ mÃ  cÃ²n quyáº¿t Ä‘á»‹nh hiá»‡u suáº¥t váº­n hÃ nh lÃ¢u dÃ i cá»§a website. VÃ¬ váº­y, viá»‡c lá»±a chá»n nhÃ  cung cáº¥p hosting cáº§n Ä‘Æ°á»£c thá»±c hiá»‡n cáº©n tháº­n, dá»±a trÃªn cÃ¡c tiÃªu chÃ­ sau:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Há»— trá»£ trá»±c tuyáº¿n&lt;/strong>: Äáº£m báº£o nhÃ  cung cáº¥p cÃ³ dá»‹ch vá»¥ há»— trá»£ khÃ¡ch hÃ ng 24/7, giÃºp báº¡n nhanh chÃ³ng giáº£i quyáº¿t sá»± cá»‘.&lt;/li>
&lt;li>&lt;strong>Quyá»n kiá»ƒm soÃ¡t tÃ i khoáº£n hosting&lt;/strong>: Báº¡n cáº§n Ä‘Æ°á»£c cung cáº¥p toÃ n quyá»n quáº£n lÃ½ tÃ i khoáº£n hosting, bao gá»“m quyá»n truy cáº­p vÃ o cPanel hoáº·c cÃ¡c cÃ´ng cá»¥ tÆ°Æ¡ng Ä‘Æ°Æ¡ng.&lt;/li>
&lt;li>&lt;strong>Kháº£ nÄƒng má»Ÿ rá»™ng&lt;/strong>: Hosting nÃªn cÃ³ kháº£ nÄƒng nÃ¢ng cáº¥p tÃ i nguyÃªn khi nhu cáº§u cá»§a báº¡n tÄƒng cao, nhÆ° dung lÆ°á»£ng lÆ°u trá»¯, bÄƒng thÃ´ng hoáº·c sá»‘ lÆ°á»£ng tÃªn miá»n.&lt;/li>
&lt;li>&lt;strong>ChÃ­nh sÃ¡ch hoÃ n tiá»n minh báº¡ch&lt;/strong>: CÃ¡c chÃ­nh sÃ¡ch hoÃ n tiá»n linh hoáº¡t sáº½ giÃºp báº¡n an tÃ¢m hÆ¡n khi thá»­ nghiá»‡m dá»‹ch vá»¥.&lt;/li>
&lt;li>&lt;strong>Dá»‹ch vá»¥ cá»™ng thÃªm miá»…n phÃ­&lt;/strong>: Æ¯u tiÃªn nhÃ  cung cáº¥p há»— trá»£ thÃªm cÃ¡c tiá»‡n Ã­ch nhÆ° SSL miá»…n phÃ­, sao lÆ°u Ä‘á»‹nh ká»³ hoáº·c dá»‹ch vá»¥ di chuyá»ƒn website.&lt;/li>
&lt;li>&lt;strong>ÄÄƒng kÃ½ tÃªn miá»n Ä‘Æ°á»£c cÃ´ng nháº­n bá»Ÿi ICANN&lt;/strong>: Äá»ƒ báº£o vá»‡ thÆ°Æ¡ng hiá»‡u cá»§a báº¡n, hÃ£y chá»n nhÃ  cung cáº¥p tÃªn miá»n uy tÃ­n vÃ  Ä‘Æ°á»£c chá»©ng nháº­n bá»Ÿi ICANN.&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>&lt;strong>LÆ°u Ã½&lt;/strong>: HÃ£y tÃ¬m hiá»ƒu ká»¹ vá» Ä‘Ã¡nh giÃ¡ cá»§a ngÆ°á»i dÃ¹ng vÃ  uy tÃ­n cá»§a nhÃ  cung cáº¥p thÃ´ng qua cÃ¡c diá»…n Ä‘Ã n hoáº·c trang Ä‘Ã¡nh giÃ¡ trÆ°á»›c khi Ä‘Æ°a ra quyáº¿t Ä‘á»‹nh. Äiá»u nÃ y sáº½ giÃºp báº¡n chá»n Ä‘Æ°á»£c dá»‹ch vá»¥ phÃ¹ há»£p nháº¥t vá»›i nhu cáº§u phÃ¡t triá»ƒn website.&lt;/p>&lt;/blockquote>
&lt;h3 id="lá»±a-chá»n-phÆ°Æ¡ng-phÃ¡p-upload-website-lÃªn-hosting">Lá»±a chá»n phÆ°Æ¡ng phÃ¡p upload website lÃªn hosting
&lt;/h3>&lt;p>CÃ³ 5 phÆ°Æ¡ng phÃ¡p chÃ­nh Ä‘á»ƒ upload website lÃªn hosting, tÃ¹y thuá»™c vÃ o nhu cáº§u vÃ  cÃ´ng cá»¥ báº¡n sá»­ dá»¥ng:&lt;/p>
&lt;h4 id="sá»­-dá»¥ng-cÃ´ng-cá»¥-quáº£n-lÃ½-file-file-manager">Sá»­ dá»¥ng cÃ´ng cá»¥ quáº£n lÃ½ file (File Manager)
&lt;/h4>&lt;p>LÃ  cÃ´ng cá»¥ quáº£n lÃ½ file trá»±c tiáº¿p trÃªn ná»n táº£ng web cá»§a hosting, thÆ°á»ng Ä‘Æ°á»£c tÃ­ch há»£p sáºµn trong cPanel hoáº·c cÃ¡c trÃ¬nh quáº£n lÃ½ hosting khÃ¡c.&lt;/p>
&lt;p>&lt;strong>Æ¯u Ä‘iá»ƒm:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Miá»…n phÃ­.&lt;/li>
&lt;li>Dá»… dÃ ng sá»­ dá»¥ng.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>NhÆ°á»£c Ä‘iá»ƒm:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Háº¡n cháº¿ dung lÆ°á»£ng file táº£i lÃªn (thÆ°á»ng tá»‘i Ä‘a 256 MB).&lt;/li>
&lt;li>Chá»‰ giáº£i nÃ©n Ä‘Æ°á»£c cÃ¡c file nhá» hÆ¡n dung lÆ°á»£ng nÃ y.&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>&lt;strong>LÆ°u Ã½&lt;/strong>: Khi dÃ¹ng File Manager, báº¡n chá»‰ cÃ³ thá»ƒ táº£i hoáº·c giáº£i nÃ©n file cÃ³ dung lÆ°á»£ng tá»‘i Ä‘a 256MB. Náº¿u muá»‘n táº£i file lá»›n hÆ¡n, sá»­ dá»¥ng FTP vÃ  giáº£i nÃ©n qua SSH sáº½ lÃ  lá»±a chá»n tá»‘i Æ°u.&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://image.vietnix.vn/wp-content/uploads/2023/11/upload-website-len-hosting-16.webp"
loading="lazy"
alt="Truy cáº­p File Manager"
>&lt;/p>
&lt;p align="center">&lt;em>HÃ¬nh 1: Truy cáº­p vÃ o File Manager&lt;/em>&lt;/p>
&lt;h4 id="sá»­-dá»¥ng-giao-thá»©c-truyá»n-táº£i-file-ftp">Sá»­ dá»¥ng giao thá»©c truyá»n táº£i file (FTP)
&lt;/h4>&lt;p>Giao thá»©c FTP (File Transfer Protocol) cho phÃ©p báº¡n táº£i file lÃªn hosting thÃ´ng qua pháº§n má»m FTP client nhÆ° FileZilla. ÄÃ¢y lÃ  phÆ°Æ¡ng phÃ¡p hiá»‡u quáº£ vÃ  khÃ´ng giá»›i háº¡n dung lÆ°á»£ng file táº£i lÃªn.&lt;/p>
&lt;p>&lt;strong>Æ¯u Ä‘iá»ƒm:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>KhÃ´ng giá»›i háº¡n dung lÆ°á»£ng táº£i lÃªn.&lt;/li>
&lt;li>Táº£i file lá»›n nhanh chÃ³ng vÃ  tiá»‡n lá»£i.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>NhÆ°á»£c Ä‘iá»ƒm:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Cáº§n cÃ i Ä‘áº·t pháº§n má»m FTP client.&lt;/li>
&lt;li>Cáº§n thÃ´ng tin Ä‘Äƒng nháº­p FTP tá»« hosting.&lt;/li>
&lt;li>Báº£o máº­t khÃ´ng cao, cÃ³ thá»ƒ sá»­ dá»¥ng SFTP Ä‘á»ƒ an toÃ n hÆ¡n.&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://image.vietnix.vn/wp-content/uploads/2023/11/locating-ftp-details-4.webp"
loading="lazy"
alt="ThÃ´ng tin FPT"
>&lt;/p>
&lt;p align="center">&lt;em>HÃ¬nh 2: ThÃ´ng tin FPT&lt;/em>&lt;/p>
&lt;h4 id="sá»­-dá»¥ng-plugin-di-chuyá»ƒn-wordpress">Sá»­ dá»¥ng Plugin Di Chuyá»ƒn WordPress
&lt;/h4>&lt;p>Náº¿u báº¡n sá»­ dá»¥ng WordPress, cÃ¡c plugin nhÆ° All in One WP Migration cÃ³ thá»ƒ giÃºp báº¡n di chuyá»ƒn toÃ n bá»™ website má»™t cÃ¡ch tá»± Ä‘á»™ng.&lt;/p>
&lt;p>&lt;strong>Æ¯u Ä‘iá»ƒm:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Dá»… sá»­ dá»¥ng, khÃ´ng cáº§n kiáº¿n thá»©c ká»¹ thuáº­t cao.&lt;/li>
&lt;li>KÃ©o tháº£ file Ä‘Æ¡n giáº£n.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>NhÆ°á»£c Ä‘iá»ƒm:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Giá»›i háº¡n dung lÆ°á»£ng file táº£i lÃªn (thÆ°á»ng lÃ  256 MB).&lt;/li>
&lt;li>Vá»›i file lá»›n hÆ¡n, cáº§n chuyá»ƒn sang FTP vÃ  SSH.&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>&lt;strong>LÆ°u Ã½&lt;/strong>: Plugin nÃ y cÃ³ giá»›i háº¡n dung lÆ°á»£ng, náº¿u muá»‘n táº£i file lá»›n, báº¡n cáº§n chuyá»ƒn sang FTP vÃ  giáº£i nÃ©n qua SSH. Sau khi upload, nhá»› chuyá»ƒn dá»¯ liá»‡u trong thÆ° má»¥c con ra ngoÃ i &lt;code>public_html&lt;/code> Ä‘á»ƒ website hoáº¡t Ä‘á»™ng chÃ­nh xÃ¡c.&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://image.vietnix.vn/wp-content/uploads/2023/11/img_20230304150023-8.webp"
loading="lazy"
alt="Sá»­ dá»¥ng WordPress Migration Plugin"
>&lt;/p>
&lt;p align="center">&lt;em>HÃ¬nh 3: Sá»­ dá»¥ng WordPress Migration Plugin&lt;/em>&lt;/p>
&lt;h4 id="sá»­-dá»¥ng-ssh-secure-shell">Sá»­ dá»¥ng SSH (Secure Shell)
&lt;/h4>&lt;p>SSH lÃ  cÃ¡ch táº£i vÃ  quáº£n lÃ½ file qua dÃ²ng lá»‡nh, phÃ¹ há»£p vá»›i nhá»¯ng file lá»›n hoáº·c yÃªu cáº§u tá»‘c Ä‘á»™ cao.&lt;/p>
&lt;p>&lt;strong>Æ¯u Ä‘iá»ƒm:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Nhanh chÃ³ng, khÃ´ng giá»›i háº¡n dung lÆ°á»£ng.&lt;/li>
&lt;li>CÃ³ thá»ƒ giáº£i nÃ©n file trá»±c tiáº¿p trÃªn server.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>NhÆ°á»£c Ä‘iá»ƒm:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>YÃªu cáº§u ká»¹ nÄƒng sá»­ dá»¥ng lá»‡nh cÆ¡ báº£n vÃ  quyá»n truy cáº­p SSH tá»« nhÃ  cung cáº¥p hosting.&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://image.vietnix.vn/wp-content/uploads/2024/09/Su-dung-SSH-upload-website.webp"
loading="lazy"
alt="Sá»­ dá»¥ng SSH upload website"
>&lt;/p>
&lt;p align="center">&lt;em>HÃ¬nh 4: Sá»­ dá»¥ng SSH upload website&lt;/em>&lt;/p>
&lt;h4 id="import-site--trÃ¬nh-nháº­p-website-tá»±-Ä‘á»™ng">Import Site â€“ TrÃ¬nh nháº­p website tá»± Ä‘á»™ng
&lt;/h4>&lt;p>Má»™t sá»‘ nhÃ  cung cáº¥p dá»‹ch vá»¥ hosting cung cáº¥p cÃ´ng cá»¥ &lt;strong>Import Site&lt;/strong> giÃºp táº£i vÃ  giáº£i nÃ©n website vÃ o thÆ° má»¥c &lt;code>public_html&lt;/code> má»™t cÃ¡ch nhanh chÃ³ng.&lt;/p>
&lt;p>&lt;strong>Æ¯u Ä‘iá»ƒm:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>QuÃ¡ trÃ¬nh táº£i lÃªn nhanh chÃ³ng vÃ  dá»… dÃ ng.&lt;/li>
&lt;li>KhÃ´ng cáº§n nhiá»u kiáº¿n thá»©c ká»¹ thuáº­t.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>NhÆ°á»£c Ä‘iá»ƒm:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Phá»¥ thuá»™c vÃ o nhÃ  cung cáº¥p hosting cÃ³ há»— trá»£ cÃ´ng cá»¥ nÃ y.&lt;/li>
&lt;li>KhÃ´ng pháº£i nhÃ  cung cáº¥p hosting nÃ o cÅ©ng cung cáº¥p cÃ´ng cá»¥ nÃ y.&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>&lt;strong>Gá»£i Ã½&lt;/strong>: Kiá»ƒm tra vá»›i nhÃ  cung cáº¥p hosting xem há» cÃ³ há»— trá»£ cÃ´ng cá»¥ nháº­p trang web hay khÃ´ng.&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://image.vietnix.vn/wp-content/uploads/2023/11/import-website-tool-2.webp"
loading="lazy"
alt="Tool nháº­p website"
>&lt;/p>
&lt;p align="center">&lt;em>HÃ¬nh 5: Tool nháº­p website&lt;/em>&lt;/p>
&lt;h4 id="nhá»-sá»±-há»—-trá»£-tá»«-nhÃ -cung-cáº¥p-hosting">Nhá» sá»± há»— trá»£ tá»« nhÃ  cung cáº¥p hosting
&lt;/h4>&lt;p>Háº§u háº¿t cÃ¡c nhÃ  cung cáº¥p hosting Ä‘á»u cÃ³ dá»‹ch vá»¥ há»— trá»£ di chuyá»ƒn website, Ä‘áº·c biá»‡t khi báº¡n chuyá»ƒn tá»« dá»‹ch vá»¥ hosting cÅ© sang nhÃ  cung cáº¥p má»›i.&lt;/p>
&lt;p>&lt;strong>Æ¯u Ä‘iá»ƒm:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Tiáº¿t kiá»‡m thá»i gian vÃ  trÃ¡nh sai sÃ³t ká»¹ thuáº­t.&lt;/li>
&lt;li>ÄÆ°á»£c thá»±c hiá»‡n bá»Ÿi Ä‘á»™i ngÅ© chuyÃªn gia.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>NhÆ°á»£c Ä‘iá»ƒm:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>CÃ³ thá»ƒ máº¥t phÃ­ náº¿u nhÃ  cung cáº¥p khÃ´ng há»— trá»£ miá»…n phÃ­.&lt;/li>
&lt;li>Thá»i gian xá»­ lÃ½ phá»¥ thuá»™c vÃ o Ä‘á»™i ngÅ© há»— trá»£.&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>&lt;strong>Gá»£i Ã½&lt;/strong>: HÃ£y kiá»ƒm tra chÃ­nh sÃ¡ch há»— trá»£ di chuyá»ƒn website cá»§a nhÃ  cung cáº¥p hosting trÆ°á»›c khi yÃªu cáº§u dá»‹ch vá»¥.&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://image.vietnix.vn/wp-content/uploads/2024/09/Nho-su-ho-tro-tu-nha-cung-cap-hosting.webp"
loading="lazy"
alt="Nhá» sá»± há»— trá»£ tá»« nhÃ  cung cáº¥p hosting"
>&lt;/p>
&lt;p align="center">&lt;em>HÃ¬nh 6: Nhá» sá»± há»— trá»£ tá»« nhÃ  cung cáº¥p hosting&lt;/em>&lt;/p>
&lt;blockquote>
&lt;p>ğŸ“Œ &lt;strong>LÆ°u Ã½ sau khi upload website lÃªn hosting&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Di chuyá»ƒn toÃ n bá»™ dá»¯ liá»‡u tá»« thÆ° má»¥c con (náº¿u cÃ³) ra ngoÃ i &lt;code>public_html&lt;/code>&lt;/strong> Ä‘á»ƒ website hoáº¡t Ä‘á»™ng chÃ­nh xÃ¡c.&lt;/li>
&lt;li>&lt;strong>Kiá»ƒm tra láº¡i cáº¥u trÃºc file vÃ  káº¿t ná»‘i database (náº¿u cÃ³)&lt;/strong> Ä‘á»ƒ trÃ¡nh lá»—i khi váº­n hÃ nh.&lt;/li>
&lt;li>&lt;strong>Chá»n phÆ°Æ¡ng phÃ¡p phÃ¹ há»£p nháº¥t&lt;/strong> dá»±a trÃªn kÃ­ch thÆ°á»›c file, ná»n táº£ng website vÃ  kháº£ nÄƒng ká»¹ thuáº­t cá»§a báº¡n.&lt;/li>
&lt;/ul>&lt;/blockquote>
&lt;hr>
&lt;h2 id="lÃ½-do-cáº§n-upload-website-lÃªn-hosting">LÃ½ do cáº§n upload website lÃªn Hosting
&lt;/h2>&lt;p>Viá»‡c upload website lÃªn hosting khÃ´ng chá»‰ lÃ  bÆ°á»›c cáº§n thiáº¿t Ä‘á»ƒ Ä‘Æ°a website cá»§a báº¡n ra cÃ´ng chÃºng, mÃ  cÃ²n mang láº¡i nhiá»u lá»£i Ã­ch quan trá»ng giÃºp website hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh, báº£o máº­t vÃ  hiá»‡u quáº£. DÆ°á»›i Ä‘Ã¢y lÃ  nhá»¯ng lÃ½ do báº¡n nÃªn thá»±c hiá»‡n viá»‡c nÃ y:&lt;/p>
&lt;h3 id="xuáº¥t-báº£n-website-vÃ -tiáº¿p-cáº­n-toÃ n-cáº§u">Xuáº¥t báº£n website vÃ  tiáº¿p cáº­n toÃ n cáº§u
&lt;/h3>&lt;p>Khi báº¡n upload website lÃªn hosting, website sáº½ trá»Ÿ nÃªn cÃ´ng khai vÃ  cÃ³ thá»ƒ truy cáº­p tá»« báº¥t ká»³ Ä‘Ã¢u trÃªn tháº¿ giá»›i qua tÃªn miá»n (domain) cá»§a báº¡n. Náº¿u khÃ´ng lÃ m Ä‘iá»u nÃ y, chá»‰ riÃªng báº¡n má»›i cÃ³ thá»ƒ truy cáº­p website tá»« mÃ¡y tÃ­nh cÃ¡ nhÃ¢n.&lt;/p>
&lt;h3 id="báº£o-máº­t-vÃ -an-toÃ n-dá»¯-liá»‡u">Báº£o máº­t vÃ  an toÃ n dá»¯ liá»‡u
&lt;/h3>&lt;p>Hosting chuyÃªn nghiá»‡p mang láº¡i nhá»¯ng biá»‡n phÃ¡p báº£o máº­t máº¡nh máº½, cháº³ng háº¡n nhÆ° chá»©ng chá»‰ SSL, tÆ°á»ng lá»­a vÃ  cÃ¡c cÃ´ng cá»¥ báº£o vá»‡ dá»¯ liá»‡u khÃ¡c. Äiá»u nÃ y giÃºp Ä‘áº£m báº£o an toÃ n cho website vÃ  cáº£ dá»¯ liá»‡u thÆ°Æ¡ng hiá»‡u khá»i cÃ¡c nguy cÆ¡ táº¥n cÃ´ng, máº¥t mÃ¡t hoáº·c xÃ¢m nháº­p dá»¯ liá»‡u, má»™t váº¥n Ä‘á» mÃ  viá»‡c lÆ°u trá»¯ website trÃªn mÃ¡y tÃ­nh cÃ¡ nhÃ¢n sáº½ khÃ³ Ä‘áº£m báº£o Ä‘Æ°á»£c.&lt;/p>
&lt;h3 id="tÄƒng-tá»‘c-Ä‘á»™-vÃ -hiá»‡u-suáº¥t-website">TÄƒng tá»‘c Ä‘á»™ vÃ  hiá»‡u suáº¥t Website
&lt;/h3>&lt;p>CÃ¡c mÃ¡y chá»§ hosting Ä‘Æ°á»£c tá»‘i Æ°u Ä‘á»ƒ xá»­ lÃ½ lÆ°u lÆ°á»£ng truy cáº­p lá»›n vÃ  cung cáº¥p tá»‘c Ä‘á»™ internet nhanh chÃ³ng, giÃºp tÄƒng cÆ°á»ng hiá»‡u suáº¥t táº£i trang cá»§a website. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  ngÆ°á»i dÃ¹ng sáº½ cÃ³ tráº£i nghiá»‡m mÆ°á»£t mÃ  hÆ¡n, Ä‘á»“ng thá»i giáº£m thiá»ƒu tÃ¬nh tráº¡ng website bá»‹ &amp;ldquo;lag&amp;rdquo; hoáº·c táº£i cháº­m, má»™t yáº¿u tá»‘ quan trá»ng trong viá»‡c giá»¯ chÃ¢n ngÆ°á»i truy cáº­p.&lt;/p>
&lt;p>&lt;img src="https://image.vietnix.vn/wp-content/uploads/2024/09/Tang-toc-do-va-hieu-suat-Website.webp"
loading="lazy"
alt="TÄƒng tá»‘c Ä‘á»™ vÃ  hiá»‡u suáº¥t Website"
>&lt;/p>
&lt;p align="center">&lt;em>HÃ¬nh 7: TÄƒng tá»‘c Ä‘á»™ vÃ  hiá»‡u suáº¥t Website&lt;/em>&lt;/p>
&lt;h3 id="tÃ­nh-á»•n-Ä‘á»‹nh-vÃ -tin-cáº­y">TÃ­nh á»•n Ä‘á»‹nh vÃ  tin cáº­y
&lt;/h3>&lt;p>Khi website Ä‘Æ°á»£c lÆ°u trá»¯ trÃªn hosting, báº¡n khÃ´ng pháº£i lo láº¯ng vá» viá»‡c duy trÃ¬ pháº§n cá»©ng hay káº¿t ná»‘i máº¡ng. CÃ¡c nhÃ  cung cáº¥p hosting sáº½ Ä‘áº£m báº£o server luÃ´n hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh vá»›i thá»i gian uptime cao, giÃºp website cá»§a báº¡n luÃ´n sáºµn sÃ ng phá»¥c vá»¥ ngÆ°á»i dÃ¹ng mÃ  khÃ´ng gáº·p pháº£i sá»± cá»‘ downtime kÃ©o dÃ i.&lt;/p>
&lt;h3 id="quáº£n-lÃ½-website-dá»…-dÃ ng-vÃ -tiá»‡n-lá»£i">Quáº£n lÃ½ website dá»… dÃ ng vÃ  tiá»‡n lá»£i
&lt;/h3>&lt;p>CÃ¡c nhÃ  cung cáº¥p hosting cung cáº¥p giao diá»‡n quáº£n lÃ½ thÃ¢n thiá»‡n vÃ  dá»… sá»­ dá»¥ng, giÃºp báº¡n dá»… dÃ ng theo dÃµi, tá»‘i Æ°u vÃ  báº£o trÃ¬ website. Tá»« viá»‡c sao lÆ°u dá»¯ liá»‡u, nÃ¢ng cáº¥p pháº§n má»m cho Ä‘áº¿n viá»‡c tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t, táº¥t cáº£ Ä‘á»u trá»Ÿ nÃªn Ä‘Æ¡n giáº£n hÆ¡n khi báº¡n sá»­ dá»¥ng dá»‹ch vá»¥ hosting chuyÃªn nghiá»‡p.&lt;/p>
&lt;h3 id="tÃ­nh-má»Ÿ-rá»™ng-vÃ -phÃ¡t-triá»ƒn-lÃ¢u-dÃ i">TÃ­nh má»Ÿ rá»™ng vÃ  phÃ¡t triá»ƒn lÃ¢u dÃ i
&lt;/h3>&lt;p>Hosting khÃ´ng chá»‰ phá»¥c vá»¥ website trong giai Ä‘oáº¡n Ä‘áº§u, mÃ  cÃ²n há»— trá»£ kháº£ nÄƒng má»Ÿ rá»™ng khi website cá»§a báº¡n phÃ¡t triá»ƒn. Náº¿u lÆ°u trá»¯ trÃªn mÃ¡y tÃ­nh cÃ¡ nhÃ¢n, báº¡n sáº½ gáº·p khÃ³ khÄƒn khi website tÄƒng trÆ°á»Ÿng vá» lÆ°u lÆ°á»£ng truy cáº­p hay yÃªu cáº§u vá» tÃ i nguyÃªn. Hosting chuyÃªn nghiá»‡p sáº½ giÃºp báº¡n dá»… dÃ ng nÃ¢ng cáº¥p tÃ i nguyÃªn mÃ  khÃ´ng pháº£i lo láº¯ng vá» viá»‡c máº¥t dá»¯ liá»‡u hay giÃ¡n Ä‘oáº¡n dá»‹ch vá»¥.&lt;/p>
&lt;p>&lt;img src="https://image.vietnix.vn/wp-content/uploads/2024/09/Tinh-mo-rong-va-phat-trien-lau-dai.webp"
loading="lazy"
alt="TÃ­nh má»Ÿ rá»™ng vÃ  phÃ¡t triá»ƒn lÃ¢u dÃ i"
>&lt;/p>
&lt;p align="center">&lt;em>HÃ¬nh 8: TÃ­nh má»Ÿ rá»™ng vÃ  phÃ¡t triá»ƒn lÃ¢u dÃ i&lt;/em>&lt;/p>
&lt;hr>
&lt;p>TÃ³m láº¡i, viá»‡c upload website lÃªn hosting mang láº¡i nhá»¯ng lá»£i Ã­ch vÆ°á»£t trá»™i vá» báº£o máº­t, hiá»‡u suáº¥t, tÃ­nh á»•n Ä‘á»‹nh vÃ  kháº£ nÄƒng quáº£n lÃ½, giÃºp website cá»§a báº¡n hoáº¡t Ä‘á»™ng hiá»‡u quáº£ vÃ  bá»n vá»¯ng. ÄÃ¢y lÃ  bÆ°á»›c quan trá»ng Ä‘á»ƒ khÃ´ng chá»‰ báº£o vá»‡ dá»¯ liá»‡u mÃ  cÃ²n táº¡o ra má»™t ná»n táº£ng vá»¯ng cháº¯c Ä‘á»ƒ phÃ¡t triá»ƒn website trong tÆ°Æ¡ng lai. VÃ¬ váº­y, náº¿u báº¡n muá»‘n website cá»§a mÃ¬nh hoáº¡t Ä‘á»™ng trÆ¡n tru vÃ  dá»… dÃ ng truy cáº­p tá»« má»i nÆ¡i, viá»‡c upload lÃªn hosting lÃ  Ä‘iá»u khÃ´ng thá»ƒ thiáº¿u.&lt;/p>
&lt;hr>
&lt;h2 id="bÆ°á»›c-1-chá»n-cÃ¡ch-upload-file-website-lÃªn-host">BÆ°á»›c 1: Chá»n cÃ¡ch upload file website lÃªn host
&lt;/h2>&lt;h3 id="cÃ¡ch-1-upload-website-lÃªn-hosting-báº±ng-file-manager-qua-cpanel">CÃ¡ch 1: Upload website lÃªn hosting báº±ng File Manager qua cPanel
&lt;/h3>&lt;h3 id="cÃ¡ch-2-upload-website-lÃªn-hosting-báº±ng-ftp-client">CÃ¡ch 2: Upload website lÃªn hosting báº±ng FTP client
&lt;/h3>&lt;p>Sau khi báº¡n Ä‘Ã£ lá»±a chá»n xong cÃ¡ch Ä‘á»ƒ upload, dÆ°á»›i Ä‘Ã¢y lÃ  hÆ°á»›ng dáº«n cÃ¡ch upload website lÃªn hosting Ä‘Æ¡n giáº£n, báº¡n cÃ³ thá»ƒ tham kháº£o.&lt;/p>
&lt;hr>
&lt;p>&amp;mdash;CÃ¡ch 1: Upload website lÃªn hosting báº±ng File Manager qua cPanel&amp;mdash; (Dá»… nháº¥t)&lt;/p>
&lt;p>Truy cáº­p cPanel cá»§a tÃ i khoáº£n hosting vÃ  lÃ m theo hÆ°á»›ng dáº«n dÆ°á»›i Ä‘Ã¢y:&lt;/p>
&lt;p>BÆ°á»›c 1: Click vÃ o icon &lt;strong>File Manager&lt;/strong>, Ä‘áº·t bÃªn dÆ°á»›i má»¥c &lt;strong>Files&lt;/strong>.&lt;/p>
&lt;p>&lt;strong>Chá»n File Manager&lt;/strong>&lt;br>
&lt;em>HÃ¬nh áº£nh minh há»a: Chá»n File Manager&lt;/em>&lt;/p>
&lt;p>&lt;img src="https://static.vietnix.vn/wp-content/uploads/2023/11/upload-website-len-hosting-1.webp"
loading="lazy"
alt="Chá»n File Manager"
>&lt;/p>
&lt;p align="center">&lt;em>Chá»n File Manager&lt;/em>&lt;/p>
&lt;p>BÆ°á»›c 2: Trong &lt;strong>File Manager&lt;/strong>, má»Ÿ thÆ° má»¥c &lt;code>public_html&lt;/code>.&lt;/p>
&lt;p>&lt;strong>Má»Ÿ thÆ° má»¥c public_html&lt;/strong>&lt;br>
&lt;em>HÃ¬nh áº£nh minh há»a: Má»Ÿ thÆ° má»¥c public_html&lt;/em>&lt;/p>
&lt;p>&lt;img src="https://static.vietnix.vn/wp-content/uploads/2023/11/upload-website-len-hosting-2.webp"
loading="lazy"
alt="Má»Ÿ thÆ° má»¥c public_html"
>&lt;/p>
&lt;p align="center">&lt;em>Má»Ÿ thÆ° má»¥c public_html&lt;/em>&lt;/p>
&lt;p>BÆ°á»›c 3: Chá»n &lt;strong>Upload&lt;/strong> sau khi truy cáº­p vÃ o thÆ° má»¥c &lt;code>public_html&lt;/code>.&lt;/p>
&lt;p>&lt;strong>Chá»n Upload&lt;/strong>&lt;br>
&lt;em>HÃ¬nh áº£nh minh há»a: Chá»n Upload&lt;/em>&lt;/p>
&lt;p>&lt;img src="https://static.vietnix.vn/wp-content/uploads/2023/11/upload-website-len-hosting-3.webp"
loading="lazy"
alt="Chá»n Upload"
>&lt;/p>
&lt;p align="center">&lt;em>Chá»n Upload&lt;/em>&lt;/p>
&lt;p>BÆ°á»›c 4: Chá»n &lt;strong>Select File&lt;/strong> Ä‘á»ƒ chá»n tá»«ng file hoáº·c kÃ©o tháº£ vÃ o vÃ¹ng nháº­n file.&lt;/p>
&lt;p>&lt;strong>Chá»n file&lt;/strong>&lt;br>
&lt;em>HÃ¬nh áº£nh minh há»a: Chá»n file&lt;/em>&lt;/p>
&lt;p>&lt;img src="https://static.vietnix.vn/wp-content/uploads/2023/11/upload-website-len-hosting-4.webp"
loading="lazy"
alt="Chá»n file"
>&lt;/p>
&lt;p align="center">&lt;em>Chá»n file&lt;/em>&lt;/p>
&lt;p>BÆ°á»›c 5: Trong vÃ­ dá»¥ nÃ y, mÃ¬nh kÃ©o tháº£ file &lt;code>wordpress.zip&lt;/code>.&lt;/p>
&lt;p>&lt;strong>Chá»n file zip wordpress&lt;/strong>&lt;br>
&lt;em>HÃ¬nh áº£nh minh há»a: Chá»n file zip wordpress (hoáº·c file dist.zip/build.zip)&lt;/em>&lt;/p>
&lt;p>&lt;img src="https://static.vietnix.vn/wp-content/uploads/2023/11/upload-website-len-hosting-5.webp"
loading="lazy"
alt="Chá»n file zip wordpress"
>&lt;/p>
&lt;p align="center">&lt;em>Chá»n file zip wordpress&lt;/em>&lt;/p>
&lt;p>BÆ°á»›c 6: Khi upload xong, quay láº¡i &lt;strong>File Manager&lt;/strong> Ä‘á»ƒ tháº¥y file archive Ä‘Ã£ xuáº¥t hiá»‡n trong thÆ° má»¥c &lt;code>public_html&lt;/code>. Click chuá»™t pháº£i vÃ  nháº¥n &lt;strong>Extract&lt;/strong> Ä‘á»ƒ giáº£i nÃ©n file archive.&lt;/p>
&lt;p>&lt;strong>Extract file&lt;/strong>&lt;br>
&lt;em>HÃ¬nh áº£nh minh há»a: Extract file&lt;/em>&lt;/p>
&lt;p>&lt;img src="https://static.vietnix.vn/wp-content/uploads/2023/11/upload-website-len-hosting-6.webp"
loading="lazy"
alt="Extract file"
>&lt;/p>
&lt;p align="center">&lt;em>Extract file&lt;/em>&lt;/p>
&lt;p>BÆ°á»›c 7: Chá»n vá»‹ trÃ­ file archive cáº§n extract, á»Ÿ vÃ­ dá»¥ nÃ y sáº½ lÆ°u vÃ o &lt;code>/public_html&lt;/code>.&lt;/p>
&lt;p>&lt;strong>Chá»n vá»‹ trÃ­ file cáº§n extract&lt;/strong>&lt;br>
&lt;em>HÃ¬nh áº£nh minh há»a: Chá»n vá»‹ trÃ­ file cáº§n extract&lt;/em>&lt;/p>
&lt;p>&lt;img src="https://static.vietnix.vn/wp-content/uploads/2023/11/upload-website-len-hosting-7.webp"
loading="lazy"
alt="Chá»n vá»‹ trÃ­ file cáº§n extract"
>&lt;/p>
&lt;p align="center">&lt;em>Chá»n vá»‹ trÃ­ file cáº§n extract&lt;/em>&lt;/p>
&lt;p>BÆ°á»›c 8: Sau khi giáº£i nÃ©n file, báº¡n cÃ³ thá»ƒ xem cÃ¡c file Ä‘Ã£ Ä‘Æ°á»£c giáº£i nÃ©n trong thÆ° má»¥c &lt;code>public_html&lt;/code>. ÄÃ¢y lÃ  thÆ° má»¥c gá»‘c cá»§a website.&lt;/p>
&lt;p>&lt;strong>Quay láº¡i thÆ° má»¥c ban Ä‘áº§u Ä‘á»ƒ xem&lt;/strong>&lt;br>
&lt;em>HÃ¬nh áº£nh minh há»a: Quay láº¡i thÆ° má»¥c ban Ä‘áº§u Ä‘á»ƒ xem&lt;/em>&lt;/p>
&lt;p>&lt;img src="https://static.vietnix.vn/wp-content/uploads/2023/11/upload-website-len-hosting-8.webp"
loading="lazy"
alt="Quay láº¡i thÆ° má»¥c ban Ä‘áº§u Ä‘á»ƒ xem"
>&lt;/p>
&lt;p align="center">&lt;em>Quay láº¡i thÆ° má»¥c ban Ä‘áº§u Ä‘á»ƒ xem&lt;/em>&lt;/p>
&lt;p>BÆ°á»›c 9: Trang web Ä‘Ã£ táº£i xong. Báº¡n cÃ³ thá»ƒ truy cáº­p vÃ o trang web báº±ng cÃ¡ch nháº­p URL vÃ o trÃ¬nh duyá»‡t.&lt;/p>
&lt;p>&lt;strong>MÃ n hÃ¬nh chá»n ngÃ´n ngá»¯ trong quÃ¡ trÃ¬nh cÃ i Ä‘áº·t WordPress&lt;/strong> &lt;em>&lt;strong>(Náº¿u cÃ³)&lt;/strong>&lt;/em>&lt;/p>
&lt;hr>
&lt;p>&amp;mdash;CÃ¡ch 2: Upload website lÃªn hosting báº±ng FTP client&amp;mdash;&lt;/p>
&lt;p>Má»™t sá»‘ ngÆ°á»i dÃ¹ng thÃ­ch táº£i trang web cá»§a há» lÃªn dá»‹ch vá»¥ hosting qua &lt;strong>FTP&lt;/strong>, vÃ­ dá»¥: &lt;strong>FileZilla, SmartFTP, CoreFTP&lt;/strong> hoáº·c báº¥t ká»³ pháº§n má»m nÃ o khÃ¡c. Trong cÃ¡c hÆ°á»›ng dáº«n sau, mÃ¬nh sáº½ sá»­ dá»¥ng &lt;strong>FileZilla&lt;/strong>.&lt;/p>
&lt;p>Nhá»¯ng lÆ°u Ã½ trÆ°á»›c khi upload website lÃªn hosting:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Kiáº¿n thá»©c vÃ  ká»¹ nÄƒng cá»§a báº¡n:&lt;/strong> Náº¿u báº¡n khÃ´ng cÃ³ nhiá»u kiáº¿n thá»©c vá» hosting, &lt;strong>File Manager&lt;/strong> sáº½ dá»… sá»­ dá»¥ng hÆ¡n. Náº¿u báº¡n thÃ nh tháº¡o, &lt;strong>FTP client&lt;/strong> sáº½ giÃºp táº£i lÃªn nhanh hÆ¡n.&lt;/li>
&lt;li>&lt;strong>KÃ­ch thÆ°á»›c cá»§a website:&lt;/strong> Náº¿u website cÃ³ dung lÆ°á»£ng lá»›n, &lt;strong>FTP client&lt;/strong> sáº½ thuáº­n tiá»‡n hÆ¡n vÃ¬ khÃ´ng giá»›i háº¡n dung lÆ°á»£ng táº£i lÃªn.&lt;/li>
&lt;li>&lt;strong>YÃªu cáº§u Ä‘áº·c thÃ¹ cá»§a website:&lt;/strong> Náº¿u website yÃªu cáº§u cáº¥u hÃ¬nh server Ä‘áº·c biá»‡t, báº¡n nÃªn há»i nhÃ  cung cáº¥p hosting Ä‘á»ƒ chá»n cÃ¡ch upload phÃ¹ há»£p.&lt;/li>
&lt;/ul>
&lt;p>BÆ°á»›c 1: TrÆ°á»›c tiÃªn, báº¡n cáº§n láº¥y thÃ´ng tin FTP thÃ´ng qua &lt;strong>FTP Access&lt;/strong>. Náº¿u quÃªn máº­t kháº©u, báº¡n cÃ³ thá»ƒ Ä‘áº·t máº­t kháº©u má»›i qua pháº§n &lt;strong>Change account password&lt;/strong>.&lt;/p>
&lt;p>&lt;strong>Láº¥y thÃ´ng tin qua FTP Access&lt;/strong>&lt;br>
&lt;em>HÃ¬nh áº£nh minh há»a: Láº¥y thÃ´ng tin qua FTP Access&lt;/em>&lt;/p>
&lt;p>&lt;img src="https://image.vietnix.vn/wp-content/uploads/2023/11/upload-website-len-hosting-9.webp"
loading="lazy"
alt="Láº¥y thÃ´ng tin qua FTP Access"
>&lt;/p>
&lt;p align="center">&lt;em>Láº¥y thÃ´ng tin qua FTP Access&lt;/em>&lt;/p>
&lt;p>BÆ°á»›c 2: Má»Ÿ &lt;strong>FileZilla&lt;/strong>, Ä‘iá»n thÃ´ng tin FTP Ä‘á»ƒ truy cáº­p vÃ  nháº¥n &lt;strong>Quickconnect&lt;/strong>.&lt;/p>
&lt;p>&lt;strong>Chá»n Quickconnect&lt;/strong>&lt;br>
&lt;em>HÃ¬nh áº£nh minh há»a: Chá»n Quickconnect&lt;/em>&lt;/p>
&lt;p>&lt;img src="https://static.vietnix.vn/wp-content/uploads/2023/11/upload-website-len-hosting-10.webp"
loading="lazy"
alt="Chá»n Quickconnect"
>&lt;/p>
&lt;p align="center">&lt;em>Chá»n Quickconnect&lt;/em>&lt;/p>
&lt;p>BÆ°á»›c 3: Sau khi káº¿t ná»‘i vá»›i FileZilla, tÃ¬m dá»¯ liá»‡u trang web vÃ  kÃ©o chÃºng tá»« bÃªn trÃ¡i cá»§a pháº§n má»m sang bÃªn pháº£i, thÆ° má»¥c Ä‘Ã­ch lÃ  &lt;code>public_html&lt;/code>. Báº¡n cáº§n giáº£i nÃ©n file archive trÆ°á»›c, vÃ¬ FTP khÃ´ng cÃ³ chá»©c nÄƒng giáº£i nÃ©n.&lt;/p>
&lt;p>&lt;strong>KÃ©o tháº£ dá»¯ liá»‡u tá»« bÃªn trÃ¡i cá»§a pháº§n má»m sang bÃªn pháº£i&lt;/strong>&lt;br>
&lt;em>HÃ¬nh áº£nh minh há»a: KÃ©o tháº£ dá»¯ liá»‡u tá»« bÃªn trÃ¡i cá»§a pháº§n má»m sang bÃªn pháº£i&lt;/em>&lt;/p>
&lt;p>&lt;img src="https://static.vietnix.vn/wp-content/uploads/2023/11/upload-website-len-hosting-11.webp"
loading="lazy"
alt="KÃ©o tháº£ dá»¯ liá»‡u tá»« bÃªn trÃ¡i cá»§a pháº§n má»m sang bÃªn pháº£i"
>&lt;/p>
&lt;p align="center">&lt;em>KÃ©o tháº£ dá»¯ liá»‡u tá»« bÃªn trÃ¡i cá»§a pháº§n má»m sang bÃªn pháº£i&lt;/em>&lt;/p>
&lt;p>BÆ°á»›c 4: TÆ°Æ¡ng tá»±, báº¡n cÃ³ thá»ƒ upload file nÃ©n qua &lt;strong>FTP&lt;/strong> báº±ng cÃ¡ch kÃ©o tháº£ tá»« trÃ¡i sang pháº£i. Sau Ä‘Ã³, giáº£i nÃ©n chÃºng thÃ´ng qua &lt;strong>File Manager&lt;/strong>.&lt;/p>
&lt;p>&lt;strong>Upload file nÃ©n qua FTP&lt;/strong>&lt;br>
&lt;em>HÃ¬nh áº£nh minh há»a: Upload file nÃ©n qua FTP&lt;/em>&lt;/p>
&lt;p>&lt;img src="https://static.vietnix.vn/wp-content/uploads/2023/11/upload-website-len-hosting-12.webp"
loading="lazy"
alt="Upload file nÃ©n qua FTP"
>&lt;/p>
&lt;p align="center">&lt;em>Upload file nÃ©n qua FTP&lt;/em>&lt;/p>
&lt;p>BÆ°á»›c 5: Sau khi táº£i trang web lÃªn hosting, báº¡n cÃ³ thá»ƒ truy cáº­p trang web báº±ng cÃ¡ch nháº­p URL vÃ o trÃ¬nh duyá»‡t. Báº¡n sáº½ tháº¥y trang cÃ i Ä‘áº·t máº·c Ä‘á»‹nh cá»§a website vÃ  cÃ³ thá»ƒ tÃ¹y chá»‰nh trang nÃ y Ä‘á»ƒ phÃ¹ há»£p vá»›i nhu cáº§u cá»§a mÃ¬nh.&lt;/p>
&lt;hr>
&lt;h2 id="bÆ°á»›c-2-kiá»ƒm-tra-xem-file-Ä‘Ã£-á»Ÿ-trong-thÆ°-má»¥c-public_html-hay-chÆ°a">BÆ°á»›c 2: Kiá»ƒm tra xem file Ä‘Ã£ á»Ÿ trong thÆ° má»¥c public_html hay chÆ°a
&lt;/h2>&lt;p>Sau khi upload website lÃªn hosting, bÆ°á»›c Ä‘áº§u tiÃªn báº¡n cáº§n lÃ m lÃ  kiá»ƒm tra xem cÃ¡c file Ä‘Ã£ Ä‘Æ°á»£c táº£i Ä‘áº§y Ä‘á»§ vÃ o thÆ° má»¥c &lt;code>public_html&lt;/code> chÆ°a. Báº¡n cÃ³ thá»ƒ má»Ÿ thÆ° má»¥c &lt;code>public_html&lt;/code> vÃ  kiá»ƒm tra xem táº¥t cáº£ cÃ¡c file Ä‘Ã£ náº±m trong Ä‘Ã³ chÆ°a. Náº¿u báº¡n táº¡o ra thÆ° má»¥c má»›i sau khi upload vÃ  giáº£i nÃ©n website backup, ngÆ°á»i dÃ¹ng sáº½ pháº£i truy cáº­p theo Ä‘Æ°á»ng dáº«n dáº¡ng &lt;code>example.com/something&lt;/code> thay vÃ¬ &lt;code>example.com&lt;/code>. Äá»ƒ kháº¯c phá»¥c Ä‘iá»u nÃ y, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng &lt;strong>File Manager&lt;/strong> hoáº·c &lt;strong>FTP&lt;/strong> theo cÃ¡c bÆ°á»›c sau:&lt;/p>
&lt;ol>
&lt;li>Truy cáº­p vÃ o thÆ° má»¥c chá»©a cÃ¡c file cá»§a website.&lt;/li>
&lt;li>Chá»n toÃ n bá»™ cÃ¡c file vÃ  nháº¥n chuá»™t pháº£i, sau Ä‘Ã³ chá»n nÃºt &lt;strong>Move&lt;/strong>.&lt;/li>
&lt;li>Lá»±a chá»n thÆ° má»¥c Ä‘Ã­ch lÃ  &lt;code>public_html&lt;/code> vÃ  nháº¥n &lt;strong>Proceed&lt;/strong>.&lt;/li>
&lt;/ol>
&lt;p>Náº¿u website cá»§a báº¡n Ä‘Ã£ Ä‘Æ°á»£c váº­n hÃ nh má»™t thá»i gian, báº¡n cÅ©ng cáº§n pháº£i upload &lt;strong>database&lt;/strong> lÃªn hosting náº¿u chÆ°a thá»±c hiá»‡n.&lt;/p>
&lt;p>Sau khi Ä‘Ã£ Ä‘áº£m báº£o cÃ¡c file Ä‘Ã£ Ä‘Æ°á»£c di chuyá»ƒn Ä‘Ãºng vÃ o thÆ° má»¥c &lt;code>public_html&lt;/code>, báº¡n cÃ³ thá»ƒ kiá»ƒm tra website báº±ng cÃ¡ch má»Ÿ trÃ¬nh duyá»‡t vÃ  truy cáº­p vÃ o tÃªn miá»n cá»§a mÃ¬nh. Náº¿u tÃªn miá»n chÆ°a Ä‘Æ°á»£c trá» Ä‘Ãºng, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng phÃ¡p sau Ä‘á»ƒ kiá»ƒm tra vÃ  sá»­a lá»—i DNS:&lt;/p>
&lt;ul>
&lt;li>Sá»­a &lt;strong>file hosts&lt;/strong> trÃªn mÃ¡y tÃ­nh Ä‘á»ƒ giáº£ láº­p thay Ä‘á»•i DNS.&lt;/li>
&lt;li>Sá»­ dá»¥ng cÃ¡c &lt;strong>cÃ´ng cá»¥ online&lt;/strong> Ä‘á»ƒ kiá»ƒm tra tÃªn miá»n.&lt;/li>
&lt;li>CÃ i Ä‘áº·t &lt;strong>plugin trÃ¬nh duyá»‡t&lt;/strong> Ä‘á»ƒ táº¡o file host áº£o.&lt;/li>
&lt;/ul>
&lt;p>NgoÃ i ra, náº¿u báº¡n cáº§n di chuyá»ƒn website tá»« thÆ° má»¥c con lÃªn thÆ° má»¥c gá»‘c (&lt;code>public_html&lt;/code>), báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng &lt;strong>File Manager&lt;/strong> hoáº·c &lt;strong>FTP&lt;/strong> Ä‘á»ƒ thá»±c hiá»‡n. VÃ  báº¡n Ä‘á»«ng quÃªn táº£i láº¡i &lt;strong>cÆ¡ sá»Ÿ dá»¯ liá»‡u&lt;/strong> lÃªn hosting náº¿u cáº§n thiáº¿t.&lt;/p>
&lt;hr>
&lt;h2 id="bÆ°á»›c-3-tiáº¿n-hÃ nh-upload-database-lÃªn-website-hosting">BÆ°á»›c 3: Tiáº¿n hÃ nh upload database lÃªn website hosting
&lt;/h2>&lt;blockquote>
&lt;p>Thá»±c hiá»‡n bÆ°á»›c nÃ y khi website cá»§a ngÆ°á»i dÃ¹ng Ä‘Ã£ cÃ³ sáºµn &lt;em>&lt;strong>database&lt;/strong>&lt;/em>. Náº¿u khÃ´ng, báº¡n cÃ³ thá»ƒ bá» qua bÆ°á»›c nÃ y.&lt;/p>&lt;/blockquote>
&lt;h3 id="táº¡o-database-trÃªn-cpanel">Táº¡o database trÃªn cPanel
&lt;/h3>&lt;p>Táº¡o má»™t database má»›i táº¡i section &lt;strong>MySQL Databases&lt;/strong>. Khi táº¡o database báº¡n cáº§n Ä‘iá»n vÃ  ghi chÃº láº¡i nhá»¯ng thÃ´ng sá»‘ database nhÆ° sau:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>MySQL Database&lt;/strong>&lt;/li>
&lt;li>&lt;strong>MySQL User&lt;/strong>&lt;/li>
&lt;li>&lt;strong>MySQL Host&lt;/strong>&lt;/li>
&lt;li>&lt;strong>MySQL Password&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://image.vietnix.vn/wp-content/uploads/2023/11/upload-website-len-hosting-13.webp"
loading="lazy"
alt="Táº¡o database má»›i"
>&lt;/p>
&lt;p align="center">&lt;em>Táº¡o database má»›i&lt;/em>&lt;/p>
&lt;h3 id="di-chuyá»ƒn-vÃ o-phpmyadmin-cá»§a-database">Di chuyá»ƒn vÃ o phpMyAdmin cá»§a database
&lt;/h3>&lt;p>Khi sá»­ dá»¥ng &lt;strong>phpMyAdmin&lt;/strong> Ä‘á»ƒ quáº£n lÃ½ database, hÃ£y &lt;strong>import database MySQL&lt;/strong>. Náº¿u báº¡n muá»‘n upload vÃ o má»™t database cÃ³ sáºµn, hÃ£y xÃ³a dá»¯ liá»‡u trÆ°á»›c Ä‘á»ƒ trÃ¡nh lá»—i khi táº£i lÃªn tá»« mÃ¡y tÃ­nh.&lt;/p>
&lt;p>&lt;img src="https://image.vietnix.vn/wp-content/uploads/2023/11/upload-website-len-hosting-14.webp"
loading="lazy"
alt="Di chuyá»ƒn vÃ o phpMyAdmin"
>&lt;/p>
&lt;p align="center">&lt;em>Di chuyá»ƒn vÃ o phpMyAdmin&lt;/em>&lt;/p>
&lt;h3 id="di-chuyá»ƒn-vÃ o-tab-import-vÃ -upload-dá»¯-liá»‡u-vÃ o-database">Di chuyá»ƒn vÃ o tab Import vÃ  upload dá»¯ liá»‡u vÃ o database
&lt;/h3>&lt;p>Náº¿u lÃ  láº§n Ä‘áº§u táº¡o database, chá»‰ cáº§n vÃ o tab &lt;strong>Import&lt;/strong> Ä‘á»ƒ upload dá»¯ liá»‡u vÃ o database trá»‘ng. Báº¡n Ä‘Ã£ cÃ³ má»™t file SQL tá»« báº£n sao lÆ°u cá»§a trang web, cÃ³ thá»ƒ lÃ  file dáº¡ng text vá»›i Ä‘uÃ´i &lt;code>.sql&lt;/code> hoáº·c dáº¡ng nÃ©n nhÆ° &lt;code>.sql.zip&lt;/code> hay &lt;code>.sql.gz&lt;/code>. HÃ£y nháº¥n nÃºt &lt;strong>Choose File&lt;/strong> Ä‘á»ƒ chá»n file cÆ¡ sá»Ÿ dá»¯ liá»‡u vÃ  sau Ä‘Ã³ báº¥m nÃºt &lt;strong>Go&lt;/strong> Ä‘á»ƒ báº¯t Ä‘áº§u quÃ¡ trÃ¬nh táº£i lÃªn. Khi &lt;strong>phpMyAdmin&lt;/strong> hoÃ n táº¥t vÃ  hiá»ƒn thá»‹ thÃ´ng bÃ¡o &lt;em>Import has been successfully finished, 302 queries executed&lt;/em>, cÃ³ nghÄ©a lÃ  quÃ¡ trÃ¬nh táº£i lÃªn cÆ¡ sá»Ÿ dá»¯ liá»‡u Ä‘Ã£ hoÃ n táº¥t.&lt;/p>
&lt;p>&lt;img src="https://image.vietnix.vn/wp-content/uploads/2023/11/upload-website-len-hosting-15.webp"
loading="lazy"
alt="Import dá»¯ liá»‡u vÃ o database"
>&lt;/p>
&lt;p align="center">&lt;em>Import dá»¯ liá»‡u vÃ o database&lt;/em>&lt;/p>
&lt;h3 id="cáº­p-nháº­t-file-cáº¥u-hÃ¬nh-Ä‘á»ƒ-káº¿t-ná»‘i-website-vÃ -database">Cáº­p nháº­t file cáº¥u hÃ¬nh Ä‘á»ƒ káº¿t ná»‘i website vÃ  database
&lt;/h3>&lt;p>Sau khi táº£i database lÃªn server, báº¡n cáº§n má»Ÿ &lt;strong>file cáº¥u hÃ¬nh PHP&lt;/strong> script Ä‘á»ƒ Ä‘iá»n thÃ´ng tin nhÆ° host, tÃªn database, tÃªn ngÆ°á»i dÃ¹ng vÃ  máº­t kháº©u. File cáº¥u hÃ¬nh cÃ³ thá»ƒ cÃ³ tÃªn vÃ  vá»‹ trÃ­ khÃ¡c nhau tÃ¹y thuá»™c vÃ o pháº§n má»m báº¡n sá»­ dá»¥ng. VÃ­ dá»¥, vá»›i &lt;strong>WordPress&lt;/strong>, file cáº¥u hÃ¬nh lÃ  &lt;code>wp-config.php&lt;/code> vÃ  náº±m trong thÆ° má»¥c chá»©a &lt;strong>WordPress&lt;/strong> (thÆ°á»ng lÃ  &lt;code>public_html&lt;/code>).&lt;/p>
&lt;blockquote>
&lt;p>âš  &lt;strong>LÆ°u Ã½:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Náº¿u cÆ¡ sá»Ÿ dá»¯ liá»‡u cá»§a báº¡n cÃ³ kÃ­ch thÆ°á»›c lá»›n, hÃ£y cÃ¢n nháº¯c chia nhá» database thÃ nh nhiá»u file Ä‘á»ƒ quÃ¡ trÃ¬nh táº£i lÃªn diá»…n ra nhanh chÃ³ng hÆ¡n.&lt;/li>
&lt;li>Náº¿u database chá»©a cÃ¡c kÃ½ tá»± Ä‘áº·c biá»‡t, nhá»› chuyá»ƒn Ä‘á»•i chÃºng sang Ä‘á»‹nh dáº¡ng &lt;strong>ASCII&lt;/strong> trÆ°á»›c khi thá»±c hiá»‡n upload.&lt;/li>
&lt;li>Trong trÆ°á»ng há»£p gáº·p lá»—i khi import, báº¡n cáº§n kiá»ƒm tra xem database cÃ³ bá»‹ há»ng hay khÃ´ng. Náº¿u bá»‹ lá»—i, hÃ£y táº¡o láº¡i má»™t cÆ¡ sá»Ÿ dá»¯ liá»‡u má»›i vÃ  thá»­ láº¡i.&lt;/li>
&lt;li>Cuá»‘i cÃ¹ng, sau khi upload xong, Ä‘á»«ng quÃªn kiá»ƒm tra website cá»§a báº¡n Ä‘á»ƒ Ä‘áº£m báº£o má»i thá»© hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng.&lt;/li>
&lt;/ul>&lt;/blockquote>
&lt;h3 id="cáº­p-nháº­t-file-cáº¥u-hÃ¬nh-Ä‘á»ƒ-káº¿t-ná»‘i-website-vÃ -database-1">Cáº­p nháº­t file cáº¥u hÃ¬nh Ä‘á»ƒ káº¿t ná»‘i website vÃ  database
&lt;/h3>&lt;p>Sau khi táº£i database lÃªn server, báº¡n cáº§n má»Ÿ file cáº¥u hÃ¬nh PHP script Ä‘á»ƒ Ä‘iá»n thÃ´ng tin nhÆ° &lt;strong>host&lt;/strong>, &lt;strong>tÃªn database&lt;/strong>, &lt;strong>tÃªn ngÆ°á»i dÃ¹ng&lt;/strong> vÃ  &lt;strong>máº­t kháº©u&lt;/strong>.&lt;/p>
&lt;p>File cáº¥u hÃ¬nh cÃ³ thá»ƒ cÃ³ tÃªn vÃ  vá»‹ trÃ­ khÃ¡c nhau tÃ¹y thuá»™c vÃ o pháº§n má»m báº¡n sá»­ dá»¥ng. VÃ­ dá»¥, vá»›i &lt;strong>WordPress&lt;/strong>, file cáº¥u hÃ¬nh lÃ  &lt;code>wp-config.php&lt;/code> vÃ  náº±m trong thÆ° má»¥c chá»©a WordPress (thÆ°á»ng lÃ  &lt;code>public_html&lt;/code>).&lt;/p>
&lt;hr>
&lt;h2 id="bÆ°á»›c-4-kiá»ƒm-tra-website-Ä‘Ã£-hoáº¡t-Ä‘á»™ng-á»•n-Ä‘á»‹nh-hay-chÆ°a">BÆ°á»›c 4: Kiá»ƒm tra website Ä‘Ã£ hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh hay chÆ°a
&lt;/h2>&lt;p>Äá»ƒ Ä‘áº£m báº£o website cá»§a báº¡n hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh sau khi táº£i lÃªn vÃ  trá» tÃªn miá»n, báº¡n cáº§n thá»±c hiá»‡n má»™t sá»‘ bÆ°á»›c kiá»ƒm tra quan trá»ng:&lt;/p>
&lt;h3 id="-kiá»ƒm-tra-truy-cáº­p-website">ğŸ” Kiá»ƒm tra truy cáº­p website
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>Truy cáº­p báº±ng tÃªn miá»n hoáº·c Ä‘á»‹a chá»‰ IP:&lt;/strong> Náº¿u báº¡n cÃ³ thá»ƒ truy cáº­p thÃ nh cÃ´ng, website Ä‘Ã£ hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh.&lt;/li>
&lt;li>&lt;strong>Chá» DNS cáº­p nháº­t:&lt;/strong> Náº¿u tÃªn miá»n vá»«a Ä‘Æ°á»£c cáº­p nháº­t, báº¡n cÃ³ thá»ƒ cáº§n Ä‘á»£i khoáº£ng &lt;strong>24 giá»&lt;/strong> Ä‘á»ƒ DNS Ä‘Æ°á»£c quáº£ng bÃ¡ rá»™ng rÃ£i.&lt;/li>
&lt;li>&lt;strong>Kiá»ƒm tra ngay láº­p tá»©c báº±ng:&lt;/strong>
&lt;ul>
&lt;li>ğŸ–¥ï¸ &lt;strong>Sá»­ dá»¥ng file host:&lt;/strong> Chá»‰nh sá»­a file host trÃªn mÃ¡y tÃ­nh Ä‘á»ƒ mÃ´ phá»ng thay Ä‘á»•i DNS.&lt;/li>
&lt;li>ğŸŒ &lt;strong>CÃ´ng cá»¥ online:&lt;/strong> Kiá»ƒm tra website báº±ng cÃ¡c dá»‹ch vá»¥ kiá»ƒm tra DNS trá»±c tuyáº¿n.&lt;/li>
&lt;li>ğŸ”Œ &lt;strong>Plugin browser:&lt;/strong> CÃ i Ä‘áº·t plugin giÃºp táº¡o file host áº£o Ä‘á»ƒ kiá»ƒm tra cÃ¡c thay Ä‘á»•i DNS.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="-kiá»ƒm-tra-cÃ¡c-chá»©c-nÄƒng-cá»§a-website">ğŸ› ï¸ Kiá»ƒm tra cÃ¡c chá»©c nÄƒng cá»§a website
&lt;/h3>&lt;ul>
&lt;li>Thá»­ truy cáº­p cÃ¡c trang khÃ¡c nhau, kiá»ƒm tra liÃªn káº¿t.&lt;/li>
&lt;li>Kiá»ƒm tra xem cÃ¡c tÃ­nh nÄƒng cá»§a website cÃ³ hoáº¡t Ä‘á»™ng Ä‘Ãºng khÃ´ng.&lt;/li>
&lt;/ul>
&lt;h3 id="-kiá»ƒm-tra-tá»‘c-Ä‘á»™-táº£i-trang">âš¡ Kiá»ƒm tra tá»‘c Ä‘á»™ táº£i trang
&lt;/h3>&lt;ul>
&lt;li>Sá»­ dá»¥ng cÃ¡c cÃ´ng cá»¥ nhÆ° &lt;strong>Google PageSpeed Insights, GTmetrix&lt;/strong> Ä‘á»ƒ kiá»ƒm tra hiá»‡u suáº¥t.&lt;/li>
&lt;/ul>
&lt;h3 id="-kiá»ƒm-tra-cÃ¡c-lá»—i-trÃªn-website">ğŸš¨ Kiá»ƒm tra cÃ¡c lá»—i trÃªn website
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>Lá»—i 404:&lt;/strong> Trang khÃ´ng tÃ¬m tháº¥y.&lt;/li>
&lt;li>&lt;strong>Lá»—i 500:&lt;/strong> Lá»—i mÃ¡y chá»§ hosting.&lt;/li>
&lt;li>&lt;strong>Lá»—i 503:&lt;/strong> MÃ¡y chá»§ Ä‘ang báº£o trÃ¬.&lt;/li>
&lt;/ul>
&lt;h3 id="-kiá»ƒm-tra-trÃªn-nhiá»u-trÃ¬nh-duyá»‡t--thiáº¿t-bá»‹">ğŸŒ Kiá»ƒm tra trÃªn nhiá»u trÃ¬nh duyá»‡t &amp;amp; thiáº¿t bá»‹
&lt;/h3>&lt;ul>
&lt;li>DÃ¹ng &lt;strong>Chrome, Firefox, Safari, Edge&lt;/strong> trÃªn &lt;strong>mÃ¡y tÃ­nh, Ä‘iá»‡n thoáº¡i, mÃ¡y tÃ­nh báº£ng&lt;/strong>.&lt;/li>
&lt;/ul>
&lt;h3 id="-kiá»ƒm-tra-vÃ o-cÃ¡c-thá»i-Ä‘iá»ƒm-khÃ¡c-nhau-trong-ngÃ y">â³ Kiá»ƒm tra vÃ o cÃ¡c thá»i Ä‘iá»ƒm khÃ¡c nhau trong ngÃ y
&lt;/h3>&lt;ul>
&lt;li>Website cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng khÃ¡c nhau vÃ o nhá»¯ng thá»i Ä‘iá»ƒm khÃ¡c nhau.&lt;/li>
&lt;/ul>
&lt;p>ğŸ‘‰ &lt;strong>Náº¿u phÃ¡t hiá»‡n lá»—i nhÆ°ng khÃ´ng biáº¿t cÃ¡ch xá»­ lÃ½, hÃ£y liÃªn há»‡ vá»›i nhÃ  cung cáº¥p hosting Ä‘á»ƒ Ä‘Æ°á»£c há»— trá»£.&lt;/strong> ğŸš€&lt;/p>
&lt;hr>
&lt;h2 id="-lá»i-káº¿t">ğŸ“Œ Lá»i káº¿t
&lt;/h2>&lt;p>Upload website lÃªn hosting lÃ  má»™t bÆ°á»›c quan trá»ng Ä‘á»ƒ website cá»§a báº¡n cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh trÃªn mÃ´i trÆ°á»ng trá»±c tuyáº¿n. Báº±ng cÃ¡ch chuáº©n bá»‹ Ä‘Ãºng Ä‘áº¯n vÃ  thá»±c hiá»‡n theo cÃ¡c bÆ°á»›c hÆ°á»›ng dáº«n, báº¡n sáº½ Ä‘áº£m báº£o ráº±ng website cá»§a mÃ¬nh luÃ´n sáºµn sÃ ng phá»¥c vá»¥ ngÆ°á»i dÃ¹ng má»™t cÃ¡ch hiá»‡u quáº£.&lt;/p>
&lt;p>ğŸ’¡ Náº¿u báº¡n cÃ³ báº¥t ká»³ cÃ¢u há»i nÃ o hoáº·c cáº§n há»— trá»£ thÃªm, hÃ£y Ä‘á»ƒ láº¡i cÃ¢u há»i trong pháº§n bÃ¬nh luáº­n dÆ°á»›i Ä‘Ã¢y. MÃ¬nh sáº½ sá»›m giÃºp báº¡n tÃ¬m ra lá»i giáº£i Ä‘Ã¡p.&lt;/p>
&lt;p>Cáº£m Æ¡n báº¡n Ä‘Ã£ theo dÃµi bÃ i viáº¿t ğŸš€&lt;/p></description></item><item><title>GiÃ¡m sÃ¡t á»©ng dá»¥ng (Application Monitoring) ğŸ“Š</title><link>https://tech.nguuyen.io.vn/posts/devops/devops-step-eighteen/</link><pubDate>Tue, 25 Feb 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/devops/devops-step-eighteen/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/devops/devops-step-eighteen.webp" alt="Featured image of post GiÃ¡m sÃ¡t á»©ng dá»¥ng (Application Monitoring) ğŸ“Š" />&lt;h2 id="-giÃ¡m-sÃ¡t-á»©ng-dá»¥ng-application-monitoring">ğŸ“Š GiÃ¡m sÃ¡t á»©ng dá»¥ng (Application Monitoring)
&lt;/h2>&lt;p>GiÃ¡m sÃ¡t á»©ng dá»¥ng lÃ  quÃ¡ trÃ¬nh theo dÃµi vÃ  phÃ¢n tÃ­ch liÃªn tá»¥c cÃ¡c á»©ng dá»¥ng pháº§n má»m nháº±m Ä‘áº£m báº£o chÃºng hoáº¡t Ä‘á»™ng tá»‘i Æ°u, phÃ¡t hiá»‡n sá»± cá»‘ vÃ  cung cáº¥p nhá»¯ng hiá»ƒu biáº¿t sÃ¢u sáº¯c vá» hiá»‡u suáº¥t cá»§a há»‡ thá»‘ng. Viá»‡c giÃ¡m sÃ¡t bao gá»“m cÃ¡c chá»‰ sá»‘ quan trá»ng nhÆ°:&lt;/p>
&lt;ul>
&lt;li>â³ &lt;strong>Thá»i gian pháº£n há»“i&lt;/strong>&lt;/li>
&lt;li>âŒ &lt;strong>Tá»· lá»‡ lá»—i&lt;/strong>&lt;/li>
&lt;li>ğŸ–¥ï¸ &lt;strong>Sá»­ dá»¥ng tÃ i nguyÃªn (CPU, RAM, Disk)&lt;/strong>&lt;/li>
&lt;li>ğŸ”„ &lt;strong>Hiá»‡u suáº¥t giao dá»‹ch&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>CÃ¡c cÃ´ng cá»¥ giÃ¡m sÃ¡t á»©ng dá»¥ng giÃºp thu tháº­p, phÃ¢n tÃ­ch dá»¯ liá»‡u Ä‘á»ƒ phÃ¡t hiá»‡n báº¥t thÆ°á»ng, cáº£nh bÃ¡o sá»›m cÃ¡c váº¥n Ä‘á» tiá»m áº©n, Ä‘á»“ng thá»i cung cáº¥p cÃ¡i nhÃ¬n toÃ n diá»‡n vá» hÃ nh vi cá»§a á»©ng dá»¥ng. Nhá» Ä‘Ã³, doanh nghiá»‡p cÃ³ thá»ƒ chá»§ Ä‘á»™ng xá»­ lÃ½ sá»± cá»‘, tá»‘i Æ°u hiá»‡u suáº¥t vÃ  nÃ¢ng cao tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng.&lt;/p>
&lt;hr>
&lt;h2 id="-jaeger---cÃ´ng-cá»¥-tracing-phÃ¢n-tÃ¡n">ğŸ” Jaeger - CÃ´ng cá»¥ tracing phÃ¢n tÃ¡n
&lt;/h2>&lt;p>Jaeger lÃ  má»™t há»‡ thá»‘ng giÃ¡m sÃ¡t phÃ¢n tÃ¡n mÃ£ nguá»“n má»Ÿ do Uber phÃ¡t triá»ƒn, giÃºp theo dÃµi vÃ  kháº¯c phá»¥c sá»± cá»‘ trong cÃ¡c há»‡ thá»‘ng microservices phá»©c táº¡p.&lt;/p>
&lt;h3 id="-tÃ­nh-nÄƒng-chÃ­nh">ğŸ”¹ TÃ­nh nÄƒng chÃ­nh:
&lt;/h3>&lt;ul>
&lt;li>ğŸŒ &lt;strong>Theo dÃµi yÃªu cáº§u phÃ¢n tÃ¡n&lt;/strong>&lt;/li>
&lt;li>ğŸ” &lt;strong>PhÃ¢n tÃ­ch quan há»‡ giá»¯a cÃ¡c dá»‹ch vá»¥&lt;/strong>&lt;/li>
&lt;li>ğŸ“Š &lt;strong>XÃ¡c Ä‘á»‹nh nguyÃªn nhÃ¢n gá»‘c rá»… cá»§a váº¥n Ä‘á»&lt;/strong>&lt;/li>
&lt;li>ğŸ› ï¸ &lt;strong>Há»— trá»£ OpenTracing â€“ dá»… dÃ ng tÃ­ch há»£p vá»›i cÃ¡c há»‡ thá»‘ng khÃ¡c&lt;/strong>&lt;/li>
&lt;/ul>
&lt;h3 id="vÃ­-dá»¥-cÃ i-Ä‘áº·t-jaeger-vá»›i-docker">ğŸ”¹VÃ­ dá»¥ cÃ i Ä‘áº·t Jaeger vá»›i Docker
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">docker run -d --name jaeger &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -e &lt;span class="nv">COLLECTOR_ZIPKIN_HTTP_PORT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">9411&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -p 5775:5775/udp &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -p 6831:6831/udp &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -p 6832:6832/udp &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -p 5778:5778 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -p 16686:16686 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -p 14268:14268 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -p 14250:14250 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -p 9411:9411 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> jaegertracing/all-in-one:1.37
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Sau khi cÃ i Ä‘áº·t, tra cá»©u Jaeger UI táº¡i http://localhost:16686&lt;/p>
&lt;p>&lt;strong>ğŸ“Œ TÃ i nguyÃªn tham kháº£o:&lt;/strong>&lt;/p>
&lt;p>&lt;a class="link" href="https://www.jaegertracing.io/docs/1.37/" target="_blank" rel="noopener"
>ğŸ“– TÃ i liá»‡u Jaeger&lt;/a>&lt;br>
&lt;a class="link" href="https://github.com/jaegertracing/jaeger" target="_blank" rel="noopener"
>ğŸ› ï¸ GitHub - jaegertracing&lt;/a>&lt;/p>
&lt;hr>
&lt;h2 id="-new-relic---giÃ¡m-sÃ¡t-hiá»‡u-nÄƒng-á»©ng-dá»¥ng">ğŸŒ New Relic - GiÃ¡m sÃ¡t hiá»‡u nÄƒng á»©ng dá»¥ng
&lt;/h2>&lt;p>New Relic lÃ  má»™t ná»n táº£ng quan sÃ¡t Ä‘Ã¡m mÃ¢y cung cáº¥p cÃ¡i nhÃ¬n toÃ n diá»‡n vá» pháº§n má»m vÃ  cÆ¡ sá»Ÿ háº¡ táº§ng. NÃ³ há»— trá»£ giÃ¡m sÃ¡t hiá»‡u suáº¥t thá»i gian thá»±c, phÃ¢n tÃ­ch dá»¯ liá»‡u vÃ  cáº£nh bÃ¡o tá»± Ä‘á»™ng.&lt;/p>
&lt;h3 id="-tÃ­nh-nÄƒng-chÃ­nh-1">ğŸ”¹ TÃ­nh nÄƒng chÃ­nh:
&lt;/h3>&lt;ul>
&lt;li>ğŸ“ˆ &lt;strong>Theo dÃµi hiá»‡u suáº¥t á»©ng dá»¥ng (APM)&lt;/strong>&lt;/li>
&lt;li>ğŸ” &lt;strong>PhÃ¢n tÃ­ch logs vÃ  truy váº¿t lá»—i&lt;/strong>&lt;/li>
&lt;li>ğŸš€ &lt;strong>Theo dÃµi tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng trÃªn web vÃ  mobile&lt;/strong>&lt;/li>
&lt;li>ğŸ¤– &lt;strong>AI-powered analytics â€“ tá»± Ä‘á»™ng phÃ¡t hiá»‡n sá»± cá»‘&lt;/strong>&lt;/li>
&lt;/ul>
&lt;h3 id="vÃ­-dá»¥-cÃ i-Ä‘áº·t-new-relic-agent-trong-nodejs">ğŸ”¹VÃ­ dá»¥ cÃ i Ä‘áº·t New Relic Agent trong Node.js
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">npm install newrelic --save
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Sau Ä‘Ã³, báº¡n cáº§n thÃªm require(&amp;rsquo;newrelic&amp;rsquo;) á»Ÿ dÃ²ng Ä‘áº§u tiÃªn trong file main:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;newrelic&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span> &lt;span class="err">#&lt;/span>&lt;span class="nx">ThÃªm&lt;/span> &lt;span class="nx">thÆ°&lt;/span> &lt;span class="nx">viá»‡n&lt;/span> &lt;span class="nx">newrelic&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">express&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;express&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">express&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;/&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">req&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">res&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">send&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Hello, New Relic!&amp;#39;&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">app&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">listen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3000&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;App running on port 3000&amp;#39;&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>ğŸ“Œ TÃ i nguyÃªn tham kháº£o:&lt;/strong>&lt;/p>
&lt;p>&lt;a class="link" href="https://newrelic.com/" target="_blank" rel="noopener"
>ğŸŒ Trang web New Relic&lt;/a>&lt;br>
&lt;a class="link" href="https://www.youtube.com/watch?v=8kx7nRGVJRg" target="_blank" rel="noopener"
>ğŸ¥ Báº£n demo ná»n táº£ng New Relic&lt;/a>&lt;/p>
&lt;hr>
&lt;h2 id="-datadog---giáº£i-phÃ¡p-giÃ¡m-sÃ¡t-toÃ n-diá»‡n">ğŸ¶ Datadog - Giáº£i phÃ¡p giÃ¡m sÃ¡t toÃ n diá»‡n
&lt;/h2>&lt;p>Datadog lÃ  má»™t ná»n táº£ng giÃ¡m sÃ¡t vÃ  phÃ¢n tÃ­ch máº¡nh máº½ dÃ nh cho cÃ¡c á»©ng dá»¥ng quy mÃ´ lá»›n. NÃ³ há»— trá»£ nhiá»u lÄ©nh vá»±c tá»« giÃ¡m sÃ¡t háº¡ táº§ng, hiá»‡u suáº¥t á»©ng dá»¥ng Ä‘áº¿n quáº£n lÃ½ logs vÃ  tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng.&lt;/p>
&lt;h3 id="-tÃ­nh-nÄƒng-chÃ­nh-2">ğŸ”¹ TÃ­nh nÄƒng chÃ­nh:
&lt;/h3>&lt;ul>
&lt;li>ğŸ”— &lt;strong>400+ tÃ­ch há»£p vá»›i cÃ¡c cÃ´ng cá»¥ DevOps&lt;/strong>&lt;/li>
&lt;li>ğŸ“Š &lt;strong>Theo dÃµi toÃ n bá»™ há»‡ thá»‘ng trÃªn dashboard trá»±c quan&lt;/strong>&lt;/li>
&lt;li>âš ï¸ &lt;strong>Thiáº¿t láº­p cáº£nh bÃ¡o thÃ´ng minh&lt;/strong>&lt;/li>
&lt;li>ğŸ“¡ &lt;strong>Há»— trá»£ giÃ¡m sÃ¡t cloud-native&lt;/strong>&lt;/li>
&lt;/ul>
&lt;h3 id="-vÃ­-dá»¥-vÃ i-Ä‘áº·t-datadog-agent">ğŸ”¹ VÃ­ dá»¥ vÃ i Ä‘áº·t Datadog Agent
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">DD_AGENT_MAJOR_VERSION&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">7&lt;/span> &lt;span class="nv">DD_API_KEY&lt;/span>&lt;span class="o">=&lt;/span>&amp;lt;YOUR_API_KEY&amp;gt; &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>&lt;span class="nv">DD_SITE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;datadoghq.com&amp;#34;&lt;/span> bash -c &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>curl -L https://s3.amazonaws.com/dd-agent/scripts/install_script.sh&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Sau khi cÃ i Ä‘áº·t, truy cáº­p Datadog dashboard Ä‘á»ƒ xem cÃ¡c metric cá»§a báº¡n.&lt;/p>
&lt;p>&lt;strong>ğŸ“Œ TÃ i nguyÃªn tham kháº£o:&lt;/strong>&lt;/p>
&lt;p>&lt;a class="link" href="https://www.datadoghq.com/" target="_blank" rel="noopener"
>ğŸŒ Trang web Datadog&lt;/a>&lt;br>
&lt;a class="link" href="https://docs.datadoghq.com/" target="_blank" rel="noopener"
>ğŸ“– TÃ i liá»‡u Datadog&lt;/a>&lt;/p>
&lt;hr>
&lt;h2 id="-káº¿t-luáº­n">ğŸ¯ Káº¿t luáº­n
&lt;/h2>&lt;p>Viá»‡c giÃ¡m sÃ¡t á»©ng dá»¥ng Ä‘Ã³ng vai trÃ² quan trá»ng trong viá»‡c Ä‘áº£m báº£o hiá»‡u suáº¥t vÃ  Ä‘á»™ tin cáº­y cá»§a há»‡ thá»‘ng. CÃ¡c cÃ´ng cá»¥ nhÆ° &lt;strong>Jaeger&lt;/strong>, &lt;strong>New Relic&lt;/strong> vÃ  &lt;strong>Datadog&lt;/strong> cung cáº¥p cÃ¡c giáº£i phÃ¡p toÃ n diá»‡n giÃºp doanh nghiá»‡p theo dÃµi, phÃ¢n tÃ­ch vÃ  tá»‘i Æ°u hÃ³a há»‡ thá»‘ng pháº§n má»m má»™t cÃ¡ch hiá»‡u quáº£. Chá»n cÃ´ng cá»¥ phÃ¹ há»£p sáº½ giÃºp báº¡n quáº£n lÃ½ á»©ng dá»¥ng tá»‘t hÆ¡n, phÃ¡t hiá»‡n sá»›m lá»—i vÃ  cáº£i thiá»‡n tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng.&lt;/p>
&lt;p>ğŸš€ HÃ£y triá»ƒn khai giÃ¡m sÃ¡t Ä‘á»ƒ tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t á»©ng dá»¥ng cá»§a báº¡n!&lt;/p>
&lt;p>ğŸ‘‰ &lt;strong>BÆ°á»›c tiáº¿p theo:&lt;/strong> TÃ¬m hiá»ƒu vá» &lt;em>&lt;strong>Artifacts&lt;/strong>&lt;/em> trong phÃ¡t triá»ƒn pháº§n má»m, artifacts lÃ  cÃ¡c tá»‡p hoáº·c sáº£n pháº©m Ä‘Æ°á»£c táº¡o ra trong quÃ¡ trÃ¬nh phÃ¡t triá»ƒn vÃ  triá»ƒn khai á»©ng dá»¥ng.&lt;/p></description></item><item><title>GitOps - Tá»± Ä‘á»™ng hoÃ¡ triá»ƒn khai vá»›i Git ğŸŒŸ</title><link>https://tech.nguuyen.io.vn/posts/devops/devops-step-twenty/</link><pubDate>Tue, 25 Feb 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/devops/devops-step-twenty/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/devops/devops-step-twenty.webp" alt="Featured image of post GitOps - Tá»± Ä‘á»™ng hoÃ¡ triá»ƒn khai vá»›i Git ğŸŒŸ" />&lt;h2 id="giá»›i-thiá»‡u">Giá»›i thiá»‡u
&lt;/h2>&lt;p>GitOps lÃ  má»™t phÆ°Æ¡ng phÃ¡p quáº£n lÃ½ háº¡ táº§ng vÃ  triá»ƒn khai á»©ng dá»¥ng báº±ng cÃ¡ch sá»­ dá»¥ng Git lÃ m nguá»“n sá»± tháº­t duy nháº¥t (single source of truth). PhÆ°Æ¡ng phÃ¡p nÃ y giÃºp tá»± Ä‘á»™ng hÃ³a quy trÃ¬nh triá»ƒn khai, Ä‘áº£m báº£o tÃ­nh nháº¥t quÃ¡n vÃ  tÄƒng cÆ°á»ng kháº£ nÄƒng theo dÃµi cÃ¡c thay Ä‘á»•i.&lt;/p>
&lt;p>GitOps má»Ÿ rá»™ng thá»±c tiá»…n cá»§a DevOps báº±ng cÃ¡ch Ã¡p dá»¥ng cÃ¡c nguyÃªn táº¯c cá»§a kiá»ƒm soÃ¡t phiÃªn báº£n (version control) vÃ  tÃ­ch há»£p liÃªn tá»¥c (CI/CD) vÃ o quáº£n lÃ½ háº¡ táº§ng. Thay vÃ¬ thá»±c hiá»‡n thá»§ cÃ´ng, má»i thay Ä‘á»•i Ä‘Æ°á»£c thá»±c hiá»‡n qua pull request vÃ  tá»± Ä‘á»™ng Ä‘á»“ng bá»™ vá»›i há»‡ thá»‘ng thá»±c táº¿.&lt;/p>
&lt;h2 id="-lá»£i-Ã­ch-cá»§a-gitops">ğŸš€ Lá»£i Ã­ch cá»§a GitOps
&lt;/h2>&lt;p>âœ… &lt;strong>Kiá»ƒm soÃ¡t phiÃªn báº£n&lt;/strong>: Táº¥t cáº£ cÃ¡c thay Ä‘á»•i Ä‘Æ°á»£c theo dÃµi trong Git, dá»… dÃ ng kiá»ƒm tra vÃ  quay láº¡i tráº¡ng thÃ¡i cÅ© khi cáº§n.&lt;/p>
&lt;p>âœ… &lt;strong>Tá»± Ä‘á»™ng hoÃ¡ triá»ƒn khai&lt;/strong>: Sá»­ dá»¥ng cÃ¡c cÃ´ng cá»¥ nhÆ° ArgoCD hoáº·c FluxCD Ä‘á»ƒ tá»± Ä‘á»™ng Ä‘á»“ng bá»™ há»‡ thá»‘ng.&lt;/p>
&lt;p>âœ… &lt;strong>TÄƒng cÆ°á»ng báº£o máº­t&lt;/strong>: Má»i thay Ä‘á»•i cáº§n thÃ´ng qua Git, giÃºp kiá»ƒm soÃ¡t truy cáº­p vÃ  háº¡n cháº¿ rá»§i ro thao tÃ¡c trá»±c tiáº¿p.&lt;/p>
&lt;p>âœ… &lt;strong>Kháº£ nÄƒng phá»¥c há»“i cao&lt;/strong>: Há»‡ thá»‘ng cÃ³ thá»ƒ nhanh chÃ³ng phá»¥c há»“i tráº¡ng thÃ¡i ban Ä‘áº§u khi gáº·p sá»± cá»‘ báº±ng cÃ¡ch Ã¡p dá»¥ng láº¡i cáº¥u hÃ¬nh tá»« Git.&lt;/p>
&lt;p>âœ… &lt;strong>Cáº£i thiá»‡n há»£p tÃ¡c nhÃ³m&lt;/strong>: CÃ¡c thay Ä‘á»•i Ä‘á»u Ä‘Æ°á»£c ghi nháº­n vÃ  xem xÃ©t qua pull request, giÃºp cÃ¡c thÃ nh viÃªn lÃ m viá»‡c hiá»‡u quáº£ hÆ¡n.&lt;/p>
&lt;h2 id="-cÃ¡c-cÃ´ng-cá»¥-gitops-phá»•-biáº¿n">ğŸ› ï¸ CÃ¡c cÃ´ng cá»¥ GitOps phá»• biáº¿n
&lt;/h2>&lt;h3 id="argocd---triá»ƒn-khai-liÃªn-tá»¥c-máº¡nh-máº½">ArgoCD - Triá»ƒn khai liÃªn tá»¥c máº¡nh máº½
&lt;/h3>&lt;p>ArgoCD lÃ  má»™t cÃ´ng cá»¥ triá»ƒn khai liÃªn tá»¥c (CD) dÃ nh cho Kubernetes, giÃºp tá»± Ä‘á»™ng hÃ³a quÃ¡ trÃ¬nh triá»ƒn khai báº±ng cÃ¡ch theo dÃµi tráº¡ng thÃ¡i cá»§a á»©ng dá»¥ng trong Git vÃ  Ä‘á»“ng bá»™ vá»›i mÃ´i trÆ°á»ng thá»±c táº¿.&lt;/p>
&lt;p>ğŸ”¹ &lt;strong>TÃ­nh nÄƒng ná»•i báº­t&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>Tá»± Ä‘á»™ng Ä‘á»“ng bá»™ tráº¡ng thÃ¡i á»©ng dá»¥ng vá»›i Git.&lt;/li>
&lt;li>Giao diá»‡n web trá»±c quan Ä‘á»ƒ theo dÃµi tráº¡ng thÃ¡i triá»ƒn khai.&lt;/li>
&lt;li>Há»— trá»£ Helm, Kustomize, vÃ  cÃ¡c cÃ´ng cá»¥ quáº£n lÃ½ cáº¥u hÃ¬nh khÃ¡c.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>ğŸ”¹VÃ­ dá»¥ triá»ƒn khai ArgoCD&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">argoproj.io/v1alpha1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Application&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">my-app&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">argocd&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">destination&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">default&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">server&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">https://kubernetes.default.svc&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">source&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">repoURL&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">https://github.com/my-org/my-repo.git&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">targetRevision&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">HEAD&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">manifests&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">syncPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">automated&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selfHeal&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">prune&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="fluxcd---quáº£n-lÃ½-triá»ƒn-khai-tá»±-Ä‘á»™ng">FluxCD - Quáº£n lÃ½ triá»ƒn khai tá»± Ä‘á»™ng
&lt;/h3>&lt;p>FluxCD lÃ  má»™t cÃ´ng cá»¥ GitOps giÃºp triá»ƒn khai á»©ng dá»¥ng lÃªn Kubernetes báº±ng cÃ¡ch theo dÃµi Git repository vÃ  tá»± Ä‘á»™ng cáº­p nháº­t há»‡ thá»‘ng khi cÃ³ thay Ä‘á»•i.&lt;/p>
&lt;p>ğŸ”¹ &lt;strong>TÃ­nh nÄƒng ná»•i báº­t&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>Theo dÃµi repository Git vÃ  triá»ƒn khai á»©ng dá»¥ng tá»± Ä‘á»™ng.&lt;/li>
&lt;li>Há»— trá»£ Helm, Kustomize, vÃ  nhiá»u há»‡ thá»‘ng CI/CD khÃ¡c.&lt;/li>
&lt;li>Cung cáº¥p kháº£ nÄƒng cáº­p nháº­t hÃ¬nh áº£nh container tá»± Ä‘á»™ng.&lt;/li>
&lt;/ul>
&lt;p>ğŸ”¹ &lt;strong>VÃ­ dá»¥ triá»ƒn khai FluxCD&lt;/strong>:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">source.toolkit.fluxcd.io/v1beta1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">GitRepository&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">my-app-repo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">flux-system&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">interval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">1m0s&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">url&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">https://github.com/my-org/my-repo.git&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ref&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">branch&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">main&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="-so-sÃ¡nh-argocd-vÃ -fluxcd">ğŸ”¥ So sÃ¡nh ArgoCD vÃ  FluxCD
&lt;/h2>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>TÃ­nh nÄƒng&lt;/th>
&lt;th>ArgoCD&lt;/th>
&lt;th>FluxCD&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>UI trá»±c quan&lt;/td>
&lt;td>âœ… CÃ³&lt;/td>
&lt;td>âŒ KhÃ´ng&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Há»— trá»£ Helm&lt;/td>
&lt;td>âœ… CÃ³&lt;/td>
&lt;td>âœ… CÃ³&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Cáº­p nháº­t hÃ¬nh áº£nh container tá»± Ä‘á»™ng&lt;/td>
&lt;td>âŒ KhÃ´ng&lt;/td>
&lt;td>âœ… CÃ³&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Triá»ƒn khai Canary/Rollback&lt;/td>
&lt;td>âœ… CÃ³&lt;/td>
&lt;td>âœ… CÃ³&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="-káº¿t-luáº­n">ğŸ“Œ Káº¿t luáº­n
&lt;/h2>&lt;p>GitOps giÃºp Ä‘Æ¡n giáº£n hÃ³a quy trÃ¬nh triá»ƒn khai á»©ng dá»¥ng báº±ng cÃ¡ch sá»­ dá»¥ng Git lÃ m trung tÃ¢m kiá»ƒm soÃ¡t. Vá»›i cÃ¡c cÃ´ng cá»¥ nhÆ° ArgoCD vÃ  FluxCD, doanh nghiá»‡p cÃ³ thá»ƒ dá»… dÃ ng tá»± Ä‘á»™ng hÃ³a triá»ƒn khai, Ä‘áº£m báº£o tÃ­nh nháº¥t quÃ¡n vÃ  cáº£i thiá»‡n kháº£ nÄƒng phá»¥c há»“i há»‡ thá»‘ng.&lt;/p>
&lt;p>ğŸ”— &lt;strong>TÃ i liá»‡u tham kháº£o&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>ğŸ“– &lt;a class="link" href="https://argo-cd.readthedocs.io/en/stable/" target="_blank" rel="noopener"
>TÃ i liá»‡u ArgoCD&lt;/a>&lt;/li>
&lt;li>ğŸ“– &lt;a class="link" href="https://docs.fluxcd.io/" target="_blank" rel="noopener"
>TÃ i liá»‡u FluxCD&lt;/a>&lt;/li>
&lt;li>ğŸ“˜ &lt;a class="link" href="https://www.weave.works/technologies/gitops/" target="_blank" rel="noopener"
>HÆ°á»›ng dáº«n GitOps&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Báº¡n Ä‘Ã£ thá»­ Ã¡p dá»¥ng &lt;strong>GitOps&lt;/strong> vÃ o dá»± Ã¡n cá»§a mÃ¬nh chÆ°a? HÃ£y chia sáº» tráº£i nghiá»‡m cá»§a báº¡n! ğŸš€&lt;/p>
&lt;p>ğŸ‘‰ &lt;strong>BÆ°á»›c tiáº¿p theo:&lt;/strong> TÃ¬m hiá»ƒu vá» &lt;em>&lt;strong>Service Mesh&lt;/strong>&lt;/em> má»™t lá»›p háº¡ táº§ng pháº§n má»m giÃºp quáº£n lÃ½ giao tiáº¿p giá»¯a cÃ¡c dá»‹ch vá»¥ trong há»‡ thá»‘ng microservices. NÃ³ cung cáº¥p cÃ¡c tÃ­nh nÄƒng nhÆ° cÃ¢n báº±ng táº£i, báº£o máº­t, quan sÃ¡t, kiá»ƒm soÃ¡t lÆ°u lÆ°á»£ng vÃ  kháº¯c phá»¥c lá»—i, giÃºp dá»‹ch vá»¥ giao tiáº¿p vá»›i nhau má»™t cÃ¡ch hiá»‡u quáº£ mÃ  khÃ´ng cáº§n thay Ä‘á»•i mÃ£ nguá»“n á»©ng dá»¥ng.&lt;/p></description></item><item><title>Máº«u thiáº¿t káº¿ Ä‘Ã¡m mÃ¢y (Cloud Design Patterns) ğŸŒŸ</title><link>https://tech.nguuyen.io.vn/posts/devops/devops-step-twenty-two/</link><pubDate>Tue, 25 Feb 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/devops/devops-step-twenty-two/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/devops/devops-step-twenty-two.webp" alt="Featured image of post Máº«u thiáº¿t káº¿ Ä‘Ã¡m mÃ¢y (Cloud Design Patterns) ğŸŒŸ" />&lt;h2 id="giá»›i-thiá»‡u">Giá»›i thiá»‡u
&lt;/h2>&lt;p>Máº«u thiáº¿t káº¿ Ä‘Ã¡m mÃ¢y lÃ  nhá»¯ng giáº£i phÃ¡p cÃ³ thá»ƒ tÃ¡i sá»­ dá»¥ng cho cÃ¡c váº¥n Ä‘á» phá»• biáº¿n trong kiáº¿n trÃºc Ä‘iá»‡n toÃ¡n Ä‘Ã¡m mÃ¢y. CÃ¡c máº«u nÃ y giÃºp giáº£i quyáº¿t cÃ¡c thÃ¡ch thá»©c liÃªn quan Ä‘áº¿n kháº£ nÄƒng má»Ÿ rá»™ng, Ä‘á»™ tin cáº­y, báº£o máº­t vÃ  hiá»‡u suáº¥t trong cÃ¡c há»‡ thá»‘ng phÃ¢n tÃ¡n.&lt;/p>
&lt;p>ChÃºng cung cáº¥p cÃ¡c phÆ°Æ¡ng phÃ¡p tá»‘t nháº¥t Ä‘á»ƒ thiáº¿t káº¿ vÃ  triá»ƒn khai á»©ng dá»¥ng Ä‘Ã¡m mÃ¢y, bao gá»“m quáº£n lÃ½ dá»¯ liá»‡u, xá»­ lÃ½ tin nháº¯n, Ä‘áº£m báº£o tÃ­nh kiÃªn cá»‘ (resiliency) vÃ  triá»ƒn khai. Má»™t sá»‘ vÃ­ dá»¥ phá»• biáº¿n:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Circuit Breaker&lt;/strong>: NgÄƒn cháº·n lá»—i lan rá»™ng trong há»‡ thá»‘ng báº±ng cÃ¡ch ngáº¯t káº¿t ná»‘i táº¡m thá»i khi phÃ¡t hiá»‡n lá»—i.&lt;/li>
&lt;li>&lt;strong>CQRS (Command Query Responsibility Segregation)&lt;/strong>: TÃ¡ch biá»‡t cÃ¡c thao tÃ¡c Ä‘á»c vÃ  ghi dá»¯ liá»‡u Ä‘á»ƒ cáº£i thiá»‡n hiá»‡u suáº¥t.&lt;/li>
&lt;li>&lt;strong>Sidecar Pattern&lt;/strong>: TÃ¡ch cÃ¡c thÃ nh pháº§n phá»¥ cá»§a á»©ng dá»¥ng vÃ o má»™t tiáº¿n trÃ¬nh hoáº·c container riÃªng Ä‘á»ƒ tÄƒng tÃ­nh linh hoáº¡t.&lt;/li>
&lt;/ul>
&lt;h2 id="-kháº£-dá»¥ng-availability">ğŸ”¹ Kháº£ dá»¥ng (Availability)
&lt;/h2>&lt;p>&lt;strong>Kháº£ dá»¥ng (Availability)&lt;/strong> lÃ  pháº§n trÄƒm thá»i gian há»‡ thá»‘ng hoáº¡t Ä‘á»™ng Ä‘Ãºng nhÆ° mong Ä‘á»£i, cÃ²n Ä‘Æ°á»£c gá»i lÃ  &lt;strong>uptime&lt;/strong>. Yáº¿u tá»‘ nÃ y cÃ³ thá»ƒ bá»‹ áº£nh hÆ°á»Ÿng bá»Ÿi lá»—i pháº§n cá»©ng/pháº§n má»m, váº¥n Ä‘á» háº¡ táº§ng, táº¥n cÃ´ng máº¡ng hoáº·c táº£i há»‡ thá»‘ng quÃ¡ cao.&lt;/p>
&lt;p>CÃ¡c nhÃ  cung cáº¥p dá»‹ch vá»¥ Ä‘Ã¡m mÃ¢y thÆ°á»ng Ä‘Æ°a ra &lt;strong>thá»a thuáº­n má»©c dá»‹ch vá»¥ (SLA - Service Level Agreement)&lt;/strong>, quy Ä‘á»‹nh thá»i gian uptime cam káº¿t. VÃ­ dá»¥, má»™t cÃ´ng ty cÃ³ thá»ƒ Ä‘áº£m báº£o 99.99% thá»i gian hoáº¡t Ä‘á»™ng.&lt;/p>
&lt;p>&lt;strong>ğŸ”¹VÃ­ dá»¥&lt;/strong>:
Má»™t há»‡ thá»‘ng cam káº¿t &lt;strong>99.99% uptime&lt;/strong> tá»©c lÃ  chá»‰ Ä‘Æ°á»£c phÃ©p ngá»«ng hoáº¡t Ä‘á»™ng tá»‘i Ä‘a &lt;strong>52 phÃºt/nÄƒm&lt;/strong>.&lt;/p>
&lt;h2 id="-quáº£n-lÃ½-dá»¯-liá»‡u-data-management">ğŸ”¹ Quáº£n lÃ½ dá»¯ liá»‡u (Data Management)
&lt;/h2>&lt;p>Quáº£n lÃ½ dá»¯ liá»‡u lÃ  yáº¿u tá»‘ quan trá»ng trong cÃ¡c á»©ng dá»¥ng Ä‘Ã¡m mÃ¢y, áº£nh hÆ°á»Ÿng Ä‘áº¿n háº§u háº¿t cÃ¡c thuá»™c tÃ­nh cháº¥t lÆ°á»£ng. Dá»¯ liá»‡u thÆ°á»ng Ä‘Æ°á»£c lÆ°u trá»¯ á»Ÿ nhiá»u Ä‘á»‹a Ä‘iá»ƒm khÃ¡c nhau Ä‘á»ƒ cáº£i thiá»‡n hiá»‡u suáº¥t, má»Ÿ rá»™ng quy mÃ´ hoáº·c Ä‘áº£m báº£o tÃ­nh sáºµn sÃ ng. Äiá»u nÃ y Ä‘áº·t ra cÃ¡c thÃ¡ch thá»©c nhÆ°:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Duy trÃ¬ tÃ­nh nháº¥t quÃ¡n dá»¯ liá»‡u&lt;/strong> khi dá»¯ liá»‡u Ä‘Æ°á»£c Ä‘á»“ng bá»™ trÃªn nhiá»u mÃ¡y chá»§.&lt;/li>
&lt;li>&lt;strong>Báº£o máº­t dá»¯ liá»‡u&lt;/strong> khi lÆ°u trá»¯, truyá»n táº£i vÃ  cáº¥p quyá»n truy cáº­p.&lt;/li>
&lt;li>&lt;strong>Kháº£ nÄƒng má»Ÿ rá»™ng&lt;/strong> Ä‘á»ƒ Ä‘Ã¡p á»©ng nhu cáº§u tÄƒng trÆ°á»Ÿng.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>ğŸ”¹VÃ­ dá»¥&lt;/strong>:
Há»‡ thá»‘ng ngÃ¢n hÃ ng cáº§n Ä‘áº£m báº£o má»i giao dá»‹ch Ä‘á»u Ä‘á»“ng nháº¥t giá»¯a cÃ¡c trung tÃ¢m dá»¯ liá»‡u Ä‘á»ƒ trÃ¡nh sai lá»‡ch sá»‘ dÆ° tÃ i khoáº£n.&lt;/p>
&lt;h2 id="-thiáº¿t-káº¿--triá»ƒn-khai-design-and-implementation">ğŸ”¹ Thiáº¿t Káº¿ &amp;amp; triá»ƒn Khai (Design and Implementation)
&lt;/h2>&lt;p>Thiáº¿t káº¿ tá»‘t giÃºp há»‡ thá»‘ng dá»… báº£o trÃ¬, nháº¥t quÃ¡n vÃ  cÃ³ thá»ƒ tÃ¡i sá»­ dá»¥ng trong nhiá»u tÃ¬nh huá»‘ng khÃ¡c nhau. CÃ¡c quyáº¿t Ä‘á»‹nh trong giai Ä‘oáº¡n thiáº¿t káº¿ vÃ  triá»ƒn khai áº£nh hÆ°á»Ÿng trá»±c tiáº¿p Ä‘áº¿n chi phÃ­ vÃ  cháº¥t lÆ°á»£ng tá»•ng thá»ƒ cá»§a á»©ng dá»¥ng Ä‘Ã¡m mÃ¢y.&lt;/p>
&lt;p>&lt;strong>NguyÃªn táº¯c thiáº¿t káº¿ quan trá»ng&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>TÃ­nh nháº¥t quÃ¡n&lt;/strong>: CÃ¡c thÃ nh pháº§n pháº£i tuÃ¢n theo má»™t cáº¥u trÃºc nháº¥t Ä‘á»‹nh.&lt;/li>
&lt;li>&lt;strong>Kháº£ nÄƒng má»Ÿ rá»™ng&lt;/strong>: Há»‡ thá»‘ng cÃ³ thá»ƒ xá»­ lÃ½ lÆ°u lÆ°á»£ng cao mÃ  khÃ´ng bá»‹ suy giáº£m hiá»‡u suáº¥t.&lt;/li>
&lt;li>&lt;strong>TÃ¡i sá»­ dá»¥ng&lt;/strong>: CÃ¡c thÃ nh pháº§n cÃ³ thá»ƒ dÃ¹ng láº¡i trong nhiá»u á»©ng dá»¥ng khÃ¡c nhau.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>ğŸ”¹VÃ­ dá»¥&lt;/strong>:
Má»™t há»‡ thá»‘ng e-commerce sá»­ dá»¥ng kiáº¿n trÃºc microservices Ä‘á»ƒ cÃ³ thá»ƒ dá»… dÃ ng má»Ÿ rá»™ng tá»«ng dá»‹ch vá»¥ riÃªng láº» (vÃ­ dá»¥: thanh toÃ¡n, giá» hÃ ng, tÃ¬m kiáº¿m sáº£n pháº©m).&lt;/p>
&lt;h2 id="-quáº£n-lÃ½--giÃ¡m-sÃ¡t-management-and-monitoring">ğŸ”¹ Quáº£n lÃ½ &amp;amp; giÃ¡m sÃ¡t (Management and Monitoring)
&lt;/h2>&lt;p>&lt;strong>Quáº£n lÃ½ vÃ  giÃ¡m sÃ¡t DevOps&lt;/strong> bao gá»“m toÃ n bá»™ quÃ¡ trÃ¬nh phÃ¡t triá»ƒn tá»« láº­p káº¿ hoáº¡ch, phÃ¡t triá»ƒn, kiá»ƒm thá»­, triá»ƒn khai Ä‘áº¿n váº­n hÃ nh. Má»™t há»‡ thá»‘ng giÃ¡m sÃ¡t tá»‘t giÃºp theo dÃµi tráº¡ng thÃ¡i cá»§a á»©ng dá»¥ng, dá»‹ch vá»¥ vÃ  háº¡ táº§ng trong mÃ´i trÆ°á»ng sáº£n xuáº¥t.&lt;/p>
&lt;p>ğŸ”¹ &lt;strong>CÃ¡c thÃ nh pháº§n giÃ¡m sÃ¡t quan trá»ng&lt;/strong>:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Real-time streaming&lt;/strong>: Theo dÃµi há»‡ thá»‘ng trong thá»i gian thá»±c.&lt;/li>
&lt;li>&lt;strong>Historical replay&lt;/strong>: LÆ°u trá»¯ lá»‹ch sá»­ Ä‘á»ƒ phÃ¢n tÃ­ch lá»—i.&lt;/li>
&lt;li>&lt;strong>Visualization&lt;/strong>: Hiá»ƒn thá»‹ dá»¯ liá»‡u trá»±c quan Ä‘á»ƒ dá»… dÃ ng Ä‘Ã¡nh giÃ¡ há»‡ thá»‘ng.&lt;/li>
&lt;/ul>
&lt;p>ğŸ”¹ &lt;strong>VÃ­ dá»¥&lt;/strong>:
Sá»­ dá»¥ng &lt;strong>Prometheus + Grafana&lt;/strong> Ä‘á»ƒ giÃ¡m sÃ¡t hiá»‡u suáº¥t cá»§a cÃ¡c container Kubernetes.&lt;/p>
&lt;hr>
&lt;h2 id="-káº¿t-luáº­n">ğŸ”¥ Káº¿t luáº­n
&lt;/h2>&lt;p>CÃ¡c máº«u thiáº¿t káº¿ Ä‘Ã¡m mÃ¢y giÃºp tá»‘i Æ°u hÃ³a kiáº¿n trÃºc há»‡ thá»‘ng báº±ng cÃ¡ch cung cáº¥p giáº£i phÃ¡p cho cÃ¡c thÃ¡ch thá»©c phá»• biáº¿n nhÆ° hiá»‡u suáº¥t, báº£o máº­t vÃ  kháº£ nÄƒng má»Ÿ rá»™ng. Viá»‡c Ã¡p dá»¥ng cÃ¡c máº«u thiáº¿t káº¿ phÃ¹ há»£p giÃºp doanh nghiá»‡p xÃ¢y dá»±ng há»‡ thá»‘ng máº¡nh máº½, linh hoáº¡t vÃ  dá»… báº£o trÃ¬.&lt;/p>
&lt;p>âœ… &lt;strong>Tá»•ng káº¿t:&lt;/strong> Báº¡n Ä‘Ã£ hoÃ n thÃ nh hÃ nh trÃ¬nh khÃ¡m phÃ¡ vá» &lt;strong>DevOps&lt;/strong>, phÆ°Æ¡ng phÃ¡p káº¿t há»£p phÃ¡t triá»ƒn (&lt;em>&lt;strong>Development&lt;/strong>&lt;/em>) vÃ  váº­n hÃ nh (&lt;em>&lt;strong>Operations&lt;/strong>&lt;/em>) Ä‘á»ƒ tÄƒng tá»‘c triá»ƒn khai pháº§n má»m, nÃ¢ng cao Ä‘á»™ tin cáº­y há»‡ thá»‘ng vÃ  tá»‘i Æ°u quy trÃ¬nh lÃ m viá»‡c. Cáº£m Æ¡n báº¡n Ä‘Ã£ Ä‘á»“ng hÃ nh, hy vá»ng nhá»¯ng kiáº¿n thá»©c nÃ y sáº½ giÃºp Ã­ch cho báº¡n trong hÃ nh trÃ¬nh tiáº¿p theo! ğŸš€&lt;/p></description></item><item><title>Quáº£n lÃ½ Artifacts trong phÃ¡t triá»ƒn pháº§n má»m ğŸ¢</title><link>https://tech.nguuyen.io.vn/posts/devops/devops-step-nineteen/</link><pubDate>Tue, 25 Feb 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/devops/devops-step-nineteen/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/devops/devops-step-nineteen.webp" alt="Featured image of post Quáº£n lÃ½ Artifacts trong phÃ¡t triá»ƒn pháº§n má»m ğŸ¢" />&lt;h2 id="-artifacts-lÃ -gÃ¬">ğŸ—ï¸ Artifacts lÃ  gÃ¬?
&lt;/h2>&lt;p>Artifacts lÃ  cÃ¡c sáº£n pháº©m Ä‘Æ°á»£c táº¡o ra trong suá»‘t vÃ²ng Ä‘á»i phÃ¡t triá»ƒn pháº§n má»m. ChÃºng cÃ³ thá»ƒ bao gá»“m:&lt;/p>
&lt;ul>
&lt;li>ğŸ“œ &lt;strong>MÃ£ nguá»“n (Source code)&lt;/strong>: CÃ¡c tá»‡p chá»©a logic á»©ng dá»¥ng.&lt;/li>
&lt;li>ğŸ—ï¸ &lt;strong>Binaries&lt;/strong>: CÃ¡c tá»‡p thá»±c thi hoáº·c thÆ° viá»‡n Ä‘Æ°á»£c biÃªn dá»‹ch.&lt;/li>
&lt;li>ğŸ“– &lt;strong>TÃ i liá»‡u (Documentation)&lt;/strong>: HÆ°á»›ng dáº«n sá»­ dá»¥ng, API specs.&lt;/li>
&lt;li>âš™ï¸ &lt;strong>Tá»‡p cáº¥u hÃ¬nh (Configuration files)&lt;/strong>: CÃ¡c thiáº¿t láº­p cáº§n thiáº¿t Ä‘á»ƒ cháº¡y á»©ng dá»¥ng.&lt;/li>
&lt;li>ğŸ› ï¸ &lt;strong>Káº¿t quáº£ kiá»ƒm thá»­ (Test results)&lt;/strong>: BÃ¡o cÃ¡o tá»« cÃ¡c quy trÃ¬nh kiá»ƒm thá»­.&lt;/li>
&lt;/ul>
&lt;p>Viá»‡c quáº£n lÃ½ artifacts giÃºp Ä‘áº£m báº£o tÃ­nh nháº¥t quÃ¡n, dá»… dÃ ng theo dÃµi vÃ  triá»ƒn khai pháº§n má»m hiá»‡u quáº£ hÆ¡n.&lt;/p>
&lt;hr>
&lt;h2 id="-cÃ¡c-cÃ´ng-cá»¥-quáº£n-lÃ½-artifacts-phá»•-biáº¿n">ğŸ¢ CÃ¡c cÃ´ng cá»¥ quáº£n lÃ½ Artifacts phá»• biáº¿n
&lt;/h2>&lt;h3 id="-1-artifactory">ğŸš€ 1. Artifactory
&lt;/h3>&lt;p>Artifactory lÃ  má»™t giáº£i phÃ¡p DevOps cho viá»‡c lÆ°u trá»¯, quáº£n lÃ½ vÃ  phÃ¢n phá»‘i cÃ¡c artifacts. NÃ³ há»— trá»£ nhiá»u Ä‘á»‹nh dáº¡ng nhÆ° Docker, npm, Maven, Python, Go, vÃ  hÆ¡n tháº¿ ná»¯a.&lt;/p>
&lt;h4 id="-cÃ i-Ä‘áº·t-artifactory-trÃªn-docker">ğŸ”§ CÃ i Ä‘áº·t Artifactory trÃªn Docker:
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># KÃ©o image Artifactory&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker pull releases-docker.jfrog.io/jfrog/artifactory-oss:latest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Cháº¡y container&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker run --name artifactory -d -p 8081:8081 releases-docker.jfrog.io/jfrog/artifactory-oss:latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Sau khi cÃ i Ä‘áº·t, báº¡n cÃ³ thá»ƒ truy cáº­p giao diá»‡n web qua &lt;code>http://localhost:8081&lt;/code>.&lt;/p>
&lt;h3 id="-2-nexus-repository-manager">ğŸ“¦ 2. Nexus Repository Manager
&lt;/h3>&lt;p>Nexus lÃ  má»™t trong nhá»¯ng cÃ´ng cá»¥ phá»• biáº¿n Ä‘á»ƒ quáº£n lÃ½ binary artifacts, Ä‘áº·c biá»‡t trong mÃ´i trÆ°á»ng Java.&lt;/p>
&lt;h4 id="-cÃ i-Ä‘áº·t-nexus-trÃªn-linux">ğŸ—ï¸ CÃ i Ä‘áº·t Nexus trÃªn Linux:
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">wget https://download.sonatype.com/nexus/3/latest-unix.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tar -xvf latest-unix.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> nexus-3.*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./bin/nexus start
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Sau khi cháº¡y, báº¡n cÃ³ thá»ƒ truy cáº­p Nexus táº¡i &lt;code>http://localhost:8081&lt;/code>.&lt;/p>
&lt;h3 id="-3-cloudsmith">â˜ï¸ 3. Cloudsmith
&lt;/h3>&lt;p>Cloudsmith lÃ  má»™t ná»n táº£ng quáº£n lÃ½ artifacts dá»±a trÃªn Ä‘Ã¡m mÃ¢y, há»— trá»£ nhiá»u Ä‘á»‹nh dáº¡ng gÃ³i tin nhÆ° Docker, Helm, npm, pip.&lt;/p>
&lt;h4 id="-cÃ¡ch-táº£i-vÃ -Ä‘áº©y-package-lÃªn-cloudsmith">âš¡ CÃ¡ch táº£i vÃ  Ä‘áº©y package lÃªn Cloudsmith:
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># CÃ i Ä‘áº·t CLI cá»§a Cloudsmith&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pip install cloudsmith-cli
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Äáº©y má»™t package lÃªn kho lÆ°u trá»¯&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cloudsmith push python my-org/my-repo my-package-1.0.0.tar.gz
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Cloudsmith giÃºp Ä‘Æ¡n giáº£n hÃ³a quÃ¡ trÃ¬nh quáº£n lÃ½ vÃ  phÃ¢n phá»‘i gÃ³i pháº§n má»m.&lt;/p>
&lt;hr>
&lt;h2 id="-káº¿t-luáº­n">ğŸ¯ Káº¿t luáº­n
&lt;/h2>&lt;p>Viá»‡c quáº£n lÃ½ artifacts Ä‘Ã³ng vai trÃ² quan trá»ng trong quy trÃ¬nh phÃ¡t triá»ƒn pháº§n má»m. Sá»­ dá»¥ng cÃ¡c cÃ´ng cá»¥ nhÆ° &lt;strong>Artifactory, Nexus, vÃ  Cloudsmith&lt;/strong> giÃºp Ä‘áº£m báº£o tÃ­nh tá»• chá»©c, báº£o máº­t vÃ  hiá»‡u quáº£ trong viá»‡c lÆ°u trá»¯ vÃ  triá»ƒn khai á»©ng dá»¥ng. TÃ¹y vÃ o nhu cáº§u cá»§a dá»± Ã¡n, báº¡n cÃ³ thá»ƒ chá»n cÃ´ng cá»¥ phÃ¹ há»£p Ä‘á»ƒ tá»‘i Æ°u hÃ³a quy trÃ¬nh DevOps cá»§a mÃ¬nh!&lt;/p>
&lt;p>ğŸ› ï¸ Báº¡n Ä‘ang sá»­ dá»¥ng cÃ´ng cá»¥ nÃ o Ä‘á»ƒ quáº£n lÃ½ artifacts? HÃ£y chia sáº» kinh nghiá»‡m cá»§a báº¡n!&lt;/p>
&lt;p>ğŸ‘‰ &lt;strong>BÆ°á»›c tiáº¿p theo:&lt;/strong> TÃ¬m hiá»ƒu vá» &lt;em>&lt;strong>GitOps&lt;/strong>&lt;/em> quÃ¡ trÃ¬nh cung cáº¥p vÃ  cáº¥u hÃ¬nh tÃ i nguyÃªn (mÃ¡y chá»§, máº¡ng, lÆ°u trá»¯, tÃ i khoáº£n) Ä‘á»ƒ há»‡ thá»‘ng hoáº·c á»©ng dá»¥ng cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng hiá»‡u quáº£.&lt;/p></description></item><item><title>Service Mesh - Quáº£n lÃ½ giao tiáº¿p giá»¯a Microservices ğŸŒ</title><link>https://tech.nguuyen.io.vn/posts/devops/devops-step-twenty-one/</link><pubDate>Tue, 25 Feb 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/devops/devops-step-twenty-one/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/devops/devops-step-twenty-one.webp" alt="Featured image of post Service Mesh - Quáº£n lÃ½ giao tiáº¿p giá»¯a Microservices ğŸŒ" />&lt;h2 id="-giá»›i-thiá»‡u">ğŸ“Œ Giá»›i thiá»‡u
&lt;/h2>&lt;p>&lt;strong>Service Mesh&lt;/strong> lÃ  má»™t lá»›p háº¡ táº§ng pháº§n má»m giÃºp quáº£n lÃ½ giao tiáº¿p giá»¯a cÃ¡c dá»‹ch vá»¥ trong há»‡ thá»‘ng &lt;em>&lt;strong>microservices&lt;/strong>&lt;/em>. NÃ³ cung cáº¥p cÃ¡c tÃ­nh nÄƒng nhÆ° &lt;strong>cÃ¢n báº±ng táº£i, báº£o máº­t, quan sÃ¡t, kiá»ƒm soÃ¡t lÆ°u lÆ°á»£ng vÃ  kháº¯c phá»¥c lá»—i&lt;/strong>, giÃºp dá»‹ch vá»¥ giao tiáº¿p vá»›i nhau má»™t cÃ¡ch hiá»‡u quáº£ mÃ  khÃ´ng cáº§n thay Ä‘á»•i mÃ£ nguá»“n á»©ng dá»¥ng.&lt;/p>
&lt;p>CÃ¡c cÃ´ng cá»¥ Service Mesh phá»• biáº¿n gá»“m: &lt;strong>Istio, Linkerd, Consul&lt;/strong>.&lt;/p>
&lt;hr>
&lt;h2 id="-lá»£i-Ã­ch-cá»§a-service-mesh">ğŸš€ Lá»£i Ã­ch cá»§a Service Mesh
&lt;/h2>&lt;p>âœ… &lt;strong>Tá»± Ä‘á»™ng quáº£n lÃ½ giao tiáº¿p giá»¯a cÃ¡c dá»‹ch vá»¥&lt;/strong> - KhÃ´ng cáº§n thay Ä‘á»•i mÃ£ nguá»“n á»©ng dá»¥ng.&lt;br>
âœ… &lt;strong>Báº£o máº­t nÃ¢ng cao&lt;/strong> - MÃ£ hÃ³a TLS, xÃ¡c thá»±c dá»‹ch vá»¥, chÃ­nh sÃ¡ch RBAC.&lt;br>
âœ… &lt;strong>Tá»‘i Æ°u hiá»‡u suáº¥t&lt;/strong> - Há»— trá»£ cÃ¢n báº±ng táº£i thÃ´ng minh vÃ  kiá»ƒm soÃ¡t lÆ°u lÆ°á»£ng.&lt;br>
âœ… &lt;strong>Quan sÃ¡t toÃ n diá»‡n&lt;/strong> - Theo dÃµi logs, metrics vÃ  tracing Ä‘á»ƒ giÃ¡m sÃ¡t há»‡ thá»‘ng.&lt;br>
âœ… &lt;strong>Kháº£ nÄƒng phá»¥c há»“i cao&lt;/strong> - GiÃºp phÃ¡t hiá»‡n vÃ  xá»­ lÃ½ lá»—i tá»± Ä‘á»™ng.&lt;/p>
&lt;hr>
&lt;h2 id="-cÃ¡c-cÃ´ng-cá»¥-service-mesh-phá»•-biáº¿n">ğŸ› ï¸ CÃ¡c cÃ´ng cá»¥ Service Mesh phá»• biáº¿n
&lt;/h2>&lt;h3 id="1-istio---giáº£i-phÃ¡p-máº¡nh-máº½-nháº¥t">1ï¸âƒ£ Istio - Giáº£i phÃ¡p máº¡nh máº½ nháº¥t
&lt;/h3>&lt;p>Istio lÃ  má»™t ná»n táº£ng &lt;strong>Service Mesh&lt;/strong> mÃ£ nguá»“n má»Ÿ cung cáº¥p kháº£ nÄƒng kiá»ƒm soÃ¡t, báº£o máº­t vÃ  quan sÃ¡t dá»‹ch vá»¥ trong há»‡ thá»‘ng &lt;strong>Kubernetes&lt;/strong>.&lt;/p>
&lt;p>ğŸ”¹ &lt;strong>TÃ­nh nÄƒng chÃ­nh:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Há»— trá»£ &lt;strong>mTLS&lt;/strong> Ä‘á»ƒ báº£o máº­t giao tiáº¿p giá»¯a cÃ¡c dá»‹ch vá»¥.&lt;/li>
&lt;li>CÃ¢n báº±ng táº£i thÃ´ng minh, retry, timeout.&lt;/li>
&lt;li>Quáº£n lÃ½ API Gateway vÃ  chÃ­nh sÃ¡ch truy cáº­p dá»‹ch vá»¥.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>ğŸ”¹ VÃ­ dá»¥ cáº¥u hÃ¬nh Istio Gateway:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">networking.istio.io/v1alpha3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Gateway&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">my-gateway&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">istio&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ingressgateway&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">servers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">number&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">http&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">protocol&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">HTTP&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">hosts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;example.com&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ“– &lt;a class="link" href="https://www.redhat.com/en/topics/microservices/what-is-istio" target="_blank" rel="noopener"
>TÃ i liá»‡u Istio&lt;/a>&lt;/p>
&lt;hr>
&lt;h3 id="2-linkerd---dá»…-triá»ƒn-khai--hiá»‡u-nÄƒng-cao">2ï¸âƒ£ Linkerd - Dá»… triá»ƒn khai &amp;amp; hiá»‡u nÄƒng cao
&lt;/h3>&lt;p>&lt;strong>Linkerd&lt;/strong> lÃ  Service Mesh nháº¹, tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t cho &lt;strong>Kubernetes&lt;/strong>, giÃºp giáº£m Ä‘á»™ trá»… vÃ  tÃ i nguyÃªn sá»­ dá»¥ng.&lt;/p>
&lt;p>ğŸ”¹ &lt;strong>TÃ­nh nÄƒng chÃ­nh:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Tá»± Ä‘á»™ng mÃ£ hÃ³a TLS (mTLS) cho toÃ n bá»™ giao tiáº¿p.&lt;/li>
&lt;li>Há»— trá»£ giÃ¡m sÃ¡t &lt;strong>tracing&lt;/strong> vÃ  &lt;strong>metrics&lt;/strong> dá»… dÃ ng.&lt;/li>
&lt;li>CÃ i Ä‘áº·t nhanh chá»‰ vá»›i má»™t lá»‡nh CLI.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>ğŸ”¹ VÃ­ dá»¥ cáº¥u hÃ¬nh Linkerd:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">linkerd.io/v1alpha2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ServiceProfile&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">my-service.default.svc.cluster.local&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">routes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;GET /health&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">condition&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">method&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">GET&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">pathRegex&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;/health&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">isRetryable&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ“– &lt;a class="link" href="https://linkerd.io/" target="_blank" rel="noopener"
>TÃ i liá»‡u Linkerd&lt;/a>&lt;/p>
&lt;hr>
&lt;h3 id="3-consul---há»—-trá»£-service-mesh--service-discovery">3ï¸âƒ£ Consul - Há»— trá»£ Service Mesh &amp;amp; Service Discovery
&lt;/h3>&lt;p>Consul khÃ´ng chá»‰ lÃ  má»™t &lt;strong>Service Mesh&lt;/strong>, mÃ  cÃ²n cung cáº¥p &lt;strong>Service Discovery, quáº£n lÃ½ cáº¥u hÃ¬nh, vÃ  báº£o máº­t giao tiáº¿p&lt;/strong> giá»¯a cÃ¡c dá»‹ch vá»¥.&lt;/p>
&lt;p>ğŸ”¹ &lt;strong>TÃ­nh nÄƒng chÃ­nh:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Há»— trá»£ &lt;strong>service discovery&lt;/strong> cho cáº£ Kubernetes vÃ  há»‡ thá»‘ng truyá»n thá»‘ng.&lt;/li>
&lt;li>Káº¿t há»£p vá»›i &lt;strong>Envoy Proxy&lt;/strong> Ä‘á»ƒ quáº£n lÃ½ giao tiáº¿p.&lt;/li>
&lt;li>Cho phÃ©p &lt;strong>multi-cluster&lt;/strong> vÃ  &lt;strong>hybrid cloud&lt;/strong>.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>ğŸ”¹ VÃ­ dá»¥ cáº¥u hÃ¬nh Consul Service Registration:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;service&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;web&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;port&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">8080&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;connect&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nt">&amp;#34;sidecar_service&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{}&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ“– &lt;a class="link" href="https://www.consul.io/docs/intro" target="_blank" rel="noopener"
>TÃ i liá»‡u Consul&lt;/a>&lt;/p>
&lt;hr>
&lt;h2 id="-so-sÃ¡nh-cÃ¡c-service-mesh-phá»•-biáº¿n">ğŸ”¥ So sÃ¡nh cÃ¡c Service Mesh phá»• biáº¿n
&lt;/h2>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>TÃ­nh nÄƒng&lt;/th>
&lt;th>Istio&lt;/th>
&lt;th>Linkerd&lt;/th>
&lt;th>Consul&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>UI trá»±c quan&lt;/td>
&lt;td>âœ… CÃ³&lt;/td>
&lt;td>âŒ KhÃ´ng&lt;/td>
&lt;td>âœ… CÃ³&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Há»— trá»£ mTLS&lt;/td>
&lt;td>âœ… CÃ³&lt;/td>
&lt;td>âœ… CÃ³&lt;/td>
&lt;td>âœ… CÃ³&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Hiá»‡u nÄƒng cao&lt;/td>
&lt;td>âš ï¸ Cáº§n tá»‘i Æ°u&lt;/td>
&lt;td>âœ… Nhanh&lt;/td>
&lt;td>âš ï¸ Trung bÃ¬nh&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Há»— trá»£ Service Discovery&lt;/td>
&lt;td>âŒ KhÃ´ng&lt;/td>
&lt;td>âŒ KhÃ´ng&lt;/td>
&lt;td>âœ… CÃ³&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;hr>
&lt;h2 id="-káº¿t-luáº­n">ğŸ“Œ Káº¿t luáº­n
&lt;/h2>&lt;p>Service Mesh giÃºp &lt;strong>Ä‘Æ¡n giáº£n hÃ³a viá»‡c quáº£n lÃ½ giao tiáº¿p giá»¯a cÃ¡c microservices&lt;/strong>, Ä‘áº£m báº£o &lt;strong>báº£o máº­t, giÃ¡m sÃ¡t vÃ  hiá»‡u suáº¥t cao&lt;/strong>.&lt;/p>
&lt;p>ğŸ’¡ Náº¿u báº¡n Ä‘ang tÃ¬m kiáº¿m &lt;strong>má»™t giáº£i phÃ¡p máº¡nh máº½ nháº¥t&lt;/strong>, hÃ£y thá»­ &lt;strong>Istio&lt;/strong>.&lt;br>
ğŸ’¡ Náº¿u Æ°u tiÃªn &lt;strong>hiá»‡u nÄƒng cao vÃ  dá»… triá»ƒn khai&lt;/strong>, hÃ£y chá»n &lt;strong>Linkerd&lt;/strong>.&lt;br>
ğŸ’¡ Náº¿u báº¡n cáº§n &lt;strong>service discovery vÃ  multi-cloud&lt;/strong>, hÃ£y xem xÃ©t &lt;strong>Consul&lt;/strong>.&lt;/p>
&lt;p>ğŸ“– &lt;strong>TÃ i liá»‡u tham kháº£o:&lt;/strong>&lt;br>
ğŸ”— &lt;a class="link" href="https://istio.io/latest/docs/" target="_blank" rel="noopener"
>TÃ i liá»‡u Istio&lt;/a>&lt;br>
ğŸ”— &lt;a class="link" href="https://linkerd.io/2.17/getting-started/" target="_blank" rel="noopener"
>TÃ i liá»‡u Linkerd&lt;/a>&lt;br>
ğŸ”— &lt;a class="link" href="https://developer.hashicorp.com/consul" target="_blank" rel="noopener"
>TÃ i liá»‡u Consul&lt;/a>&lt;/p>
&lt;p>Báº¡n Ä‘Ã£ thá»­ triá»ƒn khai &lt;strong>Service Mesh&lt;/strong> nÃ o chÆ°a? HÃ£y chia sáº» tráº£i nghiá»‡m cá»§a báº¡n! ğŸš€&lt;/p>
&lt;p>ğŸ‘‰ &lt;strong>BÆ°á»›c cuá»‘i cÃ¹ng:&lt;/strong> TÃ¬m hiá»ƒu vá» &lt;em>&lt;strong>Cloud Design Patterns&lt;/strong>&lt;/em> táº­p há»£p cÃ¡c máº«u thiáº¿t káº¿ Ä‘Ã£ Ä‘Æ°á»£c kiá»ƒm chá»©ng, giÃºp xÃ¢y dá»±ng cÃ¡c á»©ng dá»¥ng trÃªn Ä‘Ã¡m mÃ¢y hiá»‡u quáº£, linh hoáº¡t vÃ  cÃ³ kháº£ nÄƒng má»Ÿ rá»™ng. ChÃºng giáº£i quyáº¿t cÃ¡c váº¥n Ä‘á» phá»• biáº¿n nhÆ° tÃ­nh sáºµn sÃ ng cao, kháº£ nÄƒng chá»‹u lá»—i, má»Ÿ rá»™ng theo nhu cáº§u vÃ  báº£o máº­t trong mÃ´i trÆ°á»ng Ä‘iá»‡n toÃ¡n Ä‘Ã¡m mÃ¢y.&lt;/p></description></item><item><title>CI/CD - TÃ­ch há»£p liÃªn tá»¥c vÃ  triá»ƒn khai liÃªn tá»¥c ğŸš€</title><link>https://tech.nguuyen.io.vn/posts/devops/devops-step-thirteen/</link><pubDate>Mon, 24 Feb 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/devops/devops-step-thirteen/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/devops/devops-step-thirteen.webp" alt="Featured image of post CI/CD - TÃ­ch há»£p liÃªn tá»¥c vÃ  triá»ƒn khai liÃªn tá»¥c ğŸš€" />&lt;h2 id="-cicd-lÃ -gÃ¬">ğŸ” CI/CD lÃ  gÃ¬?
&lt;/h2>&lt;p>CI/CD (Continuous Integration/Continuous Deployment) lÃ  má»™t phÆ°Æ¡ng phÃ¡p giÃºp tá»± Ä‘á»™ng hÃ³a quÃ¡ trÃ¬nh phÃ¡t triá»ƒn pháº§n má»m, giÃºp giáº£m lá»—i, tÄƒng tá»‘c Ä‘á»™ triá»ƒn khai vÃ  cáº£i thiá»‡n cháº¥t lÆ°á»£ng sáº£n pháº©m.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Continuous Integration (CI):&lt;/strong> TÃ­ch há»£p liÃªn tá»¥c, giÃºp phÃ¡t hiá»‡n lá»—i sá»›m báº±ng cÃ¡ch tá»± Ä‘á»™ng kiá»ƒm thá»­ má»—i khi cÃ³ thay Ä‘á»•i trong mÃ£ nguá»“n.&lt;/li>
&lt;li>&lt;strong>Continuous Deployment (CD):&lt;/strong> Triá»ƒn khai liÃªn tá»¥c, Ä‘áº£m báº£o pháº§n má»m Ä‘Æ°á»£c phÃ¡t hÃ nh má»™t cÃ¡ch tá»± Ä‘á»™ng vÃ  nhanh chÃ³ng.&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-cÃ¡c-cÃ´ng-cá»¥-cicd-phá»•-biáº¿n">ğŸŒŸ CÃ¡c cÃ´ng cá»¥ CI/CD phá»• biáº¿n
&lt;/h2>&lt;h3 id="-jenkins">ğŸ”§ Jenkins
&lt;/h3>&lt;p>Jenkins lÃ  má»™t mÃ¡y chá»§ tá»± Ä‘á»™ng hÃ³a mÃ£ nguá»“n má»Ÿ phá»• biáº¿n, giÃºp xÃ¢y dá»±ng, kiá»ƒm thá»­ vÃ  triá»ƒn khai pháº§n má»m má»™t cÃ¡ch tá»± Ä‘á»™ng.&lt;/p>
&lt;p>ğŸ“Œ &lt;strong>Äáº·c Ä‘iá»ƒm ná»•i báº­t:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Há»— trá»£ nhiá»u plugin, dá»… dÃ ng tÃ­ch há»£p vá»›i cÃ¡c cÃ´ng cá»¥ DevOps.&lt;/li>
&lt;li>Giao diá»‡n web trá»±c quan, dá»… dÃ ng cáº¥u hÃ¬nh.&lt;/li>
&lt;li>Há»— trá»£ cáº£ mÃ´i trÆ°á»ng Windows vÃ  Linux.&lt;/li>
&lt;/ul>
&lt;p>ğŸ’¡ &lt;strong>VÃ­ dá»¥:&lt;/strong> Cáº¥u hÃ¬nh má»™t pipeline Ä‘Æ¡n giáº£n trong Jenkinsfile&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-groovy" data-lang="groovy">&lt;span class="line">&lt;span class="cl">&lt;span class="n">pipeline&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">agent&lt;/span> &lt;span class="n">any&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">stages&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">stage&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s1">&amp;#39;Build&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">steps&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">echo&lt;/span> &lt;span class="s1">&amp;#39;Building the application...&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">stage&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s1">&amp;#39;Test&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">steps&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">echo&lt;/span> &lt;span class="s1">&amp;#39;Running tests...&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">stage&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s1">&amp;#39;Deploy&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">steps&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">echo&lt;/span> &lt;span class="s1">&amp;#39;Deploying the application...&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ“– &lt;strong>TÃ i nguyÃªn há»¯u Ã­ch:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.jenkins.io/" target="_blank" rel="noopener"
>ğŸ”— Trang chá»§ Jenkins&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.youtube.com/watch?v=6YZvp2GwT0A" target="_blank" rel="noopener"
>ğŸ¥ HÆ°á»›ng dáº«n Jenkins tá»« A-Z&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h3 id="-circleci">ğŸ”„ CircleCI
&lt;/h3>&lt;p>CircleCI lÃ  má»™t ná»n táº£ng CI/CD máº¡nh máº½, há»— trá»£ nhiá»u ngÃ´n ngá»¯ láº­p trÃ¬nh vÃ  tÃ­ch há»£p tá»‘t vá»›i GitHub, Bitbucket.&lt;/p>
&lt;p>ğŸ“Œ &lt;strong>Äáº·c Ä‘iá»ƒm ná»•i báº­t:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Há»— trá»£ build song song Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ xá»­ lÃ½.&lt;/li>
&lt;li>TÃ­ch há»£p tá»‘t vá»›i Docker vÃ  Kubernetes.&lt;/li>
&lt;li>CÃ³ phiÃªn báº£n cloud vÃ  self-hosted.&lt;/li>
&lt;/ul>
&lt;p>ğŸ’¡ &lt;strong>VÃ­ dá»¥:&lt;/strong> Cáº¥u hÃ¬nh má»™t pipeline CircleCI trong &lt;code>.circleci/config.yml&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">2.1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">jobs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">docker&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">circleci/node:14&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">steps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">checkout&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">npm install&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">npm test&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ“– &lt;strong>TÃ i nguyÃªn há»¯u Ã­ch:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://circleci.com/" target="_blank" rel="noopener"
>ğŸ”— Trang chá»§ CircleCI&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.youtube.com/watch?v=_XaYv9zvHUk" target="_blank" rel="noopener"
>ğŸ¥ Video hÆ°á»›ng dáº«n CircleCI&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h3 id="-gitlab-cicd">ğŸ› ï¸ GitLab CI/CD
&lt;/h3>&lt;p>GitLab CI/CD lÃ  má»™t há»‡ thá»‘ng tÃ­ch há»£p sáºµn trong GitLab, cho phÃ©p tá»± Ä‘á»™ng hÃ³a quÃ¡ trÃ¬nh kiá»ƒm thá»­ vÃ  triá»ƒn khai ngay trong Git repository.&lt;/p>
&lt;p>ğŸ“Œ &lt;strong>Äáº·c Ä‘iá»ƒm ná»•i báº­t:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Há»— trá»£ tá»± Ä‘á»™ng hÃ³a toÃ n bá»™ pipeline tá»« build, test Ä‘áº¿n deploy.&lt;/li>
&lt;li>CÃ³ sáºµn trong GitLab, khÃ´ng cáº§n cÃ´ng cá»¥ bÃªn ngoÃ i.&lt;/li>
&lt;li>Há»— trá»£ cáº£ cháº¡y pipeline trÃªn Docker container.&lt;/li>
&lt;/ul>
&lt;p>ğŸ’¡ &lt;strong>VÃ­ dá»¥:&lt;/strong> Cáº¥u hÃ¬nh pipeline GitLab CI/CD trong &lt;code>.gitlab-ci.yml&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">stages&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">test&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">deploy&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">test&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">stage&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">test&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">npm install&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">npm test&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ“– &lt;strong>TÃ i nguyÃªn há»¯u Ã­ch:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://gitlab.com/" target="_blank" rel="noopener"
>ğŸ”— Trang chá»§ GitLab&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.youtube.com/watch?v=z7nLsJvEyMY" target="_blank" rel="noopener"
>ğŸ¥ HÆ°á»›ng dáº«n GitLab CI/CD&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h3 id="-github-actions">âš¡ GitHub Actions
&lt;/h3>&lt;p>GitHub Actions lÃ  cÃ´ng cá»¥ CI/CD Ä‘Æ°á»£c tÃ­ch há»£p trá»±c tiáº¿p vÃ o GitHub, giÃºp tá»± Ä‘á»™ng hÃ³a quÃ¡ trÃ¬nh kiá»ƒm thá»­ vÃ  triá»ƒn khai má»—i khi cÃ³ thay Ä‘á»•i trong repository.&lt;/p>
&lt;p>ğŸ“Œ &lt;strong>Äáº·c Ä‘iá»ƒm ná»•i báº­t:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>TÃ­ch há»£p cháº·t cháº½ vá»›i GitHub, dá»… dÃ ng thiáº¿t láº­p workflow.&lt;/li>
&lt;li>Há»— trá»£ nhiá»u há»‡ Ä‘iá»u hÃ nh vÃ  ngÃ´n ngá»¯ láº­p trÃ¬nh.&lt;/li>
&lt;li>CÃ³ thá»ƒ sá»­ dá»¥ng marketplace vá»›i hÃ ng nghÃ¬n actions cÃ³ sáºµn.&lt;/li>
&lt;/ul>
&lt;p>ğŸ’¡ &lt;strong>VÃ­ dá»¥:&lt;/strong> Workflow GitHub Actions trong &lt;code>.github/workflows/main.yml&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Node.js CI&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="l">push, pull_request]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">jobs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">runs-on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu-latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">steps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">actions/checkout@v3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Setup Node.js&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">actions/setup-node@v3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">node-version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">14&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">npm install&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">npm test&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ“– &lt;strong>TÃ i nguyÃªn há»¯u Ã­ch:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://docs.github.com/en/actions" target="_blank" rel="noopener"
>ğŸ”— Trang chá»§ GitHub Actions&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.youtube.com/watch?v=nyKZTKQS_EQ" target="_blank" rel="noopener"
>ğŸ¥ Video hÆ°á»›ng dáº«n GitHub Actions&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-káº¿t-luáº­n">ğŸ¯ Káº¿t luáº­n
&lt;/h2>&lt;p>CI/CD giÃºp tÄƒng tá»‘c quÃ¡ trÃ¬nh phÃ¡t triá»ƒn pháº§n má»m, giáº£m thiá»ƒu lá»—i vÃ  nÃ¢ng cao cháº¥t lÆ°á»£ng sáº£n pháº©m. TÃ¹y theo nhu cáº§u vÃ  mÃ´i trÆ°á»ng lÃ m viá»‡c, báº¡n cÃ³ thá»ƒ chá»n &lt;strong>Jenkins, CircleCI, GitLab CI/CD hoáº·c GitHub Actions&lt;/strong> Ä‘á»ƒ triá»ƒn khai há»‡ thá»‘ng CI/CD cá»§a mÃ¬nh. ğŸš€&lt;/p>
&lt;p>ğŸ‘‰ &lt;strong>BÆ°á»›c tiáº¿p theo:&lt;/strong> TÃ¬m hiá»ƒu vá» &lt;em>&lt;strong>Secret Management&lt;/strong>&lt;/em> quÃ¡ trÃ¬nh lÆ°u trá»¯, quáº£n lÃ½ vÃ  báº£o vá»‡ cÃ¡c thÃ´ng tin nháº¡y cáº£m nhÆ° máº­t kháº©u, khÃ³a API, chá»©ng chá»‰ vÃ  token truy cáº­p Ä‘á»ƒ ngÄƒn cháº·n rÃ² rá»‰ dá»¯ liá»‡u vÃ  Ä‘áº£m báº£o báº£o máº­t há»‡ thá»‘ng. ğŸ’¡&lt;/p></description></item><item><title>Container Orchestration ğŸš¢</title><link>https://tech.nguuyen.io.vn/posts/devops/devops-step-seventeen/</link><pubDate>Mon, 24 Feb 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/devops/devops-step-seventeen/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/devops/devops-step-seventeen.webp" alt="Featured image of post Container Orchestration ğŸš¢" />&lt;h2 id="-container-orchestration-lÃ -gÃ¬">ğŸ” Container Orchestration lÃ  gÃ¬?
&lt;/h2>&lt;p>Container orchestration lÃ  quÃ¡ trÃ¬nh quáº£n lÃ½ vÃ  tá»± Ä‘á»™ng hÃ³a vÃ²ng Ä‘á»i cá»§a container, bao gá»“m triá»ƒn khai, má»Ÿ rá»™ng vÃ  káº¿t ná»‘i máº¡ng giá»¯a cÃ¡c container trÃªn nhiá»u mÃ¡y chá»§. ÄÃ¢y lÃ  cÃ´ng nghá»‡ quan trá»ng Ä‘á»ƒ cháº¡y cÃ¡c á»©ng dá»¥ng phá»©c táº¡p trong mÃ´i trÆ°á»ng sáº£n xuáº¥t.&lt;/p>
&lt;p>Báº±ng cÃ¡ch sá»­ dá»¥ng cÃ¡c cÃ´ng cá»¥ nhÆ° &lt;strong>Kubernetes, Docker Swarm,&lt;/strong> vÃ  &lt;strong>Apache Mesos&lt;/strong>, cÃ¡c tá»• chá»©c cÃ³ thá»ƒ Ä‘áº£m báº£o &lt;strong>tÃ­nh kháº£ dá»¥ng cao, kháº£ nÄƒng má»Ÿ rá»™ng vÃ  Ä‘á»™ tin cáº­y&lt;/strong> cho á»©ng dá»¥ng cá»§a mÃ¬nh. Container orchestration giÃºp tá»± Ä‘á»™ng hÃ³a cÃ¡c tÃ¡c vá»¥ váº­n hÃ nh vÃ  táº¡o ná»n táº£ng vá»¯ng cháº¯c cho &lt;strong>microservices, cloud-native development,&lt;/strong> vÃ  &lt;strong>DevOps&lt;/strong>.&lt;/p>
&lt;p>ğŸ“š &lt;strong>TÃ i nguyÃªn miá»…n phÃ­ há»¯u Ã­ch:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ“¦ &lt;a class="link" href="https://www.redhat.com/en/topics/containers/what-is-container-orchestration" target="_blank" rel="noopener"
>Container Orchestration lÃ  gÃ¬?&lt;/a>&lt;/li>
&lt;li>ğŸš€ &lt;a class="link" href="https://kubernetes.io/docs/tutorials/kubernetes-basics/" target="_blank" rel="noopener"
>Kubernetes lÃ  gÃ¬?&lt;/a>&lt;/li>
&lt;li>ğŸ³ &lt;a class="link" href="https://docs.docker.com/engine/swarm/" target="_blank" rel="noopener"
>Docker Swarm&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=PH-2FfFD2PU" target="_blank" rel="noopener"
>Giá»›i thiá»‡u vá» Kubernetes&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-kubernetes">â˜¸ï¸ Kubernetes
&lt;/h2>&lt;p>Kubernetes lÃ  ná»n táº£ng mÃ£ nguá»“n má»Ÿ phá»• biáº¿n nháº¥t Ä‘á»ƒ quáº£n lÃ½ container. NÃ³ cho phÃ©p triá»ƒn khai container trÃªn nhiá»u mÃ¡y chá»§, xÃ¡c Ä‘á»‹nh má»©c Ä‘á»™ sáºµn sÃ ng, logic triá»ƒn khai vÃ  má»Ÿ rá»™ng thÃ´ng qua YAML.&lt;/p>
&lt;p>Kubernetes cÃ³ nguá»“n gá»‘c tá»« &lt;strong>Borg&lt;/strong>, ná»n táº£ng ná»™i bá»™ cá»§a Google, vÃ  Ä‘Ã£ trá»Ÿ thÃ nh &lt;strong>ká»¹ nÄƒng quan trá»ng Ä‘á»‘i vá»›i cÃ¡c ká»¹ sÆ° DevOps&lt;/strong>. Nhiá»u tá»• chá»©c Ä‘Ã£ thÃ nh láº­p &lt;strong>Ä‘á»™i ngÅ© Platform Engineering&lt;/strong> chuyÃªn vá» Kubernetes Ä‘á»ƒ há»— trá»£ cÃ¡c nhÃ³m phÃ¡t triá»ƒn sáº£n pháº©m.&lt;/p>
&lt;p>ğŸ“š &lt;strong>TÃ i nguyÃªn miá»…n phÃ­ há»¯u Ã­ch:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ—ºï¸ &lt;a class="link" href="https://roadmap.sh/kubernetes" target="_blank" rel="noopener"
>Lá»™ trÃ¬nh Kubernetes chuyÃªn sÃ¢u&lt;/a>&lt;/li>
&lt;li>ğŸŒ &lt;a class="link" href="https://kubernetes.io/" target="_blank" rel="noopener"
>Trang web chÃ­nh thá»©c cá»§a Kubernetes&lt;/a>&lt;/li>
&lt;li>ğŸ“– &lt;a class="link" href="https://thenewstack.io/primer-how-kubernetes-came-to-be-what-it-is-and-why-you-should-care/" target="_blank" rel="noopener"
>Tá»•ng quan vá» Kubernetes&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=2T86xAtR6Fo" target="_blank" rel="noopener"
>KhÃ³a há»c Kubernetes hoÃ n chá»‰nh - Tá»« cÆ¡ báº£n Ä‘áº¿n nÃ¢ng cao&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>ğŸ“Œ VÃ­ dá»¥:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">apiVersion&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">apps&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">kind&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">Deployment&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">metadata&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">my&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">spec&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">replicas&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">selector&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">matchLabels&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">app&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">my&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">template&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">metadata&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">labels&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">app&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">my&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">spec&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">containers&lt;/span>&lt;span class="o">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">-&lt;/span> &lt;span class="nx">name&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">my&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">image&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">my&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">app&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="nx">image&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="nx">latest&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="-gke--eks--aks">â˜ï¸ GKE / EKS / AKS
&lt;/h2>&lt;h3 id="-gke---google-kubernetes-engine">ğŸ”¹ GKE - Google Kubernetes Engine
&lt;/h3>&lt;p>Google Kubernetes Engine (GKE) lÃ  dá»‹ch vá»¥ Kubernetes Ä‘Æ°á»£c quáº£n lÃ½ bá»Ÿi Google Cloud. NÃ³ giÃºp triá»ƒn khai, quáº£n lÃ½ vÃ  má»Ÿ rá»™ng á»©ng dá»¥ng container vá»›i Kubernetes mÃ  khÃ´ng cáº§n tá»± quáº£n lÃ½ cá»¥m mÃ¡y chá»§.&lt;/p>
&lt;h3 id="-eks---amazon-elastic-kubernetes-service">ğŸ”¹ EKS - Amazon Elastic Kubernetes Service
&lt;/h3>&lt;p>Amazon Elastic Kubernetes Service (EKS) lÃ  dá»‹ch vá»¥ Kubernetes Ä‘Æ°á»£c AWS cung cáº¥p. NÃ³ tá»± Ä‘á»™ng quáº£n lÃ½ control plane cá»§a Kubernetes vÃ  tÃ­ch há»£p vá»›i cÃ¡c dá»‹ch vá»¥ AWS khÃ¡c.&lt;/p>
&lt;h3 id="-aks---azure-kubernetes-service">ğŸ”¹ AKS - Azure Kubernetes Service
&lt;/h3>&lt;p>Azure Kubernetes Service (AKS) lÃ  dá»‹ch vá»¥ Kubernetes cá»§a Microsoft Azure. AKS há»— trá»£ giÃ¡m sÃ¡t, báº£o máº­t, má»Ÿ rá»™ng tá»± Ä‘á»™ng vÃ  tÃ­ch há»£p vá»›i Azure DevOps.&lt;/p>
&lt;p>ğŸ“š &lt;strong>TÃ i nguyÃªn miá»…n phÃ­ há»¯u Ã­ch:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>â˜ï¸ &lt;a class="link" href="https://cloud.google.com/kubernetes-engine" target="_blank" rel="noopener"
>Google Kubernetes Engine (GKE)&lt;/a>&lt;/li>
&lt;li>ğŸŸ§ &lt;a class="link" href="https://aws.amazon.com/eks/" target="_blank" rel="noopener"
>Amazon Elastic Kubernetes Service (EKS)&lt;/a>&lt;/li>
&lt;li>ğŸ”µ &lt;a class="link" href="https://azure.microsoft.com/en-us/products/kubernetes-service/" target="_blank" rel="noopener"
>Azure Kubernetes Service (AKS)&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=CukYk43agA4" target="_blank" rel="noopener"
>HÆ°á»›ng dáº«n AWS EKS&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=Rl5M1CzgEH4" target="_blank" rel="noopener"
>Google Kubernetes Engine lÃ  gÃ¬?&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-ecs--fargate">ğŸš€ ECS / Fargate
&lt;/h2>&lt;p>&lt;strong>ECS&lt;/strong> lÃ  dá»‹ch vá»¥ quáº£n lÃ½ container cháº¡y trÃªn EC2 cá»§a AWS, cho phÃ©p kiá»ƒm soÃ¡t háº¡ táº§ng mÃ¡y chá»§.&lt;/p>
&lt;p>&lt;strong>Fargate&lt;/strong> lÃ  dá»‹ch vá»¥ quáº£n lÃ½ container &lt;strong>serverless&lt;/strong>, giÃºp cháº¡y container mÃ  khÃ´ng cáº§n quáº£n lÃ½ mÃ¡y chá»§ hoáº·c cá»¥m mÃ¡y.&lt;/p>
&lt;p>ğŸ“š &lt;strong>TÃ i nguyÃªn miá»…n phÃ­ há»¯u Ã­ch:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ“„ &lt;a class="link" href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/AWS_Fargate.html" target="_blank" rel="noopener"
>TÃ i liá»‡u AWS Fargate&lt;/a>&lt;/li>
&lt;li>ğŸ“„ &lt;a class="link" href="https://docs.aws.amazon.com/ecs/" target="_blank" rel="noopener"
>TÃ i liá»‡u AWS ECS&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=yi22xrvPnPk" target="_blank" rel="noopener"
>Tá»•ng quan vá» AWS Fargate&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=esISkPlnxL0" target="_blank" rel="noopener"
>HÆ°á»›ng dáº«n AWS ECS&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;p>&lt;strong>ğŸ“Œ VÃ­ dá»¥:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;family&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;my-task&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;containerDefinitions&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;my-container&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;image&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;my-container-image:latest&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;memory&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">512&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;cpu&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">256&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="-docker-swarm">ğŸ³ Docker Swarm
&lt;/h2>&lt;p>Docker Swarm lÃ  táº­p há»£p cÃ¡c mÃ¡y (váº­t lÃ½ hoáº·c áº£o) cháº¡y Docker vÃ  Ä‘Æ°á»£c cáº¥u hÃ¬nh thÃ nh má»™t cá»¥m (&lt;strong>cluster&lt;/strong>). Quáº£n lÃ½ cá»¥m Ä‘Æ°á»£c thá»±c hiá»‡n bá»Ÿi &lt;strong>swarm manager&lt;/strong>, vÃ  cÃ¡c mÃ¡y tham gia cá»¥m Ä‘Æ°á»£c gá»i lÃ  &lt;strong>nodes&lt;/strong>.&lt;/p>
&lt;p>ğŸ“š &lt;strong>TÃ i nguyÃªn há»¯u Ã­ch:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ“„ &lt;a class="link" href="https://docs.docker.com/engine/swarm/" target="_blank" rel="noopener"
>TÃ i liá»‡u Docker Swarm&lt;/a>&lt;/li>
&lt;li>ğŸ”§ &lt;a class="link" href="https://thenewstack.io/tutorial-manage-docker-swarm-with-portainer/" target="_blank" rel="noopener"
>Quáº£n lÃ½ Docker Swarm vá»›i Portainer&lt;/a>&lt;/li>
&lt;li>ğŸ“¦ &lt;a class="link" href="https://thenewstack.io/tutorial-create-a-docker-swarm-with-persistent-storage-using-glusterfs/" target="_blank" rel="noopener"
>Táº¡o Docker Swarm vá»›i bá»™ nhá»› lÆ°u trá»¯ GlusterFS&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=Xaea-XnJTJU" target="_blank" rel="noopener"
>Giá»›i thiá»‡u Docker Swarm | HÆ°á»›ng dáº«n tá»«ng bÆ°á»›c&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;p>&lt;strong>ğŸ“Œ VÃ­ dá»¥:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Khá»Ÿi táº¡o Swarm
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">$&lt;/span> &lt;span class="nx">docker&lt;/span> &lt;span class="nx">swarm&lt;/span> &lt;span class="nx">init&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Triá»ƒn khai dá»‹ch vá»¥ trÃªn Swarm
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">$&lt;/span> &lt;span class="nx">docker&lt;/span> &lt;span class="nx">service&lt;/span> &lt;span class="nx">create&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="nx">name&lt;/span> &lt;span class="nx">web&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">p&lt;/span> &lt;span class="mi">80&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">80&lt;/span> &lt;span class="nx">nginx&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="-káº¿t-luáº­n">âœ… Káº¿t luáº­n
&lt;/h2>&lt;p>Container orchestration Ä‘Ã³ng vai trÃ² quan trá»ng trong viá»‡c quáº£n lÃ½ á»©ng dá»¥ng container, giÃºp &lt;strong>Ä‘Æ¡n giáº£n hÃ³a váº­n hÃ nh, tá»‘i Æ°u tÃ i nguyÃªn vÃ  tÄƒng cÆ°á»ng tÃ­nh sáºµn sÃ ng&lt;/strong>. CÃ¡c cÃ´ng cá»¥ nhÆ° &lt;strong>Kubernetes, Docker Swarm, ECS, Fargate&lt;/strong> cung cáº¥p nhiá»u giáº£i phÃ¡p linh hoáº¡t cho cÃ¡c doanh nghiá»‡p hiá»‡n Ä‘áº¡i. Viá»‡c lá»±a chá»n cÃ´ng cá»¥ phÃ¹ há»£p sáº½ giÃºp doanh nghiá»‡p &lt;strong>táº­n dá»¥ng tá»‘i Ä‘a sá»©c máº¡nh cá»§a container hÃ³a vÃ  Ä‘iá»‡n toÃ¡n Ä‘Ã¡m mÃ¢y&lt;/strong>. ğŸš€&lt;/p>
&lt;p>ğŸ‘‰ &lt;strong>BÆ°á»›c tiáº¿p theo:&lt;/strong> TÃ¬m hiá»ƒu vá» &lt;em>&lt;strong>Application Monitoring&lt;/strong>&lt;/em> theo dÃµi, Ä‘o lÆ°á»ng vÃ  phÃ¢n tÃ­ch hiá»‡u suáº¥t, tráº¡ng thÃ¡i vÃ  hÃ nh vi cá»§a á»©ng dá»¥ng Ä‘á»ƒ phÃ¡t hiá»‡n sá»± cá»‘, tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t vÃ  Ä‘áº£m báº£o tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng tá»‘t. CÃ¡c cÃ´ng cá»¥ phá»• biáº¿n nhÆ° Prometheus, Grafana, Datadog, New Relic giÃºp thu tháº­p dá»¯ liá»‡u tá»« á»©ng dá»¥ng, mÃ¡y chá»§ vÃ  háº¡ táº§ng Ä‘á»ƒ cung cáº¥p cáº£nh bÃ¡o vÃ  bÃ¡o cÃ¡o chi tiáº¿t.&lt;/p></description></item><item><title>GiÃ¡m sÃ¡t háº¡ táº§ng (Infrastructure Monitoring) ğŸ“Š</title><link>https://tech.nguuyen.io.vn/posts/devops/devops-step-fifteen/</link><pubDate>Mon, 24 Feb 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/devops/devops-step-fifteen/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/devops/devops-step-fifteen.webp" alt="Featured image of post GiÃ¡m sÃ¡t háº¡ táº§ng (Infrastructure Monitoring) ğŸ“Š" />&lt;h2 id="-giÃ¡m-sÃ¡t-háº¡-táº§ng-infrastructure-monitoring-lÃ -gÃ¬">ğŸ” GiÃ¡m sÃ¡t háº¡ táº§ng (Infrastructure Monitoring) lÃ  gÃ¬?
&lt;/h2>&lt;p>GiÃ¡m sÃ¡t háº¡ táº§ng lÃ  quÃ¡ trÃ¬nh theo dÃµi hiá»‡u suáº¥t vÃ  tráº¡ng thÃ¡i cá»§a há»‡ thá»‘ng, giÃºp phÃ¡t hiá»‡n sá»± cá»‘ ká»‹p thá»i vÃ  tá»‘i Æ°u hÃ³a hoáº¡t Ä‘á»™ng. ÄÃ¢y lÃ  má»™t lÄ©nh vá»±c rá»™ng lá»›n vá»›i nhiá»u cÃ´ng cá»¥ khÃ¡c nhau, má»—i cÃ´ng cá»¥ cÃ³ Æ°u nhÆ°á»£c Ä‘iá»ƒm riÃªng. Hiá»ƒu rÃµ cÃ¡c cÃ´ng cá»¥ nÃ y sáº½ giÃºp báº¡n chá»n giáº£i phÃ¡p phÃ¹ há»£p vá»›i má»¥c tiÃªu giÃ¡m sÃ¡t cá»§a mÃ¬nh.&lt;/p>
&lt;hr>
&lt;h2 id="-cÃ¡c-cÃ´ng-cá»¥-giÃ¡m-sÃ¡t-phá»•-biáº¿n">ğŸš€ CÃ¡c cÃ´ng cá»¥ giÃ¡m sÃ¡t phá»• biáº¿n
&lt;/h2>&lt;h3 id="grafana">Grafana
&lt;/h3>&lt;p>&lt;strong>ğŸ“ Giá»›i thiá»‡u:&lt;/strong>
Grafana lÃ  má»™t á»©ng dá»¥ng web mÃ£ nguá»“n má»Ÿ chuyÃªn dÃ¹ng Ä‘á»ƒ phÃ¢n tÃ­ch dá»¯ liá»‡u vÃ  trá»±c quan hÃ³a. NÃ³ káº¿t ná»‘i vá»›i nhiá»u nguá»“n dá»¯ liá»‡u khÃ¡c nhau nhÆ° cÆ¡ sá»Ÿ dá»¯ liá»‡u thá»i gian thá»±c, cÆ¡ sá»Ÿ dá»¯ liá»‡u quan há»‡ vÃ  dá»‹ch vá»¥ Ä‘Ã¡m mÃ¢y.&lt;/p>
&lt;p>&lt;strong>ğŸ”¹ TÃ­nh nÄƒng ná»•i báº­t:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Trá»±c quan hÃ³a dá»¯ liá»‡u máº¡nh máº½ vá»›i nhiá»u loáº¡i biá»ƒu Ä‘á»“.&lt;/li>
&lt;li>Há»— trá»£ nhiá»u plugin má»Ÿ rá»™ng.&lt;/li>
&lt;li>Há»‡ thá»‘ng cáº£nh bÃ¡o theo thá»i gian thá»±c.&lt;/li>
&lt;li>XÃ¡c thá»±c ngÆ°á»i dÃ¹ng vÃ  kiá»ƒm soÃ¡t truy cáº­p theo vai trÃ².&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>ğŸ“Œ VÃ­ dá»¥:&lt;/strong>
Sá»­ dá»¥ng Grafana Ä‘á»ƒ giÃ¡m sÃ¡t má»©c sá»­ dá»¥ng CPU vÃ  RAM cá»§a há»‡ thá»‘ng, giÃºp phÃ¡t hiá»‡n vÃ  xá»­ lÃ½ sá»± cá»‘ quÃ¡ táº£i.&lt;/p>
&lt;p>&lt;strong>ğŸ“š TÃ i nguyÃªn há»¯u Ã­ch:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ”—&lt;a class="link" href="https://grafana.com/" target="_blank" rel="noopener"
>Trang chá»§ Grafana&lt;/a>&lt;/li>
&lt;li>ğŸ“–&lt;a class="link" href="https://grafana.com/videos/" target="_blank" rel="noopener"
>HÆ°á»›ng dáº«n cÃ i Ä‘áº·t vÃ  sá»­ dá»¥ng&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h3 id="prometheus">Prometheus
&lt;/h3>&lt;p>&lt;strong>ğŸ“ Giá»›i thiá»‡u:&lt;/strong>
Prometheus lÃ  má»™t cÃ´ng cá»¥ giÃ¡m sÃ¡t vÃ  cáº£nh bÃ¡o mÃ£ nguá»“n má»Ÿ, Ä‘áº·c biá»‡t phÃ¹ há»£p vá»›i cÃ¡c há»‡ thá»‘ng microservices vÃ  container hÃ³a nhÆ° Kubernetes.&lt;/p>
&lt;p>&lt;strong>ğŸ”¹ TÃ­nh nÄƒng ná»•i báº­t:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>MÃ´ hÃ¬nh dá»¯ liá»‡u Ä‘a chiá»u.&lt;/li>
&lt;li>Há»— trá»£ ngÃ´n ngá»¯ truy váº¥n PromQL máº¡nh máº½.&lt;/li>
&lt;li>CÆ¡ cháº¿ thu tháº­p dá»¯ liá»‡u theo mÃ´ hÃ¬nh pull.&lt;/li>
&lt;li>Quáº£n lÃ½ cáº£nh bÃ¡o thÃ´ng minh vá»›i Alertmanager.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>ğŸ“Œ VÃ­ dá»¥:&lt;/strong>
Sá»­ dá»¥ng Prometheus Ä‘á»ƒ thu tháº­p vÃ  phÃ¢n tÃ­ch sá»‘ lÆ°á»£ng request Ä‘áº¿n má»™t API, giÃºp xÃ¡c Ä‘á»‹nh thá»i Ä‘iá»ƒm táº£i cao vÃ  tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t.&lt;/p>
&lt;p>&lt;strong>ğŸ“š TÃ i nguyÃªn há»¯u Ã­ch:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ”—&lt;a class="link" href="https://prometheus.io/" target="_blank" rel="noopener"
>Trang chá»§ Prometheus&lt;/a>&lt;/li>
&lt;li>ğŸ¥&lt;a class="link" href="https://www.youtube.com/watch?v=STVMGrYIlfg" target="_blank" rel="noopener"
>Giá»›i thiá»‡u vá» Prometheus&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h3 id="zabbix">Zabbix
&lt;/h3>&lt;p>&lt;strong>ğŸ“ Giá»›i thiá»‡u:&lt;/strong>
Zabbix lÃ  má»™t ná»n táº£ng giÃ¡m sÃ¡t mÃ£ nguá»“n má»Ÿ, há»— trá»£ theo dÃµi toÃ n diá»‡n cÃ¡c thÃ nh pháº§n trong há»‡ thá»‘ng nhÆ° mÃ¡y chá»§, máº¡ng, á»©ng dá»¥ng vÃ  dá»‹ch vá»¥.&lt;/p>
&lt;p>&lt;strong>ğŸ”¹ TÃ­nh nÄƒng ná»•i báº­t:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Há»— trá»£ nhiá»u phÆ°Æ¡ng thá»©c thu tháº­p dá»¯ liá»‡u: Agent, SNMP, IPMI, script tÃ¹y chá»‰nh.&lt;/li>
&lt;li>Cáº£nh bÃ¡o vÃ  thÃ´ng bÃ¡o theo thá»i gian thá»±c.&lt;/li>
&lt;li>Há»‡ thá»‘ng dashboard vÃ  bÃ¡o cÃ¡o chi tiáº¿t.&lt;/li>
&lt;li>Má»Ÿ rá»™ng dá»… dÃ ng cho cÃ¡c mÃ´i trÆ°á»ng lá»›n.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>ğŸ“Œ VÃ­ dá»¥:&lt;/strong>
Sá»­ dá»¥ng Zabbix Ä‘á»ƒ giÃ¡m sÃ¡t tráº¡ng thÃ¡i cá»§a cÃ¡c server trong há»‡ thá»‘ng, phÃ¡t hiá»‡n downtime vÃ  gá»­i cáº£nh bÃ¡o ngay láº­p tá»©c.&lt;/p>
&lt;p>&lt;strong>ğŸ“š TÃ i nguyÃªn há»¯u Ã­ch:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ”—&lt;a class="link" href="https://www.zabbix.com/" target="_blank" rel="noopener"
>Trang chá»§ Zabbix&lt;/a>&lt;/li>
&lt;li>ğŸ“–&lt;a class="link" href="https://www.zabbix.com/manuals" target="_blank" rel="noopener"
>HÆ°á»›ng dáº«n sá»­ dá»¥ng Zabbix&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-káº¿t-luáº­n">âœ… Káº¿t luáº­n
&lt;/h2>&lt;p>Má»—i cÃ´ng cá»¥ giÃ¡m sÃ¡t cÃ³ Æ°u Ä‘iá»ƒm riÃªng:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Grafana&lt;/strong>: Máº¡nh vá» trá»±c quan hÃ³a dá»¯ liá»‡u.&lt;/li>
&lt;li>&lt;strong>Prometheus&lt;/strong>: PhÃ¹ há»£p vá»›i mÃ´i trÆ°á»ng container vÃ  microservices.&lt;/li>
&lt;li>&lt;strong>Zabbix&lt;/strong>: Giáº£i phÃ¡p giÃ¡m sÃ¡t tá»•ng thá»ƒ cho há»‡ thá»‘ng lá»›n.&lt;/li>
&lt;/ul>
&lt;p>TÃ¹y vÃ o nhu cáº§u cá»¥ thá»ƒ, báº¡n cÃ³ thá»ƒ káº¿t há»£p nhiá»u cÃ´ng cá»¥ Ä‘á»ƒ xÃ¢y dá»±ng há»‡ thá»‘ng giÃ¡m sÃ¡t tá»‘i Æ°u cho mÃ¬nh. ğŸš€&lt;/p>
&lt;p>ğŸ‘‰ &lt;strong>BÆ°á»›c tiáº¿p theo:&lt;/strong> TÃ¬m hiá»ƒu vá» &lt;em>&lt;strong>Logs Management&lt;/strong>&lt;/em> quÃ¡ trÃ¬nh thu tháº­p, lÆ°u trá»¯, xá»­ lÃ½ vÃ  phÃ¢n tÃ­ch log tá»« cÃ¡c há»‡ thá»‘ng, á»©ng dá»¥ng vÃ  thiáº¿t bá»‹ nháº±m theo dÃµi hoáº¡t Ä‘á»™ng, phÃ¡t hiá»‡n sá»± cá»‘, Ä‘áº£m báº£o báº£o máº­t vÃ  há»— trá»£ kháº¯c phá»¥c sá»± cá»‘ nhanh chÃ³ng.&lt;/p></description></item><item><title>Infrastructure Provisioning vá»›i Terraform ğŸŸªğŸ”³</title><link>https://tech.nguuyen.io.vn/posts/devops/devops-step-eleven/</link><pubDate>Mon, 24 Feb 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/devops/devops-step-eleven/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/devops/devops-step-eleven.webp" alt="Featured image of post Infrastructure Provisioning vá»›i Terraform ğŸŸªğŸ”³" />&lt;h2 id="-provisioning-lÃ -gÃ¬">ğŸ”¹ Provisioning lÃ  gÃ¬?
&lt;/h2>&lt;p>Provisioning Ä‘á» cáº­p Ä‘áº¿n quÃ¡ trÃ¬nh thiáº¿t láº­p vÃ  cáº¥u hÃ¬nh háº¡ táº§ng CNTT cáº§n thiáº¿t Ä‘á»ƒ há»— trá»£ á»©ng dá»¥ng hoáº·c dá»‹ch vá»¥. Äiá»u nÃ y bao gá»“m viá»‡c phÃ¢n bá»• vÃ  chuáº©n bá»‹ tÃ i nguyÃªn nhÆ° &lt;strong>mÃ¡y chá»§, lÆ°u trá»¯, máº¡ng vÃ  mÃ´i trÆ°á»ng pháº§n má»m&lt;/strong>.&lt;/p>
&lt;p>Máº·c dÃ¹ provisioning cÃ³ thá»ƒ Ä‘Æ°á»£c thá»±c hiá»‡n thá»§ cÃ´ng, nhÆ°ng trong DevOps hiá»‡n Ä‘áº¡i, quÃ¡ trÃ¬nh nÃ y thÆ°á»ng Ä‘Æ°á»£c tá»± Ä‘á»™ng hÃ³a báº±ng cÃ¡c cÃ´ng cá»¥ nhÆ° &lt;strong>Terraform, Pulumi, CloudFormation&lt;/strong>. Viá»‡c sá»­ dá»¥ng Infrastructure-as-Code (&lt;strong>IaC&lt;/strong>) giÃºp Ä‘á»‹nh nghÄ©a toÃ n bá»™ quy trÃ¬nh provisioning trong cÃ¡c tá»‡p script Ä‘Æ°á»£c quáº£n lÃ½ phiÃªn báº£n, giÃºp Ä‘áº£m báº£o tÃ­nh nháº¥t quÃ¡n, giáº£m lá»—i do con ngÆ°á»i vÃ  cáº£i thiá»‡n kháº£ nÄƒng má»Ÿ rá»™ng, phá»¥c há»“i sau tháº£m há»a.&lt;/p>
&lt;p>ğŸ“– &lt;strong>TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ“„ &lt;a class="link" href="https://www.redhat.com/en/topics/automation/what-is-provisioning" target="_blank" rel="noopener"
>What is provisioning? - RedHat&lt;/a>&lt;/li>
&lt;li>ğŸ“„ &lt;a class="link" href="https://www.ibm.com/topics/provisioning" target="_blank" rel="noopener"
>What is provisioning? - IBM&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=hWvDlmhASpk" target="_blank" rel="noopener"
>Open Answers: What is provisioning?&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-terraform---giáº£i-phÃ¡p-iac-máº¡nh-máº½">ğŸ—ï¸ Terraform - Giáº£i phÃ¡p IaC máº¡nh máº½
&lt;/h2>&lt;p>Terraform lÃ  cÃ´ng cá»¥ &lt;strong>Infrastructure-as-Code (IaC)&lt;/strong> mÃ£ nguá»“n má»Ÿ do &lt;strong>HashiCorp&lt;/strong> phÃ¡t triá»ƒn, giÃºp Ä‘á»‹nh nghÄ©a, triá»ƒn khai vÃ  quáº£n lÃ½ háº¡ táº§ng trÃªn &lt;strong>Ä‘a Ä‘Ã¡m mÃ¢y&lt;/strong> hoáº·c on-premises báº±ng cÃ¡c táº­p tin cáº¥u hÃ¬nh &lt;strong>khai bÃ¡o (declarative)&lt;/strong>.&lt;/p>
&lt;h3 id="-lá»£i-Ã­ch-khi-sá»­-dá»¥ng-terraform">ğŸŒŸ Lá»£i Ã­ch khi sá»­ dá»¥ng Terraform
&lt;/h3>&lt;p>âœ… &lt;strong>Há»— trá»£ Ä‘a ná»n táº£ng&lt;/strong>: AWS, Azure, Google Cloud, Kubernetes, v.v.
âœ… &lt;strong>Quáº£n lÃ½ tráº¡ng thÃ¡i (state management)&lt;/strong>: GiÃºp theo dÃµi tÃ i nguyÃªn háº¡ táº§ng.
âœ… &lt;strong>Kháº£ nÄƒng má»Ÿ rá»™ng vÃ  tÃ¡i sá»­ dá»¥ng&lt;/strong>: Dá»… dÃ ng modular hÃ³a cáº¥u hÃ¬nh.
âœ… &lt;strong>TÃ­ch há»£p CI/CD&lt;/strong>: Tá»± Ä‘á»™ng hÃ³a triá»ƒn khai háº¡ táº§ng.&lt;/p>
&lt;h3 id="-vÃ­-dá»¥-táº¡o-má»™t-ec2-instance-trÃªn-aws">ğŸ”¨ VÃ­ dá»¥: Táº¡o má»™t EC2 instance trÃªn AWS
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-hcl" data-lang="hcl">&lt;span class="line">&lt;span class="cl">&lt;span class="k">provider&lt;/span> &lt;span class="s2">&amp;#34;aws&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> region&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;us-east-1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">resource&lt;/span> &lt;span class="s2">&amp;#34;aws_instance&amp;#34; &amp;#34;web&amp;#34;&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> ami&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;ami-12345678&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> instance_type&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;t2.micro&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> tags&lt;/span> &lt;span class="o">=&lt;/span> {
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n"> Name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;Terraform-Instance&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> }
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ“– &lt;strong>TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ“ &lt;a class="link" href="https://roadmap.sh/terraform" target="_blank" rel="noopener"
>Lá»™ trÃ¬nh Terraform chi tiáº¿t&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=7xngnjfIlK4" target="_blank" rel="noopener"
>KhÃ³a há»c Terraform hoÃ n chá»‰nh&lt;/a>&lt;/li>
&lt;li>ğŸ“„ &lt;a class="link" href="https://www.terraform.io/docs" target="_blank" rel="noopener"
>TÃ i liá»‡u chÃ­nh thá»©c cá»§a Terraform&lt;/a>&lt;/li>
&lt;li>ğŸ“– &lt;a class="link" href="https://thenewstack.io/how-to-scale-your-terraform-infrastructure/" target="_blank" rel="noopener"
>CÃ¡ch má»Ÿ rá»™ng háº¡ táº§ng Terraform&lt;/a>&lt;/li>
&lt;li>ğŸ”¥ &lt;a class="link" href="https://app.daily.dev/tags/terraform?ref=roadmapsh" target="_blank" rel="noopener"
>KhÃ¡m phÃ¡ cÃ¡c bÃ i viáº¿t hÃ ng Ä‘áº§u vá» Terraform&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-aws-cdk---má»™t-sá»±-thay-tháº¿">ğŸ”¹ AWS CDK - Má»™t sá»± thay tháº¿?
&lt;/h2>&lt;p>AWS Cloud Development Kit (&lt;strong>AWS CDK&lt;/strong>) lÃ  framework mÃ£ nguá»“n má»Ÿ Ä‘á»ƒ provisioning háº¡ táº§ng AWS báº±ng mÃ£ trong cÃ¡c ngÃ´n ngá»¯ nhÆ° &lt;strong>TypeScript, Python, Java, C#, Go&lt;/strong>. AWS CDK sá»­ dá»¥ng CloudFormation Ä‘á»ƒ triá»ƒn khai tÃ i nguyÃªn má»™t cÃ¡ch an toÃ n vÃ  cÃ³ thá»ƒ láº·p láº¡i.&lt;/p>
&lt;p>ğŸ“– &lt;strong>TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=D4Asp5g4fp8" target="_blank" rel="noopener"
>KhÃ³a há»c AWS CDK cho ngÆ°á»i má»›i báº¯t Ä‘áº§u&lt;/a>&lt;/li>
&lt;li>ğŸ“„ &lt;a class="link" href="https://www.youtube.com/watch?v=D4Asp5g4fp8" target="_blank" rel="noopener"
>TÃ i liá»‡u chÃ­nh thá»©c cá»§a AWS CDK&lt;/a>&lt;/li>
&lt;li>ğŸ“‚ &lt;a class="link" href="https://github.com/aws-samples/aws-cdk-examples" target="_blank" rel="noopener"
>CÃ¡c vÃ­ dá»¥ vá» AWS CDK&lt;/a>&lt;/li>
&lt;li>ğŸ”¥ &lt;a class="link" href="https://app.daily.dev/tags/aws?ref=roadmapsh" target="_blank" rel="noopener"
>KhÃ¡m phÃ¡ cÃ¡c bÃ i viáº¿t hÃ ng Ä‘áº§u vá» AWS&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-káº¿t-luáº­n">ğŸ“Œ Káº¿t luáº­n
&lt;/h2>&lt;p>Terraform lÃ  cÃ´ng cá»¥ hÃ ng Ä‘áº§u cho &lt;strong>Infrastructure-as-Code&lt;/strong>, mang Ä‘áº¿n sá»± linh hoáº¡t vÃ  kháº£ nÄƒng tá»± Ä‘á»™ng hÃ³a máº¡nh máº½ trÃªn nhiá»u ná»n táº£ng cloud khÃ¡c nhau. Náº¿u báº¡n lÃ m viá»‡c nhiá»u vá»›i AWS vÃ  muá»‘n triá»ƒn khai báº±ng cÃ¡c ngÃ´n ngá»¯ láº­p trÃ¬nh, &lt;strong>AWS CDK&lt;/strong> cÅ©ng lÃ  má»™t lá»±a chá»n Ä‘Ã¡ng cÃ¢n nháº¯c.&lt;/p>
&lt;p>TÃ¹y vÃ o yÃªu cáº§u cá»§a dá»± Ã¡n, báº¡n cÃ³ thá»ƒ lá»±a chá»n cÃ´ng cá»¥ phÃ¹ há»£p Ä‘á»ƒ quáº£n lÃ½ háº¡ táº§ng hiá»‡u quáº£ hÆ¡n. ğŸš€&lt;/p>
&lt;p>ğŸ‘‰ &lt;strong>BÆ°á»›c tiáº¿p theo:&lt;/strong> TÃ¬m hiá»ƒu vá» &lt;em>&lt;strong>Configuration Management&lt;/strong>&lt;/em> quÃ¡ trÃ¬nh quáº£n lÃ½, giÃ¡m sÃ¡t vÃ  tá»± Ä‘á»™ng hÃ³a cáº¥u hÃ¬nh há»‡ thá»‘ng, pháº§n má»m vÃ  háº¡ táº§ng Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh nháº¥t quÃ¡n, á»•n Ä‘á»‹nh vÃ  dá»… dÃ ng kiá»ƒm soÃ¡t trong suá»‘t vÃ²ng Ä‘á»i cá»§a chÃºng. NÃ³ giÃºp theo dÃµi vÃ  kiá»ƒm soÃ¡t thay Ä‘á»•i, giáº£m lá»—i do cáº¥u hÃ¬nh thá»§ cÃ´ng vÃ  há»— trá»£ triá»ƒn khai nhanh chÃ³ng. CÃ¡c cÃ´ng cá»¥ phá»• biáº¿n bao gá»“m &lt;strong>Ansible, Puppet, Chef vÃ  SaltStack&lt;/strong>.&lt;/p></description></item><item><title>Quáº£n lÃ½ cáº¥u hÃ¬nh (Configuration Management)ğŸ”§</title><link>https://tech.nguuyen.io.vn/posts/devops/devops-step-twelve/</link><pubDate>Mon, 24 Feb 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/devops/devops-step-twelve/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/devops/devops-step-twelve.webp" alt="Featured image of post Quáº£n lÃ½ cáº¥u hÃ¬nh (Configuration Management)ğŸ”§" />&lt;h2 id="-quáº£n-lÃ½-cáº¥u-hÃ¬nh-configuration-management">ğŸ”§ Quáº£n lÃ½ cáº¥u hÃ¬nh (Configuration Management)
&lt;/h2>&lt;p>Quáº£n lÃ½ cáº¥u hÃ¬nh lÃ  quy trÃ¬nh quáº£n lÃ½ vÃ  duy trÃ¬ tÃ­nh nháº¥t quÃ¡n cá»§a cÃ¡c thÃ nh pháº§n trong há»‡ thá»‘ng cÃ´ng nghá»‡ thÃ´ng tin. Trong lÄ©nh vá»±c pháº§n má»m, nÃ³ bao gá»“m viá»‡c giÃ¡m sÃ¡t, theo dÃµi vÃ  quáº£n lÃ½ cÃ¡c thay Ä‘á»•i cáº¥u hÃ¬nh cá»§a há»‡ thá»‘ng trong suá»‘t vÃ²ng Ä‘á»i sáº£n pháº©m. Viá»‡c Ã¡p dá»¥ng quáº£n lÃ½ cáº¥u hÃ¬nh giÃºp tÄƒng tÃ­nh Ä‘á»“ng bá»™, giáº£m nguy cÆ¡ lá»—i, vÃ  Ä‘áº£m báº£o sá»± tuÃ¢n thá»§ cÃ¡c tiÃªu chuáº©n trong quy trÃ¬nh CI/CD (Continuous Integration and Continuous Deployment).&lt;/p>
&lt;hr>
&lt;h2 id="-cÃ¡c-cÃ´ng-cá»¥-quáº£n-lÃ½-cáº¥u-hÃ¬nh-phá»•-biáº¿n">ğŸŒ CÃ¡c cÃ´ng cá»¥ quáº£n lÃ½ cáº¥u hÃ¬nh phá»• biáº¿n
&lt;/h2>&lt;h3 id="-ansible">ğŸš€ Ansible
&lt;/h3>&lt;p>Ansible lÃ  má»™t cÃ´ng cá»¥ tá»± Ä‘á»™ng hÃ³a má»Ÿ, chá»§ yáº¿u dÃ¹ng cho quáº£n lÃ½ cáº¥u hÃ¬nh, triá»ƒn khai á»©ng dá»¥ng vÃ  tá»± Ä‘á»™ng hÃ³a tÃ¡c vá»¥.&lt;/p>
&lt;p>ğŸ”„ &lt;strong>Äáº·c Ä‘iá»ƒm:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Sá»­ dá»¥ng YAML (playbooks) Ä‘á»ƒ xÃ¡c Ä‘á»‹nh tráº¡ng thÃ¡i mong muá»‘n.&lt;/li>
&lt;li>Hoáº¡t Ä‘á»™ng khÃ´ng cáº§n cÃ i Ä‘áº·t agent.&lt;/li>
&lt;li>PhÃ¹ há»£p vá»›i quy mÃ´ nhá» Ä‘áº¿n lá»›n.&lt;/li>
&lt;/ul>
&lt;p>ğŸ’¡ &lt;strong>VÃ­ dá»¥ sá»­ dá»¥ng Ansible:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">CÃ i Ä‘áº·t vÃ  khá»Ÿi Ä‘á»™ng Nginx&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">hosts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">all&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">become&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">yes&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">tasks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">CÃ i Ä‘áº·t Nginx&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">apt&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">nginx&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">state&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">present&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Khá»Ÿi Ä‘á»™ng Nginx&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">service&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">nginx&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">state&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">started&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ“– &lt;strong>TÃ i nguyÃªn miá»…n phÃ­ há»¯u Ã­ch:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.youtube.com/watch?v=9Ua2b06oAr4" target="_blank" rel="noopener"
>ğŸ“š KhÃ³a há»c Ansible Ä‘áº§y Ä‘á»§ cho ngÆ°á»i má»›i báº¯t Ä‘áº§u&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.ansible.com/" target="_blank" rel="noopener"
>ğŸ”— Trang web chÃ­nh thá»©c cá»§a Ansible&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.youtube.com/watch?v=xRMPKQweySE" target="_blank" rel="noopener"
>ğŸ¥ Ansible trong 100 giÃ¢y&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h3 id="-chef">ğŸŒŸ Chef
&lt;/h3>&lt;p>Chef (hiá»‡n thuá»™c Progress Chef) lÃ  má»™t trong nhá»¯ng cÃ´ng cá»¥ quáº£n lÃ½ cáº¥u hÃ¬nh Ä‘áº§u tiÃªn. NÃ³ sá»­ dá»¥ng ngÃ´n ngá»¯ Ruby vÃ  Ä‘á» cao tÃ­nh idempotence (Ä‘áº£m báº£o cháº¡y n nhiá»u láº§n váº«n cÃ¹ng káº¿t quáº£).&lt;/p>
&lt;p>ğŸ”„ &lt;strong>Äáº·c Ä‘iá»ƒm:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Dá»±a trÃªn client/server.&lt;/li>
&lt;li>CÃ³ Chef-Solo cho triá»ƒn khai Ä‘á»™c láº­p.&lt;/li>
&lt;li>PhÃ¹ há»£p vá»›i mÃ´i trÆ°á»ng doanh nghiá»‡p.&lt;/li>
&lt;/ul>
&lt;p>ğŸ’¡ &lt;strong>VÃ­ dá»¥ sá»­ dá»¥ng Chef:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ruby" data-lang="ruby">&lt;span class="line">&lt;span class="cl">&lt;span class="n">package&lt;/span> &lt;span class="s1">&amp;#39;nginx&amp;#39;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">action&lt;/span> &lt;span class="ss">:install&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">service&lt;/span> &lt;span class="s1">&amp;#39;nginx&amp;#39;&lt;/span> &lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">action&lt;/span> &lt;span class="o">[&lt;/span>&lt;span class="ss">:enable&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="ss">:start&lt;/span>&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ“– &lt;strong>TÃ i nguyÃªn miá»…n phÃ­ há»¯u Ã­ch:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.chef.io/products/chef-infra" target="_blank" rel="noopener"
>ğŸ”— Trang web chÃ­nh thá»©c cá»§a Chef&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.tutorialspoint.com/chef/index.htm" target="_blank" rel="noopener"
>ğŸ“š HÆ°á»›ng dáº«n Chef&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/chef/chef" target="_blank" rel="noopener"
>ğŸ¥ Video hÆ°á»›ng dáº«n Chef&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h3 id="-puppet">ğŸ° Puppet
&lt;/h3>&lt;p>Puppet lÃ  má»™t cÃ´ng cá»¥ quáº£n lÃ½ cáº¥u hÃ¬nh theo mÃ´ hÃ¬nh declarative, hoáº¡t Ä‘á»™ng theo kiá»ƒu client/server vÃ  há»— trá»£ nhiá»u há»‡ Ä‘iá»u hÃ nh.&lt;/p>
&lt;p>ğŸ”„ &lt;strong>Äáº·c Ä‘iá»ƒm:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Quáº£n lÃ½ quy mÃ´ lá»›n.&lt;/li>
&lt;li>Kiá»ƒm tra vÃ  Ã¡p dá»¥ng cáº¥u hÃ¬nh Ä‘á»‹nh ká»³.&lt;/li>
&lt;li>TÃ­ch há»£p vá»›i nhiá»u cÃ´ng cá»¥ DevOps.&lt;/li>
&lt;/ul>
&lt;p>ğŸ’¡ &lt;strong>VÃ­ dá»¥ sá»­ dá»¥ng Puppet:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-puppet" data-lang="puppet">&lt;span class="line">&lt;span class="cl">&lt;span class="k">package&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="s">&amp;#39;nginx&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span> &lt;span class="na">ensure&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="k">installed&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="k">service&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="s">&amp;#39;nginx&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span> &lt;span class="na">ensure&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="k">running&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span> &lt;span class="na">enable&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="k">true&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="err">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ“– &lt;strong>TÃ i nguyÃªn miá»…n phÃ­ há»¯u Ã­ch:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.youtube.com/watch?v=Ns_tRKD20c4" target="_blank" rel="noopener"
>ğŸ“š KhÃ³a há»c Puppet Ä‘áº§y Ä‘á»§&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://puppet.com/" target="_blank" rel="noopener"
>ğŸ”— Trang web chÃ­nh thá»©c cá»§a Puppet&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://app.daily.dev/tags/puppet?ref=roadmapsh" target="_blank" rel="noopener"
>ğŸ¥ BÃ i viáº¿t hay vá» Puppet&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-káº¿t-luáº­n">ğŸ‰ Káº¿t luáº­n
&lt;/h2>&lt;p>Quáº£n lÃ½ cáº¥u hÃ¬nh lÃ  má»™t yáº¿u tá»‘ quan trá»ng trong quy trÃ¬nh DevOps, giÃºp Ä‘áº£m báº£o há»‡ thá»‘ng hoáº¡t Ä‘á»™ng nháº¥t quÃ¡n, giáº£m thiá»ƒu lá»—i vÃ  nÃ¢ng cao Ä‘á»™ tin cáº­y. TÃ¹y thuá»™c vÃ o nhu cáº§u vÃ  quy mÃ´, doanh nghiá»‡p cÃ³ thá»ƒ chá»n Ansible, Chef hoáº·c Puppet Ä‘á»ƒ quáº£n lÃ½ háº¡ táº§ng má»™t cÃ¡ch hiá»‡u quáº£.&lt;/p>
&lt;p>ğŸ‘‰ &lt;strong>BÆ°á»›c tiáº¿p theo:&lt;/strong> TÃ¬m hiá»ƒu vá» &lt;em>&lt;strong>Continuous Integration and Continuous Deployment&lt;/strong>&lt;/em> (CI/CD), lÃ  quy trÃ¬nh tá»± Ä‘á»™ng hÃ³a trong phÃ¡t triá»ƒn pháº§n má»m giÃºp tÃ­ch há»£p, kiá»ƒm thá»­ vÃ  triá»ƒn khai á»©ng dá»¥ng má»™t cÃ¡ch liÃªn tá»¥c.&lt;/p></description></item><item><title>Quáº£n lÃ½ khoÃ¡ bÃ­ máº­t (Secret Management)ğŸ”’</title><link>https://tech.nguuyen.io.vn/posts/devops/devops-step-fourteen/</link><pubDate>Mon, 24 Feb 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/devops/devops-step-fourteen/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/devops/devops-step-fourteen.webp" alt="Featured image of post Quáº£n lÃ½ khoÃ¡ bÃ­ máº­t (Secret Management)ğŸ”’" />&lt;h2 id="-secret-management-lÃ -gÃ¬">ğŸ” Secret Management lÃ  gÃ¬?
&lt;/h2>&lt;p>Secret Management lÃ  quÃ¡ trÃ¬nh báº£o vá»‡, lÆ°u trá»¯ vÃ  phÃ¢n phá»‘i an toÃ n cÃ¡c thÃ´ng tin nháº¡y cáº£m nhÆ° máº­t kháº©u, khÃ³a API vÃ  chá»©ng chá»‰ trong há»‡ thá»‘ng cÃ´ng nghá»‡ thÃ´ng tin cá»§a tá»• chá»©c. NÃ³ giÃºp ngÄƒn cháº·n truy cáº­p trÃ¡i phÃ©p Ä‘á»“ng thá»i Ä‘áº£m báº£o cÃ¡c há»‡ thá»‘ng vÃ  ngÆ°á»i dÃ¹ng Ä‘Æ°á»£c á»§y quyá»n cÃ³ thá»ƒ sá»­ dá»¥ng thÃ´ng tin khi cáº§n thiáº¿t.&lt;/p>
&lt;p>Secret Management thÆ°á»ng bao gá»“m cÃ¡c tÃ­nh nÄƒng:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>MÃ£ hÃ³a dá»¯ liá»‡u&lt;/strong> khi lÆ°u trá»¯ vÃ  truyá»n táº£i.&lt;/li>
&lt;li>&lt;strong>Kiá»ƒm soÃ¡t truy cáº­p&lt;/strong>, chá»‰ cho phÃ©p ngÆ°á»i hoáº·c há»‡ thá»‘ng cÃ³ quyá»n má»›i Ä‘Æ°á»£c truy cáº­p.&lt;/li>
&lt;li>&lt;strong>CÆ¡ cháº¿ quay vÃ²ng khÃ³a&lt;/strong> Ä‘á»ƒ thay Ä‘á»•i máº­t kháº©u Ä‘á»‹nh ká»³.&lt;/li>
&lt;li>&lt;strong>TÃ­ch há»£p vá»›i cÃ¡c há»‡ thá»‘ng DevOps&lt;/strong> Ä‘á»ƒ tá»± Ä‘á»™ng hÃ³a quy trÃ¬nh báº£o máº­t.&lt;/li>
&lt;/ul>
&lt;p>ğŸ”— &lt;strong>Tham kháº£o thÃªm:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ“„ &lt;a class="link" href="https://cs.fyi/guide/secret-management-best-practices" target="_blank" rel="noopener"
>CÃ¡ch quáº£n lÃ½ bÃ­ máº­t trong á»©ng dá»¥ng web&lt;/a>&lt;/li>
&lt;li>ğŸ“„ &lt;a class="link" href="https://www.keepersecurity.com/blog/2023/01/26/why-devsecops-teams-need-secrets-management/" target="_blank" rel="noopener"
>Táº¡i sao DevSecOps cáº§n quáº£n lÃ½ bÃ­ máº­t&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=u_L-f7Th_7o" target="_blank" rel="noopener"
>Máº¹o DevOps Ä‘á»ƒ quáº£n lÃ½ bÃ­ máº­t trong mÃ´i trÆ°á»ng sáº£n xuáº¥t&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-hashicorp-vault">ğŸ›ï¸ HashiCorp Vault
&lt;/h2>&lt;p>HashiCorp Vault lÃ  cÃ´ng cá»¥ quáº£n lÃ½ bÃ­ máº­t giÃºp báº£o vá»‡ dá»¯ liá»‡u nháº¡y cáº£m nhÆ° máº­t kháº©u, khÃ³a API vÃ  khÃ³a mÃ£ hÃ³a.&lt;/p>
&lt;h3 id="-Ä‘áº·c-Ä‘iá»ƒm-ná»•i-báº­t">ğŸ”‘ Äáº·c Ä‘iá»ƒm ná»•i báº­t:
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>Quáº£n lÃ½ táº­p trung&lt;/strong> giÃºp dá»… dÃ ng kiá»ƒm soÃ¡t cÃ¡c bÃ­ máº­t.&lt;/li>
&lt;li>&lt;strong>Há»— trá»£ nhiá»u phÆ°Æ¡ng thá»©c xÃ¡c thá»±c&lt;/strong> nhÆ° LDAP, Kubernetes.&lt;/li>
&lt;li>&lt;strong>Cung cáº¥p bÃ­ máº­t Ä‘á»™ng (Dynamic Secrets)&lt;/strong> giÃºp táº¡o bÃ­ máº­t táº¡m thá»i khi cáº§n.&lt;/li>
&lt;li>&lt;strong>MÃ£ hÃ³a dá»¯ liá»‡u máº¡nh máº½&lt;/strong> khi lÆ°u trá»¯ vÃ  truyá»n táº£i.&lt;/li>
&lt;/ul>
&lt;p>ğŸ”— &lt;strong>VÃ­ dá»¥:&lt;/strong>&lt;/p>
&lt;p>LÆ°u trá»¯ vÃ  quáº£n lÃ½ chá»©ng chá»‰ TLS cho má»™t cáº¥u trÃºc microservices.&lt;/p>
&lt;p>TÃ­ch há»£p vá»›i Kubernetes Ä‘á»ƒ cáº¥p bÃ­ máº­t Ä‘á»™ng cho Pod má»—i khi khá»Ÿi cháº¡y.&lt;/p>
&lt;p>Táº¡o máº­t kháº©u táº¡m thá»i cho cÆ¡ sá»Ÿ dá»¯ liá»‡u nháº±m giáº£m rá»§i ro bá»‹ lá»™ thÃ´ng tin.&lt;/p>
&lt;h3 id="-vÃ­-dá»¥-thá»±c-táº¿">ğŸ›  VÃ­ dá»¥ thá»±c táº¿:
&lt;/h3>&lt;p>1ï¸âƒ£ Cáº¥p máº­t kháº©u Ä‘á»™ng cho PostgreSQL báº±ng Vault&lt;/p>
&lt;p>Giáº£ sá»­ báº¡n cÃ³ má»™t cÆ¡ sá»Ÿ dá»¯ liá»‡u PostgreSQL vÃ  muá»‘n cáº¥p tÃ i khoáº£n táº¡m thá»i:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">vault write database/creds/postgres-role
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Lá»‡nh nÃ y sáº½ táº¡o má»™t tÃ i khoáº£n má»›i vá»›i thá»i gian tá»“n táº¡i giá»›i háº¡n.&lt;/p>
&lt;p>2ï¸âƒ£ Sá»­ dá»¥ng Vault Ä‘á»ƒ quáº£n lÃ½ khÃ³a API trong á»©ng dá»¥ng Node.js&lt;/p>
&lt;p>Báº¡n cÃ³ thá»ƒ truy xuáº¥t khÃ³a API tá»« Vault trong mÃ£ nguá»“n cá»§a mÃ¬nh:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">execSync&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;child_process&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">secret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">execSync&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;vault kv get -field=value secret/my-api-key&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">toString&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`API Key: &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">secret&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ”— &lt;strong>TÃ i nguyÃªn há»¯u Ã­ch:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸŒ &lt;a class="link" href="https://www.vaultproject.io/" target="_blank" rel="noopener"
>Trang chá»§ HashiCorp Vault&lt;/a>&lt;/li>
&lt;li>ğŸ› ï¸ &lt;a class="link" href="https://github.com/hashicorp/vault" target="_blank" rel="noopener"
>MÃ£ nguá»“n HashiCorp Vault trÃªn GitHub&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=nG8fCdWkLzc" target="_blank" rel="noopener"
>Giá»›i thiá»‡u HashiCorp Vault trong 180 giÃ¢y&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=nG8fCdWkLzc" target="_blank" rel="noopener"
>HÆ°á»›ng dáº«n HashiCorp Vault cho ngÆ°á»i má»›i báº¯t Ä‘áº§u&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-cÃ´ng-cá»¥-quáº£n-lÃ½-khoÃ¡-bÃ­-máº­t-trÃªn-cloud">â˜ï¸ CÃ´ng cá»¥ quáº£n lÃ½ khoÃ¡ bÃ­ máº­t trÃªn Cloud
&lt;/h2>&lt;h3 id="-aws-secrets-manager">ğŸ”¥ AWS Secrets Manager
&lt;/h3>&lt;p>Cung cáº¥p dá»‹ch vá»¥ lÆ°u trá»¯ vÃ  quáº£n lÃ½ bÃ­ máº­t an toÃ n trÃªn AWS vá»›i kháº£ nÄƒng tá»± Ä‘á»™ng quay vÃ²ng máº­t kháº©u vÃ  tÃ­ch há»£p vá»›i cÃ¡c dá»‹ch vá»¥ AWS khÃ¡c.&lt;/p>
&lt;h3 id="-google-cloud-secret-manager">ğŸŒ Google Cloud Secret Manager
&lt;/h3>&lt;p>Giáº£i phÃ¡p quáº£n lÃ½ bÃ­ máº­t trÃªn Google Cloud, cho phÃ©p tá»± Ä‘á»™ng xoay vÃ²ng máº­t kháº©u vÃ  kiá»ƒm soÃ¡t truy cáº­p dá»… dÃ ng.&lt;/p>
&lt;h3 id="-azure-key-vault">ğŸ”· Azure Key Vault
&lt;/h3>&lt;p>Dá»‹ch vá»¥ cá»§a Microsoft Azure giÃºp lÆ°u trá»¯ vÃ  quáº£n lÃ½ khÃ³a, máº­t kháº©u vÃ  chá»©ng chá»‰ sá»‘ an toÃ n.&lt;/p>
&lt;p>ğŸ”— &lt;strong>VÃ­ dá»¥:&lt;/strong>&lt;/p>
&lt;p>AWS Secrets Manager: LÆ°u trá»¯ API key cá»§a má»™t á»©ng dá»¥ng web, Ä‘áº£m báº£o API key khÃ´ng bá»‹ lá»™ trong mÃ£ nguá»“n.&lt;/p>
&lt;p>HashiCorp Vault: Quáº£n lÃ½ máº­t kháº©u truy cáº­p vÃ o cÆ¡ sá»Ÿ dá»¯ liá»‡u PostgreSQL.&lt;/p>
&lt;p>Azure Key Vault: LÆ°u trá»¯ vÃ  báº£o máº­t cÃ¡c khÃ³a mÃ£ hÃ³a cá»§a á»©ng dá»¥ng.&lt;/p>
&lt;h3 id="-vÃ­-dá»¥-thá»±c-táº¿-1">ğŸ›  VÃ­ dá»¥ thá»±c táº¿:
&lt;/h3>&lt;p>1ï¸âƒ£ Sá»­ dá»¥ng AWS Secrets Manager Ä‘á»ƒ quáº£n lÃ½ khÃ³a API&lt;/p>
&lt;p>Giáº£ sá»­ báº¡n cÃ³ má»™t á»©ng dá»¥ng web cáº§n truy cáº­p vÃ o dá»‹ch vá»¥ bÃªn thá»© ba thÃ´ng qua API key. Thay vÃ¬ lÆ°u trá»¯ khÃ³a API trong mÃ£ nguá»“n, báº¡n cÃ³ thá»ƒ lÆ°u trá»¯ nÃ³ trong AWS Secrets Manager vÃ  gá»i nÃ³ khi cáº§n:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">aws secretsmanager get-secret-value --secret-id my-api-key
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>2ï¸âƒ£ Táº¡o bÃ­ máº­t Ä‘á»™ng vá»›i HashiCorp Vault&lt;/p>
&lt;p>HashiCorp Vault cÃ³ thá»ƒ táº¡o máº­t kháº©u táº¡m thá»i cho cÆ¡ sá»Ÿ dá»¯ liá»‡u, giÃºp tÄƒng cÆ°á»ng báº£o máº­t. VÃ­ dá»¥, báº¡n cÃ³ thá»ƒ táº¡o má»™t tÃ i khoáº£n táº¡m thá»i cho PostgreSQL:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">vault write database/creds/my-role
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ”— &lt;strong>TÃ i nguyÃªn há»¯u Ã­ch:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ“„ &lt;a class="link" href="https://aws.amazon.com/secrets-manager/" target="_blank" rel="noopener"
>AWS Secrets Manager&lt;/a> â€“ Dá»‹ch vá»¥ quáº£n lÃ½ bÃ­ máº­t cá»§a AWS&lt;/li>
&lt;li>ğŸ“„ &lt;a class="link" href="https://cloud.google.com/secret-manager" target="_blank" rel="noopener"
>Google Cloud Secret Manager&lt;/a> â€“ Dá»‹ch vá»¥ quáº£n lÃ½ bÃ­ máº­t cá»§a Google Cloud&lt;/li>
&lt;li>ğŸ“„ &lt;a class="link" href="https://azure.microsoft.com/en-us/services/key-vault/" target="_blank" rel="noopener"
>Azure Key Vault&lt;/a> â€“ Dá»‹ch vá»¥ quáº£n lÃ½ khÃ³a vÃ  bÃ­ máº­t cá»§a Azure&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=GwVWWn2ZKj0" target="_blank" rel="noopener"
>Demo AWS Secrets Manager&lt;/a> â€“ HÆ°á»›ng dáº«n sá»­ dá»¥ng AWS Secrets Manager&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=nsrADMrp4BI" target="_blank" rel="noopener"
>Google Cloud Secret Manager&lt;/a> â€“ Giá»›i thiá»‡u Google Cloud Secret Manager&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=pnOFP_oijxw" target="_blank" rel="noopener"
>Azure Key Vault vÃ  cÃ¡ch sá»­ dá»¥ng&lt;/a> â€“ HÆ°á»›ng dáº«n sá»­ dá»¥ng Azure Key Vault&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-sealed-secrets">ğŸ” Sealed Secrets
&lt;/h2>&lt;p>Sealed Secrets lÃ  má»™t cÃ´ng cá»¥ cho Kubernetes giÃºp mÃ£ hÃ³a dá»¯ liá»‡u nháº¡y cáº£m thÃ nh cÃ¡c &lt;strong>SealedSecrets&lt;/strong>, cÃ³ thá»ƒ lÆ°u trá»¯ an toÃ n ngay cáº£ trong mÃ´i trÆ°á»ng cÃ´ng khai nhÆ° GitHub.&lt;/p>
&lt;h3 id="-cÃ¡ch-hoáº¡t-Ä‘á»™ng">ğŸ› ï¸ CÃ¡ch hoáº¡t Ä‘á»™ng:
&lt;/h3>&lt;ol>
&lt;li>&lt;strong>MÃ£ hÃ³a&lt;/strong>: NgÆ°á»i dÃ¹ng táº¡o má»™t SealedSecret tá»« Kubernetes Secret.&lt;/li>
&lt;li>&lt;strong>LÆ°u trá»¯&lt;/strong>: SealedSecret cÃ³ thá»ƒ Ä‘Æ°á»£c commit vÃ o Git.&lt;/li>
&lt;li>&lt;strong>Giáº£i mÃ£&lt;/strong>: Chá»‰ cÃ³ Kubernetes Controller trong cluster má»›i cÃ³ thá»ƒ giáº£i mÃ£ vÃ  khÃ´i phá»¥c thÃ nh Kubernetes Secret thÃ´ng thÆ°á»ng.&lt;/li>
&lt;/ol>
&lt;p>ğŸ’¡ &lt;strong>Äiá»ƒm ná»•i báº­t:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Sá»­ dá»¥ng mÃ£ hÃ³a báº¥t Ä‘á»‘i xá»©ng&lt;/strong> Ä‘áº£m báº£o chá»‰ controller cÃ³ thá»ƒ giáº£i mÃ£ dá»¯ liá»‡u.&lt;/li>
&lt;li>&lt;strong>Há»— trá»£ GitOps&lt;/strong> giÃºp quáº£n lÃ½ bÃ­ máº­t trong repository Git an toÃ n.&lt;/li>
&lt;li>&lt;strong>Dá»… dÃ ng tÃ­ch há»£p vá»›i Kubernetes&lt;/strong> Ä‘á»ƒ báº£o vá»‡ dá»¯ liá»‡u nháº¡y cáº£m.&lt;/li>
&lt;/ul>
&lt;p>ğŸ”— &lt;strong>TÃ i nguyÃªn há»¯u Ã­ch:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ› ï¸ &lt;a class="link" href="https://github.com/bitnami-labs/sealed-secrets" target="_blank" rel="noopener"
>Sealed Secrets trÃªn GitHub&lt;/a>&lt;/li>
&lt;li>ğŸ“„ &lt;a class="link" href="https://fluxcd.io/flux/guides/sealed-secrets/" target="_blank" rel="noopener"
>TÃ i liá»‡u Sealed Secrets&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-tÃ­ch-há»£p-secret-management-vÃ o-cicd">ğŸ”„ TÃ­ch há»£p Secret Management vÃ o CI/CD
&lt;/h2>&lt;p>CÃ¡c cÃ´ng cá»¥ CI/CD nhÆ° Azure DevOps, Travis CI vÃ  AWS CodePipeline há»— trá»£ quáº£n lÃ½ bÃ­ máº­t báº±ng cÃ¡ch tÃ­ch há»£p vá»›i cÃ¡c há»‡ thá»‘ng Secret Management Ä‘á»ƒ báº£o vá»‡ thÃ´ng tin nháº¡y cáº£m trong quÃ¡ trÃ¬nh triá»ƒn khai.&lt;/p>
&lt;h3 id="-azure-devops">ğŸ—ï¸ Azure DevOps
&lt;/h3>&lt;p>Azure DevOps cung cáº¥p &lt;strong>Azure Key Vault&lt;/strong> Ä‘á»ƒ lÆ°u trá»¯ vÃ  quáº£n lÃ½ bÃ­ máº­t an toÃ n. CÃ¡c pipeline trong Azure DevOps cÃ³ thá»ƒ truy xuáº¥t bÃ­ máº­t tá»« Key Vault Ä‘á»ƒ sá»­ dá»¥ng trong quÃ¡ trÃ¬nh triá»ƒn khai.&lt;/p>
&lt;h3 id="-travis-ci">ğŸš€ Travis CI
&lt;/h3>&lt;p>Travis CI há»— trá»£ mÃ£ hÃ³a biáº¿n mÃ´i trÆ°á»ng, giÃºp báº£o vá»‡ khÃ³a API vÃ  thÃ´ng tin nháº¡y cáº£m trong quÃ¡ trÃ¬nh build.&lt;/p>
&lt;h3 id="-aws-codepipeline">ğŸŒ©ï¸ AWS CodePipeline
&lt;/h3>&lt;p>AWS CodePipeline cÃ³ thá»ƒ tÃ­ch há»£p vá»›i &lt;strong>AWS Secrets Manager&lt;/strong> Ä‘á»ƒ truy xuáº¥t bÃ­ máº­t trong quÃ¡ trÃ¬nh triá»ƒn khai á»©ng dá»¥ng.&lt;/p>
&lt;hr>
&lt;h2 id="-káº¿t-luáº­n">ğŸ¯ Káº¿t luáº­n
&lt;/h2>&lt;p>Quáº£n lÃ½ bÃ­ máº­t Ä‘Ã³ng vai trÃ² quan trá»ng trong báº£o máº­t há»‡ thá»‘ng hiá»‡n Ä‘áº¡i. Viá»‡c sá»­ dá»¥ng cÃ¡c cÃ´ng cá»¥ nhÆ° &lt;strong>HashiCorp Vault, AWS Secrets Manager, Google Cloud Secret Manager, Azure Key Vault, Sealed Secrets, Azure DevOps, Travis CI vÃ  AWS CodePipeline&lt;/strong> giÃºp Ä‘áº£m báº£o an toÃ n cho thÃ´ng tin nháº¡y cáº£m, há»— trá»£ triá»ƒn khai DevOps an toÃ n vÃ  tuÃ¢n thá»§ cÃ¡c tiÃªu chuáº©n báº£o máº­t.&lt;/p>
&lt;p>ğŸ‘‰ &lt;strong>BÆ°á»›c tiáº¿p theo:&lt;/strong> GiÃ¡m sÃ¡t háº¡ táº§ng &lt;em>&lt;strong>Infrastructure Monitoring&lt;/strong>&lt;/em> quÃ¡ trÃ¬nh theo dÃµi vÃ  phÃ¢n tÃ­ch hiá»‡u suáº¥t, tÃ­nh sáºµn sÃ ng vÃ  tráº¡ng thÃ¡i cá»§a cÃ¡c thÃ nh pháº§n háº¡ táº§ng cÃ´ng nghá»‡ thÃ´ng tin nhÆ° mÃ¡y chá»§, máº¡ng, lÆ°u trá»¯, cÆ¡ sá»Ÿ dá»¯ liá»‡u vÃ  dá»‹ch vá»¥ Ä‘iá»‡n toÃ¡n Ä‘Ã¡m mÃ¢y, giÃºp phÃ¡t hiá»‡n sá»›m sá»± cá»‘, tá»‘i Æ°u hÃ³a tÃ i nguyÃªn vÃ  Ä‘áº£m báº£o há»‡ thá»‘ng hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh. ğŸš€&lt;/p></description></item><item><title>Quáº£n lÃ½ logs (Logs Management) ğŸ“œ</title><link>https://tech.nguuyen.io.vn/posts/devops/devops-step-sixteen/</link><pubDate>Mon, 24 Feb 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/devops/devops-step-sixteen/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/devops/devops-step-sixteen.webp" alt="Featured image of post Quáº£n lÃ½ logs (Logs Management) ğŸ“œ" />&lt;h2 id="-quáº£n-lÃ½-logs-lÃ -gÃ¬">ğŸ” Quáº£n lÃ½ logs lÃ  gÃ¬?
&lt;/h2>&lt;p>Quáº£n lÃ½ logs lÃ  quÃ¡ trÃ¬nh thu tháº­p, tá»•ng há»£p, phÃ¢n tÃ­ch, lÆ°u trá»¯ vÃ  truy xuáº¥t logs tá»« cÃ¡c á»©ng dá»¥ng vÃ  há»‡ thá»‘ng háº¡ táº§ng. Logs chá»©a thÃ´ng tin quan trá»ng vá» hoáº¡t Ä‘á»™ng cá»§a há»‡ thá»‘ng, giÃºp phÃ¡t hiá»‡n sá»± cá»‘, tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t vÃ  Ä‘áº£m báº£o tuÃ¢n thá»§ báº£o máº­t.&lt;/p>
&lt;hr>
&lt;h2 id="-cÃ¡c-cÃ´ng-cá»¥-quáº£n-lÃ½-logs-phá»•-biáº¿n">ğŸš€ CÃ¡c cÃ´ng cá»¥ quáº£n lÃ½ logs phá»• biáº¿n
&lt;/h2>&lt;h3 id="elastic-stack-elk-stack">Elastic Stack (ELK Stack)
&lt;/h3>&lt;p>&lt;strong>ğŸ“ Giá»›i thiá»‡u:&lt;/strong>
Elastic Stack, trÆ°á»›c Ä‘Ã¢y gá»i lÃ  ELK Stack, bao gá»“m Elasticsearch (cÃ´ng cá»¥ tÃ¬m kiáº¿m vÃ  phÃ¢n tÃ­ch), Logstash (xá»­ lÃ½ dá»¯ liá»‡u), Kibana (trá»±c quan hÃ³a) vÃ  Beats (thu tháº­p dá»¯ liá»‡u). ÄÃ¢y lÃ  giáº£i phÃ¡p phá»• biáº¿n Ä‘á»ƒ quáº£n lÃ½ logs vá»›i kháº£ nÄƒng má»Ÿ rá»™ng cao.&lt;/p>
&lt;p>&lt;strong>ğŸ”¹ TÃ­nh nÄƒng ná»•i báº­t:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>TÃ¬m kiáº¿m vÃ  phÃ¢n tÃ­ch logs theo thá»i gian thá»±c.&lt;/li>
&lt;li>Há»— trá»£ nhiá»u Ä‘á»‹nh dáº¡ng dá»¯ liá»‡u khÃ¡c nhau.&lt;/li>
&lt;li>Kháº£ nÄƒng má»Ÿ rá»™ng tá»‘t vá»›i mÃ´i trÆ°á»ng doanh nghiá»‡p.&lt;/li>
&lt;li>Cung cáº¥p giao diá»‡n trá»±c quan vá»›i Kibana.&lt;/li>
&lt;/ul>
&lt;p>Sá»­ dá»¥ng Elastic Stack Ä‘á»ƒ thu tháº­p logs tá»« cÃ¡c mÃ¡y chá»§ web, phÃ¢n tÃ­ch lá»—i vÃ  táº¡o dashboard giÃ¡m sÃ¡t lÆ°u lÆ°á»£ng truy cáº­p.&lt;/p>
&lt;p>&lt;strong>ğŸ“š TÃ i nguyÃªn há»¯u Ã­ch:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ”—&lt;a class="link" href="https://www.elastic.co/elastic-stack/" target="_blank" rel="noopener"
>Trang chá»§ Elastic Stack&lt;/a>&lt;/li>
&lt;li>ğŸ¥&lt;a class="link" href="https://www.youtube.com/watch?v=CfCTWVAwFbQ" target="_blank" rel="noopener"
>Tá»•ng quan vá» Elastic Stack&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h3 id="loki">Loki
&lt;/h3>&lt;p>&lt;strong>ğŸ“ Giá»›i thiá»‡u:&lt;/strong>
Loki lÃ  há»‡ thá»‘ng thu tháº­p logs do Grafana Labs phÃ¡t triá»ƒn, tá»‘i Æ°u cho Kubernetes vÃ  container. Loki khÃ´ng lÆ°u trá»¯ toÃ n bá»™ logs mÃ  chá»‰ láº­p chá»‰ má»¥c metadata, giÃºp tiáº¿t kiá»‡m tÃ i nguyÃªn.&lt;/p>
&lt;p>&lt;strong>ğŸ”¹ TÃ­nh nÄƒng ná»•i báº­t:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>TÃ­ch há»£p cháº·t cháº½ vá»›i Grafana.&lt;/li>
&lt;li>Sá»­ dá»¥ng LogQL, ngÃ´n ngá»¯ truy váº¥n tÆ°Æ¡ng tá»± PromQL.&lt;/li>
&lt;li>Tá»‘i Æ°u cho mÃ´i trÆ°á»ng Kubernetes vÃ  container.&lt;/li>
&lt;li>Tiáº¿t kiá»‡m tÃ i nguyÃªn so vá»›i cÃ¡c giáº£i phÃ¡p khÃ¡c.&lt;/li>
&lt;/ul>
&lt;p>Sá»­ dá»¥ng Loki Ä‘á»ƒ theo dÃµi logs tá»« cÃ¡c container trong Kubernetes, giÃºp phÃ¡t hiá»‡n lá»—i á»©ng dá»¥ng nhanh chÃ³ng.&lt;/p>
&lt;p>&lt;strong>ğŸ“š TÃ i nguyÃªn há»¯u Ã­ch:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ”—&lt;a class="link" href="https://grafana.com/oss/loki/" target="_blank" rel="noopener"
>Trang chá»§ Loki&lt;/a>&lt;/li>
&lt;li>ğŸ“–&lt;a class="link" href="https://grafana.com/docs/loki/latest/?pg=oss-loki&amp;amp;plcmt=quick-links" target="_blank" rel="noopener"
>TÃ i liá»‡u Loki&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h3 id="graylog">Graylog
&lt;/h3>&lt;p>&lt;strong>ğŸ“ Giá»›i thiá»‡u:&lt;/strong>
Graylog lÃ  ná»n táº£ng quáº£n lÃ½ logs mÃ£ nguá»“n má»Ÿ, há»— trá»£ thu tháº­p, lÆ°u trá»¯ vÃ  phÃ¢n tÃ­ch logs theo thá»i gian thá»±c. Há»‡ thá»‘ng nÃ y cung cáº¥p giao diá»‡n web thÃ¢n thiá»‡n vÃ  há»— trá»£ nhiá»u loáº¡i dá»¯ liá»‡u logs khÃ¡c nhau.&lt;/p>
&lt;p>&lt;strong>ğŸ”¹ TÃ­nh nÄƒng ná»•i báº­t:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Há»— trá»£ nhiá»u giao thá»©c thu tháº­p logs nhÆ° Syslog, GELF.&lt;/li>
&lt;li>Giao diá»‡n tÃ¬m kiáº¿m máº¡nh máº½.&lt;/li>
&lt;li>TÃ­ch há»£p tÃ­nh nÄƒng cáº£nh bÃ¡o khi phÃ¡t hiá»‡n sá»± cá»‘.&lt;/li>
&lt;li>Há»— trá»£ truy váº¥n logs theo thá»i gian thá»±c.&lt;/li>
&lt;/ul>
&lt;p>Sá»­ dá»¥ng Graylog Ä‘á»ƒ theo dÃµi logs tá»« cÃ¡c há»‡ thá»‘ng báº£o máº­t, giÃºp phÃ¡t hiá»‡n hÃ nh vi xÃ¢m nháº­p trÃ¡i phÃ©p.&lt;/p>
&lt;p>&lt;strong>ğŸ“š TÃ i nguyÃªn há»¯u Ã­ch:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ”—&lt;a class="link" href="https://www.graylog.org/" target="_blank" rel="noopener"
>Trang chá»§ Graylog&lt;/a>&lt;/li>
&lt;li>ğŸ¥&lt;a class="link" href="https://www.graylog.org/resources-videos" target="_blank" rel="noopener"
>HÆ°á»›ng dáº«n sá»­ dá»¥ng Graylog&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-vÃ­-dá»¥-vá»-mÃ£-nguá»“n">ğŸ”¥ VÃ­ dá»¥ vá» mÃ£ nguá»“n
&lt;/h2>&lt;p>DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡ch gá»­i logs Ä‘áº¿n má»™t há»‡ thá»‘ng thu tháº­p logs báº±ng JavaScript:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">winston&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;winston&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">logger&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">winston&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">createLogger&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">level&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;info&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">format&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">winston&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">format&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">transports&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">new&lt;/span> &lt;span class="nx">winston&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">transports&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Console&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">new&lt;/span> &lt;span class="nx">winston&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">transports&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">File&lt;/span>&lt;span class="p">({&lt;/span> &lt;span class="nx">filename&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;app.log&amp;#39;&lt;/span> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// Ghi log
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">info&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;á»¨ng dá»¥ng Ä‘Ã£ khá»Ÿi Ä‘á»™ng thÃ nh cÃ´ng&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">warn&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Cáº£nh bÃ¡o: Dá»¯ liá»‡u Ä‘áº§u vÃ o khÃ´ng há»£p lá»‡&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">logger&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">error&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Lá»—i: KhÃ´ng thá»ƒ káº¿t ná»‘i cÆ¡ sá»Ÿ dá»¯ liá»‡u&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="-káº¿t-luáº­n">âœ… Káº¿t luáº­n
&lt;/h2>&lt;p>Quáº£n lÃ½ logs Ä‘Ã³ng vai trÃ² quan trá»ng trong viá»‡c giÃ¡m sÃ¡t há»‡ thá»‘ng vÃ  xá»­ lÃ½ sá»± cá»‘ nhanh chÃ³ng. CÃ¡c cÃ´ng cá»¥ nhÆ° &lt;strong>Elastic Stack, Loki,&lt;/strong> vÃ  &lt;strong>Graylog&lt;/strong> cung cáº¥p giáº£i phÃ¡p máº¡nh máº½ Ä‘á»ƒ thu tháº­p, phÃ¢n tÃ­ch vÃ  trá»±c quan hÃ³a logs. Viá»‡c lá»±a chá»n cÃ´ng cá»¥ phÃ¹ há»£p sáº½ giÃºp nÃ¢ng cao hiá»‡u quáº£ váº­n hÃ nh há»‡ thá»‘ng cá»§a báº¡n. ğŸš€&lt;/p>
&lt;p>ğŸ‘‰ &lt;strong>BÆ°á»›c tiáº¿p theo:&lt;/strong> TÃ¬m hiá»ƒu vá» &lt;em>&lt;strong>Container Orchestration&lt;/strong>&lt;/em> quÃ¡ trÃ¬nh tá»± Ä‘á»™ng quáº£n lÃ½, triá»ƒn khai, má»Ÿ rá»™ng vÃ  Ä‘iá»u phá»‘i cÃ¡c container trong mÃ´i trÆ°á»ng háº¡ táº§ng, giÃºp Ä‘áº£m báº£o tÃ­nh sáºµn sÃ ng, kháº£ nÄƒng má»Ÿ rá»™ng vÃ  tá»‘i Æ°u tÃ i nguyÃªn há»‡ thá»‘ng. CÃ¡c cÃ´ng cá»¥ phá»• biáº¿n cho Container Orchestration bao gá»“m Kubernetes, Docker Swarm vÃ  Apache Mesos.&lt;/p></description></item><item><title>Serverless vÃ  cÃ¡c ná»n táº£ng liÃªn quan â˜ï¸</title><link>https://tech.nguuyen.io.vn/posts/devops/devops-step-ten/</link><pubDate>Mon, 24 Feb 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/devops/devops-step-ten/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/devops/devops-step-ten.webp" alt="Featured image of post Serverless vÃ  cÃ¡c ná»n táº£ng liÃªn quan â˜ï¸" />&lt;h2 id="-serverless-lÃ -gÃ¬">ğŸš€ Serverless lÃ  gÃ¬?
&lt;/h2>&lt;p>Serverless lÃ  mÃ´ hÃ¬nh Ä‘iá»‡n toÃ¡n Ä‘Ã¡m mÃ¢y nÆ¡i nhÃ  cung cáº¥p dá»‹ch vá»¥ quáº£n lÃ½ hoÃ n toÃ n cÆ¡ sá»Ÿ háº¡ táº§ng, giÃºp láº­p trÃ¬nh viÃªn chá»‰ cáº§n táº­p trung vÃ o viáº¿t mÃ£. Há»‡ thá»‘ng sáº½ &lt;strong>tá»± Ä‘á»™ng phÃ¢n bá»• tÃ i nguyÃªn&lt;/strong> theo nhu cáº§u vÃ  chá»‰ tÃ­nh phÃ­ dá»±a trÃªn tÃ i nguyÃªn thá»±c táº¿ sá»­ dá»¥ng. Kiáº¿n trÃºc serverless thÆ°á»ng Ä‘Æ°á»£c Ã¡p dá»¥ng cho cÃ¡c &lt;strong>á»©ng dá»¥ng microservices, xá»­ lÃ½ sá»± kiá»‡n&lt;/strong> vÃ  giÃºp giáº£m thiá»ƒu chi phÃ­ váº­n hÃ nh.&lt;/p>
&lt;p>ğŸ“– &lt;strong>TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ“„ &lt;a class="link" href="https://www.redhat.com/en/topics/cloud-native-apps/what-is-serverless" target="_blank" rel="noopener"
>Serverless lÃ  gÃ¬?&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=vxJobGtqKVM" target="_blank" rel="noopener"
>Giá»›i thiá»‡u vá» Serverless&lt;/a>&lt;/li>
&lt;li>ğŸŒ &lt;a class="link" href="https://app.daily.dev/tags/serverless?ref=roadmapsh" target="_blank" rel="noopener"
>BÃ i viáº¿t hay vá» Serverless&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-aws-lambda">âš¡ AWS Lambda
&lt;/h2>&lt;p>AWS Lambda lÃ  má»™t dá»‹ch vá»¥ serverless cá»§a AWS, cho phÃ©p cháº¡y mÃ£ mÃ  khÃ´ng cáº§n quáº£n lÃ½ mÃ¡y chá»§. Lambda &lt;strong>tá»± Ä‘á»™ng má»Ÿ rá»™ng&lt;/strong> theo nhu cáº§u, há»— trá»£ nhiá»u ngÃ´n ngá»¯ láº­p trÃ¬nh vÃ  dá»… dÃ ng tÃ­ch há»£p vá»›i cÃ¡c dá»‹ch vá»¥ khÃ¡c cá»§a AWS. NÃ³ phÃ¹ há»£p vá»›i &lt;strong>xá»­ lÃ½ dá»¯ liá»‡u, tá»± Ä‘á»™ng hÃ³a tÃ¡c vá»¥, xÃ¢y dá»±ng microservices&lt;/strong>.&lt;/p>
&lt;p>ğŸ–¥ï¸ &lt;strong>VÃ­ dá»¥:&lt;/strong> Triá»ƒn khai má»™t function trÃªn AWS Lambda&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">json&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">lambda_handler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">event&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">context&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;statusCode&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;body&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">json&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dumps&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Hello from AWS Lambda!&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ“– &lt;strong>TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ”— &lt;a class="link" href="https://docs.aws.amazon.com/lambda/latest/operatorguide/intro.html" target="_blank" rel="noopener"
>Giá»›i thiá»‡u AWS Lambda&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=RtiWU1DrMaM" target="_blank" rel="noopener"
>HÆ°á»›ng dáº«n AWS Lambda tá»« A-Z&lt;/a>&lt;/li>
&lt;li>ğŸŒ &lt;a class="link" href="https://app.daily.dev/tags/aws?ref=roadmapsh" target="_blank" rel="noopener"
>BÃ i viáº¿t hay vá» AWS Lambda&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-cloudflare">ğŸŒ Cloudflare
&lt;/h2>&lt;p>Cloudflare lÃ  má»™t cÃ´ng ty cung cáº¥p dá»‹ch vá»¥ &lt;strong>CDN, báº£o máº­t, tá»‘i Æ°u hiá»‡u suáº¥t&lt;/strong> cho website. Cloudflare Ä‘Ã³ng vai trÃ² lÃ  &lt;strong>proxy ngÆ°á»£c&lt;/strong>, giÃºp tÄƒng tá»‘c táº£i trang vÃ  báº£o vá»‡ website khá»i cÃ¡c cuá»™c táº¥n cÃ´ng. CÃ´ng ty Ä‘Æ°á»£c thÃ nh láº­p nÄƒm 2009 vÃ  lÃªn sÃ n chá»©ng khoÃ¡n vÃ o nÄƒm 2019.&lt;/p>
&lt;p>ğŸ“– &lt;strong>TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ”— &lt;a class="link" href="https://cloudflare.com/" target="_blank" rel="noopener"
>Trang chá»§ Cloudflare&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=24cml1rKGBs" target="_blank" rel="noopener"
>Giá»›i thiá»‡u vá» Cloudflare&lt;/a>&lt;/li>
&lt;li>ğŸŒ &lt;a class="link" href="https://app.daily.dev/tags/cloudflare?ref=roadmapsh" target="_blank" rel="noopener"
>BÃ i viáº¿t hay vá» Cloudflare&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-vercel">ğŸŒ Vercel
&lt;/h2>&lt;p>Vercel lÃ  ná»n táº£ng &lt;strong>triá»ƒn khai frontend&lt;/strong> giÃºp Ä‘Æ°a cÃ¡c á»©ng dá»¥ng web lÃªn cloud má»™t cÃ¡ch nhanh chÃ³ng. NÃ³ há»— trá»£ &lt;strong>React, Next.js, Vue, Angular&lt;/strong>, tÃ­ch há»£p vá»›i GitHub, vÃ  cho phÃ©p triá»ƒn khai chá»‰ vá»›i má»™t lá»‡nh push.&lt;/p>
&lt;p>ğŸ“– &lt;strong>TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ”— &lt;a class="link" href="https://vercel.com/" target="_blank" rel="noopener"
>Trang chá»§ Vercel&lt;/a>&lt;/li>
&lt;li>ğŸ“– &lt;a class="link" href="https://vercel.com/docs" target="_blank" rel="noopener"
>TÃ i liá»‡u chÃ­nh thá»©c Vercel&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=sPmat30SE4k" target="_blank" rel="noopener"
>HÆ°á»›ng dáº«n sá»­ dá»¥ng Vercel&lt;/a>&lt;/li>
&lt;li>ğŸŒ &lt;a class="link" href="https://app.daily.dev/tags/vercel?ref=roadmapsh" target="_blank" rel="noopener"
>BÃ i viáº¿t hay vá» Vercel&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-káº¿t-luáº­n">ğŸ“Œ Káº¿t Luáº­n
&lt;/h2>&lt;p>Serverless giÃºp &lt;strong>tá»± Ä‘á»™ng hÃ³a triá»ƒn khai, giáº£m chi phÃ­, dá»… dÃ ng má»Ÿ rá»™ng&lt;/strong>. CÃ¡c ná»n táº£ng phá»• biáº¿n:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>AWS Lambda&lt;/strong>: Xá»­ lÃ½ sá»± kiá»‡n khÃ´ng cáº§n mÃ¡y chá»§.&lt;/li>
&lt;li>&lt;strong>Cloudflare&lt;/strong>: CDN vÃ  báº£o máº­t website.&lt;/li>
&lt;li>&lt;strong>Vercel&lt;/strong>: Triá»ƒn khai frontend nhanh chÃ³ng.&lt;/li>
&lt;/ul>
&lt;p>Viá»‡c lá»±a chá»n ná»n táº£ng phá»¥ thuá»™c vÃ o &lt;strong>nhu cáº§u, cÃ´ng nghá»‡ vÃ  chi phÃ­&lt;/strong> cá»§a báº¡n. ğŸš€&lt;/p>
&lt;p>ğŸ‘‰ &lt;strong>BÆ°á»›c tiáº¿p theo:&lt;/strong> TÃ¬m hiá»ƒu vá» &lt;em>&lt;strong>Provisioning&lt;/strong>&lt;/em> quÃ¡ trÃ¬nh cung cáº¥p vÃ  cáº¥u hÃ¬nh tÃ i nguyÃªn (mÃ¡y chá»§, máº¡ng, lÆ°u trá»¯, tÃ i khoáº£n) Ä‘á»ƒ há»‡ thá»‘ng hoáº·c á»©ng dá»¥ng cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng hiá»‡u quáº£.&lt;/p></description></item><item><title>Application Gateway ğŸŒ</title><link>https://tech.nguuyen.io.vn/posts/devops/devops-step-seven/</link><pubDate>Sun, 23 Feb 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/devops/devops-step-seven/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/devops/devops-step-seven.webp" alt="Featured image of post Application Gateway ğŸŒ" />&lt;h2 id="thiáº¿t-láº­p-cÃ¡c-thÃ nh-pháº§n-máº¡ng-quan-trá»ng">Thiáº¿t láº­p cÃ¡c thÃ nh pháº§n máº¡ng quan trá»ng
&lt;/h2>&lt;p>BÃ i viáº¿t nÃ y sáº½ giÃºp báº¡n biáº¿t cÃ¡c thÃ nh pháº§n máº¡ng quan trá»ng:&lt;/p>
&lt;p>ğŸ”¹ &lt;strong>Forward Proxy&lt;/strong>&lt;br>
ğŸ”¹ &lt;strong>Reverse Proxy&lt;/strong>&lt;br>
ğŸ”¹ &lt;strong>Load Balancer&lt;/strong>&lt;br>
ğŸ”¹ &lt;strong>Firewall&lt;/strong>&lt;br>
ğŸ”¹ &lt;strong>Caching Server&lt;/strong>&lt;br>
ğŸ”¹ &lt;strong>Web Server&lt;/strong>&lt;/p>
&lt;hr>
&lt;h2 id="-load-balancer">âš–ï¸ Load Balancer
&lt;/h2>&lt;p>&lt;strong>Load Balancer&lt;/strong> hoáº¡t Ä‘á»™ng nhÆ° má»™t &amp;ldquo;cáº£nh sÃ¡t giao thÃ´ng&amp;rdquo; Ä‘á»©ng trÆ°á»›c cÃ¡c mÃ¡y chá»§ vÃ  Ä‘iá»u hÆ°á»›ng yÃªu cáº§u tá»« khÃ¡ch hÃ ng Ä‘áº¿n cÃ¡c mÃ¡y chá»§ phÃ¹ há»£p. Äiá»u nÃ y giÃºp tá»‘i Æ°u hÃ³a tá»‘c Ä‘á»™, táº­n dá»¥ng tÃ i nguyÃªn hiá»‡u quáº£ vÃ  trÃ¡nh tÃ¬nh tráº¡ng quÃ¡ táº£i.&lt;/p>
&lt;p>ğŸ”¹ Náº¿u má»™t mÃ¡y chá»§ bá»‹ lá»—i, Load Balancer sáº½ chuyá»ƒn hÆ°á»›ng lÆ°u lÆ°á»£ng sang cÃ¡c mÃ¡y chá»§ cÃ²n láº¡i.&lt;/p>
&lt;p>ğŸ”¹ CÃ³ thá»ƒ triá»ƒn khai vá»›i cÃ¡c thuáº­t toÃ¡n nhÆ° Round Robin, Least Connections, IP Hash&amp;hellip;&lt;/p>
&lt;h3 id="-vÃ­-dá»¥-cáº¥u-hÃ¬nh-load-balancer-vá»›i-nginx">ğŸ” VÃ­ dá»¥ cáº¥u hÃ¬nh Load Balancer vá»›i Nginx:
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-nginx" data-lang="nginx">&lt;span class="line">&lt;span class="cl">&lt;span class="k">upstream&lt;/span> &lt;span class="s">backend_servers&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">server&lt;/span> &lt;span class="s">backend1.example.com&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">server&lt;/span> &lt;span class="s">backend2.example.com&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">server&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">listen&lt;/span> &lt;span class="mi">80&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">location&lt;/span> &lt;span class="s">/&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">proxy_pass&lt;/span> &lt;span class="s">http://backend_servers&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ“š &lt;strong>Tham kháº£o thÃªm:&lt;/strong>&lt;br>
ğŸ“„ &lt;a class="link" href="https://www.nginx.com/resources/glossary/load-balancing/" target="_blank" rel="noopener"
>Load Balancing lÃ  gÃ¬?&lt;/a>&lt;br>
ğŸ“„ &lt;a class="link" href="https://www.cloudflare.com/en-gb/learning/performance/what-is-load-balancing/#" target="_blank" rel="noopener"
>CÃ¡c thuáº­t toÃ¡n Load Balancing&lt;/a>&lt;br>
ğŸ“„ &lt;a class="link" href="https://dzone.com/articles/nginx-reverse-proxy-and-load-balancing" target="_blank" rel="noopener"
>Nginx Reverse Proxy &amp;amp; Load Balancing&lt;/a>&lt;br>
ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=sCR3SAVdyCc" target="_blank" rel="noopener"
>Video: Load Balancer hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o?&lt;/a>&lt;/p>
&lt;hr>
&lt;h2 id="-forward-proxy">ğŸ” Forward Proxy
&lt;/h2>&lt;p>&lt;strong>Forward Proxy&lt;/strong> lÃ  má»™t mÃ¡y chá»§ trung gian Ä‘á»©ng giá»¯a client vÃ  internet, chuyá»ƒn tiáº¿p yÃªu cáº§u tá»« client Ä‘áº¿n server Ä‘Ã­ch. NÃ³ giÃºp áº©n danh, báº£o máº­t, kiá»ƒm soÃ¡t truy cáº­p vÃ  caching ná»™i dung.&lt;/p>
&lt;p>ğŸ”¹ ÄÆ°á»£c sá»­ dá»¥ng phá»• biáº¿n trong cÃ¡c máº¡ng doanh nghiá»‡p Ä‘á»ƒ giÃ¡m sÃ¡t vÃ  kiá»ƒm soÃ¡t truy cáº­p.&lt;/p>
&lt;p>ğŸ”¹ Há»— trá»£ vÆ°á»£t qua kiá»ƒm duyá»‡t vÃ  háº¡n cháº¿ Ä‘á»‹a lÃ½.&lt;/p>
&lt;h3 id="-vÃ­-dá»¥-cáº¥u-hÃ¬nh-forward-proxy-vá»›i-squid">ğŸ” VÃ­ dá»¥ cáº¥u hÃ¬nh Forward Proxy vá»›i Squid:
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">apt update &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> apt install squid -y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Chá»‰nh sá»­a file cáº¥u hÃ¬nh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nano /etc/squid/squid.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ThÃªm cáº¥u hÃ¬nh Ä‘Æ¡n giáº£n&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">http_access allow all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">http_port &lt;span class="m">3128&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Khá»Ÿi Ä‘á»™ng láº¡i dá»‹ch vá»¥&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">systemctl restart squid
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ“š &lt;strong>Tham kháº£o thÃªm:&lt;/strong>&lt;br>
ğŸ“„ &lt;a class="link" href="https://www.fortinet.com/resources/cyberglossary/proxy-server" target="_blank" rel="noopener"
>Forward Proxy lÃ  gÃ¬?&lt;/a>&lt;br>
ğŸ“„ &lt;a class="link" href="https://oxylabs.io/blog/reverse-proxy-vs-forward-proxy" target="_blank" rel="noopener"
>So sÃ¡nh Forward Proxy vÃ  Reverse Proxy&lt;/a>&lt;br>
ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=HrG0MHkSsCA" target="_blank" rel="noopener"
>Video: Proxy hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o?&lt;/a>&lt;/p>
&lt;hr>
&lt;h2 id="-reverse-proxy">ğŸ”„ Reverse Proxy
&lt;/h2>&lt;p>&lt;strong>Reverse Proxy&lt;/strong> lÃ  má»™t mÃ¡y chá»§ trung gian nháº­n yÃªu cáº§u tá»« client vÃ  chuyá»ƒn tiáº¿p Ä‘áº¿n mÃ¡y chá»§ backend thÃ­ch há»£p. NÃ³ giÃºp cÃ¢n báº±ng táº£i, caching, báº£o máº­t vÃ  SSL termination.&lt;/p>
&lt;p>ğŸ”¹ GiÃºp che giáº¥u thÃ´ng tin cá»§a mÃ¡y chá»§ backend Ä‘á»ƒ tÄƒng cÆ°á»ng báº£o máº­t.&lt;/p>
&lt;p>ğŸ”¹ Há»— trá»£ phÃ¢n phá»‘i lÆ°u lÆ°á»£ng vÃ  tá»‘i Æ°u hiá»‡u suáº¥t á»©ng dá»¥ng.&lt;/p>
&lt;h3 id="-vÃ­-dá»¥-cáº¥u-hÃ¬nh-reverse-proxy-vá»›i-nginx">ğŸ” VÃ­ dá»¥ cáº¥u hÃ¬nh Reverse Proxy vá»›i Nginx:
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-nginx" data-lang="nginx">&lt;span class="line">&lt;span class="cl">&lt;span class="k">server&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">listen&lt;/span> &lt;span class="mi">80&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">server_name&lt;/span> &lt;span class="s">example.com&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">location&lt;/span> &lt;span class="s">/&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">proxy_pass&lt;/span> &lt;span class="s">http://backend_server&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">proxy_set_header&lt;/span> &lt;span class="s">Host&lt;/span> &lt;span class="nv">$host&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">proxy_set_header&lt;/span> &lt;span class="s">X-Real-IP&lt;/span> &lt;span class="nv">$remote_addr&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ“š &lt;strong>Tham kháº£o thÃªm:&lt;/strong>&lt;br>
ğŸ“„ &lt;a class="link" href="https://www.cloudflare.com/en-gb/learning/cdn/glossary/reverse-proxy/" target="_blank" rel="noopener"
>Reverse Proxy lÃ  gÃ¬?&lt;/a>&lt;br>
ğŸ“„ &lt;a class="link" href="https://www.nginx.com/resources/glossary/reverse-proxy-server/" target="_blank" rel="noopener"
>HÆ°á»›ng dáº«n Nginx Reverse Proxy&lt;/a>&lt;br>
ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=4NB0NDtOwIQ" target="_blank" rel="noopener"
>Video: Reverse Proxy vÃ  á»©ng dá»¥ng thá»±c táº¿&lt;/a>&lt;/p>
&lt;hr>
&lt;h2 id="-firewall">ğŸ”¥ Firewall
&lt;/h2>&lt;p>&lt;strong>Firewall&lt;/strong> lÃ  má»™t thiáº¿t bá»‹ báº£o máº­t máº¡ng giÃ¡m sÃ¡t vÃ  lá»c lÆ°u lÆ°á»£ng vÃ o/ra dá»±a trÃªn chÃ­nh sÃ¡ch báº£o máº­t cá»§a tá»• chá»©c.&lt;/p>
&lt;p>ğŸ”¹ NgÄƒn cháº·n truy cáº­p trÃ¡i phÃ©p vÃ o há»‡ thá»‘ng ná»™i bá»™.&lt;/p>
&lt;p>ğŸ”¹ Há»— trá»£ cÃ¡c quy táº¯c kiá»ƒm soÃ¡t lÆ°u lÆ°á»£ng dá»¯ liá»‡u.&lt;/p>
&lt;h3 id="-vÃ­-dá»¥-cáº¥u-hÃ¬nh-firewall-vá»›i-ufw-uncomplicated-firewall">ğŸ” VÃ­ dá»¥ cáº¥u hÃ¬nh Firewall vá»›i UFW (Uncomplicated Firewall):
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># CÃ i Ä‘áº·t UFW&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apt install ufw -y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Má»Ÿ cá»•ng SSH&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ufw allow 22/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Cháº·n táº¥t cáº£ káº¿t ná»‘i khÃ¡c&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ufw default deny incoming
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># KÃ­ch hoáº¡t UFW&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ufw &lt;span class="nb">enable&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ“š &lt;strong>Tham kháº£o thÃªm:&lt;/strong>&lt;br>
ğŸ“„ &lt;a class="link" href="https://www.checkpoint.com/cyber-hub/network-security/what-is-firewall/" target="_blank" rel="noopener"
>Firewall lÃ  gÃ¬?&lt;/a>&lt;br>
ğŸ“„ &lt;a class="link" href="https://www.cisco.com/c/en_in/products/security/firewalls/what-is-a-firewall.html" target="_blank" rel="noopener"
>CÃ¡c loáº¡i Firewall phá»• biáº¿n&lt;/a>&lt;br>
ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=9GZlVOafYTg" target="_blank" rel="noopener"
>Video: Giá»›i thiá»‡u vá» Firewall&lt;/a>&lt;/p>
&lt;hr>
&lt;h2 id="-nginx">ğŸŒ Nginx
&lt;/h2>&lt;p>&lt;strong>Nginx&lt;/strong> lÃ  má»™t mÃ¡y chá»§ web mÃ£ nguá»“n má»Ÿ, Ä‘Æ°á»£c sá»­ dá»¥ng rá»™ng rÃ£i nhá» kháº£ nÄƒng xá»­ lÃ½ nhiá»u káº¿t ná»‘i Ä‘á»“ng thá»i vá»›i hiá»‡u suáº¥t cao.&lt;/p>
&lt;p>ğŸ”¹ Há»— trá»£ web server, reverse proxy, load balancing, caching.&lt;/p>
&lt;p>ğŸ”¹ ThÃ­ch há»£p cho há»‡ thá»‘ng microservices vÃ  container.&lt;/p>
&lt;h3 id="-vÃ­-dá»¥-cáº¥u-hÃ¬nh-nginx-Ä‘Æ¡n-giáº£n">ğŸ” VÃ­ dá»¥ cáº¥u hÃ¬nh Nginx Ä‘Æ¡n giáº£n:
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-nginx" data-lang="nginx">&lt;span class="line">&lt;span class="cl">&lt;span class="k">server&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">listen&lt;/span> &lt;span class="mi">80&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">server_name&lt;/span> &lt;span class="s">example.com&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">root&lt;/span> &lt;span class="s">/var/www/html&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">index&lt;/span> &lt;span class="s">index.html&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ“š &lt;strong>Tham kháº£o thÃªm:&lt;/strong>&lt;br>
ğŸ“„ &lt;a class="link" href="https://swissmade.host/en/blog/basic-nginx-setup-ubuntu-guide-to-a-functional-and-secure-website-serving" target="_blank" rel="noopener"
>HÆ°á»›ng dáº«n cÃ i Ä‘áº·t Nginx trÃªn Ubuntu&lt;/a>&lt;br>
ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=JKxlsvZXG7c" target="_blank" rel="noopener"
>Video: Nginx trong 100 giÃ¢y&lt;/a>&lt;/p>
&lt;hr>
&lt;h2 id="-apache">ğŸ›ï¸ Apache
&lt;/h2>&lt;p>&lt;strong>Apache&lt;/strong> lÃ  má»™t trong nhá»¯ng mÃ¡y chá»§ web phá»• biáº¿n nháº¥t, há»— trá»£ nhiá»u module má»Ÿ rá»™ng vÃ  tÆ°Æ¡ng thÃ­ch vá»›i nhiá»u há»‡ Ä‘iá»u hÃ nh.&lt;/p>
&lt;p>ğŸ”¹ Dá»… dÃ ng cáº¥u hÃ¬nh vá»›i file &lt;code>.conf&lt;/code>.&lt;/p>
&lt;p>ğŸ”¹ Há»— trá»£ SSL/TLS, xÃ¡c thá»±c ngÆ°á»i dÃ¹ng, URL rewriting&amp;hellip;&lt;/p>
&lt;h3 id="-vÃ­-dá»¥-cáº¥u-hÃ¬nh-apache-Ä‘Æ¡n-giáº£n">ğŸ” VÃ­ dá»¥ cáº¥u hÃ¬nh Apache Ä‘Æ¡n giáº£n:
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-apache" data-lang="apache">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;VirtualHost&lt;/span> &lt;span class="s">*:80&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">ServerName&lt;/span> example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">DocumentRoot&lt;/span> &lt;span class="sx">/var/www/html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;Directory&lt;/span> &lt;span class="s">/var/www/html&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">AllowOverride&lt;/span> &lt;span class="k">All&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">Require&lt;/span> &lt;span class="k">all&lt;/span> granted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;lt;/Directory&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;/VirtualHost&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ“š &lt;strong>Tham kháº£o thÃªm:&lt;/strong>&lt;br>
ğŸ“„ &lt;a class="link" href="https://httpd.apache.org/" target="_blank" rel="noopener"
>Trang chá»§ Apache&lt;/a>&lt;br>
ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=VXSgEvZKp-8" target="_blank" rel="noopener"
>Video: CÃ i Ä‘áº·t Apache trÃªn Ubuntu&lt;/a>&lt;/p>
&lt;hr>
&lt;h2 id="-káº¿t-luáº­n">âœ… Káº¿t luáº­n
&lt;/h2>&lt;p>ğŸ”¹ &lt;strong>Load Balancer&lt;/strong> giÃºp phÃ¢n phá»‘i lÆ°u lÆ°á»£ng hiá»‡u quáº£, giáº£m táº£i cho mÃ¡y chá»§.&lt;br>
ğŸ”¹ &lt;strong>Forward Proxy&lt;/strong> há»— trá»£ áº©n danh, caching vÃ  kiá»ƒm soÃ¡t truy cáº­p tá»« client.&lt;br>
ğŸ”¹ &lt;strong>Reverse Proxy&lt;/strong> giÃºp tÄƒng cÆ°á»ng báº£o máº­t, caching vÃ  tá»‘i Æ°u há»‡ thá»‘ng backend.&lt;br>
ğŸ”¹ &lt;strong>Firewall&lt;/strong> báº£o vá»‡ há»‡ thá»‘ng khá»i truy cáº­p trÃ¡i phÃ©p.&lt;br>
ğŸ”¹ &lt;strong>Nginx &amp;amp; Apache&lt;/strong> lÃ  hai web server phá»• biáº¿n, phá»¥c vá»¥ ná»™i dung web vÃ  á»©ng dá»¥ng.&lt;/p>
&lt;p>Báº±ng cÃ¡ch triá»ƒn khai cÃ¡c thÃ nh pháº§n nÃ y, báº¡n cÃ³ thá»ƒ xÃ¢y dá»±ng má»™t há»‡ thá»‘ng máº¡ng máº¡nh máº½, báº£o máº­t vÃ  hiá»‡u quáº£. ğŸš€&lt;/p>
&lt;p>ğŸ‘‰ &lt;strong>BÆ°á»›c tiáº¿p theo:&lt;/strong> TÃ¬m hiá»ƒu vá» &lt;em>&lt;strong>Networking Protocols&lt;/strong>&lt;/em> táº­p há»£p cÃ¡c quy táº¯c vÃ  tiÃªu chuáº©n xÃ¡c Ä‘á»‹nh cÃ¡ch cÃ¡c thiáº¿t bá»‹ trong máº¡ng giao tiáº¿p vá»›i nhau. ChÃºng Ä‘áº£m báº£o dá»¯ liá»‡u Ä‘Æ°á»£c truyá»n táº£i chÃ­nh xÃ¡c, an toÃ n vÃ  hiá»‡u quáº£ giá»¯a cÃ¡c há»‡ thá»‘ng khÃ¡c nhau.&lt;/p></description></item><item><title>Containers, Docker vÃ  LXC ğŸ—ï¸</title><link>https://tech.nguuyen.io.vn/posts/devops/devops-step-six/</link><pubDate>Sun, 23 Feb 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/devops/devops-step-six/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/devops/devops-step-six.webp" alt="Featured image of post Containers, Docker vÃ  LXC ğŸ—ï¸" />&lt;h2 id="-containers-docker-vÃ -lxc">ğŸ“¦ Containers, Docker vÃ  LXC
&lt;/h2>&lt;p>Containers lÃ  mÃ´i trÆ°á»ng nháº¹, di Ä‘á»™ng vÃ  cÃ¡ch ly giÃºp Ä‘Ã³ng gÃ³i á»©ng dá»¥ng cÃ¹ng vá»›i táº¥t cáº£ cÃ¡c phá»¥ thuá»™c cá»§a chÃºng, Ä‘áº£m báº£o triá»ƒn khai Ä‘á»“ng nháº¥t trÃªn nhiá»u mÃ´i trÆ°á»ng khÃ¡c nhau. CÃ´ng nghá»‡ container giÃºp Ä‘Æ¡n giáº£n hÃ³a quÃ¡ trÃ¬nh triá»ƒn khai á»©ng dá»¥ng, há»— trá»£ mÃ´ hÃ¬nh kiáº¿n trÃºc microservices, vÃ  tá»‘i Æ°u hÃ³a tÃ i nguyÃªn há»‡ thá»‘ng.&lt;/p>
&lt;h2 id="-containers-lÃ -gÃ¬">ğŸ—ï¸ Containers lÃ  gÃ¬?
&lt;/h2>&lt;p>Containers lÃ  má»™t phÆ°Æ¡ng phÃ¡p áº£o hÃ³a á»Ÿ cáº¥p Ä‘á»™ há»‡ Ä‘iá»u hÃ nh, cho phÃ©p cháº¡y nhiá»u á»©ng dá»¥ng cÃ´ láº­p trÃªn cÃ¹ng má»™t kernel. KhÃ´ng giá»‘ng nhÆ° mÃ¡y áº£o (VM) yÃªu cáº§u há»‡ Ä‘iá»u hÃ nh riÃªng biá»‡t cho má»—i mÃ´i trÆ°á»ng, container chá»‰ sá»­ dá»¥ng nhÃ¢n há»‡ Ä‘iá»u hÃ nh cá»§a mÃ¡y chá»§, giÃºp giáº£m chi phÃ­ tÃ i nguyÃªn vÃ  tÄƒng hiá»‡u suáº¥t.&lt;/p>
&lt;h3 id="-Ä‘áº·c-Ä‘iá»ƒm-chÃ­nh-cá»§a-containers">ğŸ¯ Äáº·c Ä‘iá»ƒm chÃ­nh cá»§a Containers
&lt;/h3>&lt;ul>
&lt;li>ğŸ‹ï¸ &lt;strong>Nháº¹&lt;/strong>: Chia sáº» kernel vá»›i há»‡ Ä‘iá»u hÃ nh mÃ¡y chá»§, giáº£m bá»›t tÃ i nguyÃªn tiÃªu thá»¥.&lt;/li>
&lt;li>ğŸš€ &lt;strong>Di Ä‘á»™ng&lt;/strong>: Cháº¡y nháº¥t quÃ¡n trÃªn nhiá»u ná»n táº£ng tá»« mÃ¡y cÃ¡ nhÃ¢n Ä‘áº¿n cloud.&lt;/li>
&lt;li>ğŸ”’ &lt;strong>CÃ´ láº­p&lt;/strong>: á»¨ng dá»¥ng vÃ  thÆ° viá»‡n Ä‘Æ°á»£c Ä‘Ã³ng gÃ³i riÃªng biá»‡t.&lt;/li>
&lt;li>ğŸ“ˆ &lt;strong>Hiá»‡u suáº¥t cao&lt;/strong>: KhÃ´ng cáº§n khá»Ÿi Ä‘á»™ng há»‡ Ä‘iá»u hÃ nh riÃªng biá»‡t nhÆ° mÃ¡y áº£o.&lt;/li>
&lt;/ul>
&lt;h2 id="-docker---ná»n-táº£ng-container-phá»•-biáº¿n-nháº¥t">ğŸ³ Docker - Ná»n táº£ng container phá»• biáº¿n nháº¥t
&lt;/h2>&lt;p>&lt;a class="link" href="https://www.docker.com/" target="_blank" rel="noopener"
>Docker&lt;/a> lÃ  má»™t ná»n táº£ng mÃ£ nguá»“n má»Ÿ giÃºp tá»± Ä‘á»™ng hÃ³a viá»‡c triá»ƒn khai á»©ng dá»¥ng báº±ng cÃ¡ch sá»­ dá»¥ng cÃ´ng nghá»‡ container. Docker giÃºp Ä‘Ã³ng gÃ³i á»©ng dá»¥ng vá»›i toÃ n bá»™ thÆ° viá»‡n vÃ  cáº¥u hÃ¬nh cáº§n thiáº¿t Ä‘á»ƒ cháº¡y trÃªn nhiá»u mÃ´i trÆ°á»ng khÃ¡c nhau.&lt;/p>
&lt;h3 id="-tÃ­nh-nÄƒng-ná»•i-báº­t-cá»§a-docker">âœ¨ TÃ­nh nÄƒng ná»•i báº­t cá»§a Docker
&lt;/h3>&lt;ul>
&lt;li>ğŸ“¦ &lt;strong>Docker Engine&lt;/strong>: CÃ´ng cá»¥ Ä‘á»ƒ táº¡o vÃ  cháº¡y container.&lt;/li>
&lt;li>ğŸ”„ &lt;strong>Docker Compose&lt;/strong>: Quáº£n lÃ½ nhiá»u container trong má»™t á»©ng dá»¥ng.&lt;/li>
&lt;li>ğŸ—ï¸ &lt;strong>Docker Hub&lt;/strong>: Kho lÆ°u trá»¯ vÃ  chia sáº» hÃ¬nh áº£nh container.&lt;/li>
&lt;/ul>
&lt;h3 id="-vÃ­-dá»¥-sá»­-dá»¥ng-docker">ğŸ” VÃ­ dá»¥ sá»­ dá»¥ng Docker:
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">docker run -d -p 80:80 nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Lá»‡nh trÃªn sáº½ cháº¡y má»™t container Nginx trÃªn cá»•ng 80.&lt;/p>
&lt;p>ğŸ“š &lt;strong>TÃ i nguyÃªn há»¯u Ã­ch:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ“– &lt;a class="link" href="https://docs.docker.com/" target="_blank" rel="noopener"
>TÃ i liá»‡u Docker&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=RqTEHSBrYFw" target="_blank" rel="noopener"
>Docker trong 5 phÃºt&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="-lxc---linux-containers">ğŸ–¥ï¸ LXC - Linux Containers
&lt;/h2>&lt;p>LXC (Linux Containers) lÃ  má»™t phÆ°Æ¡ng phÃ¡p áº£o hÃ³a cáº¥p há»‡ Ä‘iá»u hÃ nh cho phÃ©p cháº¡y nhiá»u há»‡ thá»‘ng Linux cÃ´ láº­p trÃªn cÃ¹ng má»™t kernel.&lt;/p>
&lt;h3 id="-Ä‘áº·c-Ä‘iá»ƒm-cá»§a-lxc">ğŸ› ï¸ Äáº·c Ä‘iá»ƒm cá»§a LXC:
&lt;/h3>&lt;ul>
&lt;li>ğŸ—ï¸ Táº¡o mÃ´i trÆ°á»ng gáº§n giá»‘ng mÃ¡y áº£o nhÆ°ng hiá»‡u suáº¥t cao hÆ¡n.&lt;/li>
&lt;li>âš¡ Khá»Ÿi Ä‘á»™ng nhanh hÆ¡n so vá»›i VM truyá»n thá»‘ng.&lt;/li>
&lt;li>ğŸ” Sá»­ dá»¥ng cÃ¡c cÃ´ng nghá»‡ cá»§a Linux nhÆ° cgroups vÃ  namespaces.&lt;/li>
&lt;/ul>
&lt;h3 id="-vÃ­-dá»¥-táº¡o-má»™t-container-lxc">ğŸ“Œ VÃ­ dá»¥ táº¡o má»™t container LXC:
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">lxc-create -n my-container -t ubuntu
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lxc-start -n my-container -d
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ“š &lt;strong>TÃ i nguyÃªn há»¯u Ã­ch:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ“– &lt;a class="link" href="https://linuxcontainers.org/" target="_blank" rel="noopener"
>Trang chá»§ LXC&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=CWmkSj_B-wo" target="_blank" rel="noopener"
>HÆ°á»›ng dáº«n sá»­ dá»¥ng LXC&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="-káº¿t-luáº­n">ğŸ¯ Káº¿t luáº­n
&lt;/h2>&lt;p>Containers giÃºp triá»ƒn khai á»©ng dá»¥ng nhanh chÃ³ng, hiá»‡u quáº£ vÃ  tiáº¿t kiá»‡m tÃ i nguyÃªn. &lt;strong>Docker&lt;/strong> lÃ  lá»±a chá»n phá»• biáº¿n cho phÃ¡t triá»ƒn á»©ng dá»¥ng, trong khi &lt;strong>LXC&lt;/strong> phÃ¹ há»£p hÆ¡n cho mÃ´ phá»ng há»‡ Ä‘iá»u hÃ nh Ä‘áº§y Ä‘á»§. HÃ£y chá»n cÃ´ng cá»¥ phÃ¹ há»£p vá»›i nhu cáº§u cá»§a báº¡n! ğŸš€&lt;/p>
&lt;p>ğŸ‘‰ &lt;strong>BÆ°á»›c tiáº¿p theo:&lt;/strong> TÃ¬m hiá»ƒu vá» &lt;em>&lt;strong>Application Gateway&lt;/strong>&lt;/em> má»™t dá»‹ch vá»¥ quáº£n lÃ½ traffic táº§ng á»©ng dá»¥ng giÃºp tá»‘i Æ°u hÃ³a, báº£o máº­t vÃ  kiá»ƒm soÃ¡t luá»“ng truy cáº­p giá»¯a client vÃ  backend. NÃ³ cÃ³ thá»ƒ Ä‘Ã³ng vai trÃ² nhÆ° má»™t reverse proxy, báº£o vá»‡ há»‡ thá»‘ng vÃ  Ä‘áº£m báº£o request Ä‘Æ°á»£c xá»­ lÃ½ Ä‘Ãºng cÃ¡ch.&lt;/p></description></item><item><title>Dá»‹ch vá»¥ Cloud ğŸŒ©ï¸</title><link>https://tech.nguuyen.io.vn/posts/devops/devops-step-nine/</link><pubDate>Sun, 23 Feb 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/devops/devops-step-nine/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/devops/devops-step-nine.webp" alt="Featured image of post Dá»‹ch vá»¥ Cloud ğŸŒ©ï¸" />&lt;h2 id="-cloud-providers">ğŸŒ Cloud Providers
&lt;/h2>&lt;p>CÃ¡c nhÃ  cung cáº¥p dá»‹ch vá»¥ Ä‘Ã¡m mÃ¢y cung cáº¥p má»™t lá»›p API Ä‘á»ƒ trá»«u tÆ°á»£ng hÃ³a cÆ¡ sá»Ÿ háº¡ táº§ng, giÃºp triá»ƒn khai tÃ i nguyÃªn dá»±a trÃªn cÃ¡c tiÃªu chuáº©n báº£o máº­t vÃ  mÃ´ hÃ¬nh thanh toÃ¡n. DÃ¹ thá»±c táº¿ cÃ¡c dá»‹ch vá»¥ Ä‘Ã¡m mÃ¢y cháº¡y trÃªn cÃ¡c mÃ¡y chá»§ trong trung tÃ¢m dá»¯ liá»‡u, nhÆ°ng nhá» vÃ o cÃ¡c lá»›p trá»«u tÆ°á»£ng, chÃºng táº¡o cáº£m giÃ¡c nhÆ° Ä‘ang tÆ°Æ¡ng tÃ¡c vá»›i má»™t ná»n táº£ng duy nháº¥t. Kháº£ nÄƒng triá»ƒn khai, cáº¥u hÃ¬nh vÃ  báº£o máº­t tÃ i nguyÃªn nhanh chÃ³ng Ä‘Ã£ giÃºp cloud trá»Ÿ thÃ nh yáº¿u tá»‘ quan trá»ng trong thÃ nh cÃ´ng vÃ  sá»± phá»©c táº¡p cá»§a DevOps hiá»‡n Ä‘áº¡i.&lt;/p>
&lt;p>ğŸ“– &lt;strong>TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ“„ &lt;a class="link" href="https://www.techtarget.com/searchitchannel/definition/cloud-service-provider-cloud-provider" target="_blank" rel="noopener"
>Cloud Service Provider&lt;/a>&lt;/li>
&lt;li>ğŸ“„ &lt;a class="link" href="https://www.redhat.com/en/topics/cloud-computing/what-are-cloud-providers" target="_blank" rel="noopener"
>Cloud Providers lÃ  gÃ¬?&lt;/a>&lt;/li>
&lt;li>ğŸŒ &lt;a class="link" href="https://app.daily.dev/tags/cloud?ref=roadmapsh" target="_blank" rel="noopener"
>BÃ i viáº¿t hay vá» Cloud&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-aws-amazon-web-services">â˜ï¸ AWS (Amazon Web Services)
&lt;/h2>&lt;p>AWS lÃ  ná»n táº£ng Ä‘iá»‡n toÃ¡n Ä‘Ã¡m mÃ¢y hÃ ng Ä‘áº§u tá»« nÄƒm 2011, vÆ°á»£t xa Azure vÃ  Google Cloud. AWS cung cáº¥p hÆ¡n &lt;strong>200 dá»‹ch vá»¥&lt;/strong>, hoáº¡t Ä‘á»™ng trÃªn quy mÃ´ toÃ n cáº§u. AWS mang Ä‘áº¿n giáº£i phÃ¡p tÃ­nh toÃ¡n linh hoáº¡t vÃ  tiáº¿t kiá»‡m chi phÃ­, bao gá»“m: &lt;strong>sá»©c máº¡nh tÃ­nh toÃ¡n, lÆ°u trá»¯ dá»¯ liá»‡u, phÃ¢n phá»‘i ná»™i dung&lt;/strong>, v.v.&lt;/p>
&lt;p>ğŸ–¥ï¸ &lt;strong>VÃ­ dá»¥:&lt;/strong> Táº¡o má»™t EC2 instance báº±ng AWS CLI&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">aws ec2 run-instances --image-id ami-12345678 --count &lt;span class="m">1&lt;/span> --instance-type t2.micro --key-name MyKeyPair --security-groups MySecurityGroup
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ“– &lt;strong>TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=zA8guDqfv40" target="_blank" rel="noopener"
>100 giá» khÃ³a há»c AWS - 2024&lt;/a>&lt;/li>
&lt;li>ğŸ”— &lt;a class="link" href="https://aws.amazon.com/" target="_blank" rel="noopener"
>Trang chá»§ AWS&lt;/a>&lt;/li>
&lt;li>ğŸ“„ &lt;a class="link" href="https://grapplingdev.com/tutorials/how-to-create-aws-account" target="_blank" rel="noopener"
>HÆ°á»›ng dáº«n táº¡o tÃ i khoáº£n AWS&lt;/a>&lt;/li>
&lt;li>ğŸŒ &lt;a class="link" href="https://app.daily.dev/tags/aws?ref=roadmapsh" target="_blank" rel="noopener"
>BÃ i viáº¿t hay vá» AWS&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-microsoft-azure">ğŸ’  Microsoft Azure
&lt;/h2>&lt;p>Azure lÃ  ná»n táº£ng Ä‘iá»‡n toÃ¡n Ä‘Ã¡m mÃ¢y cá»§a Microsoft, cung cáº¥p &lt;strong>IaaS, PaaS, SaaS&lt;/strong> cÃ¹ng nhiá»u dá»‹ch vá»¥ nhÆ° &lt;strong>phÃ¢n tÃ­ch, AI, mÃ¡y há»c, báº£o máº­t&lt;/strong>. Azure há»— trá»£ nhiá»u cÃ´ng cá»¥ vÃ  ngÃ´n ngá»¯ láº­p trÃ¬nh, giÃºp doanh nghiá»‡p phÃ¡t triá»ƒn nhanh chÃ³ng.&lt;/p>
&lt;p>ğŸ–¥ï¸ &lt;strong>VÃ­ dá»¥:&lt;/strong> Triá»ƒn khai á»©ng dá»¥ng trÃªn Azure App Service&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">az webapp create --resource-group MyResourceGroup --plan MyAppServicePlan --name MyUniqueApp --runtime &lt;span class="s2">&amp;#34;PYTHON:3.8&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ“– &lt;strong>TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ”— &lt;a class="link" href="https://azure.microsoft.com/en-us/" target="_blank" rel="noopener"
>Trang chá»§ Azure&lt;/a>&lt;/li>
&lt;li>ğŸ“– &lt;a class="link" href="https://github.com/mikeroyal/Azure-Guide" target="_blank" rel="noopener"
>HÆ°á»›ng dáº«n vá» Microsoft Azure&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=5abffC-K40c" target="_blank" rel="noopener"
>Chá»©ng chá»‰ Azure Fundamentals (AZ-900)&lt;/a>&lt;/li>
&lt;li>ğŸŒ &lt;a class="link" href="https://app.daily.dev/tags/azure?ref=roadmapsh" target="_blank" rel="noopener"
>BÃ i viáº¿t hay vá» Azure&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-google-cloud-platform-gcp">â˜ï¸ Google Cloud Platform (GCP)
&lt;/h2>&lt;p>Google Cloud cung cáº¥p hÆ¡n &lt;strong>150 dá»‹ch vá»¥&lt;/strong>, hoáº¡t Ä‘á»™ng trÃªn cÃ¹ng háº¡ táº§ng vá»›i cÃ¡c sáº£n pháº©m cá»§a Google nhÆ° &lt;strong>Search, Gmail, YouTube&lt;/strong>. Dá»‹ch vá»¥ bao gá»“m: &lt;strong>VMs, cÆ¡ sá»Ÿ dá»¯ liá»‡u, AI/ML, Kubernetes&lt;/strong>, v.v.&lt;/p>
&lt;p>ğŸ–¥ï¸ &lt;strong>VÃ­ dá»¥:&lt;/strong> Táº¡o má»™t VM trÃªn Google Cloud&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">gcloud compute instances create my-instance --machine-type&lt;span class="o">=&lt;/span>e2-medium --image-project&lt;span class="o">=&lt;/span>debian-cloud --image-family&lt;span class="o">=&lt;/span>debian-11
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ“– &lt;strong>TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ”— &lt;a class="link" href="https://cloud.google.com/" target="_blank" rel="noopener"
>Trang chá»§ Google Cloud&lt;/a>&lt;/li>
&lt;li>ğŸ“– &lt;a class="link" href="https://thenewstack.io/5-tips-to-become-a-google-cloud-certified-professional-architect/" target="_blank" rel="noopener"
>5 máº¹o Ä‘á»ƒ trá»Ÿ thÃ nh Google Cloud Certified&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=fZOz13joN0o" target="_blank" rel="noopener"
>KhÃ³a há»c Google Cloud Platform - 2023&lt;/a>&lt;/li>
&lt;li>ğŸŒ &lt;a class="link" href="https://app.daily.dev/tags/cloud?ref=roadmapsh" target="_blank" rel="noopener"
>BÃ i viáº¿t hay vá» Google Cloud&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-digitalocean">ğŸŒŠ DigitalOcean
&lt;/h2>&lt;p>DigitalOcean lÃ  nhÃ  cung cáº¥p cÆ¡ sá»Ÿ háº¡ táº§ng Ä‘Ã¡m mÃ¢y táº­p trung vÃ o sá»± &lt;strong>Ä‘Æ¡n giáº£n, chi phÃ­ tháº¥p, dá»… sá»­ dá»¥ng&lt;/strong>. DigitalOcean cung cáº¥p dá»‹ch vá»¥ nhÆ° &lt;strong>mÃ¡y áº£o (Droplets), cÆ¡ sá»Ÿ dá»¯ liá»‡u, Kubernetes, lÆ°u trá»¯ Ä‘á»‘i tÆ°á»£ng&lt;/strong>, phÃ¹ há»£p vá»›i &lt;strong>startup vÃ  developer&lt;/strong>.&lt;/p>
&lt;p>ğŸ–¥ï¸ &lt;strong>VÃ­ dá»¥:&lt;/strong> Táº¡o má»™t Droplet trÃªn DigitalOcean báº±ng API&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">curl -X POST -H &lt;span class="s2">&amp;#34;Content-Type: application/json&amp;#34;&lt;/span> -H &lt;span class="s2">&amp;#34;Authorization: Bearer YOUR_TOKEN&amp;#34;&lt;/span> -d &lt;span class="s1">&amp;#39;{&amp;#34;name&amp;#34;:&amp;#34;example-droplet&amp;#34;,&amp;#34;region&amp;#34;:&amp;#34;nyc3&amp;#34;,&amp;#34;size&amp;#34;:&amp;#34;s-1vcpu-1gb&amp;#34;,&amp;#34;image&amp;#34;:&amp;#34;ubuntu-20-04-x64&amp;#34;}&amp;#39;&lt;/span> &lt;span class="s2">&amp;#34;https://api.digitalocean.com/v2/droplets&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ“– &lt;strong>TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ”— &lt;a class="link" href="https://www.digitalocean.com/" target="_blank" rel="noopener"
>Trang chá»§ DigitalOcean&lt;/a>&lt;/li>
&lt;li>ğŸ“„ &lt;a class="link" href="https://hacktoberfest.com/" target="_blank" rel="noopener"
>Hacktoberfest cá»§a DigitalOcean&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=cJKdo-glRD0" target="_blank" rel="noopener"
>HÆ°á»›ng dáº«n Kubernetes trÃªn DigitalOcean&lt;/a>&lt;/li>
&lt;li>ğŸŒ &lt;a class="link" href="https://app.daily.dev/tags/digitalocean?ref=roadmapsh" target="_blank" rel="noopener"
>BÃ i viáº¿t hay vá» DigitalOcean&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-káº¿t-luáº­n">ğŸ“Œ Káº¿t Luáº­n
&lt;/h2>&lt;p>CÃ¡c nhÃ  cung cáº¥p dá»‹ch vá»¥ cloud nhÆ° &lt;strong>AWS, Azure, GCP, DigitalOcean&lt;/strong> cung cáº¥p giáº£i phÃ¡p linh hoáº¡t cho má»i nhu cáº§u &lt;strong>mÃ¡y chá»§, lÆ°u trá»¯, AI, DevOps&lt;/strong>. Má»—i ná»n táº£ng cÃ³ Æ°u Ä‘iá»ƒm riÃªng:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>AWS&lt;/strong>: ToÃ n diá»‡n, nhiá»u dá»‹ch vá»¥ nháº¥t.&lt;/li>
&lt;li>&lt;strong>Azure&lt;/strong>: TÃ­ch há»£p tá»‘t vá»›i há»‡ sinh thÃ¡i Microsoft.&lt;/li>
&lt;li>&lt;strong>GCP&lt;/strong>: Tá»‘i Æ°u cho AI, dá»¯ liá»‡u lá»›n.&lt;/li>
&lt;li>&lt;strong>DigitalOcean&lt;/strong>: ÄÆ¡n giáº£n, phÃ¹ há»£p vá»›i startup.&lt;/li>
&lt;/ul>
&lt;p>Viá»‡c chá»n ná»n táº£ng phÃ¹ há»£p phá»¥ thuá»™c vÃ o &lt;strong>má»¥c tiÃªu, ngÃ¢n sÃ¡ch, nhu cáº§u ká»¹ thuáº­t&lt;/strong> cá»§a báº¡n. ğŸš€&lt;/p>
&lt;p>ğŸ‘‰ &lt;strong>BÆ°á»›c tiáº¿p theo:&lt;/strong> TÃ¬m hiá»ƒu vá» &lt;em>&lt;strong>Serverless&lt;/strong>&lt;/em> mÃ´ hÃ¬nh Ä‘iá»‡n toÃ¡n Ä‘Ã¡m mÃ¢y cho phÃ©p cháº¡y á»©ng dá»¥ng mÃ  khÃ´ng cáº§n quáº£n lÃ½ mÃ¡y chá»§. CÃ¡c nhÃ  cung cáº¥p cloud tá»± Ä‘á»™ng phÃ¢n bá»• tÃ i nguyÃªn, má»Ÿ rá»™ng quy mÃ´ vÃ  tÃ­nh phÃ­ dá»±a trÃªn lÆ°á»£ng tÃ i nguyÃªn thá»±c táº¿ Ä‘Æ°á»£c sá»­ dá»¥ng, giÃºp tá»‘i Æ°u chi phÃ­ vÃ  Ä‘Æ¡n giáº£n hÃ³a triá»ƒn khai.&lt;/p></description></item><item><title>Dá»‹ch vá»¥ lÆ°u trá»¯ mÃ£ nguá»“n ğŸ±</title><link>https://tech.nguuyen.io.vn/posts/devops/devops-step-five/</link><pubDate>Sun, 23 Feb 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/devops/devops-step-five/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/devops/devops-step-five.webp" alt="Featured image of post Dá»‹ch vá»¥ lÆ°u trá»¯ mÃ£ nguá»“n ğŸ±" />&lt;h2 id="-dá»‹ch-vá»¥-lÆ°u-trá»¯-mÃ£-nguá»“n-repo-hosting-services">ğŸŒ Dá»‹ch vá»¥ lÆ°u trá»¯ mÃ£ nguá»“n (Repo Hosting Services)
&lt;/h2>&lt;p>Khi lÃ m viá»‡c nhÃ³m, báº¡n cáº§n má»™t nÆ¡i lÆ°u trá»¯ mÃ£ nguá»“n tá»« xa Ä‘á»ƒ má»i ngÆ°á»i cÃ³ thá»ƒ truy cáº­p, táº¡o nhÃ¡nh riÃªng, cÅ©ng nhÆ° táº¡o hoáº·c xem xÃ©t cÃ¡c pull request. CÃ¡c dá»‹ch vá»¥ nÃ y thÆ°á»ng bao gá»“m theo dÃµi váº¥n Ä‘á» (issue tracking), Ä‘Ã¡nh giÃ¡ mÃ£ (code review) vÃ  tÃ­ch há»£p liÃªn tá»¥c (CI/CD). Má»™t sá»‘ lá»±a chá»n phá»• biáº¿n gá»“m GitHub, GitLab, Bitbucket vÃ  AWS CodeCommit.&lt;/p>
&lt;p>ğŸ“š &lt;strong>TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu thÃªm:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ”— &lt;a class="link" href="https://github.com" target="_blank" rel="noopener"
>GitHub&lt;/a>&lt;/li>
&lt;li>ğŸ”— &lt;a class="link" href="https://gitlab.com" target="_blank" rel="noopener"
>GitLab&lt;/a>&lt;/li>
&lt;li>ğŸ”— &lt;a class="link" href="https://bitbucket.org" target="_blank" rel="noopener"
>BitBucket&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=FQGXIIqziQg" target="_blank" rel="noopener"
>GitHub vs GitLab vs Bitbucket - NÃªn chá»n cÃ¡i nÃ o?&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-github">ğŸ™ GitHub
&lt;/h2>&lt;p>GitHub lÃ  má»™t ná»n táº£ng quáº£n lÃ½ mÃ£ nguá»“n dá»±a trÃªn Git, cung cáº¥p dá»‹ch vá»¥ lÆ°u trá»¯ kho mÃ£ trÃªn ná»n táº£ng Ä‘Ã¡m mÃ¢y. NÃ³ há»— trá»£ cÃ¡c tÃ­nh nÄƒng nhÆ° theo dÃµi lá»—i, quáº£n lÃ½ nhiá»‡m vá»¥, vÃ  wiki dá»± Ã¡n. GitHub cho phÃ©p Ä‘Ã¡nh giÃ¡ mÃ£ qua pull request, theo dÃµi váº¥n Ä‘á» vÃ  há»— trá»£ láº­p trÃ¬nh cá»™ng tÃ¡c vá»›i cÃ¡c tÃ­nh nÄƒng nhÆ° fork vÃ  star.&lt;/p>
&lt;p>GitHub há»— trá»£ cáº£ kho mÃ£ cÃ´ng khai vÃ  riÃªng tÆ°, giÃºp nÃ³ trá»Ÿ thÃ nh lá»±a chá»n phá»• biáº¿n cho cáº£ dá»± Ã¡n mÃ£ nguá»“n má»Ÿ vÃ  phÃ¡t triá»ƒn cÃ¡ nhÃ¢n. Há»‡ sinh thÃ¡i GitHub bao gá»“m:&lt;/p>
&lt;ul>
&lt;li>ğŸš€ &lt;strong>GitHub Actions&lt;/strong>: Tá»± Ä‘á»™ng hÃ³a quy trÃ¬nh lÃ m viá»‡c.&lt;/li>
&lt;li>ğŸ“¦ &lt;strong>GitHub Packages&lt;/strong>: Quáº£n lÃ½ gÃ³i pháº§n má»m.&lt;/li>
&lt;li>ğŸŒ &lt;strong>GitHub Pages&lt;/strong>: LÆ°u trá»¯ trang web tÄ©nh miá»…n phÃ­.&lt;/li>
&lt;/ul>
&lt;p>ğŸ“š &lt;strong>TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu thÃªm:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ—ºï¸ &lt;a class="link" href="https://roadmap.sh/github" target="_blank" rel="noopener"
>Lá»™ trÃ¬nh Git &amp;amp; GitHub&lt;/a>&lt;/li>
&lt;li>ğŸ”— &lt;a class="link" href="https://github.com" target="_blank" rel="noopener"
>Trang chá»§ GitHub&lt;/a>&lt;/li>
&lt;li>ğŸ“– &lt;a class="link" href="https://ooloo.io/project/github-flow" target="_blank" rel="noopener"
>CÃ¡ch sá»­ dá»¥ng Git trong nhÃ³m phÃ¡t triá»ƒn chuyÃªn nghiá»‡p&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=pBy1zgt0XPc" target="_blank" rel="noopener"
>GitHub lÃ  gÃ¬?&lt;/a>&lt;/li>
&lt;li>ğŸ“° &lt;a class="link" href="https://app.daily.dev/tags/github?ref=roadmapsh" target="_blank" rel="noopener"
>BÃ i viáº¿t hay vá» GitHub&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-gitlab">ğŸ¦Š GitLab
&lt;/h2>&lt;p>GitLab lÃ  má»™t cÃ´ng cá»¥ DevOps toÃ n diá»‡n, cung cáº¥p quáº£n lÃ½ kho mÃ£ Git kÃ¨m theo wiki, theo dÃµi váº¥n Ä‘á» vÃ  cÃ¡c tÃ­nh nÄƒng CI/CD tÃ­ch há»£p sáºµn. ÄÃ¢y lÃ  má»™t ná»n táº£ng DevOps hoÃ n chá»‰nh, bao gá»“m táº¥t cáº£ cÃ¡c giai Ä‘oáº¡n tá»« láº­p káº¿ hoáº¡ch, phÃ¡t triá»ƒn, kiá»ƒm thá»­ Ä‘áº¿n triá»ƒn khai vÃ  giÃ¡m sÃ¡t.&lt;/p>
&lt;p>GitLab há»— trá»£ cáº£ phiÃªn báº£n Ä‘Ã¡m mÃ¢y vÃ  tá»± lÆ°u trá»¯, phÃ¹ há»£p vá»›i cÃ¡c tá»• chá»©c cÃ³ yÃªu cáº§u báº£o máº­t cao. Má»™t sá»‘ tÃ­nh nÄƒng ná»•i báº­t cá»§a GitLab gá»“m:&lt;/p>
&lt;ul>
&lt;li>ğŸ”„ &lt;strong>TÃ­ch há»£p CI/CD&lt;/strong>: Há»— trá»£ kiá»ƒm thá»­ vÃ  triá»ƒn khai tá»± Ä‘á»™ng.&lt;/li>
&lt;li>ğŸ“¦ &lt;strong>Container &amp;amp; Package Registry&lt;/strong>: Quáº£n lÃ½ vÃ  lÆ°u trá»¯ gÃ³i pháº§n má»m.&lt;/li>
&lt;li>ğŸ” &lt;strong>QuÃ©t báº£o máº­t mÃ£ nguá»“n&lt;/strong>: PhÃ¡t hiá»‡n lá»— há»•ng trong code.&lt;/li>
&lt;/ul>
&lt;p>ğŸ“š &lt;strong>TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu thÃªm:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ”— &lt;a class="link" href="https://gitlab.com" target="_blank" rel="noopener"
>Trang chá»§ GitLab&lt;/a>&lt;/li>
&lt;li>ğŸ“– &lt;a class="link" href="https://docs.gitlab.com" target="_blank" rel="noopener"
>TÃ i liá»‡u chÃ­nh thá»©c cá»§a GitLab&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=bnF7f1zGpo4" target="_blank" rel="noopener"
>GitLab lÃ  gÃ¬ vÃ  táº¡i sao nÃªn dÃ¹ng?&lt;/a>&lt;/li>
&lt;li>ğŸ“° &lt;a class="link" href="https://app.daily.dev/tags/gitlab?ref=roadmapsh" target="_blank" rel="noopener"
>BÃ i viáº¿t hay vá» GitLab&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-bitbucket">ğŸ—ï¸ Bitbucket
&lt;/h2>&lt;p>Bitbucket lÃ  má»™t dá»‹ch vá»¥ lÆ°u trá»¯ kho mÃ£ nguá»“n cá»§a Atlassian, há»— trá»£ cáº£ Git vÃ  Mercurial. NÃ³ tÃ­ch há»£p cháº·t cháº½ vá»›i cÃ¡c cÃ´ng cá»¥ Atlassian khÃ¡c nhÆ° Jira vÃ  Trello, giÃºp quáº£n lÃ½ dá»± Ã¡n dá»… dÃ ng hÆ¡n. Bitbucket cung cáº¥p cáº£ phiÃªn báº£n Ä‘Ã¡m mÃ¢y vÃ  tá»± lÆ°u trá»¯.&lt;/p>
&lt;p>Má»™t sá»‘ tÃ­nh nÄƒng Ä‘Ã¡ng chÃº Ã½ cá»§a Bitbucket:&lt;/p>
&lt;ul>
&lt;li>ğŸ” &lt;strong>Code Review &amp;amp; Pull Requests&lt;/strong>: Há»— trá»£ Ä‘Ã¡nh giÃ¡ mÃ£.&lt;/li>
&lt;li>ğŸ”„ &lt;strong>Bitbucket Pipelines&lt;/strong>: CI/CD tÃ­ch há»£p sáºµn.&lt;/li>
&lt;li>ğŸ“– &lt;strong>Wiki &amp;amp; Issue Tracking&lt;/strong>: Quáº£n lÃ½ tÃ i liá»‡u vÃ  theo dÃµi váº¥n Ä‘á».&lt;/li>
&lt;li>ğŸ” &lt;strong>Há»— trá»£ repo riÃªng tÆ° miá»…n phÃ­&lt;/strong>: PhÃ¹ há»£p vá»›i nhÃ³m nhá».&lt;/li>
&lt;/ul>
&lt;p>ğŸ“š &lt;strong>TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu thÃªm:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ğŸ”— &lt;a class="link" href="https://bitbucket.org" target="_blank" rel="noopener"
>Trang chá»§ Bitbucket&lt;/a>&lt;/li>
&lt;li>ğŸ“– &lt;a class="link" href="https://bitbucket.org/product/guides/getting-started/overview" target="_blank" rel="noopener"
>Tá»•ng quan vá» Bitbucket&lt;/a>&lt;/li>
&lt;li>ğŸ“š &lt;a class="link" href="https://www.w3schools.com/git/git_intro.asp?remote=bitbucket" target="_blank" rel="noopener"
>Giá»›i thiá»‡u vá» Git vÃ  Bitbucket&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=M44nEyd_5To" target="_blank" rel="noopener"
>HÆ°á»›ng dáº«n sá»­ dá»¥ng Bitbucket Cloud&lt;/a>&lt;/li>
&lt;li>ğŸ“° &lt;a class="link" href="https://app.daily.dev/tags/bitbucket?ref=roadmapsh" target="_blank" rel="noopener"
>BÃ i viáº¿t hay vá» Bitbucket&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-káº¿t-luáº­n">ğŸ“Œ Káº¿t luáº­n
&lt;/h2>&lt;p>Viá»‡c lá»±a chá»n dá»‹ch vá»¥ lÆ°u trá»¯ kho mÃ£ nguá»“n phá»¥ thuá»™c vÃ o nhu cáº§u cá»§a nhÃ³m phÃ¡t triá»ƒn. Náº¿u báº¡n cáº§n má»™t ná»n táº£ng phá»• biáº¿n vá»›i há»‡ sinh thÃ¡i rá»™ng lá»›n, &lt;em>&lt;strong>GitHub&lt;/strong>&lt;/em> lÃ  má»™t lá»±a chá»n máº¡nh máº½. Náº¿u muá»‘n má»™t giáº£i phÃ¡p DevOps tÃ­ch há»£p Ä‘áº§y Ä‘á»§, &lt;em>&lt;strong>GitLab&lt;/strong>&lt;/em> sáº½ phÃ¹ há»£p hÆ¡n. CÃ²n náº¿u báº¡n Ä‘Ã£ sá»­ dá»¥ng há»‡ sinh thÃ¡i Atlassian, &lt;em>&lt;strong>Bitbucket&lt;/strong>&lt;/em> sáº½ lÃ  lá»±a chá»n tá»‘t nháº¥t.&lt;/p>
&lt;p>HÃ£y cÃ¢n nháº¯c nhu cáº§u dá»± Ã¡n vÃ  má»©c Ä‘á»™ tÃ­ch há»£p mong muá»‘n Ä‘á»ƒ Ä‘Æ°a ra quyáº¿t Ä‘á»‹nh phÃ¹ há»£p! ğŸš€&lt;/p>
&lt;p>ğŸ‘‰ &lt;strong>BÆ°á»›c tiáº¿p theo:&lt;/strong> TÃ¬m hiá»ƒu vá» &lt;em>&lt;strong>Containers&lt;/strong>&lt;/em> giÃºp Ä‘Ã³ng gÃ³i á»©ng dá»¥ng cÃ¹ng vá»›i táº¥t cáº£ cÃ¡c thÆ° viá»‡n, cáº¥u hÃ¬nh vÃ  dependencies Ä‘á»ƒ cháº¡y nháº¥t quÃ¡n trÃªn nhiá»u mÃ´i trÆ°á»ng khÃ¡c nhau.&lt;/p></description></item><item><title>Giao thá»©c máº¡ng (Networking Protocols) ğŸ–§</title><link>https://tech.nguuyen.io.vn/posts/devops/devops-step-eight/</link><pubDate>Sun, 23 Feb 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/devops/devops-step-eight/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/devops/devops-step-eight.webp" alt="Featured image of post Giao thá»©c máº¡ng (Networking Protocols) ğŸ–§" />&lt;h2 id="-giao-thá»©c-máº¡ng-networking-protocols">ğŸ–§ Giao thá»©c máº¡ng (Networking Protocols)
&lt;/h2>&lt;p>Giao thá»©c máº¡ng lÃ  táº­p há»£p cÃ¡c quy táº¯c chuáº©n hÃ³a giÃºp dá»¯ liá»‡u Ä‘Æ°á»£c truyá»n, nháº­n vÃ  hiá»ƒu Ä‘Ãºng cÃ¡ch trÃªn cÃ¡c máº¡ng mÃ¡y tÃ­nh. ChÃºng xÃ¡c Ä‘á»‹nh Ä‘á»‹nh dáº¡ng, thá»i gian, trÃ¬nh tá»± vÃ  kiá»ƒm soÃ¡t lá»—i trong quÃ¡ trÃ¬nh truyá»n dá»¯ liá»‡u. Má»™t sá»‘ giao thá»©c quan trá»ng bao gá»“m:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>TCP/IP&lt;/strong>: Bá»™ giao thá»©c ná»n táº£ng cho giao tiáº¿p trÃªn Internet.&lt;/li>
&lt;li>&lt;strong>HTTP/HTTPS&lt;/strong>: Giao thá»©c truyá»n táº£i siÃªu vÄƒn báº£n dÃ¹ng cho web.&lt;/li>
&lt;li>&lt;strong>FTP/SFTP&lt;/strong>: Giao thá»©c truyá»n táº£i tá»‡p tin.&lt;/li>
&lt;li>&lt;strong>SMTP/POP3/IMAP&lt;/strong>: Giao thá»©c truyá»n táº£i email.&lt;/li>
&lt;li>&lt;strong>DNS&lt;/strong>: Giao thá»©c phÃ¢n giáº£i tÃªn miá»n.&lt;/li>
&lt;li>&lt;strong>DHCP&lt;/strong>: Giao thá»©c cáº¥p phÃ¡t Ä‘á»‹a chá»‰ IP tá»± Ä‘á»™ng.&lt;/li>
&lt;li>&lt;strong>SSL/TLS&lt;/strong>: Giao thá»©c báº£o máº­t dá»¯ liá»‡u.&lt;/li>
&lt;li>&lt;strong>UDP&lt;/strong>: Giao thá»©c truyá»n táº£i khÃ´ng káº¿t ná»‘i, nhanh chÃ³ng.&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-há»‡-thá»‘ng-tÃªn-miá»n-dns">ğŸŒ Há»‡ thá»‘ng tÃªn miá»n (DNS)
&lt;/h2>&lt;p>DNS (&lt;strong>Domain Name System&lt;/strong>) lÃ  há»‡ thá»‘ng phÃ¢n giáº£i tÃªn miá»n, giÃºp chuyá»ƒn Ä‘á»•i tÃªn miá»n dá»… nhá»› (vd: &lt;code>www.example.com&lt;/code>) thÃ nh Ä‘á»‹a chá»‰ IP (&lt;code>192.168.1.1&lt;/code>) mÃ  mÃ¡y tÃ­nh cÃ³ thá»ƒ hiá»ƒu Ä‘Æ°á»£c.&lt;/p>
&lt;h3 id="-vÃ­-dá»¥-cáº¥u-hÃ¬nh-dns-trong-linux">ğŸ”¹ VÃ­ dá»¥ cáº¥u hÃ¬nh DNS trong Linux:
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Kiá»ƒm tra DNS cá»§a má»™t tÃªn miá»n&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nslookup example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dig example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Chá»‰nh sá»­a file hosts Ä‘á»ƒ Ã¡nh xáº¡ tÃªn miá»n&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo nano /etc/hosts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ThÃªm dÃ²ng sau:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.100 mycustomdomain.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ”— &lt;strong>TÃ i nguyÃªn tham kháº£o:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://howdns.works/" target="_blank" rel="noopener"
>ğŸ“„ CÃ¡ch hoáº¡t Ä‘á»™ng cá»§a DNS&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.youtube.com/watch?v=Wj0od2ag5sk" target="_blank" rel="noopener"
>ğŸ¥ Video giáº£i thÃ­ch DNS&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-giao-thá»©c-http">ğŸŒ Giao thá»©c HTTP
&lt;/h2>&lt;p>HTTP (&lt;strong>Hypertext Transfer Protocol&lt;/strong>) lÃ  giao thá»©c truyá»n táº£i dá»¯ liá»‡u trÃªn web theo mÃ´ hÃ¬nh &lt;strong>yÃªu cáº§u - pháº£n há»“i&lt;/strong>.&lt;/p>
&lt;h3 id="-vÃ­-dá»¥-gá»­i-yÃªu-cáº§u-http-báº±ng-curl">ğŸ”¹ VÃ­ dá»¥ gá»­i yÃªu cáº§u HTTP báº±ng cURL:
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Gá»­i yÃªu cáº§u GET&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -X GET https://jsonplaceholder.typicode.com/posts/1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Gá»­i yÃªu cáº§u POST&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -X POST https://jsonplaceholder.typicode.com/posts &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -H &lt;span class="s2">&amp;#34;Content-Type: application/json&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -d &lt;span class="s1">&amp;#39;{&amp;#34;title&amp;#34;: &amp;#34;Hello&amp;#34;, &amp;#34;body&amp;#34;: &amp;#34;World&amp;#34;}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ”— &lt;strong>TÃ i nguyÃªn tham kháº£o:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.cloudflare.com/en-gb/learning/ddos/glossary/hypertext-transfer-protocol-http/" target="_blank" rel="noopener"
>ğŸ“„ TÃ¬m hiá»ƒu vá» HTTP&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.youtube.com/watch?v=iYM2zFP3Zn0" target="_blank" rel="noopener"
>ğŸ¥ Video hÆ°á»›ng dáº«n HTTP&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-https-vÃ -báº£o-máº­t-ssltls">ğŸ”’ HTTPS vÃ  báº£o máº­t (SSL/TLS)
&lt;/h2>&lt;p>HTTPS lÃ  phiÃªn báº£n báº£o máº­t cá»§a HTTP, sá»­ dá»¥ng &lt;em>&lt;strong>SSL/TLS&lt;/strong>&lt;/em> Ä‘á»ƒ mÃ£ hÃ³a dá»¯ liá»‡u, Ä‘áº£m báº£o an toÃ n khi truyá»n táº£i trÃªn Internet.&lt;/p>
&lt;h3 id="-vÃ­-dá»¥-thiáº¿t-láº­p-https-vá»›i-nginx">ğŸ”¹ VÃ­ dá»¥ thiáº¿t láº­p HTTPS vá»›i Nginx:
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-nginx" data-lang="nginx">&lt;span class="line">&lt;span class="cl">&lt;span class="k">server&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">listen&lt;/span> &lt;span class="mi">443&lt;/span> &lt;span class="s">ssl&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">server_name&lt;/span> &lt;span class="s">example.com&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">ssl_certificate&lt;/span> &lt;span class="s">/etc/letsencrypt/live/example.com/fullchain.pem&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kn">ssl_certificate_key&lt;/span> &lt;span class="s">/etc/letsencrypt/live/example.com/privkey.pem&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ”— &lt;strong>TÃ i nguyÃªn tham kháº£o:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.cloudflare.com/en-gb/learning/ssl/what-is-https/" target="_blank" rel="noopener"
>ğŸ“„ HTTPS lÃ  gÃ¬?&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.youtube.com/watch?v=25mXesOV9-8" target="_blank" rel="noopener"
>ğŸ¥ Video HTTPS hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-ssh---káº¿t-ná»‘i-báº£o-máº­t">ğŸ”‘ SSH - Káº¿t ná»‘i báº£o máº­t
&lt;/h2>&lt;p>SSH (&lt;em>&lt;strong>Secure Shell&lt;/strong>&lt;/em>) lÃ  giao thá»©c giÃºp káº¿t ná»‘i an toÃ n Ä‘áº¿n mÃ¡y chá»§ tá»« xa.&lt;/p>
&lt;h3 id="-vÃ­-dá»¥-sá»­-dá»¥ng-ssh-Ä‘á»ƒ-káº¿t-ná»‘i-tá»«-xa">ğŸ”¹ VÃ­ dá»¥ sá»­ dá»¥ng SSH Ä‘á»ƒ káº¿t ná»‘i tá»« xa:
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Káº¿t ná»‘i Ä‘áº¿n mÃ¡y chá»§ tá»« xa&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssh user@example.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Sao chÃ©p tá»‡p tin tá»« mÃ¡y chá»§ vá» mÃ¡y cá»¥c bá»™&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">scp user@example.com:/path/to/file ./localfile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ğŸ”— &lt;strong>TÃ i nguyÃªn tham kháº£o:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.baeldung.com/cs/ssh-intro" target="_blank" rel="noopener"
>ğŸ“„ HÆ°á»›ng dáº«n SSH&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.youtube.com/watch?v=5JvLV2-ngCI" target="_blank" rel="noopener"
>ğŸ¥ Video cÃ¡ch SSH hoáº¡t Ä‘á»™ng&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-káº¿t-luáº­n">ğŸ¯ Káº¿t Luáº­n
&lt;/h2>&lt;p>Giao thá»©c máº¡ng lÃ  ná»n táº£ng cá»§a má»i há»‡ thá»‘ng trá»±c tuyáº¿n, tá»« duyá»‡t web Ä‘áº¿n gá»­i email. Hiá»ƒu vÃ  biáº¿t cÃ¡ch sá»­ dá»¥ng chÃºng giÃºp cáº£i thiá»‡n báº£o máº­t vÃ  hiá»‡u suáº¥t cá»§a há»‡ thá»‘ng. HÃ£y thá»­ Ã¡p dá»¥ng cÃ¡c lá»‡nh trÃªn Ä‘á»ƒ kiá»ƒm tra vÃ  cáº¥u hÃ¬nh há»‡ thá»‘ng cá»§a báº¡n! ğŸš€&lt;/p>
&lt;p>ğŸ‘‰ &lt;strong>BÆ°á»›c tiáº¿p theo:&lt;/strong> TÃ¬m hiá»ƒu vá» &lt;em>&lt;strong>Cloud Providers&lt;/strong>&lt;/em> cÃ¡c cÃ´ng ty cung cáº¥p dá»‹ch vá»¥ Ä‘iá»‡n toÃ¡n Ä‘Ã¡m mÃ¢y, cho phÃ©p cÃ¡ nhÃ¢n vÃ  doanh nghiá»‡p truy cáº­p tÃ i nguyÃªn nhÆ° mÃ¡y chá»§, lÆ°u trá»¯, cÆ¡ sá»Ÿ dá»¯ liá»‡u, AI, vÃ  cÃ¡c dá»‹ch vá»¥ khÃ¡c qua internet mÃ  khÃ´ng cáº§n Ä‘áº§u tÆ° háº¡ táº§ng pháº§n cá»©ng.&lt;/p></description></item><item><title>Há»‡ thá»‘ng quáº£n lÃ½ phiÃªn báº£n (Version Control Systems) ğŸ› ï¸</title><link>https://tech.nguuyen.io.vn/posts/devops/devops-step-four/</link><pubDate>Sun, 23 Feb 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/devops/devops-step-four/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/devops/devops-step-four.webp" alt="Featured image of post Há»‡ thá»‘ng quáº£n lÃ½ phiÃªn báº£n (Version Control Systems) ğŸ› ï¸" />&lt;h2 id="-há»‡-thá»‘ng-quáº£n-lÃ½-phiÃªn-báº£n-version-control-systems">ğŸ”„ Há»‡ thá»‘ng quáº£n lÃ½ phiÃªn báº£n (Version Control Systems)
&lt;/h2>&lt;p>Version control systems (VCS) lÃ  cÃ¡c cÃ´ng cá»¥ giÃºp theo dÃµi sá»± thay Ä‘á»•i cá»§a mÃ£ nguá»“n vÃ  tá»‡p theo thá»i gian. ChÃºng há»— trá»£ lÃ m viá»‡c nhÃ³m, quáº£n lÃ½ lá»‹ch sá»­ thay Ä‘á»•i vÃ  duy trÃ¬ nhiá»u phiÃªn báº£n cá»§a mÃ£ nguá»“n. CÃ³ hai loáº¡i VCS chÃ­nh:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Há»‡ thá»‘ng táº­p trung (Centralized VCS - CVCS)&lt;/strong>: Sá»­ dá»¥ng má»™t kho lÆ°u trá»¯ trung tÃ¢m, vÃ­ dá»¥ nhÆ° &lt;strong>Subversion (SVN)&lt;/strong>, &lt;strong>CVS&lt;/strong>.&lt;/li>
&lt;li>&lt;strong>Há»‡ thá»‘ng phÃ¢n tÃ¡n (Distributed VCS - DVCS)&lt;/strong>: Má»—i ngÆ°á»i dÃ¹ng cÃ³ má»™t báº£n sao Ä‘áº§y Ä‘á»§ cá»§a kho lÆ°u trá»¯, bao gá»“m toÃ n bá»™ lá»‹ch sá»­. VÃ­ dá»¥ phá»• biáº¿n nháº¥t lÃ  &lt;strong>Git&lt;/strong>.&lt;/li>
&lt;/ul>
&lt;p>Git lÃ  má»™t há»‡ thá»‘ng quáº£n lÃ½ phiÃªn báº£n phÃ¢n tÃ¡n máº¡nh máº½, cho phÃ©p lÃ m viá»‡c ngoáº¡i tuyáº¿n, há»— trá»£ nhanh chÃ³ng cÃ¡c thao tÃ¡c nhÃ¡nh (branching) vÃ  há»£p nháº¥t (merging), giÃºp tÄƒng cÆ°á»ng kháº£ nÄƒng cá»™ng tÃ¡c.&lt;/p>
&lt;hr>
&lt;h2 id="-git---cÃ´ng-cá»¥-quáº£n-lÃ½-phiÃªn-báº£n-phá»•-biáº¿n-nháº¥t">ğŸ› ï¸ Git - CÃ´ng Cá»¥ Quáº£n LÃ½ PhiÃªn Báº£n Phá»• Biáº¿n Nháº¥t
&lt;/h2>&lt;h3 id="-cÃ i-Ä‘áº·t-git">ğŸ”¹ CÃ i Äáº·t Git
&lt;/h3>&lt;p>Náº¿u chÆ°a cÃ i Ä‘áº·t Git, báº¡n cÃ³ thá»ƒ táº£i vá» tá»« &lt;a class="link" href="https://git-scm.com/" target="_blank" rel="noopener"
>git-scm.com&lt;/a> hoáº·c sá»­ dá»¥ng lá»‡nh sau:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo apt install git &lt;span class="c1"># Ubuntu/Debian&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yum install git &lt;span class="c1"># CentOS/RHEL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">brew install git &lt;span class="c1"># macOS&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>XÃ¡c nháº­n cÃ i Ä‘áº·t Git:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git --version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># output: &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># git version 2.47.1.windows.1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="-cÃ¡c-lá»‡nh-cÆ¡-báº£n-trong-git">ğŸš€ CÃ¡c Lá»‡nh CÆ¡ Báº£n Trong Git
&lt;/h2>&lt;p>DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡c lá»‡nh Git phá»• biáº¿n, Ä‘Æ°á»£c sáº¯p xáº¿p tá»« cÆ¡ báº£n Ä‘áº¿n nÃ¢ng cao:&lt;/p>
&lt;h3 id="khá»Ÿi-táº¡o--cáº¥u-hÃ¬nh">&lt;strong>Khá»Ÿi Táº¡o &amp;amp; Cáº¥u HÃ¬nh&lt;/strong>
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git init &lt;span class="c1"># Khá»Ÿi táº¡o kho lÆ°u trá»¯ Git&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git config --global user.name &lt;span class="s2">&amp;#34;TÃªn Cá»§a Báº¡n&amp;#34;&lt;/span> &lt;span class="c1"># Cáº¥u hÃ¬nh tÃªn&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git config --global user.email &lt;span class="s2">&amp;#34;email@example.com&amp;#34;&lt;/span> &lt;span class="c1"># Cáº¥u hÃ¬nh email&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="lÃ m-viá»‡c-vá»›i-kho-lÆ°u-trá»¯">&lt;strong>LÃ m Viá»‡c Vá»›i Kho LÆ°u Trá»¯&lt;/strong>
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git clone &amp;lt;repo_url&amp;gt; &lt;span class="c1"># Sao chÃ©p má»™t kho lÆ°u trá»¯ tá»« xa vá» mÃ¡y&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git status &lt;span class="c1"># Kiá»ƒm tra tráº¡ng thÃ¡i cá»§a cÃ¡c tá»‡p&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="thÃªm--lÆ°u-thay-Ä‘á»•i">&lt;strong>ThÃªm &amp;amp; LÆ°u Thay Äá»•i&lt;/strong>
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git add &amp;lt;file&amp;gt; &lt;span class="c1"># ThÃªm tá»‡p vÃ o vÃ¹ng táº¡m&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git commit -m &lt;span class="s2">&amp;#34;MÃ´ táº£ thay Ä‘á»•i&amp;#34;&lt;/span> &lt;span class="c1"># LÆ°u thay Ä‘á»•i vÃ o lá»‹ch sá»­&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="lÃ m-viá»‡c-vá»›i-kho-lÆ°u-trá»¯-tá»«-xa">&lt;strong>LÃ m Viá»‡c Vá»›i Kho LÆ°u Trá»¯ Tá»« Xa&lt;/strong>
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git remote add origin &amp;lt;repo_url&amp;gt; &lt;span class="c1"># LiÃªn káº¿t kho lÆ°u trá»¯ tá»« xa&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git push -u origin main &lt;span class="c1"># Äáº©y thay Ä‘á»•i lÃªn nhÃ¡nh chÃ­nh&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git pull origin main &lt;span class="c1"># Cáº­p nháº­t thay Ä‘á»•i má»›i nháº¥t tá»« kho lÆ°u trá»¯ tá»« xa&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="lÃ m-viá»‡c-vá»›i-nhÃ¡nh">&lt;strong>LÃ m Viá»‡c Vá»›i NhÃ¡nh&lt;/strong>
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git branch new-feature &lt;span class="c1"># Táº¡o nhÃ¡nh má»›i&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git checkout new-feature &lt;span class="c1"># Chuyá»ƒn sang nhÃ¡nh má»›i&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git merge new-feature &lt;span class="c1"># Gá»™p nhÃ¡nh vÃ o nhÃ¡nh hiá»‡n táº¡i&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="theo-dÃµi-lá»‹ch-sá»­">&lt;strong>Theo DÃµi Lá»‹ch Sá»­&lt;/strong>
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git log &lt;span class="c1"># Xem lá»‹ch sá»­ commit&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">git diff &lt;span class="c1"># So sÃ¡nh thay Ä‘á»•i giá»¯a cÃ¡c phiÃªn báº£n&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="-tÃ i-nguyÃªn-há»c-git-miá»…n-phÃ­">ğŸ“š TÃ i NguyÃªn Há»c Git Miá»…n PhÃ­
&lt;/h2>&lt;ul>
&lt;li>&lt;a class="link" href="https://git-scm.com/doc" target="_blank" rel="noopener"
>ğŸ“– TÃ i liá»‡u chÃ­nh thá»©c vá» Git&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://cs.fyi/guide/git-cheatsheet" target="_blank" rel="noopener"
>ğŸ“„ Git Cheat Sheet&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.youtube.com/watch?v=SWYqp7iY_Tc" target="_blank" rel="noopener"
>â–¶ï¸ Video hÆ°á»›ng dáº«n Git cho ngÆ°á»i má»›i báº¯t Ä‘áº§u&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://app.daily.dev/tags/git?ref=roadmapsh" target="_blank" rel="noopener"
>ğŸ“ BÃ i viáº¿t: Há»‡ thá»‘ng quáº£n lÃ½ phiÃªn báº£n lÃ  gÃ¬?&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-káº¿t-luáº­n">ğŸ”š Káº¿t Luáº­n
&lt;/h2>&lt;p>Sá»­ dá»¥ng Git giÃºp quáº£n lÃ½ mÃ£ nguá»“n dá»… dÃ ng hÆ¡n, há»— trá»£ lÃ m viá»‡c nhÃ³m hiá»‡u quáº£ vÃ  báº£o vá»‡ dá»¯ liá»‡u quan trá»ng cá»§a dá»± Ã¡n. Viá»‡c hiá»ƒu vÃ  thÃ nh tháº¡o Git lÃ  ká»¹ nÄƒng cáº§n thiáº¿t cho má»i láº­p trÃ¬nh viÃªn.&lt;/p>
&lt;p>ğŸ‘‰ &lt;strong>BÆ°á»›c tiáº¿p theo:&lt;/strong> TÃ¬m hiá»ƒu vá» &lt;em>&lt;strong>GitHub &amp;amp; GitLab&lt;/strong>&lt;/em> Ä‘á»ƒ quáº£n lÃ½ kho lÆ°u trá»¯ Git trÃªn ná»n táº£ng Ä‘Ã¡m mÃ¢y.&lt;/p></description></item><item><title>Kiáº¿n thá»©c vá» Terminal ğŸ“Ÿ</title><link>https://tech.nguuyen.io.vn/posts/devops/devops-step-three/</link><pubDate>Sun, 23 Feb 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/devops/devops-step-three/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/devops/devops-step-three.webp" alt="Featured image of post Kiáº¿n thá»©c vá» Terminal ğŸ“Ÿ" />&lt;h2 id="-kiáº¿n-thá»©c-vá»-terminal">ğŸ–¥ï¸ Kiáº¿n thá»©c vá» Terminal
&lt;/h2>&lt;p>Terminal lÃ  má»™t giao diá»‡n vÄƒn báº£n giÃºp ngÆ°á»i dÃ¹ng tÆ°Æ¡ng tÃ¡c vá»›i há»‡ thá»‘ng mÃ¡y tÃ­nh thÃ´ng qua CLI (Command Line Interface - Giao diá»‡n dÃ²ng lá»‡nh). ÄÃ¢y lÃ  cÃ´ng cá»¥ quan trá»ng Ä‘á»ƒ quáº£n lÃ½ há»‡ thá»‘ng, thá»±c thi lá»‡nh, vÃ  tá»± Ä‘á»™ng hÃ³a cÃ¡c tÃ¡c vá»¥.&lt;/p>
&lt;h3 id="-tÃ i-nguyÃªn-miá»…n-phÃ­">ğŸ“š TÃ i NguyÃªn Miá»…n PhÃ­
&lt;/h3>&lt;ul>
&lt;li>&lt;a class="link" href="https://en.wikipedia.org/wiki/Command-line_interface" target="_blank" rel="noopener"
>ğŸ“„ BÃ i viáº¿t: CLI lÃ  gÃ¬?&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.google.com/search?q=terminal%20knowledge%20guide%20for%20devops" target="_blank" rel="noopener"
>ğŸ” TÃ¬m kiáº¿m trÃªn Google&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.youtube.com/results?search_query=terminal%20knowledge%20for%20devops" target="_blank" rel="noopener"
>â–¶ï¸ TÃ¬m kiáº¿m trÃªn YouTube&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>ğŸ”¹ &lt;strong>VÃ­ dá»¥:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ls -l &lt;span class="c1"># Liá»‡t kÃª tá»‡p trong thÆ° má»¥c hiá»‡n táº¡i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">pwd&lt;/span> &lt;span class="c1"># Hiá»ƒn thá»‹ Ä‘Æ°á»ng dáº«n thÆ° má»¥c hiá»‡n táº¡i&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="-giÃ¡m-sÃ¡t-tiáº¿n-trÃ¬nh-process-monitoring">ğŸ“Š GiÃ¡m SÃ¡t Tiáº¿n TrÃ¬nh (Process Monitoring)
&lt;/h2>&lt;p>GiÃ¡m sÃ¡t tiáº¿n trÃ¬nh lÃ  quÃ¡ trÃ¬nh quan sÃ¡t vÃ  phÃ¢n tÃ­ch liÃªn tá»¥c cÃ¡c tiáº¿n trÃ¬nh trong há»‡ thá»‘ng IT Ä‘á»ƒ Ä‘áº£m báº£o hiá»‡u suáº¥t, hiá»‡u quáº£ vÃ  tuÃ¢n thá»§ quy Ä‘á»‹nh. NÃ³ giÃºp theo dÃµi cÃ¡c thÃ´ng sá»‘ quan trá»ng nhÆ° tÃ i nguyÃªn sá»­ dá»¥ng, hÃ nh vi cá»§a tá»«ng tiáº¿n trÃ¬nh hoáº·c á»©ng dá»¥ng Ä‘ang cháº¡y trong há»‡ thá»‘ng.&lt;/p>
&lt;h3 id="-cÃ´ng-cá»¥-Ä‘Æ°á»£c-Ä‘á»-xuáº¥t">ğŸ† CÃ´ng Cá»¥ ÄÆ°á»£c Äá» Xuáº¥t
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>ğŸŸ£ lsof&lt;/strong> - Liá»‡t kÃª thÃ´ng tin vá» cÃ¡c tá»‡p Ä‘Æ°á»£c má»Ÿ bá»Ÿi tiáº¿n trÃ¬nh.&lt;/li>
&lt;/ul>
&lt;h3 id="-tÃ i-nguyÃªn-miá»…n-phÃ­-1">ğŸ“š TÃ i NguyÃªn Miá»…n PhÃ­
&lt;/h3>&lt;ul>
&lt;li>&lt;a class="link" href="https://neverendingsecurity.wordpress.com/2015/04/13/lsof-commands-cheatsheet/" target="_blank" rel="noopener"
>ğŸ“„ Lsof Cheat Sheet&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://man7.org/linux/man-pages/man8/lsof.8.html" target="_blank" rel="noopener"
>ğŸ“– TÃ i liá»‡u lsof&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.youtube.com/watch?v=n9nZ1ellaV0" target="_blank" rel="noopener"
>â–¶ï¸ Video: Linux Crash Course - Lá»‡nh lsof&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://app.daily.dev/tags/monitoring?ref=roadmapsh" target="_blank" rel="noopener"
>ğŸ“ BÃ i viáº¿t hay vá» GiÃ¡m sÃ¡t&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>ğŸ”¹ &lt;strong>VÃ­ dá»¥:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">lsof -i :80 &lt;span class="c1"># Liá»‡t kÃª tiáº¿n trÃ¬nh sá»­ dá»¥ng cá»•ng 80&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ps aux &lt;span class="c1"># Hiá»ƒn thá»‹ táº¥t cáº£ tiáº¿n trÃ¬nh Ä‘ang cháº¡y&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="-giÃ¡m-sÃ¡t-hiá»‡u-suáº¥t-performance-monitoring">ğŸš€ GiÃ¡m SÃ¡t Hiá»‡u Suáº¥t (Performance Monitoring)
&lt;/h2>&lt;p>GiÃ¡m sÃ¡t hiá»‡u suáº¥t giÃºp thu tháº­p, phÃ¢n tÃ­ch vÃ  bÃ¡o cÃ¡o cÃ¡c chá»‰ sá»‘ hiá»‡u suáº¥t chÃ­nh tá»« á»©ng dá»¥ng, máº¡ng, mÃ¡y chá»§ vÃ  cÆ¡ sá»Ÿ dá»¯ liá»‡u.&lt;/p>
&lt;h3 id="-cÃ´ng-cá»¥-Ä‘Æ°á»£c-Ä‘á»-xuáº¥t-1">ğŸ† CÃ´ng Cá»¥ ÄÆ°á»£c Äá» Xuáº¥t
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>ğŸŸ£ vmstat&lt;/strong> - CÃ´ng cá»¥ theo dÃµi bá»™ nhá»› áº£o vÃ  hiá»‡u suáº¥t há»‡ thá»‘ng.&lt;/li>
&lt;/ul>
&lt;h3 id="-tÃ i-nguyÃªn-miá»…n-phÃ­-2">ğŸ“š TÃ i NguyÃªn Miá»…n PhÃ­
&lt;/h3>&lt;ul>
&lt;li>&lt;a class="link" href="https://www.redhat.com/sysadmin/linux-commands-vmstat" target="_blank" rel="noopener"
>ğŸ“– Lá»‡nh Linux: KhÃ¡m phÃ¡ bá»™ nhá»› áº£o vá»›i vmstat&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://man7.org/linux/man-pages/man8/vmstat.8.html" target="_blank" rel="noopener"
>ğŸ“„ TÃ i liá»‡u vmstat&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://phoenixnap.com/kb/vmstat-command" target="_blank" rel="noopener"
>â–¶ï¸ HÆ°á»›ng dáº«n vmstat&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://app.daily.dev/tags/monitoring?ref=roadmapsh" target="_blank" rel="noopener"
>ğŸ“ BÃ i viáº¿t hay vá» GiÃ¡m sÃ¡t&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>ğŸ”¹ &lt;strong>VÃ­ dá»¥:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">vmstat &lt;span class="m">5&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="c1"># Cáº­p nháº­t tráº¡ng thÃ¡i há»‡ thá»‘ng má»—i 5 giÃ¢y trong 10 láº§n&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="-cÃ´ng-cá»¥-máº¡ng-networking-tools">ğŸŒ CÃ´ng Cá»¥ Máº¡ng (Networking Tools)
&lt;/h2>&lt;p>CÃ¡c cÃ´ng cá»¥ máº¡ng há»— trá»£ giÃ¡m sÃ¡t, phÃ¢n tÃ­ch, kháº¯c phá»¥c sá»± cá»‘ vÃ  quáº£n lÃ½ há»‡ thá»‘ng máº¡ng.&lt;/p>
&lt;h3 id="-cÃ´ng-cá»¥-Ä‘Æ°á»£c-Ä‘á»-xuáº¥t-2">ğŸ† CÃ´ng Cá»¥ ÄÆ°á»£c Äá» Xuáº¥t
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>ğŸŸ£ Wireshark&lt;/strong> - PhÃ¢n tÃ­ch gÃ³i tin sÃ¢u.&lt;/li>
&lt;li>&lt;strong>ğŸŸ£ Nmap&lt;/strong> - QuÃ©t máº¡ng vÃ  kiá»ƒm tra báº£o máº­t.&lt;/li>
&lt;li>&lt;strong>Ping&lt;/strong> - Kiá»ƒm tra káº¿t ná»‘i cÆ¡ báº£n.&lt;/li>
&lt;li>&lt;strong>Traceroute&lt;/strong> - XÃ¡c Ä‘á»‹nh Ä‘Æ°á»ng Ä‘i cá»§a gÃ³i tin trong máº¡ng.&lt;/li>
&lt;li>&lt;strong>Netstat&lt;/strong> - Hiá»ƒn thá»‹ káº¿t ná»‘i máº¡ng.&lt;/li>
&lt;li>&lt;strong>Tcpdump&lt;/strong> - Ghi vÃ  phÃ¢n tÃ­ch gÃ³i tin trÃªn dÃ²ng lá»‡nh.&lt;/li>
&lt;li>&lt;strong>Iperf&lt;/strong> - Kiá»ƒm tra hiá»‡u suáº¥t máº¡ng.&lt;/li>
&lt;li>&lt;strong>Netcat&lt;/strong> - Thá»±c hiá»‡n nhiá»u tÃ¡c vá»¥ máº¡ng khÃ¡c nhau.&lt;/li>
&lt;li>&lt;strong>Nslookup/Dig&lt;/strong> - Truy váº¥n DNS.&lt;/li>
&lt;li>&lt;strong>PuTTY&lt;/strong> - Káº¿t ná»‘i tá»« xa qua SSH hoáº·c Telnet.&lt;/li>
&lt;/ul>
&lt;p>ğŸ”¹ &lt;strong>VÃ­ dá»¥:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ping google.com &lt;span class="c1"># Kiá»ƒm tra káº¿t ná»‘i Ä‘áº¿n Google&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nmap -sS 192.168.1.1 &lt;span class="c1"># QuÃ©t cá»•ng mÃ¡y chá»§ ná»™i bá»™&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="-xá»­-lÃ½-vÄƒn-báº£n-text-manipulation">âœ‚ï¸ Xá»­ LÃ½ VÄƒn Báº£n (Text Manipulation)
&lt;/h2>&lt;p>CÃ¡c cÃ´ng cá»¥ há»— trá»£ chá»‰nh sá»­a, xá»­ lÃ½ vÃ  chuyá»ƒn Ä‘á»•i dá»¯ liá»‡u vÄƒn báº£n.&lt;/p>
&lt;h3 id="-cÃ´ng-cá»¥-Ä‘Æ°á»£c-Ä‘á»-xuáº¥t-3">ğŸ† CÃ´ng Cá»¥ ÄÆ°á»£c Äá» Xuáº¥t
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>ğŸŸ£ sed&lt;/strong> - Chá»‰nh sá»­a luá»“ng dá»¯ liá»‡u.&lt;/li>
&lt;li>&lt;strong>ğŸŸ£ awk&lt;/strong> - QuÃ©t máº«u vÃ  trÃ­ch xuáº¥t dá»¯ liá»‡u.&lt;/li>
&lt;li>&lt;strong>ğŸŸ£ grep&lt;/strong> - TÃ¬m kiáº¿m vÄƒn báº£n báº±ng biá»ƒu thá»©c chÃ­nh quy.&lt;/li>
&lt;li>&lt;strong>cut, sort, tr, uniq&lt;/strong> - CÃ¡c lá»‡nh há»— trá»£ xá»­ lÃ½ dá»¯ liá»‡u vÄƒn báº£n.&lt;/li>
&lt;/ul>
&lt;p>ğŸ”¹ &lt;strong>VÃ­ dá»¥:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">grep &lt;span class="s2">&amp;#34;error&amp;#34;&lt;/span> logfile.txt &lt;span class="c1"># TÃ¬m tá»« &amp;#34;error&amp;#34; trong logfile.txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">awk &lt;span class="s1">&amp;#39;{print $1}&amp;#39;&lt;/span> data.txt &lt;span class="c1"># Láº¥y cá»™t Ä‘áº§u tiÃªn tá»« file data.txt&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="-bash-scripts">âš¡ Bash Scripts
&lt;/h2>&lt;p>Bash lÃ  má»™t shell máº¡nh máº½ trÃªn Unix/Linux, giÃºp thá»±c hiá»‡n lá»‡nh vÃ  tá»± Ä‘á»™ng hÃ³a tÃ¡c vá»¥.&lt;/p>
&lt;p>ğŸ”¹ &lt;strong>VÃ­ dá»¥:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Hello, World!&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="-trÃ¬nh-soáº¡n-tháº£o-editors">âœï¸ TrÃ¬nh Soáº¡n Tháº£o (Editors)
&lt;/h2>&lt;p>TrÃ¬nh soáº¡n tháº£o vÄƒn báº£n lÃ  cÃ´ng cá»¥ quan trá»ng Ä‘á»ƒ chá»‰nh sá»­a vÃ  quáº£n lÃ½ tá»‡p vÄƒn báº£n.&lt;/p>
&lt;h3 id="-cÃ´ng-cá»¥-Ä‘Æ°á»£c-Ä‘á»-xuáº¥t-4">ğŸ† CÃ´ng Cá»¥ ÄÆ°á»£c Äá» Xuáº¥t
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>ğŸŸ£ Vim&lt;/strong> - Máº¡nh máº½, tÃ¹y biáº¿n cao, phÃ¹ há»£p cho láº­p trÃ¬nh viÃªn.&lt;/li>
&lt;li>&lt;strong>ğŸŸ£ Emacs&lt;/strong> - Linh hoáº¡t, cÃ³ nhiá»u plugin há»— trá»£.&lt;/li>
&lt;li>&lt;strong>Sublime Text&lt;/strong> - Tá»‘c Ä‘á»™ cao, giao diá»‡n thÃ¢n thiá»‡n.&lt;/li>
&lt;li>&lt;strong>Visual Studio Code&lt;/strong> - MÃ£ nguá»“n má»Ÿ, há»— trá»£ gá»¡ lá»—i, má»Ÿ rá»™ng, tÃ­ch há»£p cÃ´ng cá»¥ phÃ¡t triá»ƒn.&lt;/li>
&lt;/ul>
&lt;p>ğŸ”¹ &lt;strong>VÃ­ dá»¥:&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">vim myfile.txt &lt;span class="c1"># Má»Ÿ tá»‡p báº±ng Vim&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nano myfile.txt &lt;span class="c1"># Má»Ÿ tá»‡p báº±ng Nano&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="-káº¿t-luáº­n">ğŸ”š Káº¿t Luáº­n
&lt;/h2>&lt;p>Hiá»ƒu vÃ  sá»­ dá»¥ng thÃ nh tháº¡o cÃ¡c cÃ´ng cá»¥ trÃªn giÃºp báº¡n lÃ m viá»‡c hiá»‡u quáº£ hÆ¡n trong mÃ´i trÆ°á»ng Linux vÃ  DevOps. CÃ¡c cÃ´ng cá»¥ &lt;em>&lt;strong>ğŸŸ£ Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u&lt;/strong>&lt;/em> lÃ  nhá»¯ng cÃ´ng cá»¥ phá»• biáº¿n vÃ  máº¡nh máº½ nháº¥t, Ä‘Æ°á»£c nhiá»u chuyÃªn gia khuyáº¿n nghá»‹. Báº¡n cÃ³ thá»ƒ tÃ¬m hiá»ƒu sÃ¢u hÆ¡n thÃ´ng qua cÃ¡c tÃ i nguyÃªn miá»…n phÃ­ Ä‘i kÃ¨m. Náº¿u cÃ³ Ä‘iá»u gÃ¬ cáº§n lÃ m rÃµ hoáº·c bá»• sung, hÃ£y pháº£n há»“i Ä‘á»ƒ mÃ¬nh cáº­p nháº­t nhÃ©!&lt;/p>
&lt;p>&lt;strong>ğŸ‘‰ BÆ°á»›c tiáº¿p theo:&lt;/strong> NÃ¢ng cao kiáº¿n thá»©c vá» há»‡ thá»‘ng quáº£n lÃ½ phiÃªn báº£n (&lt;em>&lt;strong>Version Control Systems&lt;/strong>&lt;/em>) Ä‘á»ƒ theo dÃµi, quáº£n lÃ½ vÃ  cá»™ng tÃ¡c hiá»‡u quáº£ trÃªn mÃ£ nguá»“n.&lt;/p></description></item><item><title>Há»c vá» Linux &amp; Há»‡ Äiá»u HÃ nh ğŸ–¥ï¸</title><link>https://tech.nguuyen.io.vn/posts/devops/devops-step-two/</link><pubDate>Sat, 22 Feb 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/devops/devops-step-two/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/devops/devops-step-two.webp" alt="Featured image of post Há»c vá» Linux &amp; Há»‡ Äiá»u HÃ nh ğŸ–¥ï¸" />&lt;h2 id="-táº¡i-sao-linux-quan-trá»ng-trong-devops">ğŸ“Œ Táº¡i sao Linux quan trá»ng trong DevOps?
&lt;/h2>&lt;p>Linux lÃ  ná»n táº£ng cá»§a háº§u háº¿t cÃ¡c há»‡ thá»‘ng server, container (Docker, Kubernetes), vÃ  cloud. DevOps cáº§n náº¯m vá»¯ng Linux Ä‘á»ƒ:&lt;/p>
&lt;ul>
&lt;li>âœ… Quáº£n lÃ½ server hiá»‡u quáº£.&lt;/li>
&lt;li>âœ… Viáº¿t script tá»± Ä‘á»™ng hÃ³a.&lt;/li>
&lt;li>âœ… Xá»­ lÃ½ file, user, tiáº¿n trÃ¬nh.&lt;/li>
&lt;li>âœ… Tá»‘i Æ°u há»‡ thá»‘ng vÃ  báº£o máº­t.&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-há»‡-Ä‘iá»u-hÃ nh-lÃ -gÃ¬">âš™ï¸ Há»‡ Ä‘iá»u hÃ nh lÃ  gÃ¬?
&lt;/h2>&lt;p>Há»‡ Ä‘iá»u hÃ nh (OS) lÃ  pháº§n má»m quáº£n lÃ½ tÃ i nguyÃªn pháº§n cá»©ng vÃ  pháº§n má»m cá»§a mÃ¡y tÃ­nh, cung cáº¥p dá»‹ch vá»¥ chung cho cÃ¡c chÆ°Æ¡ng trÃ¬nh. NÃ³ Ä‘Ã³ng vai trÃ² trung gian giá»¯a á»©ng dá»¥ng vÃ  pháº§n cá»©ng, xá»­ lÃ½ cÃ¡c nhiá»‡m vá»¥ nhÆ°:&lt;/p>
&lt;ul>
&lt;li>ğŸ”¹ Quáº£n lÃ½ bá»™ nhá»›.&lt;/li>
&lt;li>ğŸ”¹ Láº­p lá»‹ch tiáº¿n trÃ¬nh.&lt;/li>
&lt;li>ğŸ”¹ Quáº£n lÃ½ há»‡ thá»‘ng file.&lt;/li>
&lt;li>ğŸ”¹ Kiá»ƒm soÃ¡t thiáº¿t bá»‹.&lt;/li>
&lt;/ul>
&lt;h3 id="-cÃ¡c-há»‡-Ä‘iá»u-hÃ nh-phá»•-biáº¿n">ğŸŒ CÃ¡c há»‡ Ä‘iá»u hÃ nh phá»• biáº¿n:
&lt;/h3>&lt;ul>
&lt;li>ğŸ’» &lt;strong>MÃ¡y tÃ­nh cÃ¡ nhÃ¢n&lt;/strong>: Windows, macOS, Linux (Ubuntu, Fedora,&amp;hellip;)&lt;/li>
&lt;li>ğŸ“± &lt;strong>Thiáº¿t bá»‹ di Ä‘á»™ng&lt;/strong>: iOS, Android&lt;/li>
&lt;li>ğŸ–¥ï¸ &lt;strong>MÃ¡y chá»§&lt;/strong>: Ubuntu Server, Red Hat Enterprise Linux, Windows Server&lt;/li>
&lt;/ul>
&lt;p>Má»—i há»‡ Ä‘iá»u hÃ nh cÃ³ Ä‘áº·c Ä‘iá»ƒm, giao diá»‡n vÃ  kháº£ nÄƒng tÆ°Æ¡ng thÃ­ch khÃ¡c nhau. ChÃºng Ä‘Ã³ng vai trÃ² quan trá»ng trong báº£o máº­t há»‡ thá»‘ng, tá»‘i Æ°u hiá»‡u suáº¥t vÃ  cung cáº¥p tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng nháº¥t quÃ¡n.&lt;/p>
&lt;hr>
&lt;h2 id="-cÃ¡c-lá»‡nh-linux-cÆ¡-báº£n">ğŸ› ï¸ CÃ¡c lá»‡nh Linux cÆ¡ báº£n
&lt;/h2>&lt;p>DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ lá»‡nh Linux quan trá»ng:&lt;/p>
&lt;h3 id="--kiá»ƒm-tra-há»‡-thá»‘ng">ğŸ” Kiá»ƒm tra há»‡ thá»‘ng
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">uname -a &lt;span class="c1"># Hiá»ƒn thá»‹ thÃ´ng tin há»‡ Ä‘iá»u hÃ nh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">uptime &lt;span class="c1"># Thá»i gian hoáº¡t Ä‘á»™ng cá»§a há»‡ thá»‘ng&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">free -m &lt;span class="c1"># Kiá»ƒm tra bá»™ nhá»› RAM&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="--quáº£n-lÃ½-file--thÆ°-má»¥c">ğŸ“‚ Quáº£n lÃ½ file &amp;amp; thÆ° má»¥c
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ls -l &lt;span class="c1"># Liá»‡t kÃª file vá»›i thÃ´ng tin chi tiáº¿t&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir mydir &lt;span class="c1"># Táº¡o thÆ° má»¥c má»›i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rm -rf mydir &lt;span class="c1"># XÃ³a thÆ° má»¥c vÃ  ná»™i dung bÃªn trong&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="--quáº£n-lÃ½-tiáº¿n-trÃ¬nh">ğŸš€ Quáº£n lÃ½ tiáº¿n trÃ¬nh
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">top &lt;span class="c1"># Hiá»ƒn thá»‹ tiáº¿n trÃ¬nh Ä‘ang cháº¡y&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ps aux &lt;span class="c1"># Liá»‡t kÃª táº¥t cáº£ tiáº¿n trÃ¬nh&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">kill&lt;/span> -9 PID &lt;span class="c1"># Dá»«ng tiáº¿n trÃ¬nh theo PID&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="--quáº£n-lÃ½-ngÆ°á»i-dÃ¹ng">ğŸ‘¤ Quáº£n lÃ½ ngÆ°á»i dÃ¹ng
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">whoami &lt;span class="c1"># Xem user hiá»‡n táº¡i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo useradd devops &lt;span class="c1"># Táº¡o user má»›i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo passwd devops &lt;span class="c1"># Äáº·t máº­t kháº©u cho user&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="-script-bash-kiá»ƒm-tra-tÃ i-nguyÃªn-há»‡-thá»‘ng">ğŸ“œ Script Bash kiá»ƒm tra tÃ i nguyÃªn há»‡ thá»‘ng
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;==== ThÃ´ng tin há»‡ thá»‘ng ====&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">uname -a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;==== Thá»i gian hoáº¡t Ä‘á»™ng ====&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">uptime
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;==== Bá»™ nhá»› RAM ====&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">free -m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="-cÃ¡ch-cháº¡y-script">â–¶ï¸ &lt;strong>CÃ¡ch cháº¡y script:&lt;/strong>
&lt;/h3>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">chmod +x system_check.sh &lt;span class="c1"># Cáº¥p quyá»n thá»±c thi cho script&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./system_check.sh &lt;span class="c1"># Cháº¡y script trong terminal&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="-tÃ i-nguyÃªn-há»c-táº­p">ğŸ“š TÃ i nguyÃªn há»c táº­p
&lt;/h2>&lt;p>DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ tÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu thÃªm vá» há»‡ Ä‘iá»u hÃ nh:&lt;/p>
&lt;ul>
&lt;li>ğŸ“– &lt;a class="link" href="https://en.wikipedia.org/wiki/Operating_system" target="_blank" rel="noopener"
>Operating Systems - Wiki&lt;/a>&lt;/li>
&lt;li>ğŸ“– &lt;a class="link" href="https://www.tpointtech.com/operating-system" target="_blank" rel="noopener"
>All you need to know about OS&lt;/a>&lt;/li>
&lt;li>ğŸ“– &lt;a class="link" href="https://www.tutorialspoint.com/operating_system/os_overview.htm" target="_blank" rel="noopener"
>Learn Operating Systems&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=pVzRTmdd9j0" target="_blank" rel="noopener"
>What are Operating Systems?&lt;/a>&lt;/li>
&lt;li>ğŸ¥ &lt;a class="link" href="https://www.youtube.com/watch?v=vBURTt97EkA&amp;amp;list=PLBlnK6fEyqRiVhbXDGLXDk_OQAeuVcp2O" target="_blank" rel="noopener"
>Operating Systems&lt;/a>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="-káº¿t-luáº­n">ğŸ¯ Káº¿t luáº­n
&lt;/h2>&lt;ul>
&lt;li>âœ… Linux lÃ  ká»¹ nÄƒng báº¯t buá»™c trong DevOps.&lt;/li>
&lt;li>âœ… Há»c cÃ¡ch dÃ¹ng terminal &amp;amp; Bash scripting.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>ğŸ‘‰ BÆ°á»›c tiáº¿p theo:&lt;/strong> TÃ¬m hiá»ƒu sÃ¢u hÆ¡n vá» &lt;em>&lt;strong>terminal vÃ  cÃ¡ch sá»­ dá»¥ng CLI&lt;/strong>&lt;/em> Ä‘á»ƒ lÃ m viá»‡c hiá»‡u quáº£ vá»›i há»‡ thá»‘ng.&lt;/p></description></item><item><title>Chá»n ngÃ´n ngá»¯ láº­p trÃ¬nh ğŸ¤—</title><link>https://tech.nguuyen.io.vn/posts/devops/devops-step-one/</link><pubDate>Fri, 21 Feb 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/devops/devops-step-one/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/devops/devops-step-one.webp" alt="Featured image of post Chá»n ngÃ´n ngá»¯ láº­p trÃ¬nh ğŸ¤—" />&lt;h2 id="-táº¡i-sao-cáº§n-chá»n-ngÃ´n-ngá»¯-láº­p-trÃ¬nh">ğŸ“Œ Táº¡i sao cáº§n chá»n ngÃ´n ngá»¯ láº­p trÃ¬nh?
&lt;/h2>&lt;p>Trong DevOps, báº¡n sáº½ cáº§n sá»­ dá»¥ng ngÃ´n ngá»¯ láº­p trÃ¬nh Ä‘á»ƒ:&lt;/p>
&lt;ul>
&lt;li>âœ… Viáº¿t script tá»± Ä‘á»™ng hÃ³a.&lt;/li>
&lt;li>âœ… Quáº£n lÃ½ server vÃ  cloud.&lt;/li>
&lt;li>âœ… Táº¡o tool há»— trá»£ CI/CD.&lt;/li>
&lt;li>âœ… XÃ¢y dá»±ng vÃ  triá»ƒn khai háº¡ táº§ng dÆ°á»›i dáº¡ng code (Infrastructure as Code - IaC).&lt;/li>
&lt;/ul>
&lt;p>Viá»‡c chá»n ngÃ´n ngá»¯ phÃ¹ há»£p giÃºp báº¡n lÃ m viá»‡c hiá»‡u quáº£ hÆ¡n vá»›i há»‡ thá»‘ng, tá»± Ä‘á»™ng hÃ³a nhiá»u quy trÃ¬nh vÃ  cáº£i thiá»‡n tá»‘c Ä‘á»™ phÃ¡t triá»ƒn pháº§n má»m.&lt;/p>
&lt;h2 id="-ngÃ´n-ngá»¯-phÃ¹-há»£p-cho-devops">ğŸ”¥ NgÃ´n ngá»¯ phÃ¹ há»£p cho DevOps
&lt;/h2>&lt;h3 id="-python-khuyáº¿n-nghá»‹-chÃ­nh">ğŸ Python (Khuyáº¿n nghá»‹ chÃ­nh)
&lt;/h3>&lt;h4 id="-lÃ½-do-chá»n-python">&lt;strong>ğŸ”¹ LÃ½ do chá»n Python:&lt;/strong>
&lt;/h4>&lt;ul>
&lt;li>CÃº phÃ¡p dá»… Ä‘á»c, dá»… há»c.&lt;/li>
&lt;li>ThÆ° viá»‡n phong phÃº há»— trá»£ tá»± Ä‘á»™ng hÃ³a nhÆ° &lt;code>fabric&lt;/code>, &lt;code>paramiko&lt;/code>, &lt;code>boto3&lt;/code> (AWS SDK), &lt;code>pyinfra&lt;/code>.&lt;/li>
&lt;li>Há»— trá»£ máº¡nh máº½ trong quáº£n lÃ½ Cloud (AWS, GCP, Azure).&lt;/li>
&lt;/ul>
&lt;h4 id="-á»©ng-dá»¥ng-thá»±c-táº¿">&lt;strong>ğŸ”¹ á»¨ng dá»¥ng thá»±c táº¿:&lt;/strong>
&lt;/h4>&lt;ul>
&lt;li>Viáº¿t script deploy code tá»± Ä‘á»™ng.&lt;/li>
&lt;li>Táº¡o bot quáº£n lÃ½ server.&lt;/li>
&lt;li>XÃ¢y dá»±ng API quáº£n lÃ½ há»‡ thá»‘ng.&lt;/li>
&lt;/ul>
&lt;h4 id="-vÃ­-dá»¥-script-ssh-tá»±-Ä‘á»™ng-deploy-vá»›i-paramiko">&lt;strong>ğŸ“ VÃ­ dá»¥: Script SSH tá»± Ä‘á»™ng deploy vá»›i Paramiko&lt;/strong>
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="nn">paramiko&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">deploy_code&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">host&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">user&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">password&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">command&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">client&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">paramiko&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">SSHClient&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">client&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">set_missing_host_key_policy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">paramiko&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">AutoAddPolicy&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">client&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">connect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">hostname&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">host&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">username&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">password&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">password&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">stdin&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">stdout&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">stderr&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">client&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exec_command&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">stdout&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">read&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">decode&lt;/span>&lt;span class="p">())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">client&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">close&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">deploy_code&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;192.168.1.100&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;ubuntu&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;yourpassword&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;git pull origin main &amp;amp;&amp;amp; systemctl restart app&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h3 id="-bash-cáº§n-biáº¿t-cÆ¡-báº£n">ğŸ–¥ï¸ Bash (Cáº§n biáº¿t cÆ¡ báº£n)
&lt;/h3>&lt;h4 id="-lÃ½-do-chá»n-bash">&lt;strong>ğŸ”¹ LÃ½ do chá»n Bash:&lt;/strong>
&lt;/h4>&lt;ul>
&lt;li>LÃ  shell script phá»• biáº¿n nháº¥t trÃªn Linux.&lt;/li>
&lt;li>GiÃºp báº¡n thao tÃ¡c nhanh vá»›i há»‡ thá»‘ng.&lt;/li>
&lt;li>Tá»‘i Æ°u cho quáº£n lÃ½ server vÃ  tá»± Ä‘á»™ng hÃ³a task nhá».&lt;/li>
&lt;/ul>
&lt;h4 id="-á»©ng-dá»¥ng-thá»±c-táº¿-1">&lt;strong>ğŸ”¹ á»¨ng dá»¥ng thá»±c táº¿:&lt;/strong>
&lt;/h4>&lt;ul>
&lt;li>Viáº¿t script tá»± Ä‘á»™ng update server.&lt;/li>
&lt;li>Táº¡o cron job cháº¡y Ä‘á»‹nh ká»³.&lt;/li>
&lt;li>Quáº£n lÃ½ user vÃ  permission trÃªn Linux.&lt;/li>
&lt;/ul>
&lt;h4 id="-vÃ­-dá»¥-script-tá»±-Ä‘á»™ng-update-server">&lt;strong>ğŸ“ VÃ­ dá»¥: Script tá»± Ä‘á»™ng update server&lt;/strong>
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#!/bin/bash
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>sudo apt update &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> sudo apt upgrade -y
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h3 id="-go-golang-náº¿u-lÃ m-vá»›i-kubernetes">ğŸš€ Go (Golang) (Náº¿u lÃ m vá»›i Kubernetes)
&lt;/h3>&lt;h4 id="-lÃ½-do-chá»n-go">&lt;strong>ğŸ”¹ LÃ½ do chá»n Go:&lt;/strong>
&lt;/h4>&lt;ul>
&lt;li>Hiá»‡u suáº¥t cao, dá»… dÃ ng biÃªn dá»‹ch thÃ nh binary nhá» gá»n.&lt;/li>
&lt;li>Kubernetes vÃ  nhiá»u cÃ´ng cá»¥ DevOps nhÆ° Terraform Ä‘Æ°á»£c viáº¿t báº±ng Go.&lt;/li>
&lt;/ul>
&lt;h4 id="-á»©ng-dá»¥ng-thá»±c-táº¿-2">&lt;strong>ğŸ”¹ á»¨ng dá»¥ng thá»±c táº¿:&lt;/strong>
&lt;/h4>&lt;ul>
&lt;li>Viáº¿t tool quáº£n lÃ½ container.&lt;/li>
&lt;li>Táº¡o plugin cho Kubernetes.&lt;/li>
&lt;li>XÃ¢y dá»±ng cÃ¡c cÃ´ng cá»¥ DevOps riÃªng.&lt;/li>
&lt;/ul>
&lt;h4 id="-vÃ­-dá»¥-in-ra-thÃ´ng-tin-há»‡-thá»‘ng-báº±ng-go">&lt;strong>ğŸ“ VÃ­ dá»¥: In ra thÃ´ng tin há»‡ thá»‘ng báº±ng Go&lt;/strong>
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;os&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">hostname&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Hostname&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Hostname:&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">hostname&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h3 id="-groovy-náº¿u-lÃ m-viá»‡c-vá»›i-jenkins">âš™ï¸ Groovy (Náº¿u lÃ m viá»‡c vá»›i Jenkins)
&lt;/h3>&lt;h4 id="-lÃ½-do-chá»n-groovy">&lt;strong>ğŸ”¹ LÃ½ do chá»n Groovy:&lt;/strong>
&lt;/h4>&lt;ul>
&lt;li>LÃ  ngÃ´n ngá»¯ chÃ­nh Ä‘á»ƒ viáº¿t pipeline trong Jenkins.&lt;/li>
&lt;li>CÃº phÃ¡p linh hoáº¡t, dá»… dÃ ng má»Ÿ rá»™ng vÃ  tÃ­ch há»£p vá»›i Java.&lt;/li>
&lt;/ul>
&lt;h4 id="-á»©ng-dá»¥ng-thá»±c-táº¿-3">&lt;strong>ğŸ”¹ á»¨ng dá»¥ng thá»±c táº¿:&lt;/strong>
&lt;/h4>&lt;ul>
&lt;li>Viáº¿t pipeline CI/CD cho Jenkins.&lt;/li>
&lt;li>Táº¡o script quáº£n lÃ½ há»‡ thá»‘ng.&lt;/li>
&lt;li>Tá»± Ä‘á»™ng hÃ³a cÃ¡c bÆ°á»›c build, test, deploy.&lt;/li>
&lt;/ul>
&lt;h4 id="-vÃ­-dá»¥-pipeline-cÆ¡-báº£n-trong-jenkinsfile">&lt;strong>ğŸ“ VÃ­ dá»¥: Pipeline cÆ¡ báº£n trong Jenkinsfile&lt;/strong>
&lt;/h4>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-groovy" data-lang="groovy">&lt;span class="line">&lt;span class="cl">&lt;span class="n">pipeline&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">agent&lt;/span> &lt;span class="n">any&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">stages&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">stage&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s1">&amp;#39;Build&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">steps&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">echo&lt;/span> &lt;span class="s1">&amp;#39;Building the project...&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sh&lt;/span> &lt;span class="s1">&amp;#39;mvn clean package&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">stage&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s1">&amp;#39;Test&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">steps&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">echo&lt;/span> &lt;span class="s1">&amp;#39;Running tests...&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sh&lt;/span> &lt;span class="s1">&amp;#39;mvn test&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">stage&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s1">&amp;#39;Deploy&amp;#39;&lt;/span>&lt;span class="o">)&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">steps&lt;/span> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">echo&lt;/span> &lt;span class="s1">&amp;#39;Deploying application...&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sh&lt;/span> &lt;span class="s1">&amp;#39;./deploy.sh&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;h2 id="-káº¿t-luáº­n">ğŸ¯ Káº¿t luáº­n
&lt;/h2>&lt;ul>
&lt;li>âœ… &lt;strong>Python + Bash&lt;/strong> lÃ  lá»±a chá»n tá»‘t nháº¥t Ä‘á»ƒ báº¯t Ä‘áº§u DevOps.&lt;/li>
&lt;li>âœ… Náº¿u lÃ m viá»‡c vá»›i &lt;strong>Kubernetes&lt;/strong>, há»c thÃªm &lt;strong>Go&lt;/strong>.&lt;/li>
&lt;li>âœ… Náº¿u lÃ m viá»‡c vá»›i &lt;strong>Jenkins&lt;/strong>, há»c &lt;strong>Groovy&lt;/strong> Ä‘á»ƒ viáº¿t pipeline.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>ğŸ‘‰ BÆ°á»›c tiáº¿p theo:&lt;/strong> Há»c cÆ¡ báº£n vá» &lt;em>&lt;strong>Linux &amp;amp; há»‡ Ä‘iá»u hÃ nh&lt;/strong>&lt;/em>.&lt;/p></description></item><item><title>Lá»™ trÃ¬nh trá»Ÿ thÃ nh DevOps engineer ğŸ˜</title><link>https://tech.nguuyen.io.vn/posts/devops/devops-roadmap/</link><pubDate>Thu, 20 Feb 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/devops/devops-roadmap/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/devops/devops-roadmap.webp" alt="Featured image of post Lá»™ trÃ¬nh trá»Ÿ thÃ nh DevOps engineer ğŸ˜" />&lt;h2 id="hiá»ƒu-vá»-devops">Hiá»ƒu vá» DevOps
&lt;/h2>&lt;blockquote>
&lt;p>&lt;strong>DevOps&lt;/strong> lÃ  sá»± káº¿t há»£p giá»¯a phÃ¡t triá»ƒn pháº§n má»m (development) vÃ  váº­n hÃ nh há»‡ thá»‘ng (operations), nháº±m tÄƒng cÆ°á»ng sá»± há»£p tÃ¡c vÃ  tá»± Ä‘á»™ng hÃ³a trong quy trÃ¬nh phÃ¡t triá»ƒn vÃ  triá»ƒn khai pháº§n má»m.&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://www.simform.com/wp-content/uploads/2022/01/what-is-devops-lifecycle.webp"
loading="lazy"
alt="DevOps lifecycle"
>&lt;/p>
&lt;hr>
&lt;h2 id="há»c-má»™t-ngÃ´n-ngá»¯-láº­p-trÃ¬nh">Há»c má»™t ngÃ´n ngá»¯ láº­p trÃ¬nh
&lt;/h2>&lt;p>Viá»‡c thÃ nh tháº¡o Ã­t nháº¥t má»™t ngÃ´n ngá»¯ láº­p trÃ¬nh lÃ  cáº§n thiáº¿t Ä‘á»ƒ tá»± Ä‘á»™ng hÃ³a vÃ  quáº£n lÃ½ há»‡ thá»‘ng hiá»‡u quáº£.&lt;/p>
&lt;p>&lt;strong>NgÃ´n ngá»¯ phá»• biáº¿n&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Python&lt;/strong>&lt;/li>
&lt;li>&lt;strong>Go&lt;/strong>&lt;/li>
&lt;li>&lt;strong>Ruby&lt;/strong>&lt;/li>
&lt;/ul>
&lt;div style="display: flex; justify-content: center; align-items: center; gap: 20px;">
&lt;img src="https://upload.wikimedia.org/wikipedia/commons/c/c3/Python-logo-notext.svg" width="80" height="80">
&lt;img src="https://upload.wikimedia.org/wikipedia/commons/0/05/Go_Logo_Blue.svg" width="80" height="80">
&lt;img src="https://upload.wikimedia.org/wikipedia/commons/7/73/Ruby_logo.svg" width="80" height="80">
&lt;/div>
&lt;hr>
&lt;h2 id="náº¯m-vá»¯ng-kiáº¿n-thá»©c-vá»-há»‡-Ä‘iá»u-hÃ nh">Náº¯m vá»¯ng kiáº¿n thá»©c vá» há»‡ Ä‘iá»u hÃ nh
&lt;/h2>&lt;ul>
&lt;li>&lt;strong>Linux&lt;/strong>: Há»‡ Ä‘iá»u hÃ nh phá»• biáº¿n trong mÃ´i trÆ°á»ng server.&lt;/li>
&lt;li>&lt;strong>Windows&lt;/strong>: Quan trá»ng trong cÃ¡c doanh nghiá»‡p sá»­ dá»¥ng háº¡ táº§ng Microsoft.&lt;/li>
&lt;/ul>
&lt;p align="center">
&lt;img src="https://upload.wikimedia.org/wikipedia/commons/3/35/Tux.svg" width="100" height="100">
&lt;/p>
&lt;hr>
&lt;h2 id="tÃ¬m-hiá»ƒu-vá»-máº¡ng-mÃ¡y-tÃ­nh-vÃ -báº£o-máº­t">TÃ¬m hiá»ƒu vá» máº¡ng mÃ¡y tÃ­nh vÃ  báº£o máº­t
&lt;/h2>&lt;p>CÃ¡c chá»§ Ä‘á» cáº§n quan tÃ¢m:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Giao thá»©c máº¡ng&lt;/strong>: HTTP, HTTPS, FTP, TCP/IP.&lt;/li>
&lt;li>&lt;strong>Báº£o máº­t máº¡ng&lt;/strong>: TÆ°á»ng lá»­a, VPN, SSL/TLS.&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="sá»­-dá»¥ng-cÃ¡c-cÃ´ng-cá»¥-quáº£n-lÃ½-mÃ£-nguá»“n">Sá»­ dá»¥ng cÃ¡c cÃ´ng cá»¥ quáº£n lÃ½ mÃ£ nguá»“n
&lt;/h2>&lt;p>Quáº£n lÃ½ mÃ£ nguá»“n hiá»‡u quáº£ lÃ  yáº¿u tá»‘ quan trá»ng trong DevOps.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Git&lt;/strong>: Há»‡ thá»‘ng quáº£n lÃ½ phiÃªn báº£n phá»• biáº¿n.&lt;/li>
&lt;/ul>
&lt;p align="center">
&lt;img src="https://git-scm.com/images/logos/downloads/Git-Icon-1788C.png" width="100" height="100">
&lt;/p>
&lt;hr>
&lt;h2 id="hiá»ƒu-vá»-quáº£n-lÃ½-cáº¥u-hÃ¬nh-vÃ -háº¡-táº§ng-nhÆ°-mÃ£">Hiá»ƒu vá» quáº£n lÃ½ cáº¥u hÃ¬nh vÃ  háº¡ táº§ng nhÆ° mÃ£
&lt;/h2>&lt;p>Tá»± Ä‘á»™ng hÃ³a cáº¥u hÃ¬nh giÃºp duy trÃ¬ sá»± nháº¥t quÃ¡n vÃ  hiá»‡u quáº£.&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Ansible&lt;/strong>: CÃ´ng cá»¥ tá»± Ä‘á»™ng hÃ³a.&lt;/li>
&lt;li>&lt;strong>Terraform&lt;/strong>: Quáº£n lÃ½ háº¡ táº§ng báº±ng cÃ¡ch Ä‘á»‹nh nghÄ©a nÃ³ trong mÃ£ nguá»“n.&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://upload.wikimedia.org/wikipedia/commons/0/04/Terraform_Logo.svg"
loading="lazy"
alt="Terraform logo"
>&lt;/p>
&lt;hr>
&lt;h2 id="thÃ nh-tháº¡o-containerization-vÃ -orchestration">ThÃ nh tháº¡o containerization vÃ  orchestration
&lt;/h2>&lt;ul>
&lt;li>&lt;strong>Docker&lt;/strong>: Ná»n táº£ng container phá»• biáº¿n.&lt;/li>
&lt;li>&lt;strong>Kubernetes&lt;/strong>: Há»‡ thá»‘ng Ä‘iá»u phá»‘i container máº¡nh máº½.&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://upload.wikimedia.org/wikipedia/commons/4/4e/Docker_%28container_engine%29_logo.svg"
loading="lazy"
alt="Docker logo"
>&lt;/p>
&lt;hr>
&lt;h2 id="thiáº¿t-láº­p-vÃ -quáº£n-lÃ½-cicd">Thiáº¿t láº­p vÃ  quáº£n lÃ½ CI/CD
&lt;/h2>&lt;ul>
&lt;li>&lt;strong>Jenkins&lt;/strong>: MÃ¡y chá»§ tá»± Ä‘á»™ng hÃ³a mÃ£ nguá»“n má»Ÿ.&lt;/li>
&lt;li>&lt;strong>GitLab CI/CD&lt;/strong>: Há»— trá»£ CI/CD hiá»‡u quáº£.&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="giÃ¡m-sÃ¡t-vÃ -logging">GiÃ¡m sÃ¡t vÃ  logging
&lt;/h2>&lt;ul>
&lt;li>&lt;strong>Prometheus&lt;/strong>: Há»‡ thá»‘ng giÃ¡m sÃ¡t.&lt;/li>
&lt;li>&lt;strong>ELK stack&lt;/strong>: Bá»™ cÃ´ng cá»¥ phÃ¢n tÃ­ch log.&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="tÃ¬m-hiá»ƒu-vá»-dá»‹ch-vá»¥-Ä‘Ã¡m-mÃ¢y">TÃ¬m hiá»ƒu vá» dá»‹ch vá»¥ Ä‘Ã¡m mÃ¢y
&lt;/h2>&lt;p>NhÃ  cung cáº¥p phá»• biáº¿n:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>AWS&lt;/strong>&lt;/li>
&lt;li>&lt;strong>Google Cloud&lt;/strong>&lt;/li>
&lt;li>&lt;strong>Microsoft Azure&lt;/strong>&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="káº¿t-luáº­n">Káº¿t luáº­n
&lt;/h2>&lt;p>Trá»Ÿ thÃ nh má»™t ká»¹ sÆ° DevOps Ä‘Ã²i há»i kiáº¿n thá»©c rá»™ng vÃ  ká»¹ nÄƒng thá»±c hÃ nh sÃ¢u. HÃ£y liÃªn tá»¥c há»c há»i vÃ  thá»±c hÃ nh Ä‘á»ƒ Ä‘áº¡t Ä‘Æ°á»£c má»¥c tiÃªu cá»§a báº¡n.&lt;/p>
&lt;p>&lt;em>LÆ°u Ã½: Lá»™ trÃ¬nh nÃ y Ä‘Æ°á»£c tá»•ng há»£p tá»« nhiá»u nguá»“n vÃ  kinh nghiá»‡m thá»±c táº¿, nháº±m mang Ä‘áº¿n cho báº¡n cÃ¡i nhÃ¬n tá»•ng quan vÃ  chi tiáº¿t nháº¥t vá» con Ä‘Æ°á»ng trá»Ÿ thÃ nh ká»¹ sÆ° DevOps.&lt;/em> ğŸ¯ğŸš€&lt;/p>
&lt;h1 id="devops-roadmap-2025">DevOps Roadmap 2025
&lt;/h1>&lt;p align="center">
&lt;img src="https://raw.githubusercontent.com/milanm/DevOps-Roadmap/master/DevOps%20Roadmap.png" alt="DevOps Roadmap">
&lt;/p></description></item><item><title>Devops lÃ  gÃ¬ ?</title><link>https://tech.nguuyen.io.vn/posts/devops/devops-intro/</link><pubDate>Wed, 19 Feb 2025 00:00:00 +0000</pubDate><guid>https://tech.nguuyen.io.vn/posts/devops/devops-intro/</guid><description>&lt;img src="https://tech.nguuyen.io.vn/images/devops/devops-intro.webp" alt="Featured image of post Devops lÃ  gÃ¬ ?" />&lt;h2 id="giá»›i-thiá»‡u-vá»-devops">Giá»›i thiá»‡u vá» DevOps?
&lt;/h2>&lt;p>DevOps lÃ  má»™t phÆ°Æ¡ng phÃ¡p káº¿t há»£p giá»¯a &lt;strong>phÃ¡t triá»ƒn pháº§n má»m (Development - Dev)&lt;/strong> vÃ  &lt;strong>váº­n hÃ nh há»‡ thá»‘ng (Operations - Ops)&lt;/strong> nháº±m tá»‘i Æ°u hÃ³a quÃ¡ trÃ¬nh phÃ¡t triá»ƒn, triá»ƒn khai vÃ  váº­n hÃ nh á»©ng dá»¥ng. DevOps giÃºp cÃ¡c nhÃ³m phÃ¡t triá»ƒn vÃ  váº­n hÃ nh lÃ m viá»‡c cÃ¹ng nhau hiá»‡u quáº£ hÆ¡n thÃ´ng qua cÃ¡c cÃ´ng cá»¥, quy trÃ¬nh tá»± Ä‘á»™ng vÃ  vÄƒn hÃ³a lÃ m viá»‡c.&lt;/p>
&lt;h2 id="vÃ¬-sao-devops-quan-trá»ng">VÃ¬ sao DevOps quan trá»ng?
&lt;/h2>&lt;h3 id="tÄƒng-tá»‘c-Ä‘á»™-phÃ¡t-triá»ƒn">TÄƒng tá»‘c Ä‘á»™ phÃ¡t triá»ƒn
&lt;/h3>&lt;p>DevOps giÃºp tá»± Ä‘á»™ng hÃ³a cÃ¡c quy trÃ¬nh nhÆ° kiá»ƒm thá»­, triá»ƒn khai vÃ  giÃ¡m sÃ¡t, giÃºp rÃºt ngáº¯n thá»i gian Ä‘Æ°a sáº£n pháº©m ra thá»‹ trÆ°á»ng.&lt;/p>
&lt;h3 id="cáº£i-thiá»‡n-cháº¥t-lÆ°á»£ng-sáº£n-pháº©m">Cáº£i thiá»‡n cháº¥t lÆ°á»£ng sáº£n pháº©m
&lt;/h3>&lt;p>Viá»‡c tÃ­ch há»£p kiá»ƒm thá»­ tá»± Ä‘á»™ng vÃ  CI/CD giÃºp phÃ¡t hiá»‡n lá»—i sá»›m, giáº£m thiá»ƒu rá»§i ro khi triá»ƒn khai pháº§n má»m.&lt;/p>
&lt;h3 id="tÄƒng-cÆ°á»ng-Ä‘á»™-tin-cáº­y">TÄƒng cÆ°á»ng Ä‘á»™ tin cáº­y
&lt;/h3>&lt;p>CÃ¡c cÃ´ng cá»¥ giÃ¡m sÃ¡t vÃ  logging giÃºp phÃ¡t hiá»‡n sá»± cá»‘ nhanh chÃ³ng, giáº£m downtime vÃ  Ä‘áº£m báº£o há»‡ thá»‘ng luÃ´n hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh.&lt;/p>
&lt;h3 id="há»£p-tÃ¡c-tá»‘t-hÆ¡n-giá»¯a-cÃ¡c-nhÃ³m">Há»£p tÃ¡c tá»‘t hÆ¡n giá»¯a cÃ¡c nhÃ³m
&lt;/h3>&lt;p>DevOps giÃºp phÃ¡ bá» rÃ o cáº£n giá»¯a nhÃ³m phÃ¡t triá»ƒn vÃ  váº­n hÃ nh, táº¡o mÃ´i trÆ°á»ng lÃ m viá»‡c chung hiá»‡u quáº£ hÆ¡n.&lt;/p>
&lt;h2 id="cÃ¡c-thÃ nh-pháº§n-chÃ­nh-cá»§a-devops">CÃ¡c thÃ nh pháº§n chÃ­nh cá»§a DevOps
&lt;/h2>&lt;h3 id="cicd-continuous-integration--continuous-deployment">&lt;strong>CI/CD (Continuous Integration &amp;amp; Continuous Deployment)&lt;/strong>
&lt;/h3>&lt;p>CI/CD giÃºp tá»± Ä‘á»™ng hÃ³a quÃ¡ trÃ¬nh tÃ­ch há»£p mÃ£ nguá»“n, kiá»ƒm thá»­ vÃ  triá»ƒn khai, giáº£m thiá»ƒu lá»—i khi Ä‘Æ°a sáº£n pháº©m lÃªn mÃ´i trÆ°á»ng production.&lt;/p>
&lt;h3 id="infrastructure-as-code-iac">&lt;strong>Infrastructure as Code (IaC)&lt;/strong>
&lt;/h3>&lt;p>IaC cho phÃ©p quáº£n lÃ½ háº¡ táº§ng nhÆ° code, giÃºp dá»… dÃ ng triá»ƒn khai vÃ  má»Ÿ rá»™ng há»‡ thá»‘ng.&lt;/p>
&lt;h3 id="giÃ¡m-sÃ¡t-vÃ -logging">&lt;strong>GiÃ¡m sÃ¡t vÃ  Logging&lt;/strong>
&lt;/h3>&lt;p>CÃ¡c cÃ´ng cá»¥ nhÆ° Prometheus, Grafana, ELK Stack giÃºp giÃ¡m sÃ¡t vÃ  phÃ¢n tÃ­ch log Ä‘á»ƒ nhanh chÃ³ng xá»­ lÃ½ sá»± cá»‘.&lt;/p>
&lt;h3 id="containerization-vÃ -orchestration">&lt;strong>Containerization vÃ  Orchestration&lt;/strong>
&lt;/h3>&lt;p>Docker vÃ  Kubernetes giÃºp Ä‘Ã³ng gÃ³i, quáº£n lÃ½ vÃ  má»Ÿ rá»™ng á»©ng dá»¥ng linh hoáº¡t.&lt;/p>
&lt;h2 id="cÃ¡c-cÃ´ng-cá»¥-phá»•-biáº¿n-trong-devops">CÃ¡c cÃ´ng cá»¥ phá»• biáº¿n trong DevOps
&lt;/h2>&lt;ul>
&lt;li>&lt;strong>CI/CD:&lt;/strong> Jenkins, GitHub Actions, GitLab CI/CD&lt;/li>
&lt;li>&lt;strong>IaC:&lt;/strong> Terraform, Ansible, CloudFormation&lt;/li>
&lt;li>&lt;strong>GiÃ¡m sÃ¡t:&lt;/strong> Prometheus, Grafana, ELK Stack&lt;/li>
&lt;li>&lt;strong>Container &amp;amp; Orchestration:&lt;/strong> Docker, Kubernetes&lt;/li>
&lt;li>&lt;strong>Quáº£n lÃ½ mÃ£ nguá»“n:&lt;/strong> Git, GitHub, GitLab&lt;/li>
&lt;/ul>
&lt;h2 id="káº¿t-luáº­n">Káº¿t luáº­n
&lt;/h2>&lt;p>DevOps lÃ  má»™t phÆ°Æ¡ng phÃ¡p quan trá»ng giÃºp cáº£i thiá»‡n tá»‘c Ä‘á»™ phÃ¡t triá»ƒn, cháº¥t lÆ°á»£ng sáº£n pháº©m vÃ  tá»‘i Æ°u hÃ³a váº­n hÃ nh há»‡ thá»‘ng. Trong cÃ¡c bÃ i viáº¿t tiáº¿p theo cá»§a series, chÃºng ta sáº½ tÃ¬m hiá»ƒu sÃ¢u hÆ¡n vá» tá»«ng khÃ­a cáº¡nh cá»§a DevOps, tá»« CI/CD, Infrastructure as Code Ä‘áº¿n giÃ¡m sÃ¡t há»‡ thá»‘ng.&lt;/p>
&lt;h2 id="vÃ­-dá»¥-vá»-docker">VÃ­ dá»¥ vá» Docker
&lt;/h2>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">Sá»­&lt;/span> &lt;span class="nx">dá»¥ng&lt;/span> &lt;span class="nx">Node&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">js&lt;/span> &lt;span class="nx">lÃ m&lt;/span> &lt;span class="nx">ná»n&lt;/span> &lt;span class="nx">táº£ng&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">FROM&lt;/span> &lt;span class="nx">node&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="mi">18&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">Äáº·t&lt;/span> &lt;span class="nx">thÆ°&lt;/span> &lt;span class="nx">má»¥c&lt;/span> &lt;span class="nx">lÃ m&lt;/span> &lt;span class="nx">viá»‡c&lt;/span> &lt;span class="nx">trong&lt;/span> &lt;span class="nx">container&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">WORKDIR&lt;/span> &lt;span class="o">/&lt;/span>&lt;span class="nx">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">Sao&lt;/span> &lt;span class="nx">chÃ©p&lt;/span> &lt;span class="nx">file&lt;/span> &lt;span class="kr">package&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span> &lt;span class="nx">vÃ &lt;/span> &lt;span class="nx">cÃ i&lt;/span> &lt;span class="nx">Ä‘áº·t&lt;/span> &lt;span class="nx">dependencies&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">COPY&lt;/span> &lt;span class="kr">package&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">json&lt;/span> &lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">RUN&lt;/span> &lt;span class="nx">npm&lt;/span> &lt;span class="nx">install&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">Sao&lt;/span> &lt;span class="nx">chÃ©p&lt;/span> &lt;span class="nx">toÃ n&lt;/span> &lt;span class="nx">bá»™&lt;/span> &lt;span class="nx">mÃ£&lt;/span> &lt;span class="nx">nguá»“n&lt;/span> &lt;span class="nx">vÃ o&lt;/span> &lt;span class="nx">container&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">COPY&lt;/span> &lt;span class="p">.&lt;/span> &lt;span class="p">.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">Má»Ÿ&lt;/span> &lt;span class="nx">cá»•ng&lt;/span> &lt;span class="mi">3000&lt;/span> &lt;span class="nx">cho&lt;/span> &lt;span class="nx">á»©ng&lt;/span> &lt;span class="nx">dá»¥ng&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">EXPOSE&lt;/span> &lt;span class="mi">3000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span> &lt;span class="nx">Lá»‡nh&lt;/span> &lt;span class="nx">cháº¡y&lt;/span> &lt;span class="nx">á»©ng&lt;/span> &lt;span class="nx">dá»¥ng&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">CMD&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;npm&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;start&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;p>ğŸ’¡ &lt;strong>HÃ£y theo dÃµi blog Ä‘á»ƒ cáº­p nháº­t cÃ¡c bÃ i viáº¿t má»›i nháº¥t vá» DevOps!&lt;/strong>&lt;/p></description></item></channel></rss>