[{"content":"Docker Compose v2 - CÃ´ng cá»¥ quáº£n lÃ½ multi-container Docker Compose lÃ  cÃ´ng cá»¥ giÃºp báº¡n Ä‘á»‹nh nghÄ©a vÃ  cháº¡y nhiá»u container cÃ¹ng lÃºc thÃ´ng qua file YAML. PhiÃªn báº£n v2 mang Ä‘áº¿n nhiá»u cáº£i tiáº¿n vá» hiá»‡u suáº¥t vÃ  tÃ­nh nÄƒng má»›i.\nI. CÃ i Ä‘áº·t vÃ  chuáº©n bá»‹ 1. Kiá»ƒm tra phiÃªn báº£n Docker Compose 1 2 3 4 5 # Kiá»ƒm tra phiÃªn báº£n hiá»‡n táº¡i docker compose version # Output mong muá»‘n (v2.x.x) Docker Compose version v2.24.5 2. Cáº¥u trÃºc project cÆ¡ báº£n 1 2 3 4 5 6 7 8 my-app/ â”œâ”€â”€ docker-compose.yml â”œâ”€â”€ .env â”œâ”€â”€ app/ â”‚ â”œâ”€â”€ Dockerfile â”‚ â””â”€â”€ src/ â””â”€â”€ nginx/ â””â”€â”€ nginx.conf II. CÃº phÃ¡p Docker Compose v2 1. File docker-compose.yml cÆ¡ báº£n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 version: \u0026#34;3.8\u0026#34; services: web: build: . ports: - \u0026#34;3000:3000\u0026#34; environment: - NODE_ENV=development volumes: - .:/app - /app/node_modules depends_on: - db db: image: postgres:15 environment: POSTGRES_DB: myapp POSTGRES_USER: user POSTGRES_PASSWORD: password volumes: - postgres_data:/var/lib/postgresql/data ports: - \u0026#34;5432:5432\u0026#34; volumes: postgres_data: 2. Sá»­ dá»¥ng file .env 1 2 3 4 5 6 7 # .env file NODE_ENV=development DB_HOST=db DB_PORT=5432 DB_NAME=myapp DB_USER=user DB_PASSWORD=password 1 2 3 4 5 6 7 # docker-compose.yml services: web: environment: - NODE_ENV=${NODE_ENV} - DB_HOST=${DB_HOST} - DB_PORT=${DB_PORT} III. Best Practices cho Docker Compose v2 1. Quáº£n lÃ½ Networks 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 version: \u0026#34;3.8\u0026#34; services: frontend: build: ./frontend networks: - frontend-network backend: build: ./backend networks: - frontend-network - backend-network database: image: postgres:15 networks: - backend-network networks: frontend-network: driver: bridge backend-network: driver: bridge 2. Health Checks 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 services: web: build: . healthcheck: test: [\u0026#34;CMD\u0026#34;, \u0026#34;curl\u0026#34;, \u0026#34;-f\u0026#34;, \u0026#34;http://localhost:3000/health\u0026#34;] interval: 30s timeout: 10s retries: 3 start_period: 40s db: image: postgres:15 healthcheck: test: [\u0026#34;CMD-SHELL\u0026#34;, \u0026#34;pg_isready -U ${POSTGRES_USER}\u0026#34;] interval: 10s timeout: 5s retries: 5 3. Resource Limits 1 2 3 4 5 6 7 8 9 10 11 services: web: build: . deploy: resources: limits: cpus: \u0026#34;0.5\u0026#34; memory: 512M reservations: cpus: \u0026#34;0.25\u0026#34; memory: 256M IV. CÃ¡c lá»‡nh Docker Compose v2 thÆ°á»ng dÃ¹ng 1. Lá»‡nh cÆ¡ báº£n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 # Khá»Ÿi cháº¡y services (detached mode) docker compose up -d # Xem logs docker compose logs -f # Dá»«ng services docker compose down # Rebuild vÃ  restart docker compose up --build -d # Xem tráº¡ng thÃ¡i services docker compose ps 2. Lá»‡nh nÃ¢ng cao 1 2 3 4 5 6 7 8 9 10 11 # Cháº¡y lá»‡nh trong container docker compose exec web bash # Scale service docker compose up --scale web=3 -d # Xem resource usage docker compose top # Validate compose file docker compose config V. VÃ­ dá»¥ thá»±c táº¿: Web App vá»›i Database 1. Node.js + PostgreSQL + Redis 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 version: \u0026#34;3.8\u0026#34; services: app: build: context: . dockerfile: Dockerfile ports: - \u0026#34;3000:3000\u0026#34; environment: - NODE_ENV=development - DATABASE_URL=postgresql://user:password@db:5432/myapp - REDIS_URL=redis://redis:6379 volumes: - .:/app - /app/node_modules depends_on: db: condition: service_healthy redis: condition: service_started restart: unless-stopped db: image: postgres:15-alpine environment: POSTGRES_DB: myapp POSTGRES_USER: user POSTGRES_PASSWORD: password volumes: - postgres_data:/var/lib/postgresql/data - ./init.sql:/docker-entrypoint-initdb.d/init.sql healthcheck: test: [\u0026#34;CMD-SHELL\u0026#34;, \u0026#34;pg_isready -U user\u0026#34;] interval: 10s timeout: 5s retries: 5 restart: unless-stopped redis: image: redis:7-alpine command: redis-server --appendonly yes volumes: - redis_data:/data restart: unless-stopped nginx: image: nginx:alpine ports: - \u0026#34;80:80\u0026#34; volumes: - ./nginx.conf:/etc/nginx/nginx.conf depends_on: - app restart: unless-stopped volumes: postgres_data: redis_data: 2. File nginx.conf 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 events { worker_connections 1024; } http { upstream app { server app:3000; } server { listen 80; location / { proxy_pass http://app; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; } } } VI. Override vÃ  Multiple Environments 1. docker-compose.override.yml 1 2 3 4 5 6 7 8 9 # docker-compose.override.yml (tá»± Ä‘á»™ng load) version: \u0026#34;3.8\u0026#34; services: app: volumes: - .:/app environment: - DEBUG=true 2. Environment-specific files 1 2 3 4 5 # Development docker compose -f docker-compose.yml -f docker-compose.dev.yml up -d # Production docker compose -f docker-compose.yml -f docker-compose.prod.yml up -d 1 2 3 4 5 6 7 8 9 10 11 12 # docker-compose.prod.yml version: \u0026#34;3.8\u0026#34; services: app: restart: always deploy: resources: limits: memory: 1G environment: - NODE_ENV=production Ghi chÃº triá»ƒn khai Khi Ã¡p dá»¥ng vÃ o dá»± Ã¡n cá»§a báº¡n, hÃ£y lÆ°u Ã½ cÃ¡c Ä‘iá»ƒm quan trá»ng: LuÃ´n sá»­ dá»¥ng .env file cho sensitive data Implement health checks cho critical services Sá»­ dá»¥ng named volumes cho persistent data Cáº¥u hÃ¬nh restart policies phÃ¹ há»£p Best practices: TÃ¡ch biá»‡t networks cho security Sá»­ dá»¥ng specific image tags thay vÃ¬ latest Implement proper logging strategy Troubleshooting: Sá»­ dá»¥ng docker compose logs Ä‘á»ƒ debug Kiá»ƒm tra docker compose config trÆ°á»›c khi deploy Monitor resource usage vá»›i docker compose top ğŸ¯ Lá»i káº¿t Docker Compose v2 lÃ  cÃ´ng cá»¥ máº¡nh máº½ giÃºp báº¡n quáº£n lÃ½ multi-container applications má»™t cÃ¡ch dá»… dÃ ng. Vá»›i cÃ¡c best practices trÃªn, báº¡n cÃ³ thá»ƒ xÃ¢y dá»±ng vÃ  triá»ƒn khai á»©ng dá»¥ng má»™t cÃ¡ch chuyÃªn nghiá»‡p vÃ  hiá»‡u quáº£! ğŸš€\nHÃ£y thá»­ nghiá»‡m vá»›i cÃ¡c vÃ­ dá»¥ trÃªn vÃ  dáº§n dáº§n Ã¡p dá»¥ng vÃ o dá»± Ã¡n thá»±c táº¿ cá»§a báº¡n. ğŸ˜Š\n","date":"2026-02-04T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/docker/docker-compose-v2.webp","permalink":"https://tech.nguuyen.io.vn/posts/docker/docker-compose-v2-best-practices/","title":"Docker Compose cho ngÆ°á»i má»›i (v2) â€” Thá»±c hÃ nh"},{"content":"Docker Image vÃ  Container - Hai khÃ¡i niá»‡m thiáº¿t yáº¿u Khi báº¯t Ä‘áº§u vá»›i Docker, hai khÃ¡i niá»‡m quan trá»ng nháº¥t báº¡n cáº§n hiá»ƒu lÃ  Image vÃ  Container. Nhiá»u ngÆ°á»i má»›i thÆ°á»ng nháº§m láº«n giá»¯a chÃºng, nhÆ°ng thá»±c cháº¥t chÃºng Ä‘Ã³ng vai trÃ² khÃ¡c nhau trong há»‡ sinh thÃ¡i Docker. Image giá»‘ng nhÆ° kho chá»©a recipe (lÃ m cÃ´ng thá»©c), cÃ²n Container lÃ  thá»±c táº¿ thá»±c thi (mÃ³n Äƒn Ä‘Æ°á»£c chuáº©n bá»‹). ğŸ³\nTrong bÃ i viáº¿t nÃ y, tÃ´i sáº½ giáº£i thÃ­ch chi tiáº¿t sá»± khÃ¡c biá»‡t giá»¯a Image vÃ  Container, cÃ¡ch chÃºng hoáº¡t Ä‘á»™ng cÃ¹ng nhau, vÃ  cung cáº¥p vÃ­ dá»¥ thá»±c táº¿ Ä‘á»ƒ báº¡n dá»… hiá»ƒu hÆ¡n.\nI. Docker Image lÃ  gÃ¬? Docker Image lÃ  má»™t template (khuÃ´n máº«u) Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ táº¡o ra Container. NÃ³ chá»©a táº¥t cáº£ má»i thá»© cáº§n thiáº¿t Ä‘á»ƒ cháº¡y má»™t á»©ng dá»¥ng:\nOperating system (Há»‡ Ä‘iá»u hÃ nh) â€” thÆ°á»ng lÃ  Linux minimal Runtime environment (MÃ´i trÆ°á»ng cháº¡y) â€” Node.js, Python, Java, v.v. Code á»©ng dá»¥ng Dependencies (CÃ¡c thÆ° viá»‡n phá»¥ thuá»™c) Configuration files (Files cáº¥u hÃ¬nh) Environment variables (Biáº¿n mÃ´i trÆ°á»ng) 1. Äáº·c Ä‘iá»ƒm chÃ­nh cá»§a Docker Image Read-only: Image lÃ  chá»‰ Ä‘á»c, khÃ´ng thá»ƒ thay Ä‘á»•i sau khi Ä‘Ã£ táº¡o Layered structure: Image Ä‘Æ°á»£c xÃ¢y dá»±ng tá»« cÃ¡c lá»›p (layers), má»—i layer Ä‘áº¡i diá»‡n cho má»™t lá»‡nh trong Dockerfile Reusable: CÃ³ thá»ƒ sá»­ dá»¥ng cÃ¹ng má»™t image Ä‘á»ƒ táº¡o ra nhiá»u container Version-controlled: Má»—i image cÃ³ tag (vd: 1.0, latest, alpine) Ä‘á»ƒ quáº£n lÃ½ phiÃªn báº£n VÃ­ dá»¥ vá» cáº¥u trÃºc Image:\nLayer Ná»™i dung Layer 1 Base OS (Alpine Linux) Layer 2 System packages (curl, wget) Layer 3 Node.js runtime (18.x) Layer 4 Application code Layer 5 Environment variables 2. CÃ¡c lá»‡nh phá»• biáº¿n vá»›i Image 1 2 3 4 5 6 7 8 9 10 11 12 13 14 # Pull má»™t image tá»« Docker Hub docker pull node:18-alpine # Liá»‡t kÃª cÃ¡c images Ä‘Ã£ táº£i vá» docker images # XÃ³a má»™t image khÃ´ng sá»­ dá»¥ng docker image rm node:18-alpine # XÃ³a táº¥t cáº£ unused images docker image prune -a # Build image tá»« Dockerfile docker build -t myapp:1.0 . II. Docker Container lÃ  gÃ¬? Docker Container lÃ  má»™t thá»±c thá»ƒ Ä‘ang cháº¡y (running instance) Ä‘Æ°á»£c táº¡o ra tá»« Docker Image. Container cÃ³:\nMá»™t bá»™ file há»‡ thá»‘ng riÃªng (filesystem) KhÃ´ng gian máº¡ng riÃªng (network isolation) Process riÃªng, hoáº¡t Ä‘á»™ng Ä‘á»™c láº­p CÃ¡c biáº¿n mÃ´i trÆ°á»ng riÃªng 1. Äáº·c Ä‘iá»ƒm chÃ­nh cá»§a Docker Container Read-only base + Read-write layer: Container cÃ³ read-write layer cho phÃ©p thay Ä‘á»•i dá»¯ liá»‡u Isolated: Container cÃ´ láº­p vá»›i host vÃ  cÃ¡c container khÃ¡c Stateful: Container cÃ³ thá»ƒ á»Ÿ cÃ¡c tráº¡ng thÃ¡i: running, stopped, paused, exited Ephemeral: Container cÃ³ thá»ƒ táº¡o vÃ  xÃ³a nhanh chÃ³ng (\u0026lt; 1 giÃ¢y) VÃ­ dá»¥ vá» Container:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 # Táº¡o vÃ  cháº¡y container tá»« image docker run -d --name myapp node:18-alpine node server.js # Liá»‡t kÃª cÃ¡c containers Ä‘ang cháº¡y docker ps # Liá»‡t kÃª táº¥t cáº£ containers (ká»ƒ cáº£ Ä‘Ã£ dá»«ng) docker ps -a # Dá»«ng container docker stop myapp # Khá»Ÿi Ä‘á»™ng láº¡i container docker start myapp # XÃ³a container docker rm myapp # Xem logs cá»§a container docker logs myapp 2. So sÃ¡nh Container vá»›i Virtual Machine TÃ­nh cháº¥t Docker Container Virtual Machine Há»‡ Ä‘iá»u hÃ nh Chia sáº» kernel vá»›i host CÃ³ OS riÃªng Ä‘áº§y Ä‘á»§ Thá»i gian khá»Ÿi Ä‘á»™ng ~ 1-2 giÃ¢y ~ 1-2 phÃºt Dung lÆ°á»£ng MB (10-100 MB) GB (1-10 GB) Hiá»‡u nÄƒng Gáº§n nhÆ° native Cáº§n virtualization overhead Sá»‘ lÆ°á»£ng tá»‘i Ä‘a HÃ ng trÄƒm host Táº½n vÃ i chá»¥c host Docker Container Architecture III. So sÃ¡nh chi tiáº¿t: Image vs Container Äá»ƒ dá»… hÃ¬nh dung, hÃ£y xem báº£ng so sÃ¡nh dÆ°á»›i Ä‘Ã¢y:\nBáº£ng so sÃ¡nh Ä‘áº§y Ä‘á»§ KhÃ­a cáº¡nh Image Container CÃ´ng thá»©c Kho chá»©a recipe (cÃ´ng thá»©c) MÃ³n Äƒn Ä‘Æ°á»£c thá»±c hiá»‡n Tráº¡ng thÃ¡i Static (tÄ©nh, read-only) Dynamic (Ä‘á»™ng, read-write) Thay Ä‘á»•i KhÃ´ng thay Ä‘á»•i sau khi táº¡o CÃ³ thá»ƒ thay Ä‘á»•i khi cháº¡y Sá»‘ lÆ°á»£ng CÃ³ 1 image, táº¡o N container Nhiá»u container tá»« cÃ¹ng 1 image Thá»i gian táº¡o Cháº­m (build láº§n Ä‘áº§u ~5-10 phÃºt) Nhanh (\u0026lt; 1 giÃ¢y) LÆ°u trá»¯ LÆ°u trong Docker cache LÆ°u thá»i gian cháº¡y hoáº·c volume Portability Dá»… dÃ ng chia sáº» (push/pull) Chá»‰ cháº¡y trÃªn mÃ´i trÆ°á»ng Ä‘Ã£ install Docker Version CÃ³ tag quáº£n lÃ½ (1.0, 2.0, latest) KhÃ´ng cÃ³ version riÃªng Network KhÃ´ng CÃ³ network riÃªng Storage LÆ°u trá»¯ táº¡i layers CÃ³ read-write layer trÃªn cÃ¹ng image Quan há»‡ giá»¯a Image vÃ  Container 1 2 3 4 5 6 7 8 9 Docker Image (Template) â†“ docker run â†“ Docker Container (Running Instance) â†“ docker commit â†“ Docker Image má»›i (updated) LÆ°u Ã½:\nImage giá»‘ng nhÆ° class trong OOP (Object Oriented Programming) Container giá»‘ng nhÆ° object (instance cá»§a class) DÃ¹ng docker run Ä‘á»ƒ táº¡o container tá»« image DÃ¹ng docker commit Ä‘á»ƒ save container thÃ nh image má»›i IV. VÃ­ dá»¥ thá»±c táº¿ tá»« Ä‘áº§u Ä‘áº¿n cuá»‘i Äá»ƒ hiá»ƒu rÃµ hÆ¡n, hÃ£y cÃ¹ng lÃ m má»™t vÃ­ dá»¥ chi tiáº¿t:\n1. Táº¡o Dockerfile (Ä‘á»ƒ build image) 1 2 3 4 5 6 7 8 9 10 11 # Dockerfile FROM node:18-alpine WORKDIR /app COPY package*.json ./ RUN npm install COPY . . CMD [\u0026#34;node\u0026#34;, \u0026#34;server.js\u0026#34;] 2. Build image tá»« Dockerfile 1 2 3 4 5 6 7 8 # Build image vá»›i tÃªn myapp vÃ  tag 1.0 docker build -t myapp:1.0 . # Xem image Ä‘Ã£ táº¡o docker images # Output: # REPOSITORY TAG IMAGE ID CREATED SIZE # myapp 1.0 abc123def456 2 minutes ago 150MB 3. Táº¡o vÃ  cháº¡y container tá»« image 1 2 3 4 5 6 7 8 9 10 11 12 13 14 # Cháº¡y container tá»« image myapp:1.0 docker run -d \\ --name myapp-container \\ -p 3000:3000 \\ myapp:1.0 # Xem container Ä‘ang cháº¡y docker ps # Output: # CONTAINER ID IMAGE COMMAND STATUS PORTS # xyz789ghi012 myapp:1.0 \u0026#34;node server.js\u0026#34; Up 2 minutes 0.0.0.0:3000-\u0026gt;3000/tcp # Xem logs docker logs myapp-container 4. TÆ°Æ¡ng tÃ¡c vá»›i container 1 2 3 4 5 6 # Truy cáº­p ná»™i bá»™ container docker exec -it myapp-container sh # Trong container â€” báº¡n cÃ³ thá»ƒ: ls -la /app curl http://localhost:3000 5. XÃ³a container vÃ  image 1 2 3 4 5 6 7 8 # Dá»«ng container docker stop myapp-container # XÃ³a container docker rm myapp-container # XÃ³a image docker rmi myapp:1.0 V. Best practices vá»›i Image vÃ  Container 1. Quáº£n lÃ½ Image âœ… Sá»­ dá»¥ng cá»¥ thá»ƒ hÆ¡n (ex: node:18.12-alpine thay vÃ¬ node:latest) âœ… Giáº£m kÃ­ch thÆ°á»›c báº±ng base image nhá» (alpine, distroless) âœ… Táº­n dá»¥ng cache layer báº±ng cÃ¡ch xáº¿p lá»‡nh theo thá»© tá»± âœ… Sá»­ dá»¥ng .dockerignore Ä‘á»ƒ loáº¡i bá» file khÃ´ng cáº§n thiáº¿t âœ… XÃ³a image unused thÆ°á»ng xuyÃªn vá»›i docker image prune 1 2 3 4 # VÃ­ dá»¥: Sá»­ dá»¥ng image cá»¥ thá»ƒ FROM node:18.12.1-alpine # thay vÃ¬ FROM node:latest 2. Quáº£n lÃ½ Container âœ… Äáº·t tÃªn container rÃµ rÃ ng (--name app-container) âœ… Sá»­ dá»¥ng -d (detached mode) Ä‘á»ƒ cháº¡y container background âœ… ThÆ°á»ng xuyÃªn quay láº¡i logs khi debug (docker logs -f) âœ… Sá»­ dá»¥ng volumes náº¿u cáº§n persistence dá»¯ liá»‡u âœ… Giá»›i háº¡n resource vá»›i --cpus, --memory 1 2 3 4 5 6 7 # Run container vá»›i giá»›i háº¡n resource docker run -d \\ --name app \\ --cpus=\u0026#34;1.5\u0026#34; \\ --memory=\u0026#34;512m\u0026#34; \\ -p 8080:80 \\ myapp:1.0 Troubleshooting phá»• biáº¿n 1. Container khÃ´ng thá»ƒ táº¡o tá»« image Lá»—i:\n1 Error: Cannot start container from image NguyÃªn nhÃ¢n:\nImage chÆ°a Ä‘Æ°á»£c build hoáº·c pull vá» Image bá»‹ corrupt Port Ä‘Ã£ Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi container khÃ¡c Giáº£i phÃ¡p:\n1 2 3 4 5 6 7 8 # Kiá»ƒm tra image Ä‘Ã£ tá»“n táº¡i chÆ°a docker images | grep myapp # Pull vá» láº¡i náº¿u chÆ°a cÃ³ docker pull myapp:1.0 # Build láº¡i image docker build -t myapp:1.0 . 2. Container khÃ´ng lÆ°u dá»¯ liá»‡u khi dá»«ng NguyÃªn nhÃ¢n: Container lÃ  ephemeral, dá»¯ liá»‡u trong container sáº½ máº¥t khi nÃ³ dá»«ng hoáº·c xÃ³a.\nGiáº£i phÃ¡p: Sá»­ dá»¥ng Docker Volumes\n1 2 3 4 5 6 7 8 # Táº¡o volume docker volume create myapp-data # Gáº¯n volume vÃ o container docker run -d \\ --name app \\ -v myapp-data:/app/data \\ myapp:1.0 3. Container khÃ´ng truy cáº­p Ä‘Æ°á»£c tá»« bÃªn ngoÃ i Lá»—i: KhÃ´ng thá»ƒ truy cáº­p http://localhost:3000 khi run container\nGiáº£i phÃ¡p:\n1 2 3 4 5 6 7 8 9 10 # Äáº£m báº£o Ä‘Æ°á»£c map port tá»« container â†’ host docker run -d \\ --name app \\ -p 3000:3000 \\ myapp:1.0 # Náº¿u lÃ  multi-container, sá»­ dá»¥ng docker network docker network create mynet docker run -d --network mynet --name app1 myapp:1.0 docker run -d --network mynet --name app2 myapp:1.0 Ghi chÃº triá»ƒn khai ğŸ”§ Khi Ã¡p dá»¥ng vÃ o dá»± Ã¡n cá»§a báº¡n, hÃ£y lÆ°u Ã½ cÃ¡c Ä‘iá»ƒm quan trá»ng:\nÄá»«ng thay Ä‘á»•i trá»±c tiáº¿p container â€” HÃ£y build láº¡i image vá»›i Dockerfile Sá»­ dá»¥ng docker-compose.yaml Ä‘á»ƒ quáº£n lÃ½ nhiá»u container vÃ  dependencies Sá»­ dá»¥ng CI/CD Ä‘á»ƒ tá»± Ä‘á»™ng build vÃ  push image lÃªn Docker Hub/Registry GiÃ¡m sÃ¡t Ñ€ĞµÑÑƒÑ€Ñ vá»›i docker stats hoáº·c Prometheus + Grafana Backup dá»¯ liá»‡u thÆ°á»ng xuyÃªn tá»« volumes Best practices:\nLuÃ´n Ä‘áº·t tÃªn image vÃ  container rÃµ rÃ ng Sá»­ dá»¥ng tags cá»¥ thá»ƒ cho mÃ´i trÆ°á»ng khÃ¡c nhau (dev, staging, prod) Viáº¿t .dockerignore Ä‘á»ƒ giáº£m kÃ­ch thÆ°á»›c image vÃ  tÄƒng tá»‘c build Sá»­ dá»¥ng multi-stage build Ä‘á»ƒ táº¡o image nhá» nháº¥t Troubleshooting:\nKhi container bá»‹ crash, xem logs: docker logs \u0026lt;container-name\u0026gt; Khi container khÃ´ng thá»ƒ pull image, kiá»ƒm tra network: ping registry-1.docker.io Khi container khÃ´ng cÃ³ quyá»n truy cáº­p file, gáº¯n volume Ä‘Ãºng permission ğŸ¯ Lá»i káº¿t TÃ³m táº¯t láº¡i:\nDocker Image = Kho chá»©a recipe (template read-only) â€” Chá»©a táº¥t cáº£ thiáº¿t láº­p Ä‘á»ƒ cháº¡y á»©ng dá»¥ng Docker Container = MÃ³n Äƒn Ä‘Æ°á»£c thá»±c hiá»‡n (running instance) â€” Container Ä‘Æ°á»£c táº¡o tá»« image, read-write layer Image lÃ  tÄ©nh, Container lÃ  Ä‘á»™ng DÃ¹ng docker run Ä‘á»ƒ táº¡o container tá»« image DÃ¹ng docker commit Ä‘á»ƒ update container thÃ nh image má»›i BÃ¢y giá» báº¡n Ä‘Ã£ hiá»ƒu rÃµ sá»± khÃ¡c biá»‡t giá»¯a Image vÃ  Container. BÆ°á»›c tiáº¿p theo: há»c cÃ¡ch sá»­ dá»¥ng Dockerfile Ä‘á»ƒ build image, vÃ  Docker Compose Ä‘á»ƒ quáº£n lÃ½ nhiá»u container. ğŸš€\nNáº¿u báº¡n tháº¥y bÃ i viáº¿t nÃ y há»¯u Ã­ch, hÃ£y nhá»› â­ star repo hoáº·c ğŸ“± chia sáº» vá»›i báº¡n bÃ¨ nhÃ©! ğŸ˜Š\nTÃ i liá»‡u tham kháº£o Docker Official Documentation Best practices for writing Dockerfiles ","date":"2026-01-25T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/docker/docker-basics-image-vs-container.webp","permalink":"https://tech.nguuyen.io.vn/posts/docker/docker-basics-image-vs-container/","title":"Docker cÆ¡ báº£n: Image vs Container"},{"content":"ğŸ³ Giá»›i thiá»‡u vá» Docker Docker lÃ  má»™t ná»n táº£ng phá»• biáº¿n trong DevOps Ä‘á»ƒ triá»ƒn khai á»©ng dá»¥ng báº±ng container. Container cho phÃ©p báº¡n Ä‘Ã³ng gÃ³i á»©ng dá»¥ng cÃ¹ng vá»›i táº¥t cáº£ cÃ¡c dependencies vÃ  cáº¥u hÃ¬nh cáº§n thiáº¿t, giÃºp á»©ng dá»¥ng cháº¡y nháº¥t quÃ¡n trÃªn má»i mÃ´i trÆ°á»ng tá»« development Ä‘áº¿n production.\nLá»£i Ã­ch cá»§a Docker:\nâš¡ TÃ­nh nháº¥t quÃ¡n: á»¨ng dá»¥ng cháº¡y giá»‘ng nhau trÃªn má»i mÃ´i trÆ°á»ng ğŸš€ Tá»‘c Ä‘á»™: Khá»Ÿi Ä‘á»™ng container nhanh hÆ¡n so vá»›i virtual machine ğŸ“¦ ÄÃ³ng gÃ³i: Dá»… dÃ ng chia sáº» vÃ  triá»ƒn khai á»©ng dá»¥ng ğŸ”„ Scalability: Dá»… dÃ ng má»Ÿ rá»™ng vÃ  quáº£n lÃ½ nhiá»u container BÃ i viáº¿t nÃ y hÆ°á»›ng dáº«n báº¡n cÃ¡ch cÃ i Ä‘áº·t Docker trÃªn Ubuntu 20.04 vÃ  22.04 má»™t cÃ¡ch Ä‘Æ¡n giáº£n vÃ  hiá»‡u quáº£, sá»­ dá»¥ng repository chÃ­nh thá»©c cá»§a Docker Ä‘á»ƒ Ä‘áº£m báº£o báº¡n luÃ´n cÃ³ phiÃªn báº£n má»›i nháº¥t vÃ  á»•n Ä‘á»‹nh.\nâœ… YÃªu cáº§u trÆ°á»›c khi cÃ i Ä‘áº·t TrÆ°á»›c khi báº¯t Ä‘áº§u, hÃ£y Ä‘áº£m báº£o báº¡n cÃ³:\nğŸ–¥ï¸ MÃ¡y chá»§ Ubuntu 20.04 hoáº·c 22.04 Ä‘Ã£ Ä‘Æ°á»£c cÃ i Ä‘áº·t ğŸ” Quyá»n sudo Ä‘á»ƒ thá»±c thi cÃ¡c lá»‡nh quáº£n trá»‹ ğŸŒ Káº¿t ná»‘i internet Ä‘á»ƒ táº£i cÃ¡c gÃ³i cÃ i Ä‘áº·t â±ï¸ Thá»i gian: QuÃ¡ trÃ¬nh cÃ i Ä‘áº·t máº¥t khoáº£ng 5-10 phÃºt 1. Cáº­p nháº­t há»‡ thá»‘ng TrÆ°á»›c khi cÃ i Ä‘áº·t Docker, hÃ£y Ä‘áº£m báº£o há»‡ thá»‘ng Ä‘Æ°á»£c cáº­p nháº­t Ä‘áº§y Ä‘á»§. Äiá»u nÃ y giÃºp Ä‘áº£m báº£o báº¡n cÃ³ cÃ¡c báº£n vÃ¡ báº£o máº­t má»›i nháº¥t vÃ  cÃ¡c gÃ³i phá»¥ thuá»™c cáº§n thiáº¿t.\n1 sudo apt update \u0026amp;\u0026amp; sudo apt upgrade -y ğŸ’¡ LÆ°u Ã½:\nLá»‡nh apt update cáº­p nháº­t danh sÃ¡ch cÃ¡c gÃ³i cÃ³ sáºµn tá»« repository Lá»‡nh apt upgrade -y tá»± Ä‘á»™ng cÃ i Ä‘áº·t cÃ¡c báº£n cáº­p nháº­t mÃ  khÃ´ng cáº§n xÃ¡c nháº­n QuÃ¡ trÃ¬nh nÃ y cÃ³ thá»ƒ máº¥t vÃ i phÃºt tÃ¹y thuá»™c vÃ o sá»‘ lÆ°á»£ng gÃ³i cáº§n cáº­p nháº­t 2. CÃ i Ä‘áº·t Docker 2.1. CÃ i Ä‘áº·t cÃ¡c gÃ³i phá»¥ thuá»™c CÃ¡c gÃ³i nÃ y cáº§n thiáº¿t Ä‘á»ƒ Docker cÃ³ thá»ƒ táº£i vÃ  xÃ¡c thá»±c cÃ¡c gÃ³i tá»« repository chÃ­nh thá»©c:\napt-transport-https: Cho phÃ©p APT sá»­ dá»¥ng giao thá»©c HTTPS ca-certificates: Cung cáº¥p chá»©ng chá»‰ SSL/TLS Ä‘á»ƒ xÃ¡c thá»±c káº¿t ná»‘i báº£o máº­t curl: CÃ´ng cá»¥ Ä‘á»ƒ táº£i xuá»‘ng cÃ¡c file tá»« internet software-properties-common: Cung cáº¥p cÃ¡c tiá»‡n Ã­ch Ä‘á»ƒ quáº£n lÃ½ repository 1 sudo apt install -y apt-transport-https ca-certificates curl software-properties-common 2.2. ThÃªm repository Docker chÃ­nh thá»©c Äá»ƒ cÃ i Ä‘áº·t Docker tá»« nguá»“n chÃ­nh thá»©c, chÃºng ta cáº§n thÃªm GPG key vÃ  repository cá»§a Docker vÃ o há»‡ thá»‘ng. Äiá»u nÃ y Ä‘áº£m báº£o báº¡n nháº­n Ä‘Æ°á»£c cÃ¡c báº£n cáº­p nháº­t chÃ­nh thá»©c vÃ  báº£o máº­t tá»« Docker.\nBÆ°á»›c 1: ThÃªm GPG key cá»§a Docker\nGPG key Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ xÃ¡c thá»±c tÃ­nh toÃ n váº¹n cá»§a cÃ¡c gÃ³i Docker:\n1 curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg BÆ°á»›c 2: ThÃªm Docker repository\nThÃªm repository Docker vÃ o danh sÃ¡ch nguá»“n cá»§a APT. Lá»‡nh nÃ y tá»± Ä‘á»™ng phÃ¡t hiá»‡n phiÃªn báº£n Ubuntu cá»§a báº¡n ($(lsb_release -cs)) vÃ  thÃªm repository phÃ¹ há»£p:\n1 echo \u0026#34;deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\u0026#34; | sudo tee /etc/apt/sources.list.d/docker.list \u0026gt; /dev/null ğŸ’¡ Giáº£i thÃ­ch:\narch=amd64: Chá»‰ Ä‘á»‹nh kiáº¿n trÃºc 64-bit signed-by: Chá»‰ Ä‘á»‹nh GPG key Ä‘á»ƒ xÃ¡c thá»±c $(lsb_release -cs): Tá»± Ä‘á»™ng láº¥y tÃªn code name cá»§a Ubuntu (vÃ­ dá»¥: jammy cho Ubuntu 22.04) stable: Sá»­ dá»¥ng channel á»•n Ä‘á»‹nh (cÃ³ thá»ƒ dÃ¹ng test hoáº·c nightly cho cÃ¡c phiÃªn báº£n thá»­ nghiá»‡m) 2.3. CÃ i Ä‘áº·t Docker Engine Sau khi Ä‘Ã£ thÃªm repository, cáº­p nháº­t danh sÃ¡ch gÃ³i vÃ  cÃ i Ä‘áº·t Docker Engine:\n1 2 sudo apt update sudo apt install -y docker-ce docker-ce-cli containerd.io ğŸ“¦ CÃ¡c gÃ³i Ä‘Æ°á»£c cÃ i Ä‘áº·t:\ndocker-ce: Docker Community Edition - phiÃªn báº£n mÃ£ nguá»“n má»Ÿ cá»§a Docker docker-ce-cli: Docker Command Line Interface - cÃ´ng cá»¥ dÃ²ng lá»‡nh Ä‘á»ƒ tÆ°Æ¡ng tÃ¡c vá»›i Docker containerd.io: Container runtime - cÃ´ng cá»¥ quáº£n lÃ½ vÃ²ng Ä‘á»i container á»Ÿ má»©c tháº¥p â±ï¸ Thá»i gian cÃ i Ä‘áº·t: QuÃ¡ trÃ¬nh nÃ y thÆ°á»ng máº¥t 2-5 phÃºt tÃ¹y thuá»™c vÃ o tá»‘c Ä‘á»™ internet cá»§a báº¡n.\n3. Kiá»ƒm tra Docker Sau khi cÃ i Ä‘áº·t, hÃ£y kiá»ƒm tra xem Docker Ä‘Ã£ Ä‘Æ°á»£c khá»Ÿi Ä‘á»™ng vÃ  hoáº¡t Ä‘á»™ng chÆ°a:\n1 sudo systemctl status docker Káº¿t quáº£ mong Ä‘á»£i: Báº¡n sáº½ tháº¥y tráº¡ng thÃ¡i active (running) náº¿u Docker Ä‘Ã£ khá»Ÿi Ä‘á»™ng thÃ nh cÃ´ng.\nNáº¿u Docker chÆ°a cháº¡y, báº¡n cÃ³ thá»ƒ khá»Ÿi Ä‘á»™ng vÃ  kÃ­ch hoáº¡t Docker Ä‘á»ƒ tá»± Ä‘á»™ng khá»Ÿi Ä‘á»™ng khi há»‡ thá»‘ng boot:\n1 2 sudo systemctl start docker sudo systemctl enable docker ğŸ’¡ Giáº£i thÃ­ch cÃ¡c lá»‡nh:\nsystemctl start docker: Khá»Ÿi Ä‘á»™ng dá»‹ch vá»¥ Docker ngay láº­p tá»©c systemctl enable docker: Cáº¥u hÃ¬nh Docker tá»± Ä‘á»™ng khá»Ÿi Ä‘á»™ng khi há»‡ thá»‘ng khá»Ÿi Ä‘á»™ng láº¡i 4. Cháº¡y thá»­ Docker Äá»ƒ xÃ¡c nháº­n Docker Ä‘Ã£ hoáº¡t Ä‘á»™ng Ä‘Ãºng, cháº¡y container máº«u hello-world:\n1 sudo docker run hello-world Káº¿t quáº£ mong Ä‘á»£i: Náº¿u tháº¥y thÃ´ng bÃ¡o \u0026ldquo;Hello from Docker!\u0026rdquo; cÃ¹ng vá»›i cÃ¡c thÃ´ng tin vá» Docker, nghÄ©a lÃ  báº¡n Ä‘Ã£ cÃ i Ä‘áº·t thÃ nh cÃ´ng! ğŸ‰\nğŸ” Container hello-world lÃ m gÃ¬?\nContainer nÃ y táº£i xuá»‘ng image hello-world tá»« Docker Hub (náº¿u chÆ°a cÃ³) Cháº¡y container vÃ  hiá»ƒn thá»‹ thÃ´ng bÃ¡o chÃ o má»«ng Tá»± Ä‘á»™ng dá»«ng sau khi hoÃ n thÃ nh 5. Cáº¥u hÃ¬nh quyá»n cho user Máº·c Ä‘á»‹nh, Docker yÃªu cáº§u quyá»n root Ä‘á»ƒ cháº¡y cÃ¡c lá»‡nh. Äá»ƒ cháº¡y Docker khÃ´ng cáº§n sudo, báº¡n cáº§n thÃªm user hiá»‡n táº¡i vÃ o nhÃ³m docker:\n1 2 sudo usermod -aG docker $USER newgrp docker ğŸ’¡ Giáº£i thÃ­ch:\nusermod -aG docker $USER: ThÃªm user hiá»‡n táº¡i vÃ o nhÃ³m docker (nhÃ³m nÃ y cÃ³ quyá»n truy cáº­p Docker daemon) newgrp docker: Ãp dá»¥ng thay Ä‘á»•i nhÃ³m ngay láº­p tá»©c mÃ  khÃ´ng cáº§n Ä‘Äƒng xuáº¥t âš ï¸ LÆ°u Ã½ quan trá»ng:\nSau khi thá»±c hiá»‡n lá»‡nh nÃ y, báº¡n cÃ³ thá»ƒ cáº§n Ä‘Äƒng xuáº¥t vÃ  Ä‘Äƒng nháº­p láº¡i Ä‘á»ƒ thay Ä‘á»•i cÃ³ hiá»‡u lá»±c Hoáº·c báº¡n cÃ³ thá»ƒ má»Ÿ terminal má»›i Ä‘á»ƒ Ã¡p dá»¥ng thay Ä‘á»•i Viá»‡c thÃªm user vÃ o nhÃ³m docker cho phÃ©p user Ä‘Ã³ cÃ³ quyá»n tÆ°Æ¡ng Ä‘Æ°Æ¡ng root trÃªn Docker daemon, vÃ¬ váº­y chá»‰ thÃªm nhá»¯ng user Ä‘Ã¡ng tin cáº­y Kiá»ƒm tra quyá»n má»›i:\nSau khi cáº¥u hÃ¬nh, thá»­ cháº¡y Docker khÃ´ng cáº§n sudo:\n1 docker run hello-world Náº¿u lá»‡nh cháº¡y thÃ nh cÃ´ng mÃ  khÃ´ng cáº§n sudo, báº¡n Ä‘Ã£ cáº¥u hÃ¬nh Ä‘Ãºng! âœ…\n6. Gá»¡ cÃ i Ä‘áº·t Docker (náº¿u cáº§n) Náº¿u báº¡n muá»‘n gá»¡ cÃ i Ä‘áº·t Docker hoÃ n toÃ n khá»i há»‡ thá»‘ng, thá»±c hiá»‡n cÃ¡c bÆ°á»›c sau:\nBÆ°á»›c 1: Gá»¡ cÃ i Ä‘áº·t cÃ¡c gÃ³i Docker\n1 sudo apt remove -y docker-ce docker-ce-cli containerd.io BÆ°á»›c 2: XÃ³a dá»¯ liá»‡u Docker\nDá»¯ liá»‡u Docker (images, containers, volumes, networks) Ä‘Æ°á»£c lÆ°u trong /var/lib/docker. Äá»ƒ xÃ³a hoÃ n toÃ n:\n1 sudo rm -rf /var/lib/docker âš ï¸ Cáº£nh bÃ¡o: Lá»‡nh nÃ y sáº½ xÃ³a Táº¤T Cáº¢ dá»¯ liá»‡u Docker bao gá»“m:\nTáº¥t cáº£ images Ä‘Ã£ táº£i vá» Táº¥t cáº£ containers (Ä‘ang cháº¡y vÃ  Ä‘Ã£ dá»«ng) Táº¥t cáº£ volumes vÃ  networks Táº¥t cáº£ dá»¯ liá»‡u trong containers BÆ°á»›c 3: XÃ³a cáº¥u hÃ¬nh Docker (tÃ¹y chá»n)\nNáº¿u muá»‘n xÃ³a hoÃ n toÃ n má»i dáº¥u váº¿t cá»§a Docker:\n1 2 sudo rm -rf /var/lib/containerd sudo rm -rf /etc/docker ğŸ“š CÃ¡c lá»‡nh Docker cÆ¡ báº£n Sau khi cÃ i Ä‘áº·t Docker, Ä‘Ã¢y lÃ  má»™t sá»‘ lá»‡nh cÆ¡ báº£n báº¡n nÃªn biáº¿t:\nLá»‡nh MÃ´ táº£ docker --version Kiá»ƒm tra phiÃªn báº£n Docker docker ps Liá»‡t kÃª cÃ¡c container Ä‘ang cháº¡y docker ps -a Liá»‡t kÃª táº¥t cáº£ containers (bao gá»“m Ä‘Ã£ dá»«ng) docker images Liá»‡t kÃª táº¥t cáº£ images docker pull \u0026lt;image\u0026gt; Táº£i image tá»« Docker Hub docker run \u0026lt;image\u0026gt; Cháº¡y container tá»« image docker stop \u0026lt;container\u0026gt; Dá»«ng container Ä‘ang cháº¡y docker rm \u0026lt;container\u0026gt; XÃ³a container docker rmi \u0026lt;image\u0026gt; XÃ³a image ğŸ”§ Troubleshooting Váº¥n Ä‘á»: Docker daemon khÃ´ng khá»Ÿi Ä‘á»™ng NguyÃªn nhÃ¢n: CÃ³ thá»ƒ do xung Ä‘á»™t vá»›i cÃ¡c dá»‹ch vá»¥ khÃ¡c hoáº·c cáº¥u hÃ¬nh sai.\nGiáº£i phÃ¡p:\n1 2 3 4 5 # Kiá»ƒm tra log cá»§a Docker sudo journalctl -u docker # Khá»Ÿi Ä‘á»™ng láº¡i Docker sudo systemctl restart docker Váº¥n Ä‘á»: Permission denied khi cháº¡y Docker NguyÃªn nhÃ¢n: User chÆ°a Ä‘Æ°á»£c thÃªm vÃ o nhÃ³m docker.\nGiáº£i phÃ¡p:\n1 2 3 4 5 # ThÃªm user vÃ o nhÃ³m docker sudo usermod -aG docker $USER # ÄÄƒng xuáº¥t vÃ  Ä‘Äƒng nháº­p láº¡i, hoáº·c cháº¡y: newgrp docker Váº¥n Ä‘á»: KhÃ´ng thá»ƒ káº¿t ná»‘i Ä‘áº¿n Docker daemon NguyÃªn nhÃ¢n: Docker daemon chÆ°a Ä‘Æ°á»£c khá»Ÿi Ä‘á»™ng.\nGiáº£i phÃ¡p:\n1 2 3 4 5 # Kiá»ƒm tra tráº¡ng thÃ¡i sudo systemctl status docker # Khá»Ÿi Ä‘á»™ng Docker sudo systemctl start docker ğŸ¯ Lá»i káº¿t Váº­y lÃ  chÃºng ta Ä‘Ã£ hoÃ n táº¥t cÃ i Ä‘áº·t Docker trÃªn Ubuntu! ğŸ‰ Giá» Ä‘Ã¢y, báº¡n cÃ³ thá»ƒ báº¯t Ä‘áº§u:\nğŸ³ Táº¡o vÃ  cháº¡y containers cho cÃ¡c á»©ng dá»¥ng cá»§a mÃ¬nh ğŸ“¦ Sá»­ dá»¥ng Docker images cÃ³ sáºµn tá»« Docker Hub ğŸš€ Triá»ƒn khai á»©ng dá»¥ng má»™t cÃ¡ch nháº¥t quÃ¡n vÃ  dá»… dÃ ng ğŸ”„ Quáº£n lÃ½ mÃ´i trÆ°á»ng development vÃ  production hiá»‡u quáº£ hÆ¡n Docker lÃ  má»™t cÃ´ng cá»¥ máº¡nh máº½ trong tháº¿ giá»›i DevOps. HÃ£y tiáº¿p tá»¥c khÃ¡m phÃ¡ cÃ¡c tÃ­nh nÄƒng cá»§a Docker nhÆ° Docker Compose, Docker Swarm, vÃ  tÃ­ch há»£p vá»›i cÃ¡c cÃ´ng cá»¥ CI/CD Ä‘á»ƒ tá»‘i Æ°u hÃ³a quy trÃ¬nh phÃ¡t triá»ƒn cá»§a báº¡n!\nğŸ“– TÃ i liá»‡u tham kháº£o:\nTÃ i liá»‡u chÃ­nh thá»©c cá»§a Docker Docker Hub - Kho lÆ°u trá»¯ images lá»›n nháº¥t Best practices cho Docker ChÃºc báº¡n thÃ nh cÃ´ng vá»›i Docker! ğŸš€ğŸ˜Š\n","date":"2025-11-30T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/installation-guides/docker-installation-ubuntu.webp","permalink":"https://tech.nguuyen.io.vn/posts/installation-guides/setup-docker-on-ubuntu/","title":"CÃ¡ch cÃ i Ä‘áº·t Docker trÃªn Ubuntu ğŸ³"},{"content":"Dockerfile Contest 2025 â€“ Java tá»‘i Æ°u extreme Dockerfile Contest 2025 thÃºc Ä‘áº©y cá»™ng Ä‘á»“ng DevOps Viá»‡t Nam Ä‘Ã¡nh giÃ¡ láº¡i cÃ¡ch viáº¿t Dockerfile Ä‘á»ƒ Ä‘áº¡t báº£o máº­t, tá»‘i Æ°u, tÆ°á»ng minh. BÃ i viáº¿t nÃ y tá»•ng há»£p riÃªng cho háº¡ng má»¥c Java Spring Boot, nÆ¡i cÃ¡c tÃ¡c giáº£ táº­p trung tá»‘i Æ°u JRE, giáº£m kÃ­ch thÆ°á»›c image vÃ  chuáº©n hÃ³a quy trÃ¬nh build.\nI. Háº¡ng má»¥c JAVA (Spring Boot Service) Háº¡ng má»¥c Java táº­p trung vÃ o cÃ¡c Ã½ tÆ°á»Ÿng:\nTá»‘i Æ°u JRE: dÃ¹ng jlink vÃ  jdeps Ä‘á»ƒ táº¡o custom JRE chá»‰ chá»©a module cáº§n thiáº¿t. Tá»‘i Æ°u security \u0026amp; dependency: tá»± Ä‘á»™ng cáº­p nháº­t dependency an toÃ n, giáº£m CVE. Multi-stage build: tÃ¡ch rÃµ stage build vÃ  runtime, dÃ¹ng distroless hoáº·c base image tá»‘i Æ°u. Healthcheck rÃµ rÃ ng: dÃ¹ng wget hoáº·c Java native healthcheck Ä‘á»ƒ giÃ¡m sÃ¡t container. 1. Dockerfile TOP 1 (Java) â€“ Spring Boot Template + Distroless Ká»¹ thuáº­t Giáº£i thÃ­ch theo tÃ¡c giáº£ Nguá»“n tham kháº£o Custom JRE báº±ng jlink DÃ¹ng jdeps phÃ¢n tÃ­ch fat JAR Ä‘á»ƒ láº¥y danh sÃ¡ch module, sau Ä‘Ã³ jlink táº¡o JRE chá»‰ chá»©a module cáº§n, giáº£m Ä‘Ã¡ng ká»ƒ kÃ­ch thÆ°á»›c runtime. Multi-stage build rÃµ rÃ ng Stage build dÃ¹ng eclipse-temurin:21-jdk Ä‘á»ƒ build Gradle; stage runtime dÃ¹ng gcr.io/distroless/base-debian12 chá»‰ cháº¡y JRE. PhÃ¢n tÃ¡ch Healthcheck Stage Táº¡o stage healthcheck dÃ¹ng BusyBox, copy wget vÃ o runtime Ä‘á»ƒ healthcheck mÃ  khÃ´ng pháº£i cÃ i thÃªm full curl/wget tá»« package manager. Distroless Runtime DÃ¹ng distroless base Ä‘á»ƒ giáº£m attack surface (khÃ´ng shell, khÃ´ng package manager), image gá»n vÃ  an toÃ n hÆ¡n. Pin nguá»“n \u0026amp; license ThÃªm LABEL org.opencontainers.image.source, version, licenses Ä‘á»ƒ dá»… truy váº¿t source code vÃ  tuÃ¢n thá»§ license. Dockerfile TOP 1 (JAVA)\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 # Build stage FROM eclipse-temurin:21-jdk AS build WORKDIR /app # Copy gradle wrapper and properties first for better caching COPY gradlew gradlew.bat build.gradle ./ COPY gradle/ gradle/ # Download Gradle distribution (cached) RUN --mount=type=cache,target=/root/.gradle ./gradlew --version # Copy source code COPY src/ src/ # Build the application RUN --mount=type=cache,target=/root/.gradle ./gradlew --no-daemon clean bootJar \\ -Dspring-framework.version=6.2.11 \\ -Dtomcat.version=10.1.47 # Extract the application dependencies RUN jar xf build/libs/spring-boot-template.jar # Analyze the dependencies contained into the fat jar RUN jdeps --ignore-missing-deps -q \\ --recursive \\ --multi-release 21 \\ --print-module-deps \\ --class-path \u0026#39;BOOT-INF/lib/*\u0026#39; \\ build/libs/spring-boot-template.jar \u0026gt; deps.info # Create the custom JRE RUN jlink \\ --verbose \\ --add-modules $(cat deps.info) \\ --compress zip-9 \\ --no-header-files \\ --no-man-pages \\ --output /custom_jre # Healthcheck stage FROM busybox:1.36.0-musl AS healthcheck # Runtime stage FROM gcr.io/distroless/base-debian12 ENV JAVA_HOME=/opt/java/openjdk ENV PATH=\u0026#34;$JAVA_HOME/bin:$PATH\u0026#34; COPY --from=build /custom_jre $JAVA_HOME # Copy wget for healthcheck COPY --from=healthcheck /bin/wget /usr/bin/wget WORKDIR /app # Copy application insights config COPY lib/applicationinsights.json ./ # Copy the built JAR COPY --from=build /app/build/libs/spring-boot-template.jar /app.jar # Add labels LABEL org.opencontainers.image.source=\u0026#34;https://github.com/hmcts/spring-boot-template\u0026#34; \\ org.opencontainers.image.version=\u0026#34;0.0.1\u0026#34; \\ org.opencontainers.image.licenses=\u0026#34;MIT\u0026#34; EXPOSE 8080 HEALTHCHECK --interval=30s --timeout=3s --start-period=10s --retries=3 \\ CMD [\u0026#34;/usr/bin/wget\u0026#34;, \u0026#34;--quiet\u0026#34;, \u0026#34;--output-document=/dev/null\u0026#34;, \u0026#34;http://localhost:8080/health\u0026#34;] CMD [\u0026#34;java\u0026#34;, \u0026#34;-jar\u0026#34;, \u0026#34;/app.jar\u0026#34;] 2. Dockerfile TOP 2 (Java) â€“ Gradle Auto Dependency Update + Custom Healthcheck Ká»¹ thuáº­t Giáº£i thÃ­ch theo tÃ¡c giáº£ Nguá»“n tham kháº£o Gradle Dependency Updates DÃ¹ng plugin dependencyUpdates Ä‘á»ƒ sinh report, sau Ä‘Ã³ script shell parse report vÃ  tá»± Ä‘á»™ng update version plugin/ext/dependency trong build.gradle. Force Dependency Upgrade Biáº¿n DEPENDENCIES_FORCE_UPDATE cho phÃ©p chá»‰ Ä‘á»‹nh group:name:version Ä‘á»ƒ Ã©p cáº­p nháº­t nhá»¯ng dependency quan trá»ng, thÆ°á»ng lÃ  nhá»¯ng lib dÃ­nh CVE. Native Java Healthcheck Viáº¿t class HealthCheck.java dÃ¹ng HttpURLConnection gá»i /health, giÃºp healthcheck khÃ´ng phá»¥ thuá»™c curl/wget. Distroless Base Java Runtime dÃ¹ng hmctspublic.azurecr.io/base/java:21-distroless, image Java 21 tá»‘i Æ°u sáºµn cho production. Cache Gradle Mount cache /root/.gradle Ä‘á»ƒ tÄƒng tá»‘c ./gradlew trong stage build. Dockerfile TOP 2 (JAVA)\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 # Stage 1 â€” Build application using Gradle FROM gradle:8.14.3-jdk21-alpine AS builder WORKDIR /app # Caching wrapper and build configuration before build COPY gradlew ./ COPY gradle gradle COPY build.gradle build.gradle # Caching gradle/download RUN ./gradlew --no-daemon help # Copy src code COPY src/main src/main # Check dependency need to update RUN ./gradlew --no-daemon dependencyUpdates -Drevision=release # Auto update for auto vulnerability fixing RUN REPORT_FILE=\u0026#34;build/dependencyUpdates/report.txt\u0026#34; \u0026amp;\u0026amp; \\ echo \u0026#34;=== Parsing $REPORT_FILE ===\u0026#34; \u0026amp;\u0026amp; \\ \\ PLUGINS_TO_UPGRADE=${PLUGINS_TO_UPGRADE:-\u0026#34;org.springframework.boot org.sonarqube com.github.ben-manes.versions uk.gov.hmcts.java\u0026#34;} \u0026amp;\u0026amp; \\ EXTS_TO_UPGRADE=${EXTS_TO_UPGRADE:-\u0026#34;org.apache.logging.log4j ch.qos.logback\u0026#34;} \u0026amp;\u0026amp; \\ DEPENDENCIES_FORCE_UPDATE=${DEPENDENCIES_FORCE_UPDATE:-\u0026#34;org.apache.commons:commons-lang3:3.19.0\u0026#34;} \u0026amp;\u0026amp; \\ \\ escape_sed() { printf \u0026#39;%s\\n\u0026#39; \u0026#34;$1\u0026#34; | sed \u0026#39;s/[.[\\*^$/\u0026amp;]/\\\\\u0026amp;/g\u0026#39;; } \u0026amp;\u0026amp; \\ \\ # --- Plugin updates --- for plugin in $PLUGINS_TO_UPGRADE; do \\ LINE=$(grep -A1 \u0026#34;$plugin\u0026#34; \u0026#34;$REPORT_FILE\u0026#34; | grep \u0026#39;\\[\u0026#39; | head -1 || true); \\ OLD_VERSION=$(echo \u0026#34;$LINE\u0026#34; | sed -E \u0026#39;s/.*\\[(.*) -\u0026gt; .*\\].*/\\1/\u0026#39; || true); \\ NEW_VERSION=$(echo \u0026#34;$LINE\u0026#34; | sed -E \u0026#39;s/.*\\[.* -\u0026gt; (.*)\\].*/\\1/\u0026#39; || true); \\ if [ -n \u0026#34;$NEW_VERSION\u0026#34; ] \u0026amp;\u0026amp; [ \u0026#34;$NEW_VERSION\u0026#34; != \u0026#34;$OLD_VERSION\u0026#34; ]; then \\ echo \u0026#34;===== Upgrading plugin $plugin: $OLD_VERSION â†’ $NEW_VERSION\u0026#34;; \\ ESC_OLD=$(escape_sed \u0026#34;$OLD_VERSION\u0026#34;); \\ ESC_NEW=$(escape_sed \u0026#34;$NEW_VERSION\u0026#34;); \\ sed -i \u0026#34;s#id \u0026#39;$plugin\u0026#39; version \u0026#39;$ESC_OLD\u0026#39;#id \u0026#39;$plugin\u0026#39; version \u0026#39;$ESC_NEW\u0026#39;#g\u0026#34; build.gradle; \\ fi; \\ done \u0026amp;\u0026amp; \\ \\ # --- ext{} version updates --- for prefix in $EXTS_TO_UPGRADE; do \\ LINE=$(grep -A1 \u0026#34;$prefix\u0026#34; \u0026#34;$REPORT_FILE\u0026#34; | grep \u0026#39;\\[\u0026#39; | head -1 || true); \\ OLD_VERSION=$(echo \u0026#34;$LINE\u0026#34; | sed -E \u0026#39;s/.*\\[(.*) -\u0026gt; .*\\].*/\\1/\u0026#39; || true); \\ NEW_VERSION=$(echo \u0026#34;$LINE\u0026#34; | sed -E \u0026#39;s/.*\\[.* -\u0026gt; (.*)\\].*/\\1/\u0026#39; || true); \\ if [ -n \u0026#34;$NEW_VERSION\u0026#34; ] \u0026amp;\u0026amp; [ \u0026#34;$NEW_VERSION\u0026#34; != \u0026#34;$OLD_VERSION\u0026#34; ]; then \\ echo \u0026#34;===== Upgrading prefix $prefix: $OLD_VERSION â†’ $NEW_VERSION\u0026#34;; \\ ESC_OLD=$(escape_sed \u0026#34;$OLD_VERSION\u0026#34;); \\ ESC_NEW=$(escape_sed \u0026#34;$NEW_VERSION\u0026#34;); \\ sed -i \u0026#34;s/\\\u0026#34;$ESC_OLD\\\u0026#34;/\\\u0026#34;$ESC_NEW\\\u0026#34;/g\u0026#34; build.gradle; \\ fi; \\ done \u0026amp;\u0026amp; \\ \\ # --- Force dependency updates with explicit GAV --- for dep in $DEPENDENCIES_FORCE_UPDATE; do \\ GROUP=$(echo \u0026#34;$dep\u0026#34; | cut -d\u0026#39;:\u0026#39; -f1); \\ NAME=$(echo \u0026#34;$dep\u0026#34; | cut -d\u0026#39;:\u0026#39; -f2); \\ NEW_VERSION=$(echo \u0026#34;$dep\u0026#34; | cut -d\u0026#39;:\u0026#39; -f3); \\ if [ -z \u0026#34;$GROUP\u0026#34; ] || [ -z \u0026#34;$NAME\u0026#34; ] || [ -z \u0026#34;$NEW_VERSION\u0026#34; ]; then \\ echo \u0026#34;====== Invalid DEPENDENCIES_FORCE_UPDATE format for $dep, expected group:name:version\u0026#34;; \\ continue; \\ fi; \\ echo \u0026#34;====== Forcing dependency update: $GROUP:$NAME â†’ $NEW_VERSION\u0026#34;; \\ ESC_GROUP=$(escape_sed \u0026#34;$GROUP\u0026#34;); \\ ESC_NAME=$(escape_sed \u0026#34;$NAME\u0026#34;); \\ ESC_NEW=$(escape_sed \u0026#34;$NEW_VERSION\u0026#34;); \\ if grep -q \u0026#34;$ESC_GROUP\u0026#34; build.gradle | grep -q \u0026#34;$ESC_NAME\u0026#34;; then \\ # Replace existing dependency version sed -i \u0026#34;s#group: \u0026#39;$ESC_GROUP\u0026#39;, name: \u0026#39;$ESC_NAME\u0026#39;, version: \u0026#39;[^\u0026#39;]*\u0026#39;#group: \u0026#39;$ESC_GROUP\u0026#39;, name: \u0026#39;$ESC_NAME\u0026#39;, version: \u0026#39;$ESC_NEW\u0026#39;#g\u0026#34; build.gradle; \\ else \\ # Insert new dependency inside dependencies { } echo \u0026#34;====== Adding new dependency $GROUP:$NAME:$NEW_VERSION\u0026#34;; \\ sed -i \u0026#34;/dependencies\\s*{/a\\ implementation group: \u0026#39;$GROUP\u0026#39;, name: \u0026#39;$NAME\u0026#39;, version: \u0026#39;$NEW_VERSION\u0026#39;\u0026#34; build.gradle; \\ fi; \\ done \u0026amp;\u0026amp; \\ \\ echo \u0026#34;Version upgrade complete!\u0026#34; \u0026amp;\u0026amp; \\ cat build.gradle # Build the application JAR after dependency check RUN ./gradlew --no-daemon bootJar # Generate java healthcheck class RUN mkdir -p /app/health \u0026amp;\u0026amp; cat \u0026gt; /app/health/HealthCheck.java \u0026lt;\u0026lt;\u0026#39;EOF\u0026#39; import java.net.HttpURLConnection; import java.net.URL; import java.time.Instant; public class HealthCheck { public static void main(String[] args) { String healthUrl = \u0026#34;http://localhost:8080/health\u0026#34;; try { URL url = new URL(healthUrl); HttpURLConnection conn = (HttpURLConnection) url.openConnection(); conn.setConnectTimeout(2000); conn.setReadTimeout(2000); conn.setRequestMethod(\u0026#34;GET\u0026#34;); int code = conn.getResponseCode(); if (code == 200) { System.out.println(Instant.now() + \u0026#34;Healthcheck OK (\u0026#34; + code + \u0026#34;)\u0026#34;); System.exit(0); } else { System.err.println(Instant.now() + \u0026#34;Healthcheck failed (\u0026#34; + code + \u0026#34;)\u0026#34;); System.exit(1); } } catch (Exception e) { System.err.println(Instant.now() + \u0026#34; Healthcheck error: \u0026#34; + e.getMessage()); System.exit(1); } } } EOF # Compile HealthCheck.java file RUN javac /app/health/HealthCheck.java # Stage 2 â€” Runtime image (auto-updated base) FROM hmctspublic.azurecr.io/base/java:21-distroless WORKDIR /app # Copy compiled app COPY --from=builder /app/build/libs/*.jar app.jar # Copy complied healthcheck class COPY --from=builder /app/health/HealthCheck.class /app/HealthCheck.class EXPOSE 8080 ENTRYPOINT [\u0026#34;java\u0026#34;, \u0026#34;-jar\u0026#34;, \u0026#34;app.jar\u0026#34;] HEALTHCHECK --interval=15s --timeout=5s --start-period=10s --retries=3 \\ CMD [\u0026#34;java\u0026#34;, \u0026#34;HealthCheck\u0026#34;] 3. Dockerfile TOP (Java) â€“ Dung Cao (Alpine JDK/JRE tá»‘i Æ°u) Ká»¹ thuáº­t Giáº£i thÃ­ch theo tÃ¡c giáº£ Nguá»“n tham kháº£o TÃ¡ch riÃªng JDK/JRE báº±ng ARG DÃ¹ng ARG BUILD_JDK_IMAGE vÃ  RUNTIME_IMAGE Ä‘á»ƒ dá»… Ä‘á»•i base image (JDK cho build, JRE cho runtime), váº«n giá»¯ Dockerfile Ä‘Æ¡n giáº£n. Gradle cache vá»›i BuildKit DÃ¹ng --mount=type=cache,target=/cache/.gradle cho cÃ¡c lá»‡nh ./gradlew Ä‘á»ƒ tá»‘i Æ°u thá»i gian build láº·p láº¡i. KhÃ´ng cháº¡y test trong build image bootJar -x test giÃºp build nhanh hÆ¡n cho mÃ´i trÆ°á»ng CI/CD vÃ  Docker contest (Æ°u tiÃªn ra artifact). Non-root user + chown Táº¡o user/group app, --chown=app:app khi copy JAR Ä‘áº£m báº£o runtime an toÃ n, tuÃ¢n CIS Docker Benchmark. Healthcheck vá»›i curl CÃ i curl (apk add \u0026ndash;no-cache) rá»“i dÃ¹ng curl -fsS tá»›i /health cho healthcheck rÃµ rÃ ng, dá»… debug. JVM tuning cho container JAVA_OPTS báº­t UseContainerSupport, MaxRAMPercentage=75, G1GC, ExitOnOutOfMemoryError, heap dump pathâ€¦ giÃºp JVM hiá»ƒu giá»›i háº¡n container vÃ  fail-fast khi OOM. Dockerfile TOP (JAVA) â€“ Dung Cao\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 # Dockerfile.txt # === Alpine build optimized for Dockerfile Contest 2025 === # Focus: security, lightweight, clear, maintainable # Build-time arguments ARG BUILD_JDK_IMAGE=eclipse-temurin:21-jdk-alpine-3.22 ARG RUNTIME_IMAGE=eclipse-temurin:21-jre-alpine-3.22 # ---------- Stage: builder ---------- FROM ${BUILD_JDK_IMAGE} AS builder # Set non-interactive environment \u0026amp; reproducible timezone ENV TZ=UTC \\ LANG=C.UTF-8 \\ LC_ALL=C.UTF-8 \\ GRADLE_USER_HOME=/cache/.gradle WORKDIR /workspace # Copy Gradle wrapper and descriptors COPY gradlew . COPY gradle/ gradle/ COPY build.gradle ./ RUN chmod +x ./gradlew # Resolve dependencies using BuildKit cache mount RUN --mount=type=cache,target=/cache/.gradle \\ ./gradlew --no-daemon dependencies || true # Copy application source COPY src/ src/ RUN --mount=type=cache,target=/cache/.gradle \\ ./gradlew --no-daemon clean bootJar -x test \\ -Dspring-framework.version=6.2.11 \\ -Dcommons-lang3.version=3.18.0 \\ -Dtomcat.version=10.1.47 # ---------- Stage: runtime ---------- FROM ${RUNTIME_IMAGE} AS runtime ARG VERSION ARG VCS_REF ARG BUILD_DATE ARG LICENSE=\u0026#34;MIT License\u0026#34; ARG SOURCE=\u0026#34;contest-submission\u0026#34; # OCI Labels (metadata) LABEL org.opencontainers.image.title=\u0026#34;spring-boot-template\u0026#34; \\ org.opencontainers.image.description=\u0026#34;Spring Boot Java application built for Dockerfile Contest 2025\u0026#34; \\ org.opencontainers.image.url=\u0026#34;${SOURCE}\u0026#34; \\ org.opencontainers.image.source=\u0026#34;${SOURCE}\u0026#34; \\ org.opencontainers.image.version=\u0026#34;${VERSION}\u0026#34; \\ org.opencontainers.image.revision=\u0026#34;${VCS_REF}\u0026#34; \\ org.opencontainers.image.licenses=\u0026#34;${LICENSE}\u0026#34; \\ org.opencontainers.image.created=\u0026#34;${BUILD_DATE}\u0026#34; \\ org.opencontainers.image.authors=\u0026#34;Dung Cao\u0026#34; # Create non-root user RUN addgroup -S app \u0026amp;\u0026amp; adduser -S app -G app WORKDIR /app # Copy application jar COPY lib/applicationinsights.json applicationinsights.json COPY --from=builder --chown=app:app /workspace/build/libs/*.jar app.jar # Install curl for healthcheck RUN apk add --no-cache curl \\ \u0026amp;\u0026amp; rm -rf /var/cache/apk/* # Expose HTTP port EXPOSE 8080 # Healthcheck HEALTHCHECK --interval=10s --timeout=3s --start-period=10s --retries=3 \\ CMD curl -fsS http://127.0.0.1:8080/health || exit 1 # JVM optimization ENV JAVA_OPTS=\u0026#34;\\ -XX:+UseContainerSupport \\ -XX:MaxRAMPercentage=75.0 \\ -Djava.security.egd=file:/dev/./urandom \\ -Dserver.shutdown=graceful \\ -Dspring.lifecycle.timeout-per-shutdown-phase=10s \\ -Dfile.encoding=UTF-8 \\ -XX:+ExitOnOutOfMemoryError \\ -XX:+UseG1GC \\ -XX:+HeapDumpOnOutOfMemoryError \\ -XX:HeapDumpPath=/tmp \\ \u0026#34; # Graceful termination signal STOPSIGNAL SIGTERM # Switch to non-root user USER app # --- Entry point --- ENTRYPOINT [\u0026#34;sh\u0026#34;, \u0026#34;-c\u0026#34;, \u0026#34;exec java ${JAVA_OPTS} -jar /app/app.jar\u0026#34;] 4. Dockerfile TOP (tham kháº£o â€“ Java) â€“ HMCTS Spring Boot Template (Layered + jlink) Ká»¹ thuáº­t Giáº£i thÃ­ch theo tÃ¡c giáº£ Nguá»“n tham kháº£o Gradle cache + tÃ¡ch layer DÃ¹ng BuildKit cache id=gradle-cache cho Gradle, sau Ä‘Ã³ dÃ¹ng jarmode=layertools Ä‘á»ƒ extract cÃ¡c lá»›p dependencies, spring-boot-loader, snapshot-dependencies, application giÃºp cache Docker layer tá»‘i Ä‘a. Custom JRE vá»›i jlink Cháº¡y jlink vá»›i danh sÃ¡ch module Java chá»n tay Ä‘á»ƒ táº¡o JRE tá»‘i thiá»ƒu (/jre-minimal), giáº£m hÆ¡n 100MB so vá»›i JDK full. Alpine runtime tá»‘i thiá»ƒu Runtime base alpine:3.21 chá»‰ cÃ i ca-certificates, tzdata, tini, curl, sau Ä‘Ã³ cháº¡y vá»›i non-root appuser. JAVA_TOOL_OPTIONS cho container Tá»‘i Æ°u JVM: UseContainerSupport, MaxRAMPercentage, UseG1GC, UseStringDeduplication, ExitOnOutOfMemoryError,â€¦ Ä‘á»ƒ tá»‘i Æ°u memory \u0026amp; GC trong container. OCI labels ráº¥t Ä‘áº§y Ä‘á»§ Ghi rÃµ vendor, authors, source, version, revision, base.name, base.digest, com.hmcts.*â€¦ giÃºp traceability cho tá»• chá»©c. Healthcheck dÃ¹ng curl Healthcheck /health qua curl -f, retry cÃ³ cáº¥u hÃ¬nh há»£p lÃ½ cho Spring Boot khá»Ÿi Ä‘á»™ng. Dockerfile TOP (tham kháº£o â€“ JAVA) â€“ HMCTS Spring Boot Template\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 # syntax=docker/dockerfile:1.7 # ============================================================================ # STAGE 1: Application builder with optimized caching # ============================================================================ FROM eclipse-temurin:21-jdk-alpine@sha256:89517925fa675c6c4b770bee7c44d38a7763212741b0d6fca5a5103caab21a97 AS builder # Install build dependencies (minimal) RUN apk add --no-cache binutils \u0026amp;\u0026amp; \\ rm -rf /var/cache/apk/* WORKDIR /build # Copy Gradle wrapper and dependency definition files first # This layer will be cached until these files change COPY gradle/ gradle/ COPY gradlew build.gradle ./ # Download dependencies with BuildKit cache mount for faster subsequent builds RUN --mount=type=cache,id=gradle-cache,target=/root/.gradle,sharing=locked \\ chmod +x gradlew \u0026amp;\u0026amp; \\ ./gradlew dependencies --no-daemon --parallel --console=plain # Copy only production source code (exclude tests, docs, etc.) COPY src/main/ src/main/ # Build optimized JAR with cache mount RUN --mount=type=cache,id=gradle-cache,target=/root/.gradle,sharing=locked \\ ./gradlew bootJar --no-daemon --parallel --console=plain -x test \u0026amp;\u0026amp; \\ mkdir -p /app \u0026amp;\u0026amp; \\ mv build/libs/spring-boot-template.jar /app/app.jar # Extract Spring Boot layers for optimal Docker layer caching WORKDIR /app RUN java -Djarmode=layertools -jar app.jar extract --destination /app/extracted # Create minimal custom JRE with jlink (reduces size by \u0026gt;100MB) # Only include Java modules actually needed by Spring Boot RUN $JAVA_HOME/bin/jlink \\ --add-modules java.base,java.compiler,java.desktop,java.instrument,java.management,java.management.rmi,java.naming,java.net.http,java.prefs,java.rmi,java.scripting,java.security.jgss,java.security.sasl,java.sql,jdk.httpserver,jdk.jfr,jdk.unsupported \\ --strip-debug \\ --no-man-pages \\ --no-header-files \\ --compress=zip-9 \\ --output /jre-minimal # ============================================================================ # STAGE 3: Minimal runtime image # ============================================================================ FROM alpine:3.21@sha256:5405e8f36ce1878720f71217d664aa3dea32e5e5df11acbf07fc78ef5661465b # Install only critical runtime dependencies # ca-certificates: for HTTPS connections # tini: proper init system for PID 1 # tzdata: timezone support # curl: for healthcheck RUN apk upgrade --no-cache \u0026amp;\u0026amp; \\ apk add --no-cache \\ ca-certificates \\ tzdata \\ tini \\ curl \u0026amp;\u0026amp; \\ rm -rf /var/cache/apk/* /tmp/* # Create non-root user for security (CIS Docker Benchmark compliance) RUN addgroup -g 1654 -S appgroup \u0026amp;\u0026amp; \\ adduser -u 1654 -S appuser -G appgroup # Copy minimal custom JRE from builder COPY --from=builder --chown=1654:1654 /jre-minimal /opt/java # Set up application directory with proper ownership WORKDIR /app # Copy Spring Boot layers in optimal order (least to most frequently changed) # This maximizes Docker layer cache efficiency COPY --from=builder --chown=1654:1654 /app/extracted/dependencies/ ./ COPY --from=builder --chown=1654:1654 /app/extracted/spring-boot-loader/ ./ COPY --from=builder --chown=1654:1654 /app/extracted/snapshot-dependencies/ ./ COPY --from=builder --chown=1654:1654 /app/extracted/application/ ./ # Switch to non-root user (security best practice) USER 1654:1654 # Set JAVA_HOME and PATH ENV JAVA_HOME=/opt/java \\ PATH=\u0026#34;/opt/java/bin:${PATH}\u0026#34; # Optimal JVM flags for containerized Spring Boot applications # - UseContainerSupport: respect container memory limits # - MaxRAMPercentage: use max 75% of container memory for heap # - UseG1GC: best GC for containers with predictable pause times # - UseStringDeduplication: reduce memory footprint # - ExitOnOutOfMemoryError: fail fast on OOM # - TieredCompilation with level 1: faster startup, good for short-lived containers ENV JAVA_TOOL_OPTIONS=\u0026#34;-XX:+UseContainerSupport \\ -XX:MaxRAMPercentage=75.0 \\ -XX:InitialRAMPercentage=50.0 \\ -XX:+UseG1GC \\ -XX:MaxGCPauseMillis=100 \\ -XX:+UseStringDeduplication \\ -XX:+ParallelRefProcEnabled \\ -XX:+DisableExplicitGC \\ -XX:+ExitOnOutOfMemoryError \\ -Djava.security.egd=file:/dev/./urandom \\ -Djava.awt.headless=true\u0026#34; # Application server port EXPOSE 8080 # Comprehensive OCI labels for traceability and compliance LABEL org.opencontainers.image.title=\u0026#34;Spring Boot Template\u0026#34; \\ org.opencontainers.image.description=\u0026#34;HMCTS Spring Boot Template - Optimized for Contest 2025\u0026#34; \\ org.opencontainers.image.vendor=\u0026#34;HMCTS Reform Programme\u0026#34; \\ org.opencontainers.image.authors=\u0026#34;HMCTS \u0026lt;hmcts@justice.gov.uk\u0026gt;\u0026#34; \\ org.opencontainers.image.source=\u0026#34;https://github.com/hmcts/spring-boot-template\u0026#34; \\ org.opencontainers.image.version=\u0026#34;0.0.1\u0026#34; \\ org.opencontainers.image.revision=\u0026#34;contest-2025\u0026#34; \\ org.opencontainers.image.licenses=\u0026#34;MIT\u0026#34; \\ org.opencontainers.image.base.name=\u0026#34;docker.io/library/alpine:3.21\u0026#34; \\ org.opencontainers.image.base.digest=\u0026#34;sha256:5405e8f36ce1878720f71217d664aa3dea32e5e5df11acbf07fc78ef5661465b\u0026#34; \\ maintainer=\u0026#34;HMCTS Reform Team\u0026#34; \\ com.hmcts.app.name=\u0026#34;spring-boot-template\u0026#34; \\ com.hmcts.build.date=\u0026#34;2025-10-27\u0026#34; # Health check using Spring Boot Actuator /health endpoint # Using curl for lightweight health checks HEALTHCHECK --interval=30s --timeout=5s --start-period=60s --retries=3 \\ CMD curl -f http://localhost:8080/health || exit 1 # Use tini as init system for proper signal handling # Ensures graceful shutdown and zombie process reaping ENTRYPOINT [\u0026#34;/sbin/tini\u0026#34;, \u0026#34;--\u0026#34;] # Run Spring Boot application # Using exec form to ensure proper signal propagation CMD [\u0026#34;java\u0026#34;, \u0026#34;org.springframework.boot.loader.launch.JarLauncher\u0026#34;] Ghi chÃº triá»ƒn khai Khi Ã¡p dá»¥ng cho dá»± Ã¡n Java cá»§a báº¡n, hÃ£y giá»¯ nguyÃªn cÃ¡c nguyÃªn táº¯c chÃ­nh mÃ  cÃ¡c Dockerfile trÃªn thá»ƒ hiá»‡n: Multi-stage build rÃµ rÃ ng (builder + runtime). Tá»‘i Æ°u JRE (dÃ¹ng jdeps + jlink, base image Java distroless hoáº·c JRE-only image). Healthcheck rÃµ rÃ ng (native Java hoáº·c wget/curl). Tá»‘i Æ°u dependency (tá»± Ä‘á»™ng hoáº·c thá»§ cÃ´ng) Ä‘á»ƒ giáº£m CVE. Khi copy template vá» dá»± Ã¡n riÃªng, báº¡n nÃªn: Cáº­p nháº­t láº¡i LABEL org.opencontainers.image.source cho Ä‘Ãºng repository cá»§a báº¡n. Äiá»u chá»‰nh endpoint healthcheck (/health, /actuator/health\u0026hellip;) cho trÃ¹ng vá»›i app thá»±c táº¿. Thá»­ build vÃ  scan image vá»›i cÃ¡c tool nhÆ° Trivy Ä‘á»ƒ kiá»ƒm tra security sau khi tá»‘i Æ°u. ","date":"2025-11-29T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/docker-optimization/docker-optimization-java.webp","permalink":"https://tech.nguuyen.io.vn/posts/docker-optimization/docker-opt-java/","title":"Tá»‘i Æ°u Docker cho Java"},{"content":"Dockerfile Contest 2025 â€“ Python tá»‘i Æ°u extreme Dockerfile Contest 2025 thÃºc Ä‘áº©y cá»™ng Ä‘á»“ng DevOps Viá»‡t Nam Ä‘Ã¡nh giÃ¡ láº¡i cÃ¡ch viáº¿t Dockerfile Ä‘á»ƒ Ä‘áº¡t báº£o máº­t, tá»‘i Æ°u, tÆ°á»ng minh. DÆ°á»›i Ä‘Ã¢y lÃ  pháº§n tá»•ng há»£p riÃªng cho háº¡ng má»¥c Python (á»©ng dá»¥ng FastAPI backend service).\nI. Háº¡ng má»¥c PYTHON (Tá»‘i Æ°u cho Backend Service) Háº¡ng má»¥c Python táº­p trung vÃ o viá»‡c tá»‘i Æ°u kÃ­ch thÆ°á»›c image, báº£o máº­t (patch CVE), vÃ  hiá»‡u nÄƒng runtime cho cÃ¡c á»©ng dá»¥ng FastAPI. CÃ¡c giáº£i phÃ¡p Ä‘a dáº¡ng tá»« distroless, Alpine tá»‘i giáº£n, Ä‘áº¿n wheel-based builds.\n1. Dockerfile TOP 1 (Python) â€“ Thanh Nguyen The Ká»¹ thuáº­t Giáº£i thÃ­ch theo tÃ¡c giáº£ Nguá»“n tham kháº£o UV Package Manager Sá»­ dá»¥ng uv thay vÃ¬ pip Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ cÃ i Ä‘áº·t dependencies vÃ  quáº£n lÃ½ virtual environment hiá»‡u quáº£ hÆ¡n. Distroless Base Image DÃ¹ng gcr.io/distroless/base-debian12:nonroot Ä‘á»ƒ giáº£m attack surface, khÃ´ng cÃ³ shell, package manager, hoáº·c cÃ¡c cÃ´ng cá»¥ khÃ´ng cáº§n thiáº¿t. Multi-arch Support Há»— trá»£ cáº£ amd64 vÃ  arm64 báº±ng cÃ¡ch copy shared libraries theo kiáº¿n trÃºc tÆ°Æ¡ng á»©ng. Shared Libraries Copy Copy cÃ¡c thÆ° viá»‡n cáº§n thiáº¿t (libc, libm, libz, libgcc_s) tá»« builder stage Ä‘á»ƒ á»©ng dá»¥ng cháº¡y Ä‘Æ°á»£c trong distroless. Security Patching NÃ¢ng cáº¥p starlette lÃªn 0.49.1 Ä‘á»ƒ fix CVE-2025-62727 vÃ  CVE-2025-54121 mÃ  khÃ´ng cáº§n sá»­a pyproject.toml. LD_LIBRARY_PATH Thiáº¿t láº­p biáº¿n mÃ´i trÆ°á»ng Ä‘á»ƒ há»‡ thá»‘ng tÃ¬m tháº¥y shared libraries táº¡i thÆ° má»¥c tÃ¹y chá»‰nh. Dockerfile TOP 1 (Python)\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 FROM ghcr.io/astral-sh/uv:python3.13-bookworm-slim@sha256:6b8ac7bb76766ffe9f6cc20f56789755d539e8d0e605d8983131227c5c8b87a1 AS builder ENV UV_LINK_MODE=copy ARG TARGETARCH # Copy shared libraries Ä‘á»§ Ä‘á»ƒ cháº¡y á»©ng dá»¥ng trong mÃ´i trÆ°á»ng distroless # Kiá»ƒm tra shared libraries cáº§n thiáº¿t vá»›i lá»‡nh: # ldd $(which python3) vÃ  cÃ¡c thÆ° viá»‡n khÃ¡c trong virtual environment sau khi cÃ i Ä‘áº·t cÃ¡c package cáº§n thiáº¿t (kiá»ƒm tra trÆ°á»›c khi build) # Má»—i kiáº¿n trÃºc sáº½ Ä‘áº·t thÆ° viá»‡n trong cÃ¡c thÆ° má»¥c khÃ¡c nhau, vÃ­ dá»¥: /lib/x86_64-linux-gnu/ cho amd64, /lib/aarch64-linux-gnu/ cho arm64 # do Ä‘Ã³ cáº§n xÃ¡c Ä‘á»‹nh kiáº¿n trÃºc vÃ  copy tá»« thÆ° má»¥c tÆ°Æ¡ng á»©ng. # TARGETARCH lÃ  built-in arg cá»§a docker buildx, tá»± Ä‘á»™ng nháº­n giÃ¡ trá»‹ (amd64 hoáº·c arm64) khi build multi-arch # Shared libraries copy á»Ÿ lá»‡nh phÃ­a dÆ°á»›i lÃ  chÆ°a Ä‘á»§ Ä‘á»ƒ cháº¡y á»©ng dá»¥ng, tuy nhiÃªn gcr.io/distroless/base-debian12 (image sá»­ dá»¥ng lÃ m base image cho runtime táº¡i runtime state) Ä‘Ã£ cÃ³ sáºµn má»™t sá»‘ shared libraries nÃªn chá»‰ cáº§n copy nhá»¯ng thÆ° viá»‡n cÃ²n thiáº¿u. # gcr.io/distroless/base-debian12:nonroot khÃ´ng cÃ³ shell, kiá»ƒm tra shared libraries báº±ng cÃ¡ch sá»­ dá»¥ng gcr.io/distroless/base-debian12:debug # gcr.io/distroless/base-debian12:debug tÆ°Æ¡ng tá»± gcr.io/distroless/base-debian12:nonroot nhÆ°ng cÃ³ thÃªm shell Ä‘á»ƒ phá»¥c vá»¥ debug. RUN if [ \u0026#34;$TARGETARCH\u0026#34; = \u0026#34;amd64\u0026#34; ]; then \\ LIBARCH=\u0026#34;x86_64\u0026#34;; \\ elif [ \u0026#34;$TARGETARCH\u0026#34; = \u0026#34;arm64\u0026#34; ]; then \\ LIBARCH=\u0026#34;aarch64\u0026#34;; \\ else \\ LIBARCH=\u0026#34;unknown\u0026#34;; \\ fi \u0026amp;\u0026amp; \\ mkdir -p /lib/multi-arch \u0026amp;\u0026amp; \\ cp /lib/${LIBARCH}-linux-gnu/libc.so.6 /lib/multi-arch/ \u0026amp;\u0026amp; \\ cp /lib/${LIBARCH}-linux-gnu/libm.so.6 /lib/multi-arch/ \u0026amp;\u0026amp; \\ cp /lib/${LIBARCH}-linux-gnu/libz.so.1 /lib/multi-arch/ \u0026amp;\u0026amp; \\ cp /lib/${LIBARCH}-linux-gnu/libgcc_s.so.1 /lib/multi-arch/ WORKDIR /build # Sá»­ dá»¥ng cache Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ build # CÃ i Ä‘áº·t dependencies trong uv virtual environment # Sá»­ dá»¥ng mount type=bind Ä‘á»ƒ bind cÃ¡c file uv.lock vÃ  pyproject.toml tá»« host vÃ o container mount thay vÃ¬ copy. # --frozen Ä‘á»ƒ Ä‘áº£m báº£o chá»‰ cÃ i Ä‘áº·t Ä‘Ãºng phiÃªn báº£n dependencies trong uv.lock, khÃ´ng update uv.lock # --no-install-project Ä‘á»ƒ khÃ´ng cÃ i Ä‘áº·t project hiá»‡n táº¡i (chá»‰ cÃ i Ä‘áº·t dependencies) # --no-dev Ä‘á»ƒ khÃ´ng cÃ i Ä‘áº·t dev dependencies # --no-editable Ä‘á»ƒ khÃ´ng cÃ i Ä‘áº·t editable mode # starlette 0.46.2 dÃ­nh CVE-2025-62727 CVE-2025-54121, nÃ¢ng cáº¥p Ä‘á»ƒ vÃ¡ lá»—i báº£o máº­t (do thay Ä‘á»•i pyproject.toml vÃ  file uv.lock sáº½ vi pháº¡m ná»™i quy nÃªn cháº¡y lá»‡nh install riÃªng) RUN --mount=type=cache,target=/root/.cache/uv \\ --mount=type=bind,source=uv.lock,target=uv.lock \\ --mount=type=bind,source=pyproject.toml,target=pyproject.toml \\ uv sync --frozen --no-install-project --no-dev --no-editable \u0026amp;\u0026amp; \\ uv pip install \u0026#34;starlette==0.49.1\u0026#34; --no-deps # Sá»­ dá»¥ng distroless lÃ m base image cho runtime Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh báº£o máº­t vÃ  tá»‘i Æ°u kÃ­ch thÆ°á»›c image # Chá»n distroless thay vÃ¬ alpine vÃ¬ alpine sá»­ dá»¥ng musl libc, trong khi python vÃ  nhiá»u thÆ° viá»‡n phá»• biáº¿n trong python Ä‘Æ°á»£c biÃªn dá»‹ch vá»›i glibc, dáº«n Ä‘áº¿n cÃ¡c váº¥n Ä‘á» tÆ°Æ¡ng thÃ­ch. # distroless giÃºp á»©ng dá»¥ng cháº¡y á»•n Ä‘á»‹nh hÆ¡n vÃ  cÅ©ng ráº¥t nháº¹. # cc-debian12 cÃ³ nhiá»u shared libraries cáº§n thiáº¿t cho python vÃ  cÃ¡c package phá»• biáº¿n hÆ¡n so vá»›i base-debian12 # tuy nhiÃªn khi Ä‘Ã£ kiá»ƒm tra ká»¹ cÃ¡c shared libraries cáº§n thiáº¿t (vá»›i lá»‡nh ldd) vÃ  copy Ä‘áº§y Ä‘á»§ tá»« builder stage thÃ¬ base-debian12 sáº½ giÃºp tá»‘i Æ°u kÃ­ch thÆ°á»›c image hÆ¡n mÃ  váº«n Ä‘áº£m báº£o á»©ng dá»¥ng cháº¡y á»•n Ä‘á»‹nh. FROM gcr.io/distroless/base-debian12:nonroot@sha256:10136f394cbc891efa9f20974a48843f21a6b3cbde55b1778582195d6726fa85 AS runtime LABEL maintainer=\u0026#34;Thanh Nguyen The\u0026#34; LABEL maintainer.email=\u0026#34;thanhnt.devops@gmail.com\u0026#34; LABEL maintainer.company=\u0026#34;VIETNAM NATIONAL CYBER SECURITY TECHNOLOGY CORPORATION\u0026#34; LABEL maintainer.youtube=\u0026#34;DevOps Mentor\u0026#34; LABEL image.description=\u0026#34;Secure, minimal Python app using UV and Distroless\u0026#34; WORKDIR /app # Copy cÃ¡c thÆ° viá»‡n vÃ  python tá»« builder stage COPY --from=builder /lib/multi-arch/ /lib/multi-arch/ COPY --from=builder /usr/local/lib/libpython3.13.so.1.0 /usr/local/lib/libpython3.13.so.1.0 COPY --from=builder /usr/local/lib/python3.13/ /usr/local/lib/python3.13/ COPY --from=builder /usr/local/bin/python /usr/local/bin/python3 # Copy virtual environment tá»« builder COPY --from=builder --chown=nonroot:nonroot /build/.venv/ /app/.venv/ # Copy source code - chá»‰ copy nhá»¯ng gÃ¬ cáº§n thiáº¿t COPY --chown=nonroot:nonroot src/ ./src/ # Thiáº¿t láº­p environment variables # Do runtime limit lÃ  1 vCPU, 512MB RAM nÃªn thiáº¿t láº­p WORKERS=2 thay vÃ¬ 3 (nguy cÆ¡ OOM). CÃ´ng thá»©c worker = (2 x sá»‘ lÆ°á»£ng vCPU + 1) chá»‰ Ã¡p dá»¥ng trong trÆ°á»ng há»£p \u0026gt; 1GB RAM # LD_LIBRARY_PATH Ä‘á»ƒ há»‡ thá»‘ng cÃ³ thá»ƒ tÃ¬m tháº¥y cÃ¡c shared libraries cáº§n thiáº¿t táº¡i thÆ° má»¥c má»›i thay vÃ¬ thÆ° má»¥c máº·c Ä‘inh (/lib/x86_64-linux-gnu hoáº·c /lib/aarch64-linux-gnu) # shared libraries khÃ´ng cÃ³ trong /lib/multi-arch sáº½ tiáº¿p tá»¥c Ä‘Æ°á»£c load tá»« thÆ° má»¥c máº·c Ä‘á»‹nh cá»§a há»‡ thá»‘ng ENV PATH=\u0026#34;/app/.venv/bin/:$PATH\u0026#34; \\ PYTHONPATH=\u0026#34;/app/src/\u0026#34; \\ LANG=C.UTF-8 \\ PYTHONUNBUFFERED=1 \\ PYTHONFAULTHANDLER=1 \\ PYTHONDONTWRITEBYTECODE=1 \\ PYTHONHASHSEED=random \\ HOST=0.0.0.0 \\ PORT=8080 \\ WORKERS=2 \\ LOGGING__LEVEL=INFO \\ LOGGING__FORMAT=PLAIN \\ COFFEE_API__HOST=\u0026#34;https://api.sampleapis.com/coffee/\u0026#34; \\ APP_VERSION=0.1.0 \\ GIT_COMMIT_SHA=sha \\ LD_LIBRARY_PATH=/lib/multi-arch # nonroot user máº·c Ä‘á»‹nh Ä‘Ã£ Ä‘Æ°á»£c sá»­ dá»¥ng trong distroless base-debian12:nonroot nÃªn khÃ´ng cáº§n thiáº¿t pháº£i thÃªm lá»‡nh phÃ­a dÆ°á»›i # USER nonroot:nonroot # Expose port máº·c Ä‘á»‹nh EXPOSE 8080 # Command Ä‘á»ƒ cháº¡y á»©ng dá»¥ng ENTRYPOINT [\u0026#34;python\u0026#34;, \u0026#34;src/python_service_template/app.py\u0026#34;] 2. Dockerfile TOP 2 (Python) â€“ newnol Ká»¹ thuáº­t Giáº£i thÃ­ch theo tÃ¡c giáº£ Nguá»“n tham kháº£o Alpine Base Image Sá»­ dá»¥ng python:3.13-alpine Ä‘á»ƒ cÃ³ image nhá» hÆ¡n so vá»›i Debian-based images. Security Patches Cáº­p nháº­t cÃ¡c package cÃ³ CVE: starlette, fastapi, aiohttp, pydantic, structlog, uvloop, uvicorn lÃªn phiÃªn báº£n an toÃ n. Ultra Aggressive Optimization Strip táº¥t cáº£ .so files, xÃ³a __pycache__, test, doc, examples, typing stubs, license files Ä‘á»ƒ giáº£m kÃ­ch thÆ°á»›c. Python Stdlib Cleanup XÃ³a cÃ¡c module khÃ´ng cáº§n thiáº¿t nhÆ° pip, setuptools, wheel, tkinter, distutils, lib2to3, idlelib, test, unittest. Non-root User Táº¡o user UID 10001 vá»›i quyá»n tá»‘i thiá»ƒu Ä‘á»ƒ tÄƒng báº£o máº­t. Healthcheck Sá»­ dá»¥ng wget Ä‘á»ƒ kiá»ƒm tra endpoint /health/ vá»›i timeout ngáº¯n. Dockerfile TOP 2 (Python)\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 # syntax=docker/dockerfile:1.7 # ============================================================================= # DOCKERFILE ULTRA OPTIMIZED + SECURITY PATCHED # Má»¥c tiÃªu: Nháº¹ (\u0026lt;110MB) + Báº£o máº­t cao (0 CVEs) # ============================================================================= # ----------------------------------------------------------------------------- # Stage 1: Dependencies Builder # ----------------------------------------------------------------------------- FROM python:3.13-alpine@sha256:e5fa639e49b85986c4481e28faa2564b45aa8021413f31026c3856e5911618b1 AS deps ENV PIP_NO_CACHE_DIR=1 \\ PIP_DISABLE_PIP_VERSION_CHECK=1 \\ PYTHONDONTWRITEBYTECODE=1 \\ PYTHONUNBUFFERED=1 RUN --mount=type=cache,target=/var/cache/apk \\ apk add --no-cache --virtual .build-deps \\ build-base \\ python3-dev \\ cargo # Install dependencies vá»›i PATCHED versions Ä‘á»ƒ fix CVEs # Note: FastAPI 0.116+ required for starlette 0.49.1+ support RUN --mount=type=cache,target=/root/.cache/pip \\ python -m pip install --no-cache-dir --prefix=/install \\ \u0026#34;aiohttp\u0026gt;=3.12.14,\u0026lt;4.0.0\u0026#34; \\ \u0026#34;asgi-correlation-id\u0026gt;=4.3.4,\u0026lt;5.0.0\u0026#34; \\ \u0026#34;fastapi\u0026gt;=0.116.0\u0026#34; \\ \u0026#34;prometheus-fastapi-instrumentator\u0026gt;=7.0.0,\u0026lt;8.0.0\u0026#34; \\ \u0026#34;pydantic\u0026gt;=2.11.0,\u0026lt;3.0.0\u0026#34; \\ \u0026#34;pydantic-settings\u0026gt;=2.9.1,\u0026lt;3.0.0\u0026#34; \\ \u0026#34;structlog\u0026gt;=25.3.0,\u0026lt;26.0.0\u0026#34; \\ \u0026#34;uvloop\u0026gt;=0.21.0,\u0026lt;0.22.0\u0026#34; \\ \u0026#34;uvicorn[standard]\u0026gt;=0.30.0,\u0026lt;0.31.0\u0026#34; # ULTRA AGGRESSIVE optimization RUN apk add --no-cache binutils \\ # Strip ALL .so files aggressively \u0026amp;\u0026amp; find /install -type f \\( -name \u0026#39;*.so*\u0026#39; -o -name \u0026#39;*.a\u0026#39; \\) -exec strip --strip-all {} + 2\u0026gt;/dev/null || true \\ # Remove all bytecode \u0026amp;\u0026amp; find /install \\( -type d -name __pycache__ -o -type f -name \u0026#39;*.py[co]\u0026#39; \\) -delete 2\u0026gt;/dev/null || true \\ # Remove test/doc/examples \u0026amp;\u0026amp; find /install -type d \\( -name tests -o -name testing -o -name test -o -name doc -o -name docs -o -name example -o -name examples \\) -prune -exec rm -rf {} + 2\u0026gt;/dev/null || true \\ # Minimize .dist-info \u0026amp;\u0026amp; find /install -name \u0026#39;*.dist-info\u0026#39; -type d -exec sh -c \u0026#39;cd \u0026#34;$1\u0026#34; \u0026amp;\u0026amp; find . -type f ! -name \u0026#34;METADATA\u0026#34; ! -name \u0026#34;top_level.txt\u0026#34; ! -name \u0026#34;RECORD\u0026#34; -delete\u0026#39; _ {} \\; 2\u0026gt;/dev/null || true \\ # Remove typing stubs, headers, C files \u0026amp;\u0026amp; find /install -type f \\( -name \u0026#39;*.pyi\u0026#39; -o -name \u0026#39;*.c\u0026#39; -o -name \u0026#39;*.h\u0026#39; -o -name \u0026#39;*.cpp\u0026#39; -o -name \u0026#39;*.cc\u0026#39; \\) -delete \\ # Remove license files \u0026amp;\u0026amp; find /install -type f \\( -name \u0026#39;LICENSE*\u0026#39; -o -name \u0026#39;COPYING*\u0026#39; -o -name \u0026#39;NOTICE*\u0026#39; -o -name \u0026#39;AUTHORS*\u0026#39; -o -name \u0026#39;CHANGELOG*\u0026#39; -o -name \u0026#39;README*\u0026#39; \\) -delete 2\u0026gt;/dev/null || true \\ \u0026amp;\u0026amp; apk del binutils .build-deps # ----------------------------------------------------------------------------- # Stage 2: Runtime (ULTRA MINIMAL + SECURE) # ----------------------------------------------------------------------------- FROM python:3.13-alpine@sha256:e5fa639e49b85986c4481e28faa2564b45aa8021413f31026c3856e5911618b1 AS runtime LABEL org.opencontainers.image.title=\u0026#34;Python Service Template\u0026#34; \\ org.opencontainers.image.description=\u0026#34;Production-ready FastAPI service - Optimized \u0026amp; Secured\u0026#34; \\ org.opencontainers.image.version=\u0026#34;0.1.0\u0026#34; \\ org.opencontainers.image.authors=\u0026#34;newnol \u0026lt;contact@newnol.io.vn\u0026gt;\u0026#34; \\ maintainer=\u0026#34;newnol\u0026#34; \\ security.scan=\u0026#34;trivy-passed\u0026#34; ENV PYTHONDONTWRITEBYTECODE=1 \\ PYTHONUNBUFFERED=1 \\ PIP_NO_CACHE_DIR=1 \\ HOST=0.0.0.0 \\ PORT=5000 \\ WORKERS=1 \\ PYTHONPATH=/app/src \\ TZ=UTC # Install ONLY wget for healthcheck RUN --mount=type=cache,target=/var/cache/apk \\ apk add --no-cache wget WORKDIR /app # Create non-root user RUN addgroup -g 10001 -S app \\ \u0026amp;\u0026amp; adduser -u 10001 -S -G app -h /app -s /sbin/nologin app # Copy dependencies COPY --from=deps --chown=app:app /install /usr/local # Copy source (minimal) COPY --chown=app:app src/ ./src/ # Permissions RUN chmod -R 550 /app # EXTREME Python stdlib cleanup RUN rm -rf \\ /usr/local/lib/python3.13/ensurepip \\ /usr/local/lib/python3.13/site-packages/pip* \\ /usr/local/lib/python3.13/site-packages/setuptools* \\ /usr/local/lib/python3.13/site-packages/wheel* \\ /usr/local/lib/python3.13/distutils \\ /usr/local/lib/python3.13/lib2to3 \\ /usr/local/lib/python3.13/idlelib \\ /usr/local/lib/python3.13/tkinter \\ /usr/local/lib/python3.13/turtledemo \\ /usr/local/lib/python3.13/test \\ /usr/local/lib/python3.13/unittest/test \\ /usr/local/bin/pip* \\ /usr/local/bin/2to3* \\ /usr/local/bin/idle* \\ 2\u0026gt;/dev/null || true # Clean up more unused stdlib modules RUN cd /usr/local/lib/python3.13 \u0026amp;\u0026amp; rm -rf \\ turtle.py \\ pydoc_data \\ 2\u0026gt;/dev/null || true USER app EXPOSE 5000 # Heathcheck HEALTHCHECK --interval=15s --timeout=3s --start-period=10s --retries=2 \\ CMD wget --no-verbose --tries=1 -O /dev/null http://127.0.0.1:${PORT}/health/ || exit 1 STOPSIGNAL SIGTERM CMD [\u0026#34;python\u0026#34;, \u0026#34;src/python_service_template/app.py\u0026#34;] 3. Dockerfile TOP (Python) â€“ Wheel-based Build Ká»¹ thuáº­t Giáº£i thÃ­ch Nguá»“n tham kháº£o Wheel-based Installation Build táº¥t cáº£ dependencies thÃ nh wheel files, sau Ä‘Ã³ cÃ i Ä‘áº·t offline Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ build vÃ  Ä‘áº£m báº£o reproducibility. Dynamic Security Patching Sá»­ dá»¥ng Python script Ä‘á»ƒ parse pyproject.toml, tá»± Ä‘á»™ng nÃ¢ng cáº¥p fastapi vÃ  starlette lÃªn phiÃªn báº£n an toÃ n mÃ  khÃ´ng cáº§n sá»­a file gá»‘c. PIP_ONLY_BINARY Chá»‰ sá»­ dá»¥ng wheel files, khÃ´ng build tá»« source, giÃºp build nhanh hÆ¡n vÃ  trÃ¡nh lá»—i compilation. Offline Installation CÃ i Ä‘áº·t tá»« wheel files local, khÃ´ng cáº§n káº¿t ná»‘i internet á»Ÿ runtime stage. Native Healthcheck Sá»­ dá»¥ng Python http.client thay vÃ¬ external tools nhÆ° curl/wget, giáº£m dependencies. Non-root User Táº¡o user UID 10001 vá»›i home directory riÃªng Ä‘á»ƒ tÄƒng báº£o máº­t. Dockerfile TOP (Python)\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 # syntax=docker/dockerfile:1.7 # ############################## # builder ############################## FROM python:3.13-slim AS builder ENV PIP_DISABLE_PIP_VERSION_CHECK=1 \\ PIP_NO_CACHE_DIR=1 \\ PIP_ONLY_BINARY=:all: \\ PYTHONDONTWRITEBYTECODE=1 \\ PYTHONUNBUFFERED=1 WORKDIR /app # Pre-cache manifests COPY pyproject.toml README.md LICENSE* ./ # Fix HIGH vulnerable issue: CVE-2025-62727 by upgrading starlette and fastapi. RUN --mount=type=cache,target=/root/.cache/pip python - \u0026lt;\u0026lt;\u0026#39;PY\u0026#39; import tomllib, pathlib, re def parse_req(s:str): m = re.match(r\u0026#39;^\\s*([A-Za-z0-9_.-]+)(\\[[^\\]]+\\])?\\s*(.*)$\u0026#39;, s) if m: name, extras, rest = m.group(1), (m.group(2) or \u0026#39;\u0026#39;), (m.group(3) or \u0026#39;\u0026#39;) return name, extras, rest name = re.split(r\u0026#39;[\u0026gt;\u0026lt;=~!; ]\u0026#39;, s, 1)[0] return name, \u0026#39;\u0026#39;, s[len(name):] data = tomllib.loads(pathlib.Path(\u0026#39;pyproject.toml\u0026#39;).read_text()) deps = data.get(\u0026#39;project\u0026#39;, {}).get(\u0026#39;dependencies\u0026#39;, []) safe = [] present = set() for d in deps: name, extras, rest = parse_req(d) norm = name.lower().replace(\u0026#39;_\u0026#39;,\u0026#39;-\u0026#39;) if norm == \u0026#39;fastapi\u0026#39;: safe.append(f\u0026#39;fastapi{extras}\u0026gt;=0.118,\u0026lt;0.121\u0026#39;) else: safe.append(d) present.add(norm) if \u0026#39;starlette\u0026#39; not in present: safe.append(\u0026#39;starlette\u0026gt;=0.49.1,\u0026lt;0.50\u0026#39;) pathlib.Path(\u0026#39;/requirements.safe.txt\u0026#39;).write_text(\u0026#39;\\n\u0026#39;.join(safe) + \u0026#39;\\n\u0026#39;) print(\u0026#39;Resolved safe deps:\u0026#39;, *safe, sep=\u0026#39;\\n- \u0026#39;) PY # Wheel ALL dependencies from the safe list RUN --mount=type=cache,target=/root/.cache/pip \\ pip wheel --wheel-dir /wheels -r /requirements.safe.txt # Build wheel of the project itself COPY src/ ./src/ RUN --mount=type=cache,target=/root/.cache/pip \\ pip wheel --wheel-dir /wheels . ############################## # runtime ############################## FROM python:3.13-slim AS runtime ARG VERSION=0.1.0 ARG VCS_REF=sha ARG BUILD_DATE LABEL org.opencontainers.image.title=\u0026#34;python-service-template\u0026#34; \\ org.opencontainers.image.description=\u0026#34;Dockerfile contest build\u0026#34; \\ org.opencontainers.image.version=$VERSION \\ org.opencontainers.image.revision=$VCS_REF \\ org.opencontainers.image.created=$BUILD_DATE \\ org.opencontainers.image.licenses=\u0026#34;Apache-2.0\u0026#34; ENV PYTHONDONTWRITEBYTECODE=1 \\ PYTHONUNBUFFERED=1 \\ PYTHONOPTIMIZE=2 \\ HOST=0.0.0.0 \\ PORT=5000 \\ WORKERS=1 \\ APP_VERSION=$VERSION \\ GIT_COMMIT_SHA=$VCS_REF # Non-root RUN useradd --create-home --uid 10001 --shell /usr/sbin/nologin appuser WORKDIR /home/appuser # Install offline: install ALL safe deps, then the app wheel with --no-deps COPY --from=builder /wheels /wheels COPY --from=builder /requirements.safe.txt /requirements.safe.txt RUN pip install --no-index --find-links=/wheels -r /requirements.safe.txt \\ \u0026amp;\u0026amp; pip install --no-index --find-links=/wheels --no-deps \\ python-service-template --no-compile \\ \u0026amp;\u0026amp; rm -rf /wheels /requirements.safe.txt EXPOSE 5000 HEALTHCHECK --interval=30s --timeout=2s --start-period=10s --retries=3 \\ CMD python -c \u0026#34;import sys, http.client; c=http.client.HTTPConnection(\u0026#39;127.0.0.1\u0026#39;, int(__import__(\u0026#39;os\u0026#39;).environ.get(\u0026#39;PORT\u0026#39;,\u0026#39;5000\u0026#39;)), timeout=1); c.request(\u0026#39;GET\u0026#39;,\u0026#39;/health\u0026#39;); r=c.getresponse(); sys.exit(0 if r.status==200 else 1)\u0026#34; || exit 1 USER 10001:10001 CMD [\u0026#34;python\u0026#34;, \u0026#34;-m\u0026#34;, \u0026#34;python_service_template.app\u0026#34;] 4. Dockerfile TOP (Python) â€“ Khiem Doan Ká»¹ thuáº­t Giáº£i thÃ­ch Nguá»“n tham kháº£o UV Package Manager Sá»­ dá»¥ng uv Ä‘á»ƒ quáº£n lÃ½ dependencies nhanh hÆ¡n pip, vá»›i cache mount Ä‘á»ƒ tÄƒng tá»‘c rebuild. Alpine + Tini Sá»­ dá»¥ng Alpine Linux nháº¹ vÃ  tini lÃ m init system Ä‘á»ƒ xá»­ lÃ½ signals Ä‘Ãºng cÃ¡ch. Security Patching NÃ¢ng cáº¥p starlette lÃªn 0.50.0 Ä‘á»ƒ fix cÃ¡c CVE mÃ  khÃ´ng cáº§n sá»­a pyproject.toml. Non-root User Táº¡o user nonroot vá»›i UID/GID 14406, má»™t UID khÃ´ng phá»• biáº¿n Ä‘á»ƒ trÃ¡nh conflict. Healthcheck vá»›i curl Sá»­ dá»¥ng curl Ä‘á»ƒ kiá»ƒm tra health endpoint vÃ  grep Ä‘á»ƒ verify response JSON. OCI Labels ThÃªm Ä‘áº§y Ä‘á»§ OCI labels vá»›i metadata vá» version, build date, revision, source. Dockerfile TOP (Python)\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 # syntax=docker/dockerfile:1.19 FROM python:3.13-alpine3.22 AS deps RUN --mount=type=cache,target=/root/.cache/pip \\ pip install --no-compile uv==0.9.2 WORKDIR /app COPY pyproject.toml uv.lock ./ RUN --mount=type=cache,target=/root/.cache/uv \\ uv sync --frozen --no-dev --no-install-project \\ \u0026amp;\u0026amp; uv pip install starlette==0.50.0 FROM python:3.13-alpine3.22 AS final RUN pip install -U pip RUN --mount=type=cache,target=/var/cache/apk \\ apk add --no-cache \\ curl=8.14.1-r2 \\ tini=0.19.0-r3 ARG VERSION=\u0026#34;0.1.0\u0026#34; ARG BUILD_DATE=\u0026#34;2025-11-10T00:00:00Z\u0026#34; ARG REVISION=\u0026#34;unknown\u0026#34; ARG GIT_COMMIT_SHA=\u0026#34;unknown\u0026#34; LABEL org.opencontainers.image.title=\u0026#34;python-service-template\u0026#34; \\ org.opencontainers.image.description=\u0026#34;A batteries-included template for building robust, production-ready Python backend services with FastAPI\u0026#34; \\ org.opencontainers.image.authors=\u0026#34;Khiem Doan\u0026#34; \\ org.opencontainers.image.version=$VERSION \\ org.opencontainers.image.created=$BUILD_DATE \\ org.opencontainers.image.revision=$REVISION \\ org.opencontainers.image.source=\u0026#34;https://github.com/khiemdoan/\u0026#34; \\ org.opencontainers.image.licenses=\u0026#34;MIT\u0026#34; ENV USER=nonroot \\ GROUP=nonroot \\ UID=14406 \\ GID=14406 RUN addgroup -g \u0026#34;$GID\u0026#34; \u0026#34;$GROUP\u0026#34; \\ \u0026amp;\u0026amp; adduser -D -u \u0026#34;$UID\u0026#34; -G \u0026#34;$GROUP\u0026#34; \u0026#34;$USER\u0026#34; USER $USER WORKDIR /app COPY --chown=$USER:$GROUP src/ src/ COPY --from=deps --chown=$USER:$GROUP /app/.venv /app/.venv ENV PATH=\u0026#34;/app/.venv/bin:$PATH\u0026#34; \\ PYTHONPATH=\u0026#34;/app/src\u0026#34; \\ PYTHONUNBUFFERED=1 \\ PYTHONDONTWRITEBYTECODE=1 \\ HOST=0.0.0.0 \\ PORT=3000 \\ WORKERS=1 \\ LOGGING__LEVEL=INFO \\ LOGGING__FORMAT=PLAIN \\ COFFEE_API__HOST=https://api.sampleapis.com/coffee/ \\ APP_VERSION=$VERSION \\ GIT_COMMIT_SHA=$GIT_COMMIT_SHA EXPOSE $PORT HEALTHCHECK --timeout=1s \\ CMD curl -f \u0026#34;http://localhost:${PORT}/health/\u0026#34; | grep \u0026#39;\u0026#34;heartbeat\u0026#34;:\u0026#34;HEALTHY\u0026#34;\u0026#39; || exit 1 ENTRYPOINT [\u0026#34;/sbin/tini\u0026#34;, \u0026#34;--\u0026#34;] CMD [\u0026#34;python\u0026#34;, \u0026#34;src/python_service_template/app.py\u0026#34;] Ghi chÃº triá»ƒn khai CÃ¡c Dockerfile trÃªn chá»‰ mang tÃ­nh tham kháº£o kiáº¿n trÃºc; khi Ã¡p dá»¥ng vÃ o dá»± Ã¡n Python/FastAPI cá»§a báº¡n, hÃ£y giá»¯ nguyÃªn nguyÃªn táº¯c: multi-stage build, security patching, non-root user, pin SHA256 cho base images. Distroless vs Alpine: Distroless an toÃ n hÆ¡n (khÃ´ng cÃ³ shell, package manager) nhÆ°ng cáº§n copy shared libraries thá»§ cÃ´ng. Alpine nháº¹ vÃ  dá»… debug hÆ¡n nhÆ°ng cÃ³ thá»ƒ gáº·p váº¥n Ä‘á» tÆ°Æ¡ng thÃ­ch vá»›i má»™t sá»‘ Python packages. UV vs PIP: UV nhanh hÆ¡n pip Ä‘Ã¡ng ká»ƒ (10-100x) vÃ  quáº£n lÃ½ virtual environment tá»‘t hÆ¡n, nhÆ°ng cáº§n cÃ i Ä‘áº·t thÃªm. Security: LuÃ´n cáº­p nháº­t dependencies Ä‘á»ƒ fix CVE, Ä‘áº·c biá»‡t lÃ  cÃ¡c package phá»• biáº¿n nhÆ° starlette, fastapi, uvicorn. Healthcheck: NÃªn sá»­ dá»¥ng native Python http.client hoáº·c curl/wget tÃ¹y vÃ o base image vÃ  yÃªu cáº§u báº£o máº­t. ","date":"2025-11-23T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/docker-optimization/docker-optimization-python.webp","permalink":"https://tech.nguuyen.io.vn/posts/docker-optimization/docker-opt-python/","title":"Tá»‘i Æ°u Docker cho Python"},{"content":"Dockerfile Contest 2025 â€“ React/Node tá»‘i Æ°u extreme Dockerfile Contest 2025 thÃºc Ä‘áº©y cá»™ng Ä‘á»“ng DevOps Viá»‡t Nam Ä‘Ã¡nh giÃ¡ láº¡i cÃ¡ch viáº¿t Dockerfile Ä‘á»ƒ Ä‘áº¡t báº£o máº­t, tá»‘i Æ°u, tÆ°á»ng minh. DÆ°á»›i Ä‘Ã¢y lÃ  pháº§n tá»•ng há»£p riÃªng cho háº¡ng má»¥c React (á»©ng dá»¥ng Node.js build ra static assets).\nI. Háº¡ng má»¥c REACT (Tá»‘i Æ°u cho Static Web Serving) Háº¡ng má»¥c React táº­p trung giáº£m kÃ­ch thÆ°á»›c image vÃ  tÄƒng tá»‘c phá»¥c vá»¥ file tÄ©nh. Má»™t sá»‘ Ä‘á»™i ngÅ© tá»± biÃªn dá»‹ch HTTP server hoáº·c cháº¡y trÃªn FROM scratch nháº±m Ä‘áº¡t footprint tháº¥p nháº¥t.\n1. Giáº£i Docker Image nháº¹ nháº¥t (TOP Tinh Gá»n) â€“ Nguyá»…n PhÃºc Báº£o LÃ¢m Ká»¹ thuáº­t Giáº£i thÃ­ch theo tÃ¡c giáº£ Nguá»“n tham kháº£o Lá»±a chá»n Project Táº­n dá»¥ng lá»£i tháº¿ app static (React) Ä‘á»ƒ dá»… Ä‘áº¡t image nhá» hÆ¡n so vá»›i Java/Python. Base Image Cá»±c Äoan DÃ¹ng lipanski/docker-static-website:latest, báº£n BusyBox Ä‘Æ°á»£c tinh gá»n chá»‰ giá»¯ HTTP server (~92 KB). Pre-compression NÃ©n Tá»‘i Äa NÃ©n trÆ°á»›c toÃ n bá»™ asset vá»›i Gzip level 9, xÃ³a file gá»‘c, giÃºp image cuá»‘i cÃ¹ng ~300 KB. Healthcheck Ghi \u0026quot;OK\u0026quot; vÃ o dist/health Ä‘á»ƒ cÃ³ endpoint kiá»ƒm tra nhanh. Dockerfile â€“ Docker Image nháº¹ nháº¥t\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 # syntax=docker/dockerfile:1.7 # ============================================================================== # Build Stage - Using Node Alpine for minimal size # ============================================================================== FROM node:22.21.1-alpine3.21@sha256:af8023ec879993821f6d5b21382ed915622a1b0f1cc03dbeb6804afaf01f8885 AS builder # Install pnpm with specific version from package.json and gzip for pre-compression ENV PNPM_HOME=\u0026#34;/pnpm\u0026#34; ENV PATH=\u0026#34;$PNPM_HOME:$PATH\u0026#34; RUN corepack enable \u0026amp;\u0026amp; \\ corepack prepare pnpm --activate WORKDIR /app # Copy package files for dependency installation (optimized layer caching) COPY package.json pnpm-lock.yaml ./ # Install dependencies with cache mount for faster rebuilds # Installs all dependencies (including devDependencies needed for build: typescript, vite, tailwindcss, etc.) RUN --mount=type=cache,id=pnpm,target=/pnpm/store \\ pnpm install --frozen-lockfile # Copy only necessary source files (exclude tests, docs, config files not needed for build) COPY tsconfig.json tsconfig.node.json vite.config.ts tailwind.config.ts postcss.config.js ./ COPY index.html ./ COPY public ./public COPY src ./src # Build the application RUN pnpm run build \u0026amp;\u0026amp; \\ # Verify build output exists test -d dist \u0026amp;\u0026amp; test -f dist/index.html \u0026amp;\u0026amp; \\ # Remove bundle visualizer output (not needed in production, saves ~100KB compressed) rm -f dist/stats.html \u0026amp;\u0026amp; \\ # Create a minimal health check endpoint (1 byte file for ultra-fast response) echo \u0026#34;OK\u0026#34; \u0026gt; dist/health \u0026amp;\u0026amp; \\ # Pre-compress all static files with gzip (level 9 = maximum compression) find dist -type f \\( \\ -name \u0026#34;*.html\u0026#34; -o \\ -name \u0026#34;*.css\u0026#34; -o \\ -name \u0026#34;*.js\u0026#34; -o \\ -name \u0026#34;*.json\u0026#34; -o \\ -name \u0026#34;*.xml\u0026#34; -o \\ -name \u0026#34;*.txt\u0026#34; -o \\ -name \u0026#34;*.svg\u0026#34; \\ \\) -exec sh -c \u0026#39;gzip -9 \u0026#34;{}\u0026#34;\u0026#39; \\; # ============================================================================== # Production Stage - Using lipanski/docker-static-website for extreme minimal footprint (92.5 KB base) # ============================================================================== FROM lipanski/docker-static-website:latest AS production # Add OCI labels for metadata LABEL org.opencontainers.image.title=\u0026#34;Vite React Template\u0026#34; \\ org.opencontainers.image.description=\u0026#34;Production-ready Vite React application with extreme minimal footprint\u0026#34; \\ org.opencontainers.image.version=\u0026#34;0.4.0\u0026#34; \\ org.opencontainers.image.licenses=\u0026#34;MIT OR Apache-2.0\u0026#34; \\ org.opencontainers.image.base.name=\u0026#34;lipanski/docker-static-website:latest\u0026#34; # Copy built assets from builder stage # lipanski/docker-static-website serves from /home/static COPY --from=builder /app/dist /home/static # Expose port (BusyBox httpd uses port 3000 by default) EXPOSE 3000 # The base image already has CMD set to run BusyBox httpd # It automatically serves .gz files when Accept-Encoding: gzip is present # No additional configuration needed - inherited from base image 2. Dockerfile TOP 1 (React) â€“ Nguyá»…n Há»¯u PhÆ°Æ¡ng Ká»¹ thuáº­t Giáº£i thÃ­ch theo tÃ¡c giáº£ Nguá»“n tham kháº£o FROM SCRATCH \u0026amp; Static Linking Stage cuá»‘i scratch, nÃªn Nginx pháº£i build tÄ©nh á»Ÿ Stage 2. Tá»‘i Æ°u Binary Nginx Táº¯t \u0026gt;30 module, giáº£m binary ~76% (5.2 MB). NÃ©n Binary (UPX) DÃ¹ng upx --best --lzma, giáº£m thÃªm ~56%. NÃ©n Song Song Cháº¡y Gzip vÃ  Brotli song song Ä‘á»ƒ chuyá»ƒn táº£i CPU sang build-time. Báº£o máº­t Image Base Pin SHA256 cho má»i base image. Healthcheck tá»‘i giáº£n DÃ¹ng nginx -t -q, khÃ´ng cáº§n curl/wget. Dockerfile TOP 1 (React)\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 433 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 # syntax=docker/dockerfile:1.7 # Multi-arch support: Automatically provided by buildx ARG BUILDPLATFORM ARG TARGETPLATFORM ARG TARGETARCH ARG BUILD_DATE ARG GIT_COMMIT=unknown ARG NGINX_VERSION=1.26.2 ARG NODE_VERSION=20 ARG ALPINE_VERSION=3.20 # ============================================================================== # Stage 1: Application Build # ============================================================================== FROM node:${NODE_VERSION}-alpine@sha256:2d5e8a8a51bc341fd5f2eed6d91455c3a3d147e91a14298fc564b5dc519c1666 AS builder WORKDIR /app # Setup pnpm with corepack ENV PNPM_HOME=\u0026#34;/pnpm\u0026#34; \\ PATH=\u0026#34;$PNPM_HOME:$PATH\u0026#34; RUN corepack enable \u0026amp;\u0026amp; corepack prepare pnpm@9.12.2 --activate # Install dependencies with cache mount COPY package.json pnpm-lock.yaml .npmrc ./ RUN --mount=type=cache,id=pnpm,target=/pnpm/store \\ pnpm install --frozen-lockfile --prefer-offline # Copy source and build configuration COPY tsconfig.json tsconfig.node.json vite.config.ts ./ COPY postcss.config.js tailwind.config.ts biome.json ./ COPY index.html ./ COPY public ./public COPY src ./src # Build and clean artifacts ENV NODE_ENV=production RUN pnpm build \u0026amp;\u0026amp; \\ find dist -type f \\( -name \u0026#34;*.map\u0026#34; -o -name \u0026#34;.*\u0026#34; \\) -delete \u0026amp;\u0026amp; \\ rm -f dist/stats.html # ============================================================================== # Stage 2: Static Nginx Binary Builder # ============================================================================== FROM alpine:${ALPINE_VERSION}@sha256:765942a4039992336de8dd5db680586e1a206607dd06170ff0a37267a9e01958 AS nginx-builder ARG NGINX_VERSION ARG TARGETPLATFORM ARG BUILDPLATFORM ENV NGINX_SHA256=627fe086209bba80a2853a0add9d958d7ebbdffa1a8467a5784c9a6b4f03d738 # Log build platform info for multi-arch RUN echo \u0026#34;Building on $BUILDPLATFORM for $TARGETPLATFORM\u0026#34; # Install build dependencies RUN apk add --no-cache \\ gcc g++ musl-dev make linux-headers curl \\ pcre-dev pcre2-dev zlib-dev zlib-static \\ openssl-dev openssl-libs-static upx # Download and verify nginx WORKDIR /tmp RUN curl -fSL \u0026#34;https://nginx.org/download/nginx-${NGINX_VERSION}.tar.gz\u0026#34; -o nginx.tar.gz \u0026amp;\u0026amp; \\ echo \u0026#34;${NGINX_SHA256} nginx.tar.gz\u0026#34; | sha256sum -c - # Build fully static nginx with minimal modules RUN tar -xzf nginx.tar.gz \u0026amp;\u0026amp; \\ cd \u0026#34;nginx-${NGINX_VERSION}\u0026#34; \u0026amp;\u0026amp; \\ ./configure \\ --prefix=/usr/local/nginx \\ --sbin-path=/usr/local/nginx/sbin/nginx \\ --conf-path=/etc/nginx/nginx.conf \\ --pid-path=/run/nginx.pid \\ --lock-path=/run/nginx.lock \\ --error-log-path=/dev/stderr \\ --http-log-path=/dev/stdout \\ --user=nobody \\ --group=nobody \\ # Performance features --with-threads \\ --with-file-aio \\ --with-http_ssl_module \\ --with-http_v2_module \\ --with-http_gzip_static_module \\ --with-http_stub_status_module \\ --with-pcre \\ --with-pcre-jit \\ # Static linking and optimization --with-cc-opt=\u0026#39;-static -Os -ffunction-sections -fdata-sections\u0026#39; \\ --with-ld-opt=\u0026#39;-static -Wl,--gc-sections\u0026#39; \\ # Disable unnecessary modules --without-http_charset_module \\ --without-http_ssi_module \\ --without-http_userid_module \\ --without-http_auth_basic_module \\ --without-http_mirror_module \\ --without-http_autoindex_module \\ --without-http_geo_module \\ --without-http_map_module \\ --without-http_split_clients_module \\ --without-http_referer_module \\ --without-http_rewrite_module \\ --without-http_proxy_module \\ --without-http_fastcgi_module \\ --without-http_uwsgi_module \\ --without-http_scgi_module \\ --without-http_grpc_module \\ --without-http_memcached_module \\ --without-http_limit_conn_module \\ --without-http_limit_req_module \\ --without-http_empty_gif_module \\ --without-http_browser_module \\ --without-http_upstream_hash_module \\ --without-http_upstream_ip_hash_module \\ --without-http_upstream_least_conn_module \\ --without-http_upstream_random_module \\ --without-http_upstream_keepalive_module \\ --without-http_upstream_zone_module \\ --without-mail_pop3_module \\ --without-mail_imap_module \\ --without-mail_smtp_module \\ --without-stream_limit_conn_module \\ --without-stream_access_module \\ --without-stream_geo_module \\ --without-stream_map_module \\ --without-stream_split_clients_module \\ --without-stream_return_module \\ --without-stream_set_module \\ --without-stream_upstream_hash_module \\ --without-stream_upstream_least_conn_module \\ --without-stream_upstream_random_module \\ --without-stream_upstream_zone_module \u0026amp;\u0026amp; \\ make -j\u0026#34;$(nproc)\u0026#34; \u0026amp;\u0026amp; \\ make install # Optimize binary: strip symbols + UPX compression RUN strip --strip-all /usr/local/nginx/sbin/nginx \u0026amp;\u0026amp; \\ upx --best --lzma /usr/local/nginx/sbin/nginx \u0026amp;\u0026amp; \\ /usr/local/nginx/sbin/nginx -V # ============================================================================== # Stage 3: Asset Compression # ============================================================================== FROM alpine:${ALPINE_VERSION}@sha256:765942a4039992336de8dd5db680586e1a206607dd06170ff0a37267a9e01958 AS compressor RUN apk add --no-cache brotli gzip findutils WORKDIR /app COPY --from=builder /app/dist ./dist # Parallel compression: gzip + brotli for all text-based assets RUN find dist -type f \\ \\( -name \u0026#34;*.html\u0026#34; -o -name \u0026#34;*.css\u0026#34; -o -name \u0026#34;*.js\u0026#34; -o \\ -name \u0026#34;*.json\u0026#34; -o -name \u0026#34;*.svg\u0026#34; -o -name \u0026#34;*.xml\u0026#34; \\) \\ -print0 | xargs -0 -P\u0026#34;$(nproc)\u0026#34; -I {} sh -c \u0026#39;gzip -9 -k -f \u0026#34;{}\u0026#34; \u0026amp;\u0026amp; brotli -q 11 -f \u0026#34;{}\u0026#34;\u0026#39; # ============================================================================== # Stage 4: Minimal Filesystem Preparation # ============================================================================== FROM alpine:${ALPINE_VERSION}@sha256:765942a4039992336de8dd5db680586e1a206607dd06170ff0a37267a9e01958 AS rootfs # Create directory structure RUN mkdir -p \\ /rootfs/etc/nginx/conf.d \\ /rootfs/usr/share/nginx/html \\ /rootfs/var/log/nginx \\ /rootfs/var/cache/nginx \\ /rootfs/usr/local/nginx/{client_body,proxy,fastcgi,uwsgi,scgi}_temp \\ /rootfs/tmp \\ /rootfs/run \u0026amp;\u0026amp; \\ chmod 1777 /rootfs/tmp # Create minimal user database (nobody user) RUN echo \u0026#34;nobody:x:65534:65534:nobody:/:/sbin/nologin\u0026#34; \u0026gt; /rootfs/etc/passwd \u0026amp;\u0026amp; \\ echo \u0026#34;nobody:x:65534:\u0026#34; \u0026gt; /rootfs/etc/group # Copy nginx configuration COPY nginx.conf /rootfs/etc/nginx/conf.d/default.conf COPY --from=nginx-builder /etc/nginx/mime.types /rootfs/etc/nginx/mime.types COPY --from=compressor /app/dist /rootfs/usr/share/nginx/html # Create main nginx.conf RUN cat \u0026gt; /rootfs/etc/nginx/nginx.conf \u0026lt;\u0026lt;\u0026#39;EOF\u0026#39; worker_processes auto; error_log stderr warn; pid /run/nginx.pid; events { worker_connections 1024; use epoll; multi_accept on; } http { include /etc/nginx/mime.types; default_type application/octet-stream; access_log /dev/stdout; # Performance optimizations sendfile on; tcp_nopush on; tcp_nodelay on; keepalive_timeout 65; server_tokens off; # Compression gzip on; gzip_static on; gzip_vary on; gzip_types text/plain text/css application/json application/javascript text/xml application/xml image/svg+xml; include /etc/nginx/conf.d/*.conf; } EOF # Set proper ownership RUN chown -R 65534:65534 \\ /rootfs/usr/share/nginx/html \\ /rootfs/var/log/nginx \\ /rootfs/var/cache/nginx \\ /rootfs/usr/local/nginx \\ /rootfs/tmp \\ /rootfs/run # ============================================================================== # Stage 5: Final Distroless Image (FROM SCRATCH) # ============================================================================== FROM scratch # Re-declare build args for metadata ARG BUILD_DATE ARG GIT_COMMIT=unknown # OCI metadata labels LABEL org.opencontainers.image.title=\u0026#34;Vite React - Distroless\u0026#34; \\ org.opencontainers.image.description=\u0026#34;Distroless minimal image (\u0026lt;6MB) - UPX compressed\u0026#34; \\ org.opencontainers.image.version=\u0026#34;2.2.0-distroless-upx\u0026#34; \\ org.opencontainers.image.created=\u0026#34;${BUILD_DATE}\u0026#34; \\ org.opencontainers.image.revision=\u0026#34;${GIT_COMMIT}\u0026#34; \\ org.opencontainers.image.base.name=\u0026#34;scratch\u0026#34; \\ org.opencontainers.image.source=\u0026#34;https://github.com/riipandi/vite-react-template\u0026#34; \\ org.opencontainers.image.licenses=\u0026#34;MIT OR Apache-2.0\u0026#34; \\ maintainer=\u0026#34;contest-2025-optimized\u0026#34; # Copy static nginx binary and minimal filesystem COPY --from=nginx-builder /usr/local/nginx/sbin/nginx /usr/sbin/nginx COPY --from=rootfs /rootfs / # Run as non-root user (nobody = 65534) USER 65534:65534 EXPOSE 3000 # Lightweight healthcheck using nginx config test HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \\ CMD [\u0026#34;/usr/sbin/nginx\u0026#34;, \u0026#34;-t\u0026#34;, \u0026#34;-q\u0026#34;] STOPSIGNAL SIGTERM ENTRYPOINT [\u0026#34;/usr/sbin/nginx\u0026#34;] CMD [\u0026#34;-g\u0026#34;, \u0026#34;daemon off;\u0026#34;] 3. Dockerfile TOP 2 (React) â€“ Tráº§n Quá»‘c ToÃ n Ká»¹ thuáº­t Giáº£i thÃ­ch theo tÃ¡c giáº£ Nguá»“n tham kháº£o Healthcheck Native C Viáº¿t chÆ°Æ¡ng trÃ¬nh C má»Ÿ socket Ä‘áº¿n cá»•ng 3000, tráº£ vá» exit code 0/1. Thu tháº­p Shared Library DÃ¹ng ldd Ä‘á»ƒ copy Ä‘Ãºng thÆ° viá»‡n cáº§n cho Nginx khi cháº¡y trong scratch. Cáº¥u hÃ¬nh Nginx tá»‘i giáº£n Táº¯t http_rewrite, http_proxy, mail_*\u0026hellip; vÃ¬ chá»‰ phá»¥c vá»¥ static. Non-root User Táº¡o user UID 101 cháº¡y trong image Ä‘á»ƒ tÄƒng báº£o máº­t. Dockerfile TOP 2 (React)\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 # STAGE 1: The Builder (Custom Nginx Build) FROM alpine:3.19 AS builder # Multi-arch support ARG TARGETARCH RUN apk add --no-cache build-base pcre2-dev zlib-dev openssl-dev # Download and verify Nginx source with SHA256 checksum ARG NGINX_VERSION=1.27.0 ARG NGINX_SHA256=b7230e3cf87eaa2d4b0bc56aadc920a960c7873b9991a1b66ffcc08fc650129c ADD --checksum=sha256:${NGINX_SHA256} https://nginx.org/download/nginx-${NGINX_VERSION}.tar.gz /tmp/ RUN tar -xzf /tmp/nginx-${NGINX_VERSION}.tar.gz -C /tmp # Configure Nginx with minimal modules (static file serving only) RUN cd /tmp/nginx-${NGINX_VERSION} \u0026amp;\u0026amp; \\ ./configure \\ --prefix=/etc/nginx \\ --sbin-path=/usr/sbin/nginx \\ --conf-path=/etc/nginx/nginx.conf \\ --pid-path=/var/run/nginx.pid \\ --error-log-path=/dev/stderr \\ --http-log-path=/dev/stdout \\ --user=nginx \\ --group=nginx \\ --without-http_rewrite_module \\ --without-http_gzip_module \\ --without-http_proxy_module \\ --without-http_fastcgi_module \\ --without-http_uwsgi_module \\ --without-http_scgi_module \\ --without-mail_pop3_module \\ --without-mail_imap_module \\ --without-mail_smtp_module \u0026amp;\u0026amp; \\ make \u0026amp;\u0026amp; \\ make install \u0026amp;\u0026amp; rm -rf /tmp/* \u0026amp;\u0026amp; strip /usr/sbin/nginx # Create file Nginx main config (include snippet file) RUN { \\ mkdir -p /etc/nginx/conf.d \u0026amp;\u0026amp; \\ cat \u0026gt; /etc/nginx/nginx.conf; \\ } \u0026lt;\u0026lt;EOF events { worker_connections 1024; } http { include /etc/nginx/mime.types; client_body_temp_path /var/cache/nginx/client_body_temp; include /etc/nginx/conf.d/default.conf; } EOF RUN mkdir -p /etc/nginx/conf.d \u0026amp;\u0026amp; \\ cat \u0026gt; /etc/nginx/mime.types \u0026lt;\u0026lt;\u0026#39;EOF\u0026#39; types { text/html html; text/css css; application/javascript js; image/png png; application/json json; } EOF # Create minimal user/group files (no full /etc/passwd needed in scratch image) RUN echo \u0026#34;nginx:x:101:101:nginx:/var/cache/nginx:/sbin/nologin\u0026#34; \u0026gt; /etc/passwd \u0026amp;\u0026amp; \\ echo \u0026#34;nginx:x:101:\u0026#34; \u0026gt; /etc/group # Build static healthcheck binary (no external dependencies like wget/curl needed) RUN { \\ cat \u0026gt; /tmp/healthcheck.c \u0026amp;\u0026amp; \\ gcc -static -O2 -o /healthcheck /tmp/healthcheck.c; \\ } \u0026lt;\u0026lt;EOF #include \u0026lt;netdb.h\u0026gt; #include \u0026lt;unistd.h\u0026gt; #include \u0026lt;sys/socket.h\u0026gt; #include \u0026lt;netinet/in.h\u0026gt; int main() { struct hostent *h = gethostbyname(\u0026#34;localhost\u0026#34;); if (!h) return 1; int sock = socket(AF_INET, SOCK_STREAM, 0); if (sock \u0026lt; 0) return 1; struct sockaddr_in addr; addr.sin_family = AF_INET; addr.sin_port = htons(3000); addr.sin_addr = *(struct in_addr *)h-\u0026gt;h_addr_list[0]; int result = connect(sock, (struct sockaddr *)\u0026amp;addr, sizeof(addr)); close(sock); return (result == 0) ? 0 : 1; } EOF # Collect shared libraries required by Nginx (supports multi-arch) RUN mkdir -p /staging/lib /staging/usr/lib \u0026amp;\u0026amp; \\ ldd /usr/sbin/nginx | tr -s \u0026#39;[:space:]\u0026#39; \u0026#39;\\n\u0026#39; | grep \u0026#39;^/\u0026#39; | \\ xargs -I \u0026#39;{}\u0026#39; sh -c \u0026#39;mkdir -p /staging$(dirname {}) \u0026amp;\u0026amp; cp -L {} /staging$(dirname {})\u0026#39; # Create mount point directories for tmpfs (writable dirs in read-only container) RUN mkdir -p /var/cache/nginx /var/run /tmp \u0026amp;\u0026amp; chown -R 101:101 /var/cache/nginx /var/run /tmp # STAGE 2: App Builder (Build React App) FROM node:20.11.0-alpine3.19 AS app_builder WORKDIR /app RUN corepack enable \u0026amp;\u0026amp; corepack prepare pnpm@9.12.2 --activate # Copy dependencies files first for caching COPY package.json pnpm-lock.yaml ./ RUN --mount=type=cache,target=/root/.local/share/pnpm/store,sharing=locked \\ pnpm install --frozen-lockfile --prefer-offline # Copy config files COPY tsconfig.json tsconfig.node.json vite.config.ts ./ COPY postcss.config.js tailwind.config.ts index.html ./ # Copy source code (avoid copying tests, stories, etc.) COPY public/ ./public/ COPY src/ ./src/ RUN pnpm build \u0026amp;\u0026amp; \\ test -f dist/index.html || (echo \u0026#34;Build failed\u0026#34; \u0026amp;\u0026amp; exit 1) # STAGE 3: Production Image (FROM scratch) FROM scratch LABEL org.opencontainers.image.title=\u0026#34;Vite React Template\u0026#34; \\ org.opencontainers.image.description=\u0026#34;Minimal Vite React SPA with custom Nginx built from scratch\u0026#34; \\ org.opencontainers.image.version=\u0026#34;1.0.0\u0026#34; \\ org.opencontainers.image.licenses=\u0026#34;MIT\u0026#34; \\ org.opencontainers.image.base.name=\u0026#34;scratch\u0026#34; \\ org.opencontainers.image.authors=\u0026#34;Contest 2025\u0026#34; # Copy file user/group COPY --from=builder /etc/passwd /etc/group /etc/ # Copy mount points to image COPY --chown=101:101 --from=builder /var/cache/nginx /var/cache/nginx COPY --chown=101:101 --from=builder /var/run /var/run COPY --chown=101:101 --from=builder /tmp /tmp # Copy Nginx and shared libraries COPY --from=builder /usr/sbin/nginx /usr/sbin/nginx COPY --from=builder /staging/ / # Copy main Nginx config (just created) COPY --from=builder /etc/nginx/nginx.conf /etc/nginx/nginx.conf # Copy file config from project into included location COPY nginx.conf /etc/nginx/conf.d/default.conf # Copy remaining necessary files COPY --from=builder /etc/nginx/mime.types /etc/nginx/mime.types COPY --from=app_builder /app/dist /usr/share/nginx/html COPY --from=builder /healthcheck /healthcheck USER 101:101 EXPOSE 3000 HEALTHCHECK --interval=30s --timeout=3s --retries=3 \\ CMD [\u0026#34;/healthcheck\u0026#34;] CMD [\u0026#34;/usr/sbin/nginx\u0026#34;, \u0026#34;-g\u0026#34;, \u0026#34;daemon off;\u0026#34;] 4. Dockerfile TOP 3 (React) â€“ Go + FastHTTP Ká»¹ thuáº­t Giáº£i thÃ­ch Nguá»“n tham kháº£o Go Server (FastHTTP) DÃ¹ng github.com/valyala/fasthttp thay cho Nginx. Asset Embedding //go:embed dist Ä‘á»ƒ nhÃºng toÃ n bá»™ asset vÃ o binary. NÃ©n Binary tá»‘i Ä‘a Build tÄ©nh, strip, rá»“i upx --ultra-brute --lzma. Healthcheck tÃ­ch há»£p Binary Go tá»± Ä‘áº£m nhiá»‡m khi cháº¡y -health. Dockerfile TOP 3 (React)\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 # Stage 1: Build frontend FROM node:20-alpine AS builder RUN corepack enable pnpm WORKDIR /app COPY package.json pnpm-lock.yaml ./ RUN pnpm install --frozen-lockfile COPY tsconfig*.json vite.config.ts postcss.config.js tailwind.config.ts ./ COPY index.html ./ COPY src ./src COPY public ./public RUN pnpm build # Clean up dist (remove source maps, licenses, stats, robots.txt, etc.) RUN find /app/dist -type f -name \u0026#39;*.map\u0026#39; -delete \\ \u0026amp;\u0026amp; find /app/dist -type f -name \u0026#39;*.LICENSE.*\u0026#39; -delete \\ \u0026amp;\u0026amp; find /app/dist -type f -name \u0026#39;*.txt\u0026#39; -delete \\ \u0026amp;\u0026amp; find /app/dist -type f -name \u0026#39;stats.html\u0026#39; -delete \\ \u0026amp;\u0026amp; find /app/dist -type f -name \u0026#39;robots.txt\u0026#39; -delete \\ \u0026amp;\u0026amp; find /app/dist -type f -name \u0026#39;_redirects\u0026#39; -delete # Stage 2: Build Go server with FastHTTP FROM golang:1.21-alpine AS go-builder WORKDIR /app # CÃ i strip vÃ  upx RUN apk add --no-cache binutils upx # Copy dist files Ä‘á»ƒ embed COPY --from=builder /app/dist ./dist # Táº¡o go.mod vÃ  main.go vá»›i FastHTTP RUN cat \u0026gt; go.mod \u0026lt;\u0026lt; \u0026#39;GOMOD\u0026#39; module server go 1.21 require github.com/valyala/fasthttp v1.51.0 GOMOD RUN cat \u0026gt; main.go \u0026lt;\u0026lt; \u0026#39;GOSRC\u0026#39; package main import ( \u0026#34;embed\u0026#34; \u0026#34;log\u0026#34; \u0026#34;os\u0026#34; \u0026#34;path\u0026#34; \u0026#34;strings\u0026#34; \u0026#34;github.com/valyala/fasthttp\u0026#34; ) //go:embed dist var distFiles embed.FS func main() { port := os.Getenv(\u0026#34;PORT\u0026#34;) if port == \u0026#34;\u0026#34; { port = \u0026#34;3000\u0026#34; } // FastHTTP handler handler := func(ctx *fasthttp.RequestCtx) { pathStr := string(ctx.Path()) // Check if it\u0026#39;s a static asset (has file extension) if strings.Contains(path.Base(pathStr), \u0026#34;.\u0026#34;) { // Try to serve static file file, err := distFiles.Open(\u0026#34;dist\u0026#34; + pathStr) if err == nil { defer file.Close() // Set content type based on extension ext := path.Ext(pathStr) switch ext { case \u0026#34;.js\u0026#34;: ctx.SetContentType(\u0026#34;application/javascript\u0026#34;) case \u0026#34;.css\u0026#34;: ctx.SetContentType(\u0026#34;text/css\u0026#34;) case \u0026#34;.svg\u0026#34;: ctx.SetContentType(\u0026#34;image/svg+xml\u0026#34;) case \u0026#34;.png\u0026#34;: ctx.SetContentType(\u0026#34;image/png\u0026#34;) case \u0026#34;.jpg\u0026#34;, \u0026#34;.jpeg\u0026#34;: ctx.SetContentType(\u0026#34;image/jpeg\u0026#34;) case \u0026#34;.ico\u0026#34;: ctx.SetContentType(\u0026#34;image/x-icon\u0026#34;) default: ctx.SetContentType(\u0026#34;application/octet-stream\u0026#34;) } // Copy file content to response ctx.Response.SetBodyStream(file, -1) return } } // SPA fallback - serve index.html for all routes file, err := distFiles.Open(\u0026#34;dist/index.html\u0026#34;) if err != nil { ctx.SetStatusCode(404) ctx.SetBodyString(\u0026#34;Not Found\u0026#34;) return } defer file.Close() ctx.SetContentType(\u0026#34;text/html; charset=utf-8\u0026#34;) ctx.Response.SetBodyStream(file, -1) } // healthcheck if len(os.Args) \u0026gt; 1 \u0026amp;\u0026amp; os.Args[1] == \u0026#34;-health\u0026#34; { _, _, err := fasthttp.Get(nil, \u0026#34;http://127.0.0.1:\u0026#34;+port) if err != nil { os.Exit(1) } os.Exit(0) } log.Printf(\u0026#34;FastHTTP server on :%s\u0026#34;, port) log.Fatal(fasthttp.ListenAndServe(\u0026#34;:\u0026#34;+port, handler)) } GOSRC # Download dependencies vÃ  build vá»›i tá»‘i Æ°u extreme RUN go mod tidy RUN CGO_ENABLED=0 GOOS=linux go build -ldflags=\u0026#34;-s -w\u0026#34; -trimpath -o server main.go RUN strip server RUN upx --ultra-brute --lzma server # Stage 3: Ultra-minimal runtime (scratch) FROM scratch # Copy binary (chá»©a cáº£ static files) COPY --from=go-builder /app/server /server EXPOSE 3000 # ThÃªm USER 1000 USER 1000 HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \\ CMD [\u0026#34;/server\u0026#34;, \u0026#34;-health\u0026#34;] CMD [\u0026#34;/server\u0026#34;] 5. Dockerfile TOP (React) â€“ Nginx tá»± biÃªn dá»‹ch trÃªn Alpine Ká»¹ thuáº­t Giáº£i thÃ­ch Nguá»“n tham kháº£o Nginx BiÃªn Dá»‹ch Build Nginx 1.27.3 tá»« source, báº­t module cáº§n cho SPA (gzip_static, ssl). Pre-compression gzip -k -9 cho asset, phá»¥c vá»¥ qua gzip_static on. Security Headers inline ThÃªm X-Frame-Options, X-Content-Type-Options, X-XSS-Protection. Healthcheck Dá»±a trÃªn wget kiá»ƒm tra HTTP 200 táº¡i cá»•ng 3000. Dockerfile TOP (React)\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 # ========================= # Giai Ä‘oáº¡n 1: Node base # ========================= # MÃ´i trÆ°á»ng build cho Vite/React: chá»‰ cÃ i nhá»¯ng thá»© tá»‘i thiá»ƒu Ä‘á»ƒ biÃªn dá»‹ch FROM alpine:3.20@sha256:765942a4039992336de8dd5db680586e1a206607dd06170ff0a37267a9e01958 AS node-base RUN apk add --no-cache nodejs npm git python3 g++ make \u0026amp;\u0026amp; \\ npm install -g pnpm@9.12.2 \u0026amp;\u0026amp; npm cache clean --force # ========================= # Giai Ä‘oáº¡n 2: Builder # ========================= # DÃ¹ng cache mount cho pnpm Ä‘á»ƒ tÄƒng tá»‘c build láº¡i; xÃ³a source map; nÃ©n gzip sáºµn FROM node-base AS builder WORKDIR /app COPY package.json pnpm-lock.yaml ./ RUN --mount=type=cache,id=pnpm-custom,target=/root/.local/share/pnpm/store \\ pnpm install --frozen-lockfile --prefer-offline # Sao chÃ©p cáº¥u hÃ¬nh \u0026amp; mÃ£ nguá»“n COPY index.html ./ COPY vite.config.ts tsconfig.json tsconfig.node.json ./ COPY postcss.config.js tailwind.config.ts ./ COPY public ./public COPY src ./src # Build \u0026amp; tá»‘i Æ°u artefact tÄ©nh RUN pnpm run build \u0026amp;\u0026amp; \\ find /app/dist -name \u0026#34;*.map\u0026#34; -type f -delete || true \u0026amp;\u0026amp; \\ find /app/dist -type f \\( -name \u0026#39;*.html\u0026#39; -o -name \u0026#39;*.js\u0026#39; -o -name \u0026#39;*.css\u0026#39; -o -name \u0026#39;*.svg\u0026#39; -o -name \u0026#39;*.json\u0026#39; \\) \\ -exec gzip -k -9 {} \\; # ====================================== # Giai Ä‘oáº¡n 3: Nginx builder (tá»± biÃªn dá»‹ch) # ====================================== # BiÃªn dá»‹ch nginx 1.27.3 vá»›i module tá»‘i thiá»ƒu cho SPA + nÃ©n tÄ©nh FROM alpine:3.20@sha256:765942a4039992336de8dd5db680586e1a206607dd06170ff0a37267a9e01958 AS nginx-builder RUN apk add --no-cache --virtual .build-deps gcc libc-dev make pcre2-dev zlib-dev openssl-dev linux-headers \u0026amp;\u0026amp; \\ wget -O /tmp/nginx.tar.gz https://nginx.org/download/nginx-1.27.3.tar.gz \u0026amp;\u0026amp; \\ tar -xzf /tmp/nginx.tar.gz -C /tmp \u0026amp;\u0026amp; cd /tmp/nginx-1.27.3 \u0026amp;\u0026amp; \\ ./configure \\ --prefix=/etc/nginx \\ --sbin-path=/usr/sbin/nginx \\ --modules-path=/usr/lib/nginx/modules \\ --conf-path=/etc/nginx/nginx.conf \\ --error-log-path=/var/log/nginx/error.log \\ --http-log-path=/var/log/nginx/access.log \\ --pid-path=/var/run/nginx.pid \\ --lock-path=/var/run/nginx.lock \\ --http-client-body-temp-path=/var/cache/nginx/client_temp \\ --http-proxy-temp-path=/var/cache/nginx/proxy_temp \\ --user=nginx --group=nginx \\ --with-http_ssl_module --with-http_v2_module \\ --with-http_gzip_static_module --with-http_stub_status_module \\ --with-threads --with-file-aio \\ --without-http_autoindex_module --without-http_browser_module \\ --without-http_geo_module --without-http_map_module \\ --without-http_memcached_module --without-http_userid_module \\ --without-mail_pop3_module --without-mail_imap_module \\ --without-mail_smtp_module --without-http_split_clients_module \\ --without-http_uwsgi_module --without-http_scgi_module \\ --without-http_grpc_module \u0026amp;\u0026amp; \\ make -j$(nproc) \u0026amp;\u0026amp; make install \u0026amp;\u0026amp; strip /usr/sbin/nginx \u0026amp;\u0026amp; \\ rm -rf /tmp/nginx* \u0026amp;\u0026amp; apk del .build-deps # ====================================== # Giai Ä‘oáº¡n 4: Runtime base tá»‘i giáº£n # ====================================== # Chá»‰ giá»¯ runtime deps; táº¡o user non-root; chuáº©n bá»‹ thÆ° má»¥c vÃ  quyá»n FROM alpine:3.20@sha256:765942a4039992336de8dd5db680586e1a206607dd06170ff0a37267a9e01958 AS custom-runtime-base RUN apk add --no-cache pcre2 zlib openssl tzdata \u0026amp;\u0026amp; \\ addgroup -g 101 -S nginx \u0026amp;\u0026amp; \\ adduser -S -D -H -u 101 -h /var/cache/nginx -s /sbin/nologin -G nginx -g nginx nginx \u0026amp;\u0026amp; \\ mkdir -p /var/cache/nginx /var/log/nginx /etc/nginx/conf.d /usr/share/nginx/html \u0026amp;\u0026amp; \\ chown -R nginx:nginx /var/cache/nginx /var/log/nginx /usr/share/nginx/html COPY --from=nginx-builder /usr/sbin/nginx /usr/sbin/nginx COPY --from=nginx-builder /etc/nginx /etc/nginx # ====================================== # Giai Ä‘oáº¡n 5: Runtime cuá»‘i # ====================================== FROM custom-runtime-base AS runtime LABEL org.opencontainers.image.title=\u0026#34;SvnFrs-Dockerfile_Contest_2025\u0026#34; \\ org.opencontainers.image.description=\u0026#34;SPA production trÃªn Alpine vá»›i Nginx tá»± biÃªn dá»‹ch, tá»‘i Æ°u vÃ  báº£o máº­t\u0026#34; \\ org.opencontainers.image.version=\u0026#34;1.0.0\u0026#34; \\ org.opencontainers.image.licenses=\u0026#34;MIT\u0026#34; \\ org.opencontainers.image.created=\u0026#34;2025-10-28\u0026#34; \\ org.opencontainers.image.base.name=\u0026#34;alpine:3.20\u0026#34; # á»¨ng dá»¥ng tÄ©nh Ä‘Ã£ build COPY --from=builder --chown=nginx:nginx /app/dist /usr/share/nginx/html # Cáº¥u hÃ¬nh Nginx tá»‘i thiá»ƒu (inline) báº­t gzip_static Ä‘á»ƒ phá»¥c vá»¥ file .gz RUN echo \u0026#39;server { \\ listen 3000; server_name localhost; \\ root /usr/share/nginx/html; index index.html; \\ gzip_static on; gzip_vary on; \\ location / { try_files $uri $uri/ /index.html; expires 1y; add_header Cache-Control \u0026#34;public, immutable\u0026#34;; } \\ location = /index.html { expires -1; add_header Cache-Control \u0026#34;no-cache\u0026#34;; } \\ add_header X-Frame-Options \u0026#34;SAMEORIGIN\u0026#34; always; \\ add_header X-Content-Type-Options \u0026#34;nosniff\u0026#34; always; \\ add_header X-XSS-Protection \u0026#34;1; mode=block\u0026#34; always; \\ }\u0026#39; \u0026gt; /etc/nginx/conf.d/default.conf \u0026amp;\u0026amp; \\ echo \u0026#39;worker_processes auto; error_log /var/log/nginx/error.log warn; pid /var/run/nginx.pid; \\ events { worker_connections 1024; } http { include /etc/nginx/mime.types; default_type application/octet-stream; sendfile on; keepalive_timeout 65; include /etc/nginx/conf.d/*.conf; }\u0026#39; \u0026gt; /etc/nginx/nginx.conf \u0026amp;\u0026amp; \\ echo \u0026#39;types { \\ text/html html htm shtml; text/css css; text/javascript js; application/json json; \\ image/svg+xml svg svgz; image/x-icon ico; image/png png; image/jpeg jpeg jpg; \\ font/woff2 woff2; application/wasm wasm; \\ }\u0026#39; \u0026gt; /etc/nginx/mime.types # ThÆ° má»¥c táº¡m/ngáº§m cá»§a Nginx + phÃ¢n quyá»n trÆ°á»›c khi chuyá»ƒn USER RUN mkdir -p /var/cache/nginx/client_temp \\ /var/cache/nginx/proxy_temp \\ /etc/nginx/fastcgi_temp \\ /etc/nginx/proxy_temp \\ /etc/nginx/client_body_temp \\ /etc/nginx/uwsgi_temp \\ /etc/nginx/scgi_temp \u0026amp;\u0026amp; \\ chown -R nginx:nginx /var/cache/nginx \\ /var/log/nginx \\ /usr/share/nginx/html \\ /etc/nginx/fastcgi_temp \\ /etc/nginx/proxy_temp \\ /etc/nginx/client_body_temp \\ /etc/nginx/uwsgi_temp \\ /etc/nginx/scgi_temp \u0026amp;\u0026amp; \\ chmod -R 755 /var/cache/nginx \\ /etc/nginx/fastcgi_temp \\ /etc/nginx/proxy_temp \\ /etc/nginx/client_body_temp \\ /etc/nginx/uwsgi_temp \\ /etc/nginx/scgi_temp \u0026amp;\u0026amp; \\ touch /var/run/nginx.pid \u0026amp;\u0026amp; \\ chown nginx:nginx /var/run/nginx.pid # Healthcheck ráº»: HTTP 200 á»Ÿ cá»•ng 3000 RUN apk add --no-cache wget HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \\ CMD wget --quiet --tries=1 --spider http://localhost:3000/ || exit 1 EXPOSE 3000 STOPSIGNAL SIGQUIT USER nginx CMD [\u0026#34;nginx\u0026#34;, \u0026#34;-g\u0026#34;, \u0026#34;daemon off;\u0026#34;] Ghi chÃº triá»ƒn khai CÃ¡c Dockerfile trÃªn chá»‰ mang tÃ­nh tham kháº£o kiáº¿n trÃºc; khi Ã¡p dá»¥ng vÃ o dá»± Ã¡n Node.js/React cá»§a báº¡n, hÃ£y giá»¯ nguyÃªn nguyÃªn táº¯c: multi-stage build, pre-compress, non-root, pin SHA. ","date":"2025-11-18T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/docker-optimization/docker-optimization-react.webp","permalink":"https://tech.nguuyen.io.vn/posts/docker-optimization/docker-opt-nodejs/","title":"Tá»‘i Æ°u Docker cho Node.js"},{"content":"ğŸ”€ Nginx lÃ  gÃ¬? NGINX lÃ  má»™t pháº§n má»m web server mÃ£ nguá»“n má»Ÿ Ä‘Ã¡ng tin cáº­y\nNginx lÃ  má»™t pháº§n má»m web server mÃ£ nguá»“n má»Ÿ, hoáº¡t Ä‘á»™ng theo kiáº¿n trÃºc báº¥t Ä‘á»“ng bá»™ (asynchronous) hÆ°á»›ng sá»± kiá»‡n (event-driven). ban Ä‘áº§u Ä‘Æ°á»£c phÃ¡t triá»ƒn Ä‘á»ƒ phá»¥c vá»¥ http cache, nhÆ°ng sau nÃ y Ä‘Æ°á»£c má»Ÿ rá»™ng Ä‘á»ƒ há»— trá»£ reverse proxy, http load balancing vÃ  cÃ¡c giao thá»©c truyá»n mail nhÆ° imap4, pop3, smtp.\nRa máº¯t vÃ o thÃ¡ng 10/2014, Nginx Ä‘Æ°á»£c nhiá»u cÃ´ng ty lá»›n nhÆ° google, adobe, netflix, wordpress sá»­ dá»¥ng nhá» kháº£ nÄƒng xá»­ lÃ½ hÃ ng nghÃ¬n káº¿t ná»‘i Ä‘á»“ng thá»i.\nâš™ï¸ CÃ¡ch hoáº¡t Ä‘á»™ng cá»§a Nginx NGINX cÅ©ng hoáº¡t Ä‘á»™ng tÆ°Æ¡ng tá»± nhÆ° cÃ¡c server khÃ¡c\nNginx hoáº¡t Ä‘á»™ng theo mÃ´ hÃ¬nh xá»­ lÃ½ báº¥t Ä‘á»“ng bá»™, khÃ¡c vá»›i cÃ¡ch xá»­ lÃ½ tuáº§n tá»± cá»§a cÃ¡c web server truyá»n thá»‘ng.\nMá»—i tiáº¿n trÃ¬nh (process) sáº½ cÃ³ nhiá»u worker connections Ä‘á»ƒ xá»­ lÃ½ cÃ¡c yÃªu cáº§u. Worker connections gá»­i yÃªu cáº§u Ä‘áº¿n worker process, worker process chuyá»ƒn tiáº¿p Ä‘áº¿n master process Ä‘á»ƒ xá»­ lÃ½. Nhá» cÆ¡ cháº¿ nÃ y, má»™t worker connection cÃ³ thá»ƒ xá»­ lÃ½ Ä‘áº¿n 1024 yÃªu cáº§u cÃ¹ng lÃºc, giÃºp Nginx xá»­ lÃ½ hÃ ng ngÃ n yÃªu cáº§u hiá»‡u quáº£. ğŸ”¥ CÃ¡c tÃ­nh nÄƒng cá»§a Nginx MÃ¡y chá»§ NGINX cÃ³ nhiá»u tÃ­nh nÄƒng vÃ  Æ°u Ä‘iá»ƒm vÆ°á»£t trá»™i trong láº­p trÃ¬nh\nNginx sá»Ÿ há»¯u nhiá»u tÃ­nh nÄƒng vÆ°á»£t trá»™i:\nâš¡ xá»­ lÃ½ hÆ¡n 10.000 káº¿t ná»‘i Ä‘á»“ng thá»i vá»›i má»©c sá»­ dá»¥ng bá»™ nhá»› tháº¥p. ğŸ“‚ phá»¥c vá»¥ táº­p tin tÄ©nh (static files) vÃ  láº­p chá»‰ má»¥c táº­p tin. ğŸ”„ cÃ¢n báº±ng táº£i vÃ  há»— trá»£ proxy ngÆ°á»£c vá»›i bá»™ nhá»› Ä‘á»‡m (cache). ğŸš€ há»— trá»£ fastcgi, uwsgi, scgi vÃ  memcached. ğŸ› ï¸ kiáº¿n trÃºc modular vÃ  nÃ©n gzip tá»± Ä‘á»™ng. ğŸ” há»— trá»£ mÃ£ hÃ³a ssl/tls. ğŸ”€ rewrite url báº±ng regular expressions. ğŸŒ há»— trá»£ websockets vÃ  giá»›i háº¡n sá»‘ káº¿t ná»‘i Ä‘á»“ng thá»i. ğŸ“¡ tÆ°Æ¡ng thÃ­ch vá»›i ipv6. âš–ï¸ So sÃ¡nh Nginx vÃ  Apache server So vá»›i Apache server, NGINX server cÃ³ khÃ¡ nhiá»u Æ°u Ä‘iá»ƒm\nğŸ–¥ï¸ Apache server: xá»­ lÃ½ yÃªu cáº§u báº±ng mÃ´ hÃ¬nh chia luá»“ng (forked threaded) hoáº·c keep-alive. cÃ³ thá»ƒ xá»­ lÃ½ cáº£ ná»™i dung tÄ©nh vÃ  Ä‘á»™ng. ğŸŒ Nginx server: sá»­ dá»¥ng vÃ²ng láº·p sá»± kiá»‡n khÃ´ng Ä‘á»“ng bá»™ (non-blocking event loop). xá»­ lÃ½ ná»™i dung tÄ©nh hiá»‡u quáº£ hÆ¡n Apache. tá»‘c Ä‘á»™ xá»­ lÃ½ truy váº¥n nhanh hÆ¡n vÃ  tiáº¿t kiá»‡m tÃ i nguyÃªn hÆ¡n. cáº§n bá»™ xá»­ lÃ½ riÃªng Ä‘á»ƒ há»— trá»£ ná»™i dung Ä‘á»™ng. ğŸ” HÆ°á»›ng dáº«n kiá»ƒm tra Nginx cá»§a website Báº¡n cÃ³ thá»ƒ dá»±a vÃ o cÃ¡c cÃ´ng cá»¥ sáºµn cÃ³ Ä‘á»ƒ kiáº¿m tra website cÃ³ cháº¡y Nginx\nBáº¡n cÃ³ thá»ƒ kiá»ƒm tra website cÃ³ cháº¡y Nginx hay khÃ´ng báº±ng cÃ¡ch kiá»ƒm tra http header:\nMá»Ÿ trang web cáº§n kiá»ƒm tra trÃªn trÃ¬nh duyá»‡t chrome. Nháº¥n ctrl + shift + i hoáº·c f12 Ä‘á»ƒ má»Ÿ chrome devtools. Chuyá»ƒn sang tab network. Chá»n má»™t request báº¥t ká»³ vÃ  xem pháº§n headers. NgoÃ i ra, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng cÃ´ng cá»¥ nhÆ° pingdom hoáº·c gtmetrix Ä‘á»ƒ kiá»ƒm tra.\nğŸ¯ Lá»i káº¿t Nginx Ä‘Ã£ vÃ  Ä‘ang trá»Ÿ thÃ nh má»™t trong nhá»¯ng web server phá»• biáº¿n nháº¥t nhá» hiá»‡u suáº¥t cao, kháº£ nÄƒng xá»­ lÃ½ hÃ ng nghÃ¬n káº¿t ná»‘i Ä‘á»“ng thá»i vÃ  nhiá»u tÃ­nh nÄƒng máº¡nh máº½. DÃ¹ báº¡n cáº§n má»™t giáº£i phÃ¡p Ä‘á»ƒ phá»¥c vá»¥ ná»™i dung tÄ©nh, cÃ¢n báº±ng táº£i hay lÃ m reverse proxy, Nginx Ä‘á»u cÃ³ thá»ƒ Ä‘Ã¡p á»©ng má»™t cÃ¡ch hiá»‡u quáº£. Hy vá»ng bÃ i viáº¿t nÃ y giÃºp báº¡n hiá»ƒu rÃµ hÆ¡n vá» Nginx vÃ  cÃ¡ch nÃ³ hoáº¡t Ä‘á»™ng. Náº¿u báº¡n Ä‘ang cÃ¢n nháº¯c triá»ƒn khai má»™t web server tá»‘i Æ°u cho dá»± Ã¡n cá»§a mÃ¬nh, hÃ£y thá»­ nghiá»‡m Nginx vÃ  khÃ¡m phÃ¡ nhá»¯ng lá»£i Ã­ch mÃ  nÃ³ mang láº¡i! ğŸš€ğŸ˜Š\n","date":"2025-03-10T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/website/nginx-introduction-guide.webp","permalink":"https://tech.nguuyen.io.vn/posts/website/nginx-introduction-guide/","title":"Giá»›i thiá»‡u vá» Nginx ğŸš€"},{"content":"ğŸ“Œ Giá»›i thiá»‡u Nginx lÃ  má»™t á»©ng dá»¥ng web server mÃ£ nguá»“n má»Ÿ giÃºp triá»ƒn khai cÃ¡c á»©ng dá»¥ng web tÄ©nh vÃ  Ä‘á»™ng trÃªn mÃ¡y chá»§. Nginx cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng nhÆ° má»™t web server, load balancer, reverse proxy hoáº·c HTTP cache, há»— trá»£ tÃ­ch há»£p vá»›i cÃ¡c á»©ng dá»¥ng hiá»‡n cÃ³ Ä‘á»ƒ xÃ¢y dá»±ng má»™t há»‡ thá»‘ng hoÃ n chá»‰nh hoáº·c phÃ¢n phá»‘i á»©ng dá»¥ng web qua Ä‘á»‹a chá»‰ IP hoáº·c tÃªn miá»n.\nBÃ i viáº¿t nÃ y hÆ°á»›ng dáº«n cÃ¡ch cÃ i Ä‘áº·t Nginx trÃªn Ubuntu 24.04 vÃ  thiáº¿t láº­p á»©ng dá»¥ng web máº«u Ä‘á»ƒ cháº¡y trÃªn mÃ¡y chá»§ cá»§a báº¡n.\nâœ… YÃªu cáº§u trÆ°á»›c khi báº¯t Ä‘áº§u TrÆ°á»›c khi tiáº¿n hÃ nh, hÃ£y Ä‘áº£m báº£o báº¡n Ä‘Ã£ thá»±c hiá»‡n cÃ¡c bÆ°á»›c sau:\nğŸš€ Triá»ƒn khai má»™t mÃ¡y chá»§ Ubuntu 24.04. ğŸŒ Táº¡o má»™t báº£n ghi A (A record) cho tÃªn miá»n hoáº·c subdomain trá» Ä‘áº¿n Ä‘á»‹a chá»‰ IP cá»§a mÃ¡y chá»§. VÃ­ dá»¥: app.example.com. ğŸ” Truy cáº­p mÃ¡y chá»§ qua SSH vÃ  táº¡o má»™t ngÆ°á»i dÃ¹ng khÃ´ng pháº£i root cÃ³ quyá»n sudo. ğŸ”„ Cáº­p nháº­t há»‡ thá»‘ng. âš™ï¸ CÃ i Ä‘áº·t NGINX trÃªn Ubuntu 24.04 GÃ³i NGINX má»›i nháº¥t cÃ³ sáºµn trong kho APT máº·c Ä‘á»‹nh trÃªn Ubuntu 24.04. Thá»±c hiá»‡n cÃ¡c bÆ°á»›c sau Ä‘á»ƒ cáº­p nháº­t há»‡ thá»‘ng vÃ  cÃ i Ä‘áº·t NGINX.\nğŸ”„ Cáº­p nháº­t danh sÃ¡ch gÃ³i há»‡ thá»‘ng\n1 sudo apt update ğŸ“¦ CÃ i Ä‘áº·t NGINX\n1 sudo apt install nginx -y ğŸ” Kiá»ƒm tra phiÃªn báº£n NGINX Ä‘Ã£ cÃ i Ä‘áº·t\n1 sudo nginx -version Káº¿t quáº£ Ä‘áº§u ra sáº½ tÆ°Æ¡ng tá»± nhÆ° sau:\n1 nginx version: nginx/1.24.0 (Ubuntu) âš™ï¸ Quáº£n lÃ½ dá»‹ch vá»¥ NGINX NGINX sá»­ dá»¥ng dá»‹ch vá»¥ nginx trong systemd Ä‘á»ƒ quáº£n lÃ½ thá»i gian cháº¡y vÃ  cÃ¡c tiáº¿n trÃ¬nh cá»§a web server trÃªn mÃ¡y chá»§. Thá»±c hiá»‡n cÃ¡c bÆ°á»›c sau Ä‘á»ƒ kÃ­ch hoáº¡t dá»‹ch vá»¥ NGINX vÃ  quáº£n lÃ½ cÃ¡c tiáº¿n trÃ¬nh web server.\nğŸš€ KÃ­ch hoáº¡t dá»‹ch vá»¥ NGINX khá»Ÿi Ä‘á»™ng cÃ¹ng há»‡ thá»‘ng\n1 sudo systemctl enable nginx Káº¿t quáº£:\n1 2 Synchronizing state of nginx.service with SysV service script with /usr/lib/systemd/systemd-sysv-install. Executing: /usr/lib/systemd/systemd-sysv-install enable nginx â–¶ï¸ Khá»Ÿi Ä‘á»™ng dá»‹ch vá»¥ NGINX\n1 sudo systemctl start nginx â¹ï¸ Dá»«ng dá»‹ch vá»¥ NGINX\n1 sudo systemctl stop nginx ğŸ”„ Khá»Ÿi Ä‘á»™ng láº¡i dá»‹ch vá»¥ NGINX\n1 sudo systemctl restart nginx ğŸ” Kiá»ƒm tra tráº¡ng thÃ¡i dá»‹ch vá»¥ NGINX\n1 sudo systemctl status nginx Káº¿t quáº£ máº«u:\n1 2 3 4 5 6 7 8 9 10 11 12 13 â— nginx.service - A high performance web server and a reverse proxy server Loaded: loaded (/usr/lib/systemd/system/nginx.service; enabled; preset: enabled) Active: active (running) since Wed 2024-06-26 10:55:50 UTC; 1min 0s ago Docs: man:nginx(8) Process: 2397 ExecStartPre=/usr/sbin/nginx -t -q -g daemon on; master_process on; (code=exited, status=0/SUCCESS) Process: 2399 ExecStart=/usr/sbin/nginx -g daemon on; master_process on; (code=exited, status=0/SUCCESS) Main PID: 2400 (nginx) Tasks: 2 (limit: 1068) Memory: 1.7M (peak: 2.4M) CPU: 13ms CGroup: /system.slice/nginx.service â”œâ”€2400 \u0026#34;nginx: master process /usr/sbin/nginx -g daemon on; master_process on;\u0026#34; â””â”€2401 \u0026#34;nginx: worker process\u0026#34; Dá»±a vÃ o giÃ¡ trá»‹ Active: active (running), NGINX Ä‘ang cháº¡y trÃªn mÃ¡y chá»§. Náº¿u tráº¡ng thÃ¡i hiá»ƒn thá»‹ Active: active (failed), hÃ£y kiá»ƒm tra vÃ  dá»«ng báº¥t ká»³ tiáº¿n trÃ¬nh nÃ o Ä‘ang sá»­ dá»¥ng cá»•ng HTTP 80, sau Ä‘Ã³ khá»Ÿi Ä‘á»™ng láº¡i dá»‹ch vá»¥ NGINX. ğŸŒ Táº¡o nginx virtual host Nginx virtual host bao gá»“m cÃ¡c cáº¥u hÃ¬nh Ä‘áº·c biá»‡t giÃºp mÃ¡y chá»§ web phÃ¢n phá»‘i cÃ¡c tá»‡p á»©ng dá»¥ng web tá»« má»™t thÆ° má»¥c cá»¥ thá»ƒ báº±ng má»™t tÃªn miá»n cá»¥ thá»ƒ trÃªn mÃ¡y chá»§ cá»§a báº¡n. cÃ¡c bÆ°á»›c sau Ä‘Ã¢y sáº½ hÆ°á»›ng dáº«n táº¡o má»™t cáº¥u hÃ¬nh virtual host máº«u Ä‘á»ƒ phÃ¢n phá»‘i tá»‡p á»©ng dá»¥ng web má»™t cÃ¡ch an toÃ n trÃªn mÃ¡y chá»§.\nğŸ“‚ Táº¡o tá»‡p cáº¥u hÃ¬nh virtual host má»›i\nTrong thÆ° má»¥c /etc/nginx/sites-available, táº¡o má»™t tá»‡p cáº¥u hÃ¬nh má»›i, vÃ­ dá»¥: app.example.com.conf. 1 $ sudo nano /etc/nginx/sites-available/app.example.com.conf ThÃªm cÃ¡c cáº¥u hÃ¬nh sau vÃ o tá»‡p: 1 2 3 4 5 6 7 8 9 10 11 12 13 server { listen 80; listen [::]:80; server_name app.example.com; root /var/www/app.example.com; index index.html; location / { try_files $uri $uri/ =404; } } LÆ°u vÃ  Ä‘Ã³ng tá»‡p. âœ… Kiá»ƒm tra cáº¥u hÃ¬nh Nginx\nKiá»ƒm tra xem cáº¥u hÃ¬nh Nginx cÃ³ lá»—i khÃ´ng: 1 $ sudo nginx -t Káº¿t quáº£: 1 2 nginx: the configuration file /etc/nginx/nginx.conf syntax is ok nginx: configuration file /etc/nginx/nginx.conf test is successful ğŸ”— KÃ­ch hoáº¡t virtual host\nLiÃªn káº¿t tá»‡p cáº¥u hÃ¬nh vÃ o thÆ° má»¥c /etc/nginx/sites-enabled Ä‘á»ƒ kÃ­ch hoáº¡t virtual host: 1 $ sudo ln -s /etc/nginx/sites-available/app.example.com.conf /etc/nginx/sites-enabled/ ğŸ“ Táº¡o thÆ° má»¥c web root\n1 $ sudo mkdir -p /var/www/app.example.com ğŸ“ Táº¡o tá»‡p html máº«u\nTáº¡o tá»‡p index.html trong thÆ° má»¥c web root: 1 $ sudo nano /var/www/app.example.com/index.html ThÃªm ná»™i dung sau vÃ o tá»‡p: 1 2 3 4 5 6 \u0026lt;html\u0026gt; \u0026lt;head\u0026gt;\u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;h1\u0026gt;Hello Hoang Duong\u0026lt;/h1\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; LÆ°u vÃ  Ä‘Ã³ng tá»‡p. ğŸ”„ Khá»Ÿi Ä‘á»™ng láº¡i nginx\n1 $ sudo systemctl restart nginx ğŸŒ Kiá»ƒm tra virtual host\nSá»­ dá»¥ng lá»‡nh curl Ä‘á»ƒ kiá»ƒm tra virtual host: 1 $ curl http://app.example.com Káº¿t quáº£: 1 Hello Hoang Duong ğŸ”’ Báº£o máº­t mÃ¡y chá»§ web Nginx SSL certificates giÃºp mÃ£ hÃ³a giao tiáº¿p giá»¯a trÃ¬nh duyá»‡t cá»§a ngÆ°á»i dÃ¹ng vÃ  mÃ¡y chá»§ Nginx thÃ´ng qua HTTPS. Máº·c Ä‘á»‹nh, Nginx láº¯ng nghe káº¿t ná»‘i Ä‘áº¿n trÃªn cá»•ng HTTP 80 khÃ´ng an toÃ n. Thá»±c hiá»‡n cÃ¡c bÆ°á»›c sau Ä‘á»ƒ táº¡o chá»©ng chá»‰ SSL Ä‘Ã¡ng tin cáº­y tá»« Let\u0026rsquo;s Encrypt vÃ  báº£o máº­t mÃ¡y chá»§ Nginx Ä‘á»ƒ cháº¥p nháº­n cÃ¡c yÃªu cáº§u káº¿t ná»‘i HTTPS Ä‘Æ°á»£c mÃ£ hÃ³a.\nCÃ i Ä‘áº·t Certbot â€“ Let\u0026rsquo;s Encrypt Client ğŸ”§\nCÃ i Ä‘áº·t gÃ³i Certbot sá»­ dá»¥ng Snap: 1 $ sudo snap install --classic certbot Kiá»ƒm tra phiÃªn báº£n Certbot Ä‘Ã£ cÃ i trÃªn mÃ¡y chá»§: 1 $ sudo certbot --version ğŸ“Œ Äáº§u ra máº«u:\n1 certbot 2.11.0 ğŸ›¡ï¸ Táº¡o chá»©ng chá»‰ SSL cho Nginx Táº¡o chá»©ng chá»‰ SSL má»›i cho tÃªn miá»n cá»§a báº¡n. Thay tháº¿ app.example.com báº±ng tÃªn miá»n thá»±c táº¿ trong cáº¥u hÃ¬nh Virtual Host Nginx: 1 $ sudo certbot --nginx -d app.example.com --agree-tos QuÃ¡ trÃ¬nh nÃ y sáº½:\nâœ… Táº¡o chá»©ng chá»‰ SSL há»£p lá»‡ âœ… Tá»± Ä‘á»™ng cáº¥u hÃ¬nh Nginx Ä‘á»ƒ sá»­ dá»¥ng SSL âœ… KÃ­ch hoáº¡t HTTPS trÃªn mÃ¡y chá»§ web cá»§a báº¡n Kiá»ƒm tra tá»± Ä‘á»™ng gia háº¡n chá»©ng chá»‰ ğŸ”„\nCÃ¡c chá»©ng chá»‰ SSL tá»« Let\u0026rsquo;s Encrypt cÃ³ thá»i háº¡n 90 ngÃ y. Äá»ƒ Ä‘áº£m báº£o khÃ´ng bá»‹ háº¿t háº¡n, báº¡n cÃ³ thá»ƒ kiá»ƒm tra tiáº¿n trÃ¬nh tá»± Ä‘á»™ng gia háº¡n: 1 $ sudo certbot renew --dry-run Náº¿u khÃ´ng cÃ³ lá»—i nÃ o xáº£y ra, nghÄ©a lÃ  chá»©ng chá»‰ sáº½ Ä‘Æ°á»£c tá»± Ä‘á»™ng gia háº¡n Ä‘Ãºng háº¡n.\nğŸŒ Kiá»ƒm tra trang web hoáº¡t Ä‘á»™ng vá»›i https Má»Ÿ trÃ¬nh duyá»‡t vÃ  truy cáº­p: 1 https://app.example.com Náº¿u tháº¥y biá»ƒu tÆ°á»£ng á»• khÃ³a ğŸ”’, tá»©c lÃ  SSL Ä‘Ã£ Ä‘Æ°á»£c cÃ i Ä‘áº·t thÃ nh cÃ´ng! ğŸš€\nğŸ”¥ Thiáº¿t láº­p quy táº¯c tÆ°á»ng lá»­a UFW Uncomplicated Firewall (UFW) Ä‘Æ°á»£c cÃ i Ä‘áº·t vÃ  kÃ­ch hoáº¡t máº·c Ä‘á»‹nh trÃªn Ubuntu 24.04. Thá»±c hiá»‡n cÃ¡c bÆ°á»›c sau Ä‘á»ƒ cáº¥u hÃ¬nh tÆ°á»ng lá»­a, cho phÃ©p mÃ¡y chá»§ Nginx láº¯ng nghe káº¿t ná»‘i HTTP vÃ  HTTPS.\nCho phÃ©p káº¿t ná»‘i HTTP (Cá»•ng 80)ğŸ”Œ\nCháº¡y lá»‡nh sau Ä‘á»ƒ má»Ÿ káº¿t ná»‘i HTTP: 1 $ sudo ufw allow 80/tcp Cho phÃ©p káº¿t ná»‘i HTTPS (Cá»•ng 443) ğŸ”\nCháº¡y lá»‡nh sau Ä‘á»ƒ má»Ÿ káº¿t ná»‘i HTTPS: 1 $ sudo ufw allow 443/tcp Kiá»ƒm tra tráº¡ng thÃ¡i tÆ°á»ng lá»­a ğŸ”¢\nCháº¡y lá»‡nh sau Ä‘á»ƒ xÃ¡c nháº­n quy táº¯c káº¿t ná»‘i: 1 $ sudo ufw status ğŸ‘‰ Äáº§u ra máº«u:\n1 2 3 4 5 6 7 8 9 10 Status: active To Action From -- ------ ---- 22/tcp ALLOW Anywhere 80/tcp ALLOW Anywhere 443/tcp ALLOW Anywhere 22/tcp (v6) ALLOW Anywhere (v6) 80/tcp (v6) ALLOW Anywhere (v6) 443/tcp (v6) ALLOW Anywhere (v6) ğŸ›¡ï¸ Sau khi thiáº¿t láº­p xong, mÃ¡y chá»§ sáº½ chá»‰ cho phÃ©p káº¿t ná»‘i an toÃ n qua HTTP vÃ  HTTPS\nğŸ¯ Lá»i káº¿t ChÃºc báº¡n cÃ i Ä‘áº·t thÃ nh cÃ´ng Nginx trÃªn mÃ¡y chá»§ Ubuntu 24.04 vÃ  cáº¥u hÃ¬nh web server Ä‘á»ƒ phá»¥c vá»¥ cÃ¡c á»©ng dá»¥ng web. Nginx há»— trá»£ nhiá»u cáº¥u hÃ¬nh virtual host giÃºp báº¡n triá»ƒn khai cÃ¡c á»©ng dá»¥ng web má»™t cÃ¡ch an toÃ n. NgoÃ i ra, báº¡n cÃ³ thá»ƒ tÃ­ch há»£p Nginx vá»›i cÃ¡c á»©ng dá»¥ng khÃ¡c nhÆ° MySQL vÃ  PHP Ä‘á»ƒ xÃ¢y dá»±ng cÃ¡c á»©ng dá»¥ng web Ä‘á»™ng. Äá»ƒ biáº¿t thÃªm thÃ´ng tin chi tiáº¿t vÃ  cÃ¡c tÃ¹y chá»n cáº¥u hÃ¬nh khÃ¡c, vui lÃ²ng truy cáº­p tÃ i liá»‡u chÃ­nh thá»©c chÃ­nh thá»©c cá»§a Nginx. ğŸš€ğŸ˜Š\n","date":"2025-03-10T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/website/how-to-install-nginx.webp","permalink":"https://tech.nguuyen.io.vn/posts/installation-guides/how-to-install-nginx/","title":"HÆ°á»›ng dáº«n cÃ i Ä‘áº·t Nginx trÃªn Ubuntu 24.04 âš™ï¸"},{"content":"ğŸŒ Táº¡i sao cáº§n pháº£i trá» tÃªn miá»n vá» hosting? TÃªn miá»n vÃ  hosting lÃ  hai yáº¿u tá»‘ quan trá»ng giÃºp website hoáº¡t Ä‘á»™ng.\nTÃªn miá»n lÃ  Ä‘á»‹a chá»‰ website. Hosting lÃ  nÆ¡i lÆ°u trá»¯ dá»¯ liá»‡u website. LÃ½ do cáº§n trá» tÃªn miá»n Káº¿t ná»‘i tÃªn miá»n vá»›i hosting Ä‘á»ƒ website hiá»ƒn thá»‹ trÃªn internet. GiÃºp má»i ngÆ°á»i truy cáº­p website báº±ng Ä‘á»‹a chá»‰ dá»… nhá»›. CÃ¡ch thá»±c hiá»‡n ğŸ”§ Láº¥y thÃ´ng tin nameserver hoáº·c IP tá»« nhÃ  cung cáº¥p. Cáº¥u hÃ¬nh trong trang quáº£n lÃ½ domain. Ba cÃ¡ch trá» tÃªn miá»n vá» hosting Ä‘Æ¡n giáº£n nháº¥t ğŸš€ Trá» tÃªn miá»n báº±ng nameserver CÃ¡c bÆ°á»›c thá»±c hiá»‡n:\nÄÄƒng nháº­p trÃ¬nh quáº£n trá»‹ tÃªn miá»n. Chá»n tÃªn miá»n cáº§n trá». Chá»n tÃªn miá»n muá»‘n trá» vá» hosting\nThay Ä‘á»•i nameserver máº·c Ä‘á»‹nh thÃ nh nameserver cá»§a hosting (thÃ´ng tin nÃ y cÃ³ trong email tá»« nhÃ  cung cáº¥p hosting). Thay Ä‘á»•i Nameserver máº·c Ä‘á»‹nh thÃ nh Nameserver cá»§a hosting Ä‘Ã£ Ä‘Äƒng kÃ½\nChá» cáº­p nháº­t (vÃ i phÃºt Ä‘áº¿n vÃ i giá», tuá»³ vÃ o server cÃ³ thá»ƒ cao nháº¥t tá»›i 24h). Kiá»ƒm tra báº±ng cÃ¡ch truy cáº­p tÃªn miá»n. Trá» tÃªn miá»n báº±ng IP (A record) CÃ¡c bÆ°á»›c thá»±c hiá»‡n:\nÄÄƒng nháº­p trÃ¬nh quáº£n trá»‹ tÃªn miá»n. Chá»n tÃªn miá»n muá»‘n trá» vá» hosting, sau Ä‘Ã³ chá»n má»¥c cáº¥u hÃ¬nh DNS\nChá»n má»¥c cáº¥u hÃ¬nh DNS. ThÃªm 2 báº£n ghi A record: @ â†’ IP cá»§a hosting (Äá»‹a chá»‰ IP cá»§a hosting tá»« email nhÃ  cung cáº¥p gá»­i). www â†’ IP cá»§a hosting. ThÃªm hai báº£n A record\nLÆ°u thay Ä‘á»•i vÃ  chá» cáº­p nháº­t (QuÃ¡ trÃ¬nh nÃ y cÃ³ thá»ƒ nhanh hoáº·c lÃ¢u tÃ¹y thuá»™c vÃ o há»‡ thá»‘ng DNS. CÃ³ thá»ƒ tá»« vÃ i phÃºt Ä‘áº¿n vÃ i giá»). Trá» tÃªn miá»n báº±ng nameserver trung gian Äá»ƒ trá» tÃªn miá»n vá» hosting báº±ng Nameserver trung gian nhÆ° CloudFlare, Namecheap FreeDNS, Incapsula, báº¡n cÃ³ thá»ƒ thá»±c hiá»‡n theo cÃ¡c bÆ°á»›c sau:\nCÃ¡c bÆ°á»›c thá»±c hiá»‡n:\nÄÄƒng kÃ½ tÃ i khoáº£n táº¡i Nameserver trung gian \u0026gt; XÃ¡c nháº­n cÃ¡c báº£n ghi cáº§n thiáº¿t Ä‘á»ƒ thÃªm website vÃ o Nameserver trung gian. Truy cáº­p vÃ o khu vá»±c quáº£n lÃ½ tÃªn miá»n cá»§a nhÃ  cung cáº¥p vÃ  thá»±c hiá»‡n thay Ä‘á»•i Nameserver Ä‘á»ƒ trá» tÃªn miá»n vá» hosting qua Nameserver trung gian. Chá» cáº­p nháº­t Ä‘á»ƒ hoÃ n táº¥t. Má»™t sá»‘ lá»—i thÆ°á»ng gáº·p khi trá» tÃªn miá»n vá» hosting âš ï¸ Khi trá» tÃªn miá»n vá» hosting, báº¡n cÃ³ thá»ƒ gáº·p má»™t sá»‘ lá»—i phá»• biáº¿n khiáº¿n website khÃ´ng hoáº¡t Ä‘á»™ng Ä‘Ãºng cÃ¡ch. Hiá»ƒu vÃ  kháº¯c phá»¥c cÃ¡c lá»—i nÃ y sáº½ giÃºp Ä‘áº£m báº£o quÃ¡ trÃ¬nh cáº¥u hÃ¬nh diá»…n ra suÃ´n sáº».\nğŸš« Sai tÃªn miá»n cá»§a hosting Khi Ä‘Äƒng kÃ½ hosting, nhÃ  cung cáº¥p yÃªu cáº§u khai bÃ¡o tÃªn miá»n. Náº¿u nháº­p sai hoáº·c trá» vá» má»™t tÃªn miá»n khÃ´ng khá»›p, website sáº½ khÃ´ng hoáº¡t Ä‘á»™ng.\nğŸš« Sá»­ dá»¥ng cáº£ hai cÃ¡ch trá» tÃªn miá»n Náº¿u báº¡n Ä‘Ã£ trá» tÃªn miá»n báº±ng nameserver, khÃ´ng nÃªn thay Ä‘á»•i sang IP (A record) vÃ  ngÆ°á»£c láº¡i, vÃ¬ Ä‘iá»u nÃ y cÃ³ thá»ƒ gÃ¢y lá»—i xung Ä‘á»™t DNS.\nğŸš« Nháº­p sai loáº¡i báº£n ghi DNS CÃ³ nhiá»u loáº¡i báº£n ghi DNS nhÆ°:\nA record: Trá» tÃªn miá»n vá» IP cá»§a hosting. CNAME: Chuyá»ƒn hÆ°á»›ng má»™t tÃªn miá»n sang tÃªn miá»n khÃ¡c. MX record: Cáº¥u hÃ¬nh email. Nháº­p sai loáº¡i báº£n ghi cÃ³ thá»ƒ lÃ m giÃ¡n Ä‘oáº¡n káº¿t ná»‘i Ä‘áº¿n hosting.\nğŸš« Nháº­p sai Ä‘á»‹a chá»‰ IP cá»§a hosting IP hosting thÆ°á»ng dÃ i vÃ  dá»… nháº­p sai. Báº¡n nÃªn sao chÃ©p trá»±c tiáº¿p tá»« email cá»§a nhÃ  cung cáº¥p Ä‘á»ƒ trÃ¡nh nháº§m láº«n vá»›i IP cá»§a mÃ¡y tÃ­nh cÃ¡ nhÃ¢n hoáº·c thiáº¿t bá»‹ khÃ¡c.\nNáº¿u gáº·p lá»—i, hÃ£y kiá»ƒm tra láº¡i thÃ´ng tin vÃ  chá» má»™t thá»i gian Ä‘á»ƒ DNS cáº­p nháº­t hoÃ n táº¥t.\nVideo hÆ°á»›ng dáº«n chi tiáº¿t ğŸ¥ Náº¿u báº¡n muá»‘n xem hÆ°á»›ng dáº«n trá»±c quan hÆ¡n, cÃ³ thá»ƒ tham kháº£o video dÆ°á»›i Ä‘Ã¢y. Video nÃ y sáº½ giÃºp báº¡n hiá»ƒu rÃµ tá»«ng bÆ°á»›c trong viá»‡c trá» tÃªn miá»n vá» hosting, tá»« cÃ¡ch láº¥y thÃ´ng tin nameserver Ä‘áº¿n viá»‡c cáº­p nháº­t trong trÃ¬nh quáº£n lÃ½ tÃªn miá»n.\nâ€• Nguá»“n, F8 Official âœ”ï¸\nLá»i káº¿t ğŸŒŸ Viá»‡c trá» tÃªn miá»n vá» hosting lÃ  má»™t bÆ°á»›c quan trá»ng Ä‘á»ƒ website cá»§a báº¡n cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng chÃ­nh xÃ¡c trÃªn Internet. DÃ¹ thá»±c hiá»‡n theo cÃ¡ch nÃ oâ€”sá»­ dá»¥ng nameserver, A record, hay nameserver trung gianâ€”báº¡n cÅ©ng cáº§n kiá»ƒm tra ká»¹ thÃ´ng tin vÃ  kiÃªn nháº«n chá» DNS cáº­p nháº­t. Náº¿u gáº·p lá»—i, hÃ£y xem láº¡i cÃ i Ä‘áº·t vÃ  thá»­ láº¡i ğŸ”„. ChÃºc báº¡n thá»±c hiá»‡n thÃ nh cÃ´ng vÃ  website hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh! ğŸš€ Náº¿u cÃ³ váº¥n Ä‘á», cá»© Ä‘á»ƒ láº¡i comment, tÃ´i sáº½ xem thá»­ nhÃ©! ğŸ’¬ğŸ˜Š\n","date":"2025-02-27T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/website/domain-to-hosting-setup.webp","permalink":"https://tech.nguuyen.io.vn/posts/website/domain-to-hosting-setup/","title":"Trá» tÃªn miá»n vá» hosting ğŸŒ"},{"content":"CÃ¡ch up website lÃªn Hosting thÃ´ng qua File Manager vÃ  cPanel nhanh nháº¥t tá»« A-Z Viá»‡c upload website lÃªn hosting lÃ  bÆ°á»›c thiáº¿t yáº¿u Ä‘á»ƒ Ä‘Æ°a website cá»§a báº¡n hoáº¡t Ä‘á»™ng trÃªn internet. QuÃ¡ trÃ¬nh nÃ y khÃ´ng chá»‰ Ä‘Æ¡n giáº£n lÃ  chuyá»ƒn dá»¯ liá»‡u, mÃ  cÃ²n liÃªn quan Ä‘áº¿n viá»‡c Ä‘áº£m báº£o má»i thá»© hoáº¡t Ä‘á»™ng mÆ°á»£t mÃ  vÃ  an toÃ n. BÃ i viáº¿t nÃ y sáº½ giÃºp báº¡n hiá»ƒu rÃµ cÃ¡c bÆ°á»›c cáº§n thiáº¿t, tá»« chuáº©n bá»‹ file vÃ  database, Ä‘áº¿n cÃ¡c cÃ´ng cá»¥ há»— trá»£ upload hiá»‡u quáº£.\nÄiá»ƒm chÃ­nh cáº§n náº¯m TrÆ°á»›c khi báº¯t tay vÃ o viá»‡c upload website lÃªn hosting, báº¡n cáº§n lÆ°u Ã½ má»™t sá»‘ yáº¿u tá»‘ quan trá»ng. MÃ¬nh sáº½ giÃºp báº¡n dá»… dÃ ng hiá»ƒu vÃ  náº¯m báº¯t cÃ¡c bÆ°á»›c thá»±c hiá»‡n:\nâœ… Báº¡n cáº§n chuáº©n bá»‹ gÃ¬ khi upload website lÃªn hosting: Chuáº©n bá»‹ file website, database, quyá»n truy cáº­p control panel vÃ  pháº§n má»m FTP nhÆ° FileZilla.\nâœ… CÃ¡c cÃ¡ch upload website lÃªn hosting: Chá»n hosting uy tÃ­n, sau Ä‘Ã³ sá»­ dá»¥ng File Manager, FTP, plugin WordPress, SSH hoáº·c nhá» há»— trá»£ tá»« nhÃ  cung cáº¥p.\nâœ… LÃ½ do cáº§n upload website lÃªn hosting: GiÃºp cÃ´ng khai website, tÄƒng báº£o máº­t, cáº£i thiá»‡n tá»‘c Ä‘á»™ vÃ  dá»… quáº£n lÃ½.\nâœ… Bá»‘n bÆ°á»›c Ä‘á»ƒ upload web lÃªn hosting:\nUpload file website vÃ o thÆ° má»¥c public_html qua File Manager hoáº·c FTP. Kiá»ƒm tra xem cÃ¡c file Ä‘Ã£ Ä‘Ãºng vá»‹ trÃ­ chÆ°a. Táº¡o database trÃªn cPanel, import dá»¯ liá»‡u qua phpMyAdmin vÃ  cáº¥u hÃ¬nh káº¿t ná»‘i. Truy cáº­p website Ä‘á»ƒ kiá»ƒm tra xem má»i thá»© Ä‘Ã£ hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh chÆ°a. Cáº§n chuáº©n bá»‹ gÃ¬ khi upload website lÃªn hosting? Äá»ƒ upload website lÃªn hosting, trÆ°á»›c tiÃªn báº¡n cáº§n pháº£i chuáº©n bá»‹ má»™t sá»‘ váº¥n Ä‘á» sau Ä‘Ã¢y:\nFile website: Nhá»¯ng file nÃ y cÃ³ thá»ƒ lÃ  toÃ n bá»™ dá»¯ liá»‡u bÃªn trong pháº§n public_html cÅ© hoáº·c file source code hay báº£n backup (sao lÆ°u) dá»¯ liá»‡u má»›i nháº¥t thay cho source code. ğŸ“Œ LÆ°u Ã½ khi triá»ƒn khai website React/Vue.js\nKhi build má»™t á»©ng dá»¥ng React hoáº·c Vue.js, ta khÃ´ng táº£i toÃ n bá»™ mÃ£ nguá»“n lÃªn mÃ¡y chá»§,\nmÃ  chá»‰ cáº§n upload thÆ° má»¥c chá»©a cÃ¡c file tÄ©nh Ä‘Ã£ Ä‘Æ°á»£c build.\nğŸ”¹ CÃ¡c bÆ°á»›c build vÃ  nÃ©n tá»‡p:\nCháº¡y lá»‡nh build: React: 1 npm run build Vue.js: 1 npm run build Sau khi build xong, thÆ° má»¥c output thÆ°á»ng lÃ  build/ (React) hoáº·c dist/ (Vue.js). NÃ©n thÆ° má»¥c build hoáº·c dist thÃ nh file ZIP trÆ°á»›c khi táº£i lÃªn mÃ¡y chá»§. ğŸ“¤ Khi táº£i lÃªn mÃ¡y chá»§:\nNáº¿u dÃ¹ng cPanel, cÃ³ thá»ƒ giáº£i nÃ©n trá»±c tiáº¿p trong thÆ° má»¥c public_html. Náº¿u dÃ¹ng SSH/SFTP, táº£i lÃªn vÃ  giáº£i nÃ©n báº±ng lá»‡nh: 1 unzip build.zip -d /var/www/html/ Äáº£m báº£o cáº¥u hÃ¬nh mÃ¡y chá»§ (Apache/Nginx) Ä‘á»ƒ trá» vÃ o thÆ° má»¥c chá»©a file index.html. File database (náº¿u cÃ³). Truy cáº­p control panel cá»§a tÃ i khoáº£n hosting má»›i. Pháº§n má»m FTP client nhÆ° FileZilla. Äá»ƒ táº£i trang web lÃªn hosting, báº¡n cáº§n truy cáº­p control panel cá»§a tÃ i khoáº£n hosting báº±ng pháº§n má»m FTP nhÆ° FileZilla. Náº¿u trang web Ä‘Ã£ cÃ³, báº¡n cÃ³ thá»ƒ dá»… dÃ ng sao lÆ°u vÃ  táº£i lÃªn báº±ng tÃ­nh nÄƒng sao lÆ°u cá»§a CMS hoáº·c cPanel.\nChá»n nhÃ  cung cáº¥p hosting uy tÃ­n, tin cáº­y Web Hosting cháº¥t lÆ°á»£ng khÃ´ng chá»‰ Ä‘áº£m báº£o tá»‘c Ä‘á»™ mÃ  cÃ²n quyáº¿t Ä‘á»‹nh hiá»‡u suáº¥t váº­n hÃ nh lÃ¢u dÃ i cá»§a website. VÃ¬ váº­y, viá»‡c lá»±a chá»n nhÃ  cung cáº¥p hosting cáº§n Ä‘Æ°á»£c thá»±c hiá»‡n cáº©n tháº­n, dá»±a trÃªn cÃ¡c tiÃªu chÃ­ sau:\nHá»— trá»£ trá»±c tuyáº¿n: Äáº£m báº£o nhÃ  cung cáº¥p cÃ³ dá»‹ch vá»¥ há»— trá»£ khÃ¡ch hÃ ng 24/7, giÃºp báº¡n nhanh chÃ³ng giáº£i quyáº¿t sá»± cá»‘. Quyá»n kiá»ƒm soÃ¡t tÃ i khoáº£n hosting: Báº¡n cáº§n Ä‘Æ°á»£c cung cáº¥p toÃ n quyá»n quáº£n lÃ½ tÃ i khoáº£n hosting, bao gá»“m quyá»n truy cáº­p vÃ o cPanel hoáº·c cÃ¡c cÃ´ng cá»¥ tÆ°Æ¡ng Ä‘Æ°Æ¡ng. Kháº£ nÄƒng má»Ÿ rá»™ng: Hosting nÃªn cÃ³ kháº£ nÄƒng nÃ¢ng cáº¥p tÃ i nguyÃªn khi nhu cáº§u cá»§a báº¡n tÄƒng cao, nhÆ° dung lÆ°á»£ng lÆ°u trá»¯, bÄƒng thÃ´ng hoáº·c sá»‘ lÆ°á»£ng tÃªn miá»n. ChÃ­nh sÃ¡ch hoÃ n tiá»n minh báº¡ch: CÃ¡c chÃ­nh sÃ¡ch hoÃ n tiá»n linh hoáº¡t sáº½ giÃºp báº¡n an tÃ¢m hÆ¡n khi thá»­ nghiá»‡m dá»‹ch vá»¥. Dá»‹ch vá»¥ cá»™ng thÃªm miá»…n phÃ­: Æ¯u tiÃªn nhÃ  cung cáº¥p há»— trá»£ thÃªm cÃ¡c tiá»‡n Ã­ch nhÆ° SSL miá»…n phÃ­, sao lÆ°u Ä‘á»‹nh ká»³ hoáº·c dá»‹ch vá»¥ di chuyá»ƒn website. ÄÄƒng kÃ½ tÃªn miá»n Ä‘Æ°á»£c cÃ´ng nháº­n bá»Ÿi ICANN: Äá»ƒ báº£o vá»‡ thÆ°Æ¡ng hiá»‡u cá»§a báº¡n, hÃ£y chá»n nhÃ  cung cáº¥p tÃªn miá»n uy tÃ­n vÃ  Ä‘Æ°á»£c chá»©ng nháº­n bá»Ÿi ICANN. LÆ°u Ã½: HÃ£y tÃ¬m hiá»ƒu ká»¹ vá» Ä‘Ã¡nh giÃ¡ cá»§a ngÆ°á»i dÃ¹ng vÃ  uy tÃ­n cá»§a nhÃ  cung cáº¥p thÃ´ng qua cÃ¡c diá»…n Ä‘Ã n hoáº·c trang Ä‘Ã¡nh giÃ¡ trÆ°á»›c khi Ä‘Æ°a ra quyáº¿t Ä‘á»‹nh. Äiá»u nÃ y sáº½ giÃºp báº¡n chá»n Ä‘Æ°á»£c dá»‹ch vá»¥ phÃ¹ há»£p nháº¥t vá»›i nhu cáº§u phÃ¡t triá»ƒn website.\nLá»±a chá»n phÆ°Æ¡ng phÃ¡p upload website lÃªn hosting CÃ³ 5 phÆ°Æ¡ng phÃ¡p chÃ­nh Ä‘á»ƒ upload website lÃªn hosting, tÃ¹y thuá»™c vÃ o nhu cáº§u vÃ  cÃ´ng cá»¥ báº¡n sá»­ dá»¥ng:\nSá»­ dá»¥ng cÃ´ng cá»¥ quáº£n lÃ½ file (File Manager) LÃ  cÃ´ng cá»¥ quáº£n lÃ½ file trá»±c tiáº¿p trÃªn ná»n táº£ng web cá»§a hosting, thÆ°á»ng Ä‘Æ°á»£c tÃ­ch há»£p sáºµn trong cPanel hoáº·c cÃ¡c trÃ¬nh quáº£n lÃ½ hosting khÃ¡c.\nÆ¯u Ä‘iá»ƒm:\nMiá»…n phÃ­. Dá»… dÃ ng sá»­ dá»¥ng. NhÆ°á»£c Ä‘iá»ƒm:\nHáº¡n cháº¿ dung lÆ°á»£ng file táº£i lÃªn (thÆ°á»ng tá»‘i Ä‘a 256 MB). Chá»‰ giáº£i nÃ©n Ä‘Æ°á»£c cÃ¡c file nhá» hÆ¡n dung lÆ°á»£ng nÃ y. LÆ°u Ã½: Khi dÃ¹ng File Manager, báº¡n chá»‰ cÃ³ thá»ƒ táº£i hoáº·c giáº£i nÃ©n file cÃ³ dung lÆ°á»£ng tá»‘i Ä‘a 256MB. Náº¿u muá»‘n táº£i file lá»›n hÆ¡n, sá»­ dá»¥ng FTP vÃ  giáº£i nÃ©n qua SSH sáº½ lÃ  lá»±a chá»n tá»‘i Æ°u.\nHÃ¬nh 1: Truy cáº­p vÃ o File Manager\nSá»­ dá»¥ng giao thá»©c truyá»n táº£i file (FTP) Giao thá»©c FTP (File Transfer Protocol) cho phÃ©p báº¡n táº£i file lÃªn hosting thÃ´ng qua pháº§n má»m FTP client nhÆ° FileZilla. ÄÃ¢y lÃ  phÆ°Æ¡ng phÃ¡p hiá»‡u quáº£ vÃ  khÃ´ng giá»›i háº¡n dung lÆ°á»£ng file táº£i lÃªn.\nÆ¯u Ä‘iá»ƒm:\nKhÃ´ng giá»›i háº¡n dung lÆ°á»£ng táº£i lÃªn. Táº£i file lá»›n nhanh chÃ³ng vÃ  tiá»‡n lá»£i. NhÆ°á»£c Ä‘iá»ƒm:\nCáº§n cÃ i Ä‘áº·t pháº§n má»m FTP client. Cáº§n thÃ´ng tin Ä‘Äƒng nháº­p FTP tá»« hosting. Báº£o máº­t khÃ´ng cao, cÃ³ thá»ƒ sá»­ dá»¥ng SFTP Ä‘á»ƒ an toÃ n hÆ¡n. HÃ¬nh 2: ThÃ´ng tin FPT\nSá»­ dá»¥ng Plugin Di Chuyá»ƒn WordPress Náº¿u báº¡n sá»­ dá»¥ng WordPress, cÃ¡c plugin nhÆ° All in One WP Migration cÃ³ thá»ƒ giÃºp báº¡n di chuyá»ƒn toÃ n bá»™ website má»™t cÃ¡ch tá»± Ä‘á»™ng.\nÆ¯u Ä‘iá»ƒm:\nDá»… sá»­ dá»¥ng, khÃ´ng cáº§n kiáº¿n thá»©c ká»¹ thuáº­t cao. KÃ©o tháº£ file Ä‘Æ¡n giáº£n. NhÆ°á»£c Ä‘iá»ƒm:\nGiá»›i háº¡n dung lÆ°á»£ng file táº£i lÃªn (thÆ°á»ng lÃ  256 MB). Vá»›i file lá»›n hÆ¡n, cáº§n chuyá»ƒn sang FTP vÃ  SSH. LÆ°u Ã½: Plugin nÃ y cÃ³ giá»›i háº¡n dung lÆ°á»£ng, náº¿u muá»‘n táº£i file lá»›n, báº¡n cáº§n chuyá»ƒn sang FTP vÃ  giáº£i nÃ©n qua SSH. Sau khi upload, nhá»› chuyá»ƒn dá»¯ liá»‡u trong thÆ° má»¥c con ra ngoÃ i public_html Ä‘á»ƒ website hoáº¡t Ä‘á»™ng chÃ­nh xÃ¡c.\nHÃ¬nh 3: Sá»­ dá»¥ng WordPress Migration Plugin\nSá»­ dá»¥ng SSH (Secure Shell) SSH lÃ  cÃ¡ch táº£i vÃ  quáº£n lÃ½ file qua dÃ²ng lá»‡nh, phÃ¹ há»£p vá»›i nhá»¯ng file lá»›n hoáº·c yÃªu cáº§u tá»‘c Ä‘á»™ cao.\nÆ¯u Ä‘iá»ƒm:\nNhanh chÃ³ng, khÃ´ng giá»›i háº¡n dung lÆ°á»£ng. CÃ³ thá»ƒ giáº£i nÃ©n file trá»±c tiáº¿p trÃªn server. NhÆ°á»£c Ä‘iá»ƒm:\nYÃªu cáº§u ká»¹ nÄƒng sá»­ dá»¥ng lá»‡nh cÆ¡ báº£n vÃ  quyá»n truy cáº­p SSH tá»« nhÃ  cung cáº¥p hosting. HÃ¬nh 4: Sá»­ dá»¥ng SSH upload website\nImport Site â€“ TrÃ¬nh nháº­p website tá»± Ä‘á»™ng Má»™t sá»‘ nhÃ  cung cáº¥p dá»‹ch vá»¥ hosting cung cáº¥p cÃ´ng cá»¥ Import Site giÃºp táº£i vÃ  giáº£i nÃ©n website vÃ o thÆ° má»¥c public_html má»™t cÃ¡ch nhanh chÃ³ng.\nÆ¯u Ä‘iá»ƒm:\nQuÃ¡ trÃ¬nh táº£i lÃªn nhanh chÃ³ng vÃ  dá»… dÃ ng. KhÃ´ng cáº§n nhiá»u kiáº¿n thá»©c ká»¹ thuáº­t. NhÆ°á»£c Ä‘iá»ƒm:\nPhá»¥ thuá»™c vÃ o nhÃ  cung cáº¥p hosting cÃ³ há»— trá»£ cÃ´ng cá»¥ nÃ y. KhÃ´ng pháº£i nhÃ  cung cáº¥p hosting nÃ o cÅ©ng cung cáº¥p cÃ´ng cá»¥ nÃ y. Gá»£i Ã½: Kiá»ƒm tra vá»›i nhÃ  cung cáº¥p hosting xem há» cÃ³ há»— trá»£ cÃ´ng cá»¥ nháº­p trang web hay khÃ´ng.\nHÃ¬nh 5: Tool nháº­p website\nNhá» sá»± há»— trá»£ tá»« nhÃ  cung cáº¥p hosting Háº§u háº¿t cÃ¡c nhÃ  cung cáº¥p hosting Ä‘á»u cÃ³ dá»‹ch vá»¥ há»— trá»£ di chuyá»ƒn website, Ä‘áº·c biá»‡t khi báº¡n chuyá»ƒn tá»« dá»‹ch vá»¥ hosting cÅ© sang nhÃ  cung cáº¥p má»›i.\nÆ¯u Ä‘iá»ƒm:\nTiáº¿t kiá»‡m thá»i gian vÃ  trÃ¡nh sai sÃ³t ká»¹ thuáº­t. ÄÆ°á»£c thá»±c hiá»‡n bá»Ÿi Ä‘á»™i ngÅ© chuyÃªn gia. NhÆ°á»£c Ä‘iá»ƒm:\nCÃ³ thá»ƒ máº¥t phÃ­ náº¿u nhÃ  cung cáº¥p khÃ´ng há»— trá»£ miá»…n phÃ­. Thá»i gian xá»­ lÃ½ phá»¥ thuá»™c vÃ o Ä‘á»™i ngÅ© há»— trá»£. Gá»£i Ã½: HÃ£y kiá»ƒm tra chÃ­nh sÃ¡ch há»— trá»£ di chuyá»ƒn website cá»§a nhÃ  cung cáº¥p hosting trÆ°á»›c khi yÃªu cáº§u dá»‹ch vá»¥.\nHÃ¬nh 6: Nhá» sá»± há»— trá»£ tá»« nhÃ  cung cáº¥p hosting\nğŸ“Œ LÆ°u Ã½ sau khi upload website lÃªn hosting\nDi chuyá»ƒn toÃ n bá»™ dá»¯ liá»‡u tá»« thÆ° má»¥c con (náº¿u cÃ³) ra ngoÃ i public_html Ä‘á»ƒ website hoáº¡t Ä‘á»™ng chÃ­nh xÃ¡c. Kiá»ƒm tra láº¡i cáº¥u trÃºc file vÃ  káº¿t ná»‘i database (náº¿u cÃ³) Ä‘á»ƒ trÃ¡nh lá»—i khi váº­n hÃ nh. Chá»n phÆ°Æ¡ng phÃ¡p phÃ¹ há»£p nháº¥t dá»±a trÃªn kÃ­ch thÆ°á»›c file, ná»n táº£ng website vÃ  kháº£ nÄƒng ká»¹ thuáº­t cá»§a báº¡n. LÃ½ do cáº§n upload website lÃªn Hosting Viá»‡c upload website lÃªn hosting khÃ´ng chá»‰ lÃ  bÆ°á»›c cáº§n thiáº¿t Ä‘á»ƒ Ä‘Æ°a website cá»§a báº¡n ra cÃ´ng chÃºng, mÃ  cÃ²n mang láº¡i nhiá»u lá»£i Ã­ch quan trá»ng giÃºp website hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh, báº£o máº­t vÃ  hiá»‡u quáº£. DÆ°á»›i Ä‘Ã¢y lÃ  nhá»¯ng lÃ½ do báº¡n nÃªn thá»±c hiá»‡n viá»‡c nÃ y:\nXuáº¥t báº£n website vÃ  tiáº¿p cáº­n toÃ n cáº§u Khi báº¡n upload website lÃªn hosting, website sáº½ trá»Ÿ nÃªn cÃ´ng khai vÃ  cÃ³ thá»ƒ truy cáº­p tá»« báº¥t ká»³ Ä‘Ã¢u trÃªn tháº¿ giá»›i qua tÃªn miá»n (domain) cá»§a báº¡n. Náº¿u khÃ´ng lÃ m Ä‘iá»u nÃ y, chá»‰ riÃªng báº¡n má»›i cÃ³ thá»ƒ truy cáº­p website tá»« mÃ¡y tÃ­nh cÃ¡ nhÃ¢n.\nBáº£o máº­t vÃ  an toÃ n dá»¯ liá»‡u Hosting chuyÃªn nghiá»‡p mang láº¡i nhá»¯ng biá»‡n phÃ¡p báº£o máº­t máº¡nh máº½, cháº³ng háº¡n nhÆ° chá»©ng chá»‰ SSL, tÆ°á»ng lá»­a vÃ  cÃ¡c cÃ´ng cá»¥ báº£o vá»‡ dá»¯ liá»‡u khÃ¡c. Äiá»u nÃ y giÃºp Ä‘áº£m báº£o an toÃ n cho website vÃ  cáº£ dá»¯ liá»‡u thÆ°Æ¡ng hiá»‡u khá»i cÃ¡c nguy cÆ¡ táº¥n cÃ´ng, máº¥t mÃ¡t hoáº·c xÃ¢m nháº­p dá»¯ liá»‡u, má»™t váº¥n Ä‘á» mÃ  viá»‡c lÆ°u trá»¯ website trÃªn mÃ¡y tÃ­nh cÃ¡ nhÃ¢n sáº½ khÃ³ Ä‘áº£m báº£o Ä‘Æ°á»£c.\nTÄƒng tá»‘c Ä‘á»™ vÃ  hiá»‡u suáº¥t Website CÃ¡c mÃ¡y chá»§ hosting Ä‘Æ°á»£c tá»‘i Æ°u Ä‘á»ƒ xá»­ lÃ½ lÆ°u lÆ°á»£ng truy cáº­p lá»›n vÃ  cung cáº¥p tá»‘c Ä‘á»™ internet nhanh chÃ³ng, giÃºp tÄƒng cÆ°á»ng hiá»‡u suáº¥t táº£i trang cá»§a website. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  ngÆ°á»i dÃ¹ng sáº½ cÃ³ tráº£i nghiá»‡m mÆ°á»£t mÃ  hÆ¡n, Ä‘á»“ng thá»i giáº£m thiá»ƒu tÃ¬nh tráº¡ng website bá»‹ \u0026ldquo;lag\u0026rdquo; hoáº·c táº£i cháº­m, má»™t yáº¿u tá»‘ quan trá»ng trong viá»‡c giá»¯ chÃ¢n ngÆ°á»i truy cáº­p.\nHÃ¬nh 7: TÄƒng tá»‘c Ä‘á»™ vÃ  hiá»‡u suáº¥t Website\nTÃ­nh á»•n Ä‘á»‹nh vÃ  tin cáº­y Khi website Ä‘Æ°á»£c lÆ°u trá»¯ trÃªn hosting, báº¡n khÃ´ng pháº£i lo láº¯ng vá» viá»‡c duy trÃ¬ pháº§n cá»©ng hay káº¿t ná»‘i máº¡ng. CÃ¡c nhÃ  cung cáº¥p hosting sáº½ Ä‘áº£m báº£o server luÃ´n hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh vá»›i thá»i gian uptime cao, giÃºp website cá»§a báº¡n luÃ´n sáºµn sÃ ng phá»¥c vá»¥ ngÆ°á»i dÃ¹ng mÃ  khÃ´ng gáº·p pháº£i sá»± cá»‘ downtime kÃ©o dÃ i.\nQuáº£n lÃ½ website dá»… dÃ ng vÃ  tiá»‡n lá»£i CÃ¡c nhÃ  cung cáº¥p hosting cung cáº¥p giao diá»‡n quáº£n lÃ½ thÃ¢n thiá»‡n vÃ  dá»… sá»­ dá»¥ng, giÃºp báº¡n dá»… dÃ ng theo dÃµi, tá»‘i Æ°u vÃ  báº£o trÃ¬ website. Tá»« viá»‡c sao lÆ°u dá»¯ liá»‡u, nÃ¢ng cáº¥p pháº§n má»m cho Ä‘áº¿n viá»‡c tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t, táº¥t cáº£ Ä‘á»u trá»Ÿ nÃªn Ä‘Æ¡n giáº£n hÆ¡n khi báº¡n sá»­ dá»¥ng dá»‹ch vá»¥ hosting chuyÃªn nghiá»‡p.\nTÃ­nh má»Ÿ rá»™ng vÃ  phÃ¡t triá»ƒn lÃ¢u dÃ i Hosting khÃ´ng chá»‰ phá»¥c vá»¥ website trong giai Ä‘oáº¡n Ä‘áº§u, mÃ  cÃ²n há»— trá»£ kháº£ nÄƒng má»Ÿ rá»™ng khi website cá»§a báº¡n phÃ¡t triá»ƒn. Náº¿u lÆ°u trá»¯ trÃªn mÃ¡y tÃ­nh cÃ¡ nhÃ¢n, báº¡n sáº½ gáº·p khÃ³ khÄƒn khi website tÄƒng trÆ°á»Ÿng vá» lÆ°u lÆ°á»£ng truy cáº­p hay yÃªu cáº§u vá» tÃ i nguyÃªn. Hosting chuyÃªn nghiá»‡p sáº½ giÃºp báº¡n dá»… dÃ ng nÃ¢ng cáº¥p tÃ i nguyÃªn mÃ  khÃ´ng pháº£i lo láº¯ng vá» viá»‡c máº¥t dá»¯ liá»‡u hay giÃ¡n Ä‘oáº¡n dá»‹ch vá»¥.\nHÃ¬nh 8: TÃ­nh má»Ÿ rá»™ng vÃ  phÃ¡t triá»ƒn lÃ¢u dÃ i\nTÃ³m láº¡i, viá»‡c upload website lÃªn hosting mang láº¡i nhá»¯ng lá»£i Ã­ch vÆ°á»£t trá»™i vá» báº£o máº­t, hiá»‡u suáº¥t, tÃ­nh á»•n Ä‘á»‹nh vÃ  kháº£ nÄƒng quáº£n lÃ½, giÃºp website cá»§a báº¡n hoáº¡t Ä‘á»™ng hiá»‡u quáº£ vÃ  bá»n vá»¯ng. ÄÃ¢y lÃ  bÆ°á»›c quan trá»ng Ä‘á»ƒ khÃ´ng chá»‰ báº£o vá»‡ dá»¯ liá»‡u mÃ  cÃ²n táº¡o ra má»™t ná»n táº£ng vá»¯ng cháº¯c Ä‘á»ƒ phÃ¡t triá»ƒn website trong tÆ°Æ¡ng lai. VÃ¬ váº­y, náº¿u báº¡n muá»‘n website cá»§a mÃ¬nh hoáº¡t Ä‘á»™ng trÆ¡n tru vÃ  dá»… dÃ ng truy cáº­p tá»« má»i nÆ¡i, viá»‡c upload lÃªn hosting lÃ  Ä‘iá»u khÃ´ng thá»ƒ thiáº¿u.\nBÆ°á»›c 1: Chá»n cÃ¡ch upload file website lÃªn host CÃ¡ch 1: Upload website lÃªn hosting báº±ng File Manager qua cPanel CÃ¡ch 2: Upload website lÃªn hosting báº±ng FTP client Sau khi báº¡n Ä‘Ã£ lá»±a chá»n xong cÃ¡ch Ä‘á»ƒ upload, dÆ°á»›i Ä‘Ã¢y lÃ  hÆ°á»›ng dáº«n cÃ¡ch upload website lÃªn hosting Ä‘Æ¡n giáº£n, báº¡n cÃ³ thá»ƒ tham kháº£o.\n\u0026mdash;CÃ¡ch 1: Upload website lÃªn hosting báº±ng File Manager qua cPanel\u0026mdash; (Dá»… nháº¥t)\nTruy cáº­p cPanel cá»§a tÃ i khoáº£n hosting vÃ  lÃ m theo hÆ°á»›ng dáº«n dÆ°á»›i Ä‘Ã¢y:\nBÆ°á»›c 1: Click vÃ o icon File Manager, Ä‘áº·t bÃªn dÆ°á»›i má»¥c Files.\nChá»n File Manager\nHÃ¬nh áº£nh minh há»a: Chá»n File Manager\nChá»n File Manager\nBÆ°á»›c 2: Trong File Manager, má»Ÿ thÆ° má»¥c public_html.\nMá»Ÿ thÆ° má»¥c public_html\nHÃ¬nh áº£nh minh há»a: Má»Ÿ thÆ° má»¥c public_html\nMá»Ÿ thÆ° má»¥c public_html\nBÆ°á»›c 3: Chá»n Upload sau khi truy cáº­p vÃ o thÆ° má»¥c public_html.\nChá»n Upload\nHÃ¬nh áº£nh minh há»a: Chá»n Upload\nChá»n Upload\nBÆ°á»›c 4: Chá»n Select File Ä‘á»ƒ chá»n tá»«ng file hoáº·c kÃ©o tháº£ vÃ o vÃ¹ng nháº­n file.\nChá»n file\nHÃ¬nh áº£nh minh há»a: Chá»n file\nChá»n file\nBÆ°á»›c 5: Trong vÃ­ dá»¥ nÃ y, mÃ¬nh kÃ©o tháº£ file wordpress.zip.\nChá»n file zip wordpress\nHÃ¬nh áº£nh minh há»a: Chá»n file zip wordpress (hoáº·c file dist.zip/build.zip)\nChá»n file zip wordpress\nBÆ°á»›c 6: Khi upload xong, quay láº¡i File Manager Ä‘á»ƒ tháº¥y file archive Ä‘Ã£ xuáº¥t hiá»‡n trong thÆ° má»¥c public_html. Click chuá»™t pháº£i vÃ  nháº¥n Extract Ä‘á»ƒ giáº£i nÃ©n file archive.\nExtract file\nHÃ¬nh áº£nh minh há»a: Extract file\nExtract file\nBÆ°á»›c 7: Chá»n vá»‹ trÃ­ file archive cáº§n extract, á»Ÿ vÃ­ dá»¥ nÃ y sáº½ lÆ°u vÃ o /public_html.\nChá»n vá»‹ trÃ­ file cáº§n extract\nHÃ¬nh áº£nh minh há»a: Chá»n vá»‹ trÃ­ file cáº§n extract\nChá»n vá»‹ trÃ­ file cáº§n extract\nBÆ°á»›c 8: Sau khi giáº£i nÃ©n file, báº¡n cÃ³ thá»ƒ xem cÃ¡c file Ä‘Ã£ Ä‘Æ°á»£c giáº£i nÃ©n trong thÆ° má»¥c public_html. ÄÃ¢y lÃ  thÆ° má»¥c gá»‘c cá»§a website.\nQuay láº¡i thÆ° má»¥c ban Ä‘áº§u Ä‘á»ƒ xem\nHÃ¬nh áº£nh minh há»a: Quay láº¡i thÆ° má»¥c ban Ä‘áº§u Ä‘á»ƒ xem\nQuay láº¡i thÆ° má»¥c ban Ä‘áº§u Ä‘á»ƒ xem\nBÆ°á»›c 9: Trang web Ä‘Ã£ táº£i xong. Báº¡n cÃ³ thá»ƒ truy cáº­p vÃ o trang web báº±ng cÃ¡ch nháº­p URL vÃ o trÃ¬nh duyá»‡t.\nMÃ n hÃ¬nh chá»n ngÃ´n ngá»¯ trong quÃ¡ trÃ¬nh cÃ i Ä‘áº·t WordPress (Náº¿u cÃ³)\n\u0026mdash;CÃ¡ch 2: Upload website lÃªn hosting báº±ng FTP client\u0026mdash;\nMá»™t sá»‘ ngÆ°á»i dÃ¹ng thÃ­ch táº£i trang web cá»§a há» lÃªn dá»‹ch vá»¥ hosting qua FTP, vÃ­ dá»¥: FileZilla, SmartFTP, CoreFTP hoáº·c báº¥t ká»³ pháº§n má»m nÃ o khÃ¡c. Trong cÃ¡c hÆ°á»›ng dáº«n sau, mÃ¬nh sáº½ sá»­ dá»¥ng FileZilla.\nNhá»¯ng lÆ°u Ã½ trÆ°á»›c khi upload website lÃªn hosting:\nKiáº¿n thá»©c vÃ  ká»¹ nÄƒng cá»§a báº¡n: Náº¿u báº¡n khÃ´ng cÃ³ nhiá»u kiáº¿n thá»©c vá» hosting, File Manager sáº½ dá»… sá»­ dá»¥ng hÆ¡n. Náº¿u báº¡n thÃ nh tháº¡o, FTP client sáº½ giÃºp táº£i lÃªn nhanh hÆ¡n. KÃ­ch thÆ°á»›c cá»§a website: Náº¿u website cÃ³ dung lÆ°á»£ng lá»›n, FTP client sáº½ thuáº­n tiá»‡n hÆ¡n vÃ¬ khÃ´ng giá»›i háº¡n dung lÆ°á»£ng táº£i lÃªn. YÃªu cáº§u Ä‘áº·c thÃ¹ cá»§a website: Náº¿u website yÃªu cáº§u cáº¥u hÃ¬nh server Ä‘áº·c biá»‡t, báº¡n nÃªn há»i nhÃ  cung cáº¥p hosting Ä‘á»ƒ chá»n cÃ¡ch upload phÃ¹ há»£p. BÆ°á»›c 1: TrÆ°á»›c tiÃªn, báº¡n cáº§n láº¥y thÃ´ng tin FTP thÃ´ng qua FTP Access. Náº¿u quÃªn máº­t kháº©u, báº¡n cÃ³ thá»ƒ Ä‘áº·t máº­t kháº©u má»›i qua pháº§n Change account password.\nLáº¥y thÃ´ng tin qua FTP Access\nHÃ¬nh áº£nh minh há»a: Láº¥y thÃ´ng tin qua FTP Access\nLáº¥y thÃ´ng tin qua FTP Access\nBÆ°á»›c 2: Má»Ÿ FileZilla, Ä‘iá»n thÃ´ng tin FTP Ä‘á»ƒ truy cáº­p vÃ  nháº¥n Quickconnect.\nChá»n Quickconnect\nHÃ¬nh áº£nh minh há»a: Chá»n Quickconnect\nChá»n Quickconnect\nBÆ°á»›c 3: Sau khi káº¿t ná»‘i vá»›i FileZilla, tÃ¬m dá»¯ liá»‡u trang web vÃ  kÃ©o chÃºng tá»« bÃªn trÃ¡i cá»§a pháº§n má»m sang bÃªn pháº£i, thÆ° má»¥c Ä‘Ã­ch lÃ  public_html. Báº¡n cáº§n giáº£i nÃ©n file archive trÆ°á»›c, vÃ¬ FTP khÃ´ng cÃ³ chá»©c nÄƒng giáº£i nÃ©n.\nKÃ©o tháº£ dá»¯ liá»‡u tá»« bÃªn trÃ¡i cá»§a pháº§n má»m sang bÃªn pháº£i\nHÃ¬nh áº£nh minh há»a: KÃ©o tháº£ dá»¯ liá»‡u tá»« bÃªn trÃ¡i cá»§a pháº§n má»m sang bÃªn pháº£i\nKÃ©o tháº£ dá»¯ liá»‡u tá»« bÃªn trÃ¡i cá»§a pháº§n má»m sang bÃªn pháº£i\nBÆ°á»›c 4: TÆ°Æ¡ng tá»±, báº¡n cÃ³ thá»ƒ upload file nÃ©n qua FTP báº±ng cÃ¡ch kÃ©o tháº£ tá»« trÃ¡i sang pháº£i. Sau Ä‘Ã³, giáº£i nÃ©n chÃºng thÃ´ng qua File Manager.\nUpload file nÃ©n qua FTP\nHÃ¬nh áº£nh minh há»a: Upload file nÃ©n qua FTP\nUpload file nÃ©n qua FTP\nBÆ°á»›c 5: Sau khi táº£i trang web lÃªn hosting, báº¡n cÃ³ thá»ƒ truy cáº­p trang web báº±ng cÃ¡ch nháº­p URL vÃ o trÃ¬nh duyá»‡t. Báº¡n sáº½ tháº¥y trang cÃ i Ä‘áº·t máº·c Ä‘á»‹nh cá»§a website vÃ  cÃ³ thá»ƒ tÃ¹y chá»‰nh trang nÃ y Ä‘á»ƒ phÃ¹ há»£p vá»›i nhu cáº§u cá»§a mÃ¬nh.\nBÆ°á»›c 2: Kiá»ƒm tra xem file Ä‘Ã£ á»Ÿ trong thÆ° má»¥c public_html hay chÆ°a Sau khi upload website lÃªn hosting, bÆ°á»›c Ä‘áº§u tiÃªn báº¡n cáº§n lÃ m lÃ  kiá»ƒm tra xem cÃ¡c file Ä‘Ã£ Ä‘Æ°á»£c táº£i Ä‘áº§y Ä‘á»§ vÃ o thÆ° má»¥c public_html chÆ°a. Báº¡n cÃ³ thá»ƒ má»Ÿ thÆ° má»¥c public_html vÃ  kiá»ƒm tra xem táº¥t cáº£ cÃ¡c file Ä‘Ã£ náº±m trong Ä‘Ã³ chÆ°a. Náº¿u báº¡n táº¡o ra thÆ° má»¥c má»›i sau khi upload vÃ  giáº£i nÃ©n website backup, ngÆ°á»i dÃ¹ng sáº½ pháº£i truy cáº­p theo Ä‘Æ°á»ng dáº«n dáº¡ng example.com/something thay vÃ¬ example.com. Äá»ƒ kháº¯c phá»¥c Ä‘iá»u nÃ y, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng File Manager hoáº·c FTP theo cÃ¡c bÆ°á»›c sau:\nTruy cáº­p vÃ o thÆ° má»¥c chá»©a cÃ¡c file cá»§a website. Chá»n toÃ n bá»™ cÃ¡c file vÃ  nháº¥n chuá»™t pháº£i, sau Ä‘Ã³ chá»n nÃºt Move. Lá»±a chá»n thÆ° má»¥c Ä‘Ã­ch lÃ  public_html vÃ  nháº¥n Proceed. Náº¿u website cá»§a báº¡n Ä‘Ã£ Ä‘Æ°á»£c váº­n hÃ nh má»™t thá»i gian, báº¡n cÅ©ng cáº§n pháº£i upload database lÃªn hosting náº¿u chÆ°a thá»±c hiá»‡n.\nSau khi Ä‘Ã£ Ä‘áº£m báº£o cÃ¡c file Ä‘Ã£ Ä‘Æ°á»£c di chuyá»ƒn Ä‘Ãºng vÃ o thÆ° má»¥c public_html, báº¡n cÃ³ thá»ƒ kiá»ƒm tra website báº±ng cÃ¡ch má»Ÿ trÃ¬nh duyá»‡t vÃ  truy cáº­p vÃ o tÃªn miá»n cá»§a mÃ¬nh. Náº¿u tÃªn miá»n chÆ°a Ä‘Æ°á»£c trá» Ä‘Ãºng, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng phÃ¡p sau Ä‘á»ƒ kiá»ƒm tra vÃ  sá»­a lá»—i DNS:\nSá»­a file hosts trÃªn mÃ¡y tÃ­nh Ä‘á»ƒ giáº£ láº­p thay Ä‘á»•i DNS. Sá»­ dá»¥ng cÃ¡c cÃ´ng cá»¥ online Ä‘á»ƒ kiá»ƒm tra tÃªn miá»n. CÃ i Ä‘áº·t plugin trÃ¬nh duyá»‡t Ä‘á»ƒ táº¡o file host áº£o. NgoÃ i ra, náº¿u báº¡n cáº§n di chuyá»ƒn website tá»« thÆ° má»¥c con lÃªn thÆ° má»¥c gá»‘c (public_html), báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng File Manager hoáº·c FTP Ä‘á»ƒ thá»±c hiá»‡n. VÃ  báº¡n Ä‘á»«ng quÃªn táº£i láº¡i cÆ¡ sá»Ÿ dá»¯ liá»‡u lÃªn hosting náº¿u cáº§n thiáº¿t.\nBÆ°á»›c 3: Tiáº¿n hÃ nh upload database lÃªn website hosting Thá»±c hiá»‡n bÆ°á»›c nÃ y khi website cá»§a ngÆ°á»i dÃ¹ng Ä‘Ã£ cÃ³ sáºµn database. Náº¿u khÃ´ng, báº¡n cÃ³ thá»ƒ bá» qua bÆ°á»›c nÃ y.\nTáº¡o database trÃªn cPanel Táº¡o má»™t database má»›i táº¡i section MySQL Databases. Khi táº¡o database báº¡n cáº§n Ä‘iá»n vÃ  ghi chÃº láº¡i nhá»¯ng thÃ´ng sá»‘ database nhÆ° sau:\nMySQL Database MySQL User MySQL Host MySQL Password Táº¡o database má»›i\nDi chuyá»ƒn vÃ o phpMyAdmin cá»§a database Khi sá»­ dá»¥ng phpMyAdmin Ä‘á»ƒ quáº£n lÃ½ database, hÃ£y import database MySQL. Náº¿u báº¡n muá»‘n upload vÃ o má»™t database cÃ³ sáºµn, hÃ£y xÃ³a dá»¯ liá»‡u trÆ°á»›c Ä‘á»ƒ trÃ¡nh lá»—i khi táº£i lÃªn tá»« mÃ¡y tÃ­nh.\nDi chuyá»ƒn vÃ o phpMyAdmin\nDi chuyá»ƒn vÃ o tab Import vÃ  upload dá»¯ liá»‡u vÃ o database Náº¿u lÃ  láº§n Ä‘áº§u táº¡o database, chá»‰ cáº§n vÃ o tab Import Ä‘á»ƒ upload dá»¯ liá»‡u vÃ o database trá»‘ng. Báº¡n Ä‘Ã£ cÃ³ má»™t file SQL tá»« báº£n sao lÆ°u cá»§a trang web, cÃ³ thá»ƒ lÃ  file dáº¡ng text vá»›i Ä‘uÃ´i .sql hoáº·c dáº¡ng nÃ©n nhÆ° .sql.zip hay .sql.gz. HÃ£y nháº¥n nÃºt Choose File Ä‘á»ƒ chá»n file cÆ¡ sá»Ÿ dá»¯ liá»‡u vÃ  sau Ä‘Ã³ báº¥m nÃºt Go Ä‘á»ƒ báº¯t Ä‘áº§u quÃ¡ trÃ¬nh táº£i lÃªn. Khi phpMyAdmin hoÃ n táº¥t vÃ  hiá»ƒn thá»‹ thÃ´ng bÃ¡o Import has been successfully finished, 302 queries executed, cÃ³ nghÄ©a lÃ  quÃ¡ trÃ¬nh táº£i lÃªn cÆ¡ sá»Ÿ dá»¯ liá»‡u Ä‘Ã£ hoÃ n táº¥t.\nImport dá»¯ liá»‡u vÃ o database\nCáº­p nháº­t file cáº¥u hÃ¬nh Ä‘á»ƒ káº¿t ná»‘i website vÃ  database Sau khi táº£i database lÃªn server, báº¡n cáº§n má»Ÿ file cáº¥u hÃ¬nh PHP script Ä‘á»ƒ Ä‘iá»n thÃ´ng tin nhÆ° host, tÃªn database, tÃªn ngÆ°á»i dÃ¹ng vÃ  máº­t kháº©u. File cáº¥u hÃ¬nh cÃ³ thá»ƒ cÃ³ tÃªn vÃ  vá»‹ trÃ­ khÃ¡c nhau tÃ¹y thuá»™c vÃ o pháº§n má»m báº¡n sá»­ dá»¥ng. VÃ­ dá»¥, vá»›i WordPress, file cáº¥u hÃ¬nh lÃ  wp-config.php vÃ  náº±m trong thÆ° má»¥c chá»©a WordPress (thÆ°á»ng lÃ  public_html).\nâš  LÆ°u Ã½:\nNáº¿u cÆ¡ sá»Ÿ dá»¯ liá»‡u cá»§a báº¡n cÃ³ kÃ­ch thÆ°á»›c lá»›n, hÃ£y cÃ¢n nháº¯c chia nhá» database thÃ nh nhiá»u file Ä‘á»ƒ quÃ¡ trÃ¬nh táº£i lÃªn diá»…n ra nhanh chÃ³ng hÆ¡n. Náº¿u database chá»©a cÃ¡c kÃ½ tá»± Ä‘áº·c biá»‡t, nhá»› chuyá»ƒn Ä‘á»•i chÃºng sang Ä‘á»‹nh dáº¡ng ASCII trÆ°á»›c khi thá»±c hiá»‡n upload. Trong trÆ°á»ng há»£p gáº·p lá»—i khi import, báº¡n cáº§n kiá»ƒm tra xem database cÃ³ bá»‹ há»ng hay khÃ´ng. Náº¿u bá»‹ lá»—i, hÃ£y táº¡o láº¡i má»™t cÆ¡ sá»Ÿ dá»¯ liá»‡u má»›i vÃ  thá»­ láº¡i. Cuá»‘i cÃ¹ng, sau khi upload xong, Ä‘á»«ng quÃªn kiá»ƒm tra website cá»§a báº¡n Ä‘á»ƒ Ä‘áº£m báº£o má»i thá»© hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng. Cáº­p nháº­t file cáº¥u hÃ¬nh Ä‘á»ƒ káº¿t ná»‘i website vÃ  database Sau khi táº£i database lÃªn server, báº¡n cáº§n má»Ÿ file cáº¥u hÃ¬nh PHP script Ä‘á»ƒ Ä‘iá»n thÃ´ng tin nhÆ° host, tÃªn database, tÃªn ngÆ°á»i dÃ¹ng vÃ  máº­t kháº©u.\nFile cáº¥u hÃ¬nh cÃ³ thá»ƒ cÃ³ tÃªn vÃ  vá»‹ trÃ­ khÃ¡c nhau tÃ¹y thuá»™c vÃ o pháº§n má»m báº¡n sá»­ dá»¥ng. VÃ­ dá»¥, vá»›i WordPress, file cáº¥u hÃ¬nh lÃ  wp-config.php vÃ  náº±m trong thÆ° má»¥c chá»©a WordPress (thÆ°á»ng lÃ  public_html).\nBÆ°á»›c 4: Kiá»ƒm tra website Ä‘Ã£ hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh hay chÆ°a Äá»ƒ Ä‘áº£m báº£o website cá»§a báº¡n hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh sau khi táº£i lÃªn vÃ  trá» tÃªn miá»n, báº¡n cáº§n thá»±c hiá»‡n má»™t sá»‘ bÆ°á»›c kiá»ƒm tra quan trá»ng:\nğŸ” Kiá»ƒm tra truy cáº­p website Truy cáº­p báº±ng tÃªn miá»n hoáº·c Ä‘á»‹a chá»‰ IP: Náº¿u báº¡n cÃ³ thá»ƒ truy cáº­p thÃ nh cÃ´ng, website Ä‘Ã£ hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh. Chá» DNS cáº­p nháº­t: Náº¿u tÃªn miá»n vá»«a Ä‘Æ°á»£c cáº­p nháº­t, báº¡n cÃ³ thá»ƒ cáº§n Ä‘á»£i khoáº£ng 24 giá» Ä‘á»ƒ DNS Ä‘Æ°á»£c quáº£ng bÃ¡ rá»™ng rÃ£i. Kiá»ƒm tra ngay láº­p tá»©c báº±ng: ğŸ–¥ï¸ Sá»­ dá»¥ng file host: Chá»‰nh sá»­a file host trÃªn mÃ¡y tÃ­nh Ä‘á»ƒ mÃ´ phá»ng thay Ä‘á»•i DNS. ğŸŒ CÃ´ng cá»¥ online: Kiá»ƒm tra website báº±ng cÃ¡c dá»‹ch vá»¥ kiá»ƒm tra DNS trá»±c tuyáº¿n. ğŸ”Œ Plugin browser: CÃ i Ä‘áº·t plugin giÃºp táº¡o file host áº£o Ä‘á»ƒ kiá»ƒm tra cÃ¡c thay Ä‘á»•i DNS. ğŸ› ï¸ Kiá»ƒm tra cÃ¡c chá»©c nÄƒng cá»§a website Thá»­ truy cáº­p cÃ¡c trang khÃ¡c nhau, kiá»ƒm tra liÃªn káº¿t. Kiá»ƒm tra xem cÃ¡c tÃ­nh nÄƒng cá»§a website cÃ³ hoáº¡t Ä‘á»™ng Ä‘Ãºng khÃ´ng. âš¡ Kiá»ƒm tra tá»‘c Ä‘á»™ táº£i trang Sá»­ dá»¥ng cÃ¡c cÃ´ng cá»¥ nhÆ° Google PageSpeed Insights, GTmetrix Ä‘á»ƒ kiá»ƒm tra hiá»‡u suáº¥t. ğŸš¨ Kiá»ƒm tra cÃ¡c lá»—i trÃªn website Lá»—i 404: Trang khÃ´ng tÃ¬m tháº¥y. Lá»—i 500: Lá»—i mÃ¡y chá»§ hosting. Lá»—i 503: MÃ¡y chá»§ Ä‘ang báº£o trÃ¬. ğŸŒ Kiá»ƒm tra trÃªn nhiá»u trÃ¬nh duyá»‡t \u0026amp; thiáº¿t bá»‹ DÃ¹ng Chrome, Firefox, Safari, Edge trÃªn mÃ¡y tÃ­nh, Ä‘iá»‡n thoáº¡i, mÃ¡y tÃ­nh báº£ng. â³ Kiá»ƒm tra vÃ o cÃ¡c thá»i Ä‘iá»ƒm khÃ¡c nhau trong ngÃ y Website cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng khÃ¡c nhau vÃ o nhá»¯ng thá»i Ä‘iá»ƒm khÃ¡c nhau. ğŸ‘‰ Náº¿u phÃ¡t hiá»‡n lá»—i nhÆ°ng khÃ´ng biáº¿t cÃ¡ch xá»­ lÃ½, hÃ£y liÃªn há»‡ vá»›i nhÃ  cung cáº¥p hosting Ä‘á»ƒ Ä‘Æ°á»£c há»— trá»£. ğŸš€\nğŸ“Œ Lá»i káº¿t Upload website lÃªn hosting lÃ  má»™t bÆ°á»›c quan trá»ng Ä‘á»ƒ website cá»§a báº¡n cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh trÃªn mÃ´i trÆ°á»ng trá»±c tuyáº¿n. Báº±ng cÃ¡ch chuáº©n bá»‹ Ä‘Ãºng Ä‘áº¯n vÃ  thá»±c hiá»‡n theo cÃ¡c bÆ°á»›c hÆ°á»›ng dáº«n, báº¡n sáº½ Ä‘áº£m báº£o ráº±ng website cá»§a mÃ¬nh luÃ´n sáºµn sÃ ng phá»¥c vá»¥ ngÆ°á»i dÃ¹ng má»™t cÃ¡ch hiá»‡u quáº£.\nğŸ’¡ Náº¿u báº¡n cÃ³ báº¥t ká»³ cÃ¢u há»i nÃ o hoáº·c cáº§n há»— trá»£ thÃªm, hÃ£y Ä‘á»ƒ láº¡i cÃ¢u há»i trong pháº§n bÃ¬nh luáº­n dÆ°á»›i Ä‘Ã¢y. MÃ¬nh sáº½ sá»›m giÃºp báº¡n tÃ¬m ra lá»i giáº£i Ä‘Ã¡p.\nCáº£m Æ¡n báº¡n Ä‘Ã£ theo dÃµi bÃ i viáº¿t ğŸš€\n","date":"2025-02-26T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/website/upload-website-on-hosting.webp","permalink":"https://tech.nguuyen.io.vn/posts/website/how-to-deploy-a-website/","title":"Deploy Website lÃªn hosting Ä‘Æ¡n giáº£n nháº¥t (HTML/CSS hoáº·c React/Vue.js) ğŸ”¥"},{"content":"ğŸ“Š GiÃ¡m sÃ¡t á»©ng dá»¥ng (Application Monitoring) GiÃ¡m sÃ¡t á»©ng dá»¥ng lÃ  quÃ¡ trÃ¬nh theo dÃµi vÃ  phÃ¢n tÃ­ch liÃªn tá»¥c cÃ¡c á»©ng dá»¥ng pháº§n má»m nháº±m Ä‘áº£m báº£o chÃºng hoáº¡t Ä‘á»™ng tá»‘i Æ°u, phÃ¡t hiá»‡n sá»± cá»‘ vÃ  cung cáº¥p nhá»¯ng hiá»ƒu biáº¿t sÃ¢u sáº¯c vá» hiá»‡u suáº¥t cá»§a há»‡ thá»‘ng. Viá»‡c giÃ¡m sÃ¡t bao gá»“m cÃ¡c chá»‰ sá»‘ quan trá»ng nhÆ°:\nâ³ Thá»i gian pháº£n há»“i âŒ Tá»· lá»‡ lá»—i ğŸ–¥ï¸ Sá»­ dá»¥ng tÃ i nguyÃªn (CPU, RAM, Disk) ğŸ”„ Hiá»‡u suáº¥t giao dá»‹ch CÃ¡c cÃ´ng cá»¥ giÃ¡m sÃ¡t á»©ng dá»¥ng giÃºp thu tháº­p, phÃ¢n tÃ­ch dá»¯ liá»‡u Ä‘á»ƒ phÃ¡t hiá»‡n báº¥t thÆ°á»ng, cáº£nh bÃ¡o sá»›m cÃ¡c váº¥n Ä‘á» tiá»m áº©n, Ä‘á»“ng thá»i cung cáº¥p cÃ¡i nhÃ¬n toÃ n diá»‡n vá» hÃ nh vi cá»§a á»©ng dá»¥ng. Nhá» Ä‘Ã³, doanh nghiá»‡p cÃ³ thá»ƒ chá»§ Ä‘á»™ng xá»­ lÃ½ sá»± cá»‘, tá»‘i Æ°u hiá»‡u suáº¥t vÃ  nÃ¢ng cao tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng.\nğŸ” Jaeger - CÃ´ng cá»¥ tracing phÃ¢n tÃ¡n Jaeger lÃ  má»™t há»‡ thá»‘ng giÃ¡m sÃ¡t phÃ¢n tÃ¡n mÃ£ nguá»“n má»Ÿ do Uber phÃ¡t triá»ƒn, giÃºp theo dÃµi vÃ  kháº¯c phá»¥c sá»± cá»‘ trong cÃ¡c há»‡ thá»‘ng microservices phá»©c táº¡p.\nğŸ”¹ TÃ­nh nÄƒng chÃ­nh: ğŸŒ Theo dÃµi yÃªu cáº§u phÃ¢n tÃ¡n ğŸ” PhÃ¢n tÃ­ch quan há»‡ giá»¯a cÃ¡c dá»‹ch vá»¥ ğŸ“Š XÃ¡c Ä‘á»‹nh nguyÃªn nhÃ¢n gá»‘c rá»… cá»§a váº¥n Ä‘á» ğŸ› ï¸ Há»— trá»£ OpenTracing â€“ dá»… dÃ ng tÃ­ch há»£p vá»›i cÃ¡c há»‡ thá»‘ng khÃ¡c ğŸ”¹VÃ­ dá»¥ cÃ i Ä‘áº·t Jaeger vá»›i Docker 1 2 3 4 5 6 7 8 9 10 11 docker run -d --name jaeger \\ -e COLLECTOR_ZIPKIN_HTTP_PORT=9411 \\ -p 5775:5775/udp \\ -p 6831:6831/udp \\ -p 6832:6832/udp \\ -p 5778:5778 \\ -p 16686:16686 \\ -p 14268:14268 \\ -p 14250:14250 \\ -p 9411:9411 \\ jaegertracing/all-in-one:1.37 Sau khi cÃ i Ä‘áº·t, tra cá»©u Jaeger UI táº¡i http://localhost:16686\nğŸ“Œ TÃ i nguyÃªn tham kháº£o:\nğŸ“– TÃ i liá»‡u Jaeger\nğŸ› ï¸ GitHub - jaegertracing\nğŸŒ New Relic - GiÃ¡m sÃ¡t hiá»‡u nÄƒng á»©ng dá»¥ng New Relic lÃ  má»™t ná»n táº£ng quan sÃ¡t Ä‘Ã¡m mÃ¢y cung cáº¥p cÃ¡i nhÃ¬n toÃ n diá»‡n vá» pháº§n má»m vÃ  cÆ¡ sá»Ÿ háº¡ táº§ng. NÃ³ há»— trá»£ giÃ¡m sÃ¡t hiá»‡u suáº¥t thá»i gian thá»±c, phÃ¢n tÃ­ch dá»¯ liá»‡u vÃ  cáº£nh bÃ¡o tá»± Ä‘á»™ng.\nğŸ”¹ TÃ­nh nÄƒng chÃ­nh: ğŸ“ˆ Theo dÃµi hiá»‡u suáº¥t á»©ng dá»¥ng (APM) ğŸ” PhÃ¢n tÃ­ch logs vÃ  truy váº¿t lá»—i ğŸš€ Theo dÃµi tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng trÃªn web vÃ  mobile ğŸ¤– AI-powered analytics â€“ tá»± Ä‘á»™ng phÃ¡t hiá»‡n sá»± cá»‘ ğŸ”¹VÃ­ dá»¥ cÃ i Ä‘áº·t New Relic Agent trong Node.js 1 npm install newrelic --save Sau Ä‘Ã³, báº¡n cáº§n thÃªm require(\u0026rsquo;newrelic\u0026rsquo;) á»Ÿ dÃ²ng Ä‘áº§u tiÃªn trong file main:\n1 2 3 4 5 require(\u0026#39;newrelic\u0026#39;); #ThÃªm thÆ° viá»‡n newrelic const express = require(\u0026#39;express\u0026#39;); const app = express(); app.get(\u0026#39;/\u0026#39;, (req, res) =\u0026gt; res.send(\u0026#39;Hello, New Relic!\u0026#39;)); app.listen(3000, () =\u0026gt; console.log(\u0026#39;App running on port 3000\u0026#39;)); ğŸ“Œ TÃ i nguyÃªn tham kháº£o:\nğŸŒ Trang web New Relic\nğŸ¥ Báº£n demo ná»n táº£ng New Relic\nğŸ¶ Datadog - Giáº£i phÃ¡p giÃ¡m sÃ¡t toÃ n diá»‡n Datadog lÃ  má»™t ná»n táº£ng giÃ¡m sÃ¡t vÃ  phÃ¢n tÃ­ch máº¡nh máº½ dÃ nh cho cÃ¡c á»©ng dá»¥ng quy mÃ´ lá»›n. NÃ³ há»— trá»£ nhiá»u lÄ©nh vá»±c tá»« giÃ¡m sÃ¡t háº¡ táº§ng, hiá»‡u suáº¥t á»©ng dá»¥ng Ä‘áº¿n quáº£n lÃ½ logs vÃ  tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng.\nğŸ”¹ TÃ­nh nÄƒng chÃ­nh: ğŸ”— 400+ tÃ­ch há»£p vá»›i cÃ¡c cÃ´ng cá»¥ DevOps ğŸ“Š Theo dÃµi toÃ n bá»™ há»‡ thá»‘ng trÃªn dashboard trá»±c quan âš ï¸ Thiáº¿t láº­p cáº£nh bÃ¡o thÃ´ng minh ğŸ“¡ Há»— trá»£ giÃ¡m sÃ¡t cloud-native ğŸ”¹ VÃ­ dá»¥ vÃ i Ä‘áº·t Datadog Agent 1 2 DD_AGENT_MAJOR_VERSION=7 DD_API_KEY=\u0026lt;YOUR_API_KEY\u0026gt; \\ DD_SITE=\u0026#34;datadoghq.com\u0026#34; bash -c \u0026#34;$(curl -L https://s3.amazonaws.com/dd-agent/scripts/install_script.sh)\u0026#34; Sau khi cÃ i Ä‘áº·t, truy cáº­p Datadog dashboard Ä‘á»ƒ xem cÃ¡c metric cá»§a báº¡n.\nğŸ“Œ TÃ i nguyÃªn tham kháº£o:\nğŸŒ Trang web Datadog\nğŸ“– TÃ i liá»‡u Datadog\nğŸ¯ Káº¿t luáº­n Viá»‡c giÃ¡m sÃ¡t á»©ng dá»¥ng Ä‘Ã³ng vai trÃ² quan trá»ng trong viá»‡c Ä‘áº£m báº£o hiá»‡u suáº¥t vÃ  Ä‘á»™ tin cáº­y cá»§a há»‡ thá»‘ng. CÃ¡c cÃ´ng cá»¥ nhÆ° Jaeger, New Relic vÃ  Datadog cung cáº¥p cÃ¡c giáº£i phÃ¡p toÃ n diá»‡n giÃºp doanh nghiá»‡p theo dÃµi, phÃ¢n tÃ­ch vÃ  tá»‘i Æ°u hÃ³a há»‡ thá»‘ng pháº§n má»m má»™t cÃ¡ch hiá»‡u quáº£. Chá»n cÃ´ng cá»¥ phÃ¹ há»£p sáº½ giÃºp báº¡n quáº£n lÃ½ á»©ng dá»¥ng tá»‘t hÆ¡n, phÃ¡t hiá»‡n sá»›m lá»—i vÃ  cáº£i thiá»‡n tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng.\nğŸš€ HÃ£y triá»ƒn khai giÃ¡m sÃ¡t Ä‘á»ƒ tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t á»©ng dá»¥ng cá»§a báº¡n!\nğŸ‘‰ BÆ°á»›c tiáº¿p theo: TÃ¬m hiá»ƒu vá» Artifacts trong phÃ¡t triá»ƒn pháº§n má»m, artifacts lÃ  cÃ¡c tá»‡p hoáº·c sáº£n pháº©m Ä‘Æ°á»£c táº¡o ra trong quÃ¡ trÃ¬nh phÃ¡t triá»ƒn vÃ  triá»ƒn khai á»©ng dá»¥ng.\n","date":"2025-02-25T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/devops/devops-step-eighteen.webp","permalink":"https://tech.nguuyen.io.vn/posts/devops/devops-step-eighteen/","title":"GiÃ¡m sÃ¡t á»©ng dá»¥ng (Application Monitoring) ğŸ“Š"},{"content":"Giá»›i thiá»‡u GitOps lÃ  má»™t phÆ°Æ¡ng phÃ¡p quáº£n lÃ½ háº¡ táº§ng vÃ  triá»ƒn khai á»©ng dá»¥ng báº±ng cÃ¡ch sá»­ dá»¥ng Git lÃ m nguá»“n sá»± tháº­t duy nháº¥t (single source of truth). PhÆ°Æ¡ng phÃ¡p nÃ y giÃºp tá»± Ä‘á»™ng hÃ³a quy trÃ¬nh triá»ƒn khai, Ä‘áº£m báº£o tÃ­nh nháº¥t quÃ¡n vÃ  tÄƒng cÆ°á»ng kháº£ nÄƒng theo dÃµi cÃ¡c thay Ä‘á»•i.\nGitOps má»Ÿ rá»™ng thá»±c tiá»…n cá»§a DevOps báº±ng cÃ¡ch Ã¡p dá»¥ng cÃ¡c nguyÃªn táº¯c cá»§a kiá»ƒm soÃ¡t phiÃªn báº£n (version control) vÃ  tÃ­ch há»£p liÃªn tá»¥c (CI/CD) vÃ o quáº£n lÃ½ háº¡ táº§ng. Thay vÃ¬ thá»±c hiá»‡n thá»§ cÃ´ng, má»i thay Ä‘á»•i Ä‘Æ°á»£c thá»±c hiá»‡n qua pull request vÃ  tá»± Ä‘á»™ng Ä‘á»“ng bá»™ vá»›i há»‡ thá»‘ng thá»±c táº¿.\nğŸš€ Lá»£i Ã­ch cá»§a GitOps âœ… Kiá»ƒm soÃ¡t phiÃªn báº£n: Táº¥t cáº£ cÃ¡c thay Ä‘á»•i Ä‘Æ°á»£c theo dÃµi trong Git, dá»… dÃ ng kiá»ƒm tra vÃ  quay láº¡i tráº¡ng thÃ¡i cÅ© khi cáº§n.\nâœ… Tá»± Ä‘á»™ng hoÃ¡ triá»ƒn khai: Sá»­ dá»¥ng cÃ¡c cÃ´ng cá»¥ nhÆ° ArgoCD hoáº·c FluxCD Ä‘á»ƒ tá»± Ä‘á»™ng Ä‘á»“ng bá»™ há»‡ thá»‘ng.\nâœ… TÄƒng cÆ°á»ng báº£o máº­t: Má»i thay Ä‘á»•i cáº§n thÃ´ng qua Git, giÃºp kiá»ƒm soÃ¡t truy cáº­p vÃ  háº¡n cháº¿ rá»§i ro thao tÃ¡c trá»±c tiáº¿p.\nâœ… Kháº£ nÄƒng phá»¥c há»“i cao: Há»‡ thá»‘ng cÃ³ thá»ƒ nhanh chÃ³ng phá»¥c há»“i tráº¡ng thÃ¡i ban Ä‘áº§u khi gáº·p sá»± cá»‘ báº±ng cÃ¡ch Ã¡p dá»¥ng láº¡i cáº¥u hÃ¬nh tá»« Git.\nâœ… Cáº£i thiá»‡n há»£p tÃ¡c nhÃ³m: CÃ¡c thay Ä‘á»•i Ä‘á»u Ä‘Æ°á»£c ghi nháº­n vÃ  xem xÃ©t qua pull request, giÃºp cÃ¡c thÃ nh viÃªn lÃ m viá»‡c hiá»‡u quáº£ hÆ¡n.\nğŸ› ï¸ CÃ¡c cÃ´ng cá»¥ GitOps phá»• biáº¿n ArgoCD - Triá»ƒn khai liÃªn tá»¥c máº¡nh máº½ ArgoCD lÃ  má»™t cÃ´ng cá»¥ triá»ƒn khai liÃªn tá»¥c (CD) dÃ nh cho Kubernetes, giÃºp tá»± Ä‘á»™ng hÃ³a quÃ¡ trÃ¬nh triá»ƒn khai báº±ng cÃ¡ch theo dÃµi tráº¡ng thÃ¡i cá»§a á»©ng dá»¥ng trong Git vÃ  Ä‘á»“ng bá»™ vá»›i mÃ´i trÆ°á»ng thá»±c táº¿.\nğŸ”¹ TÃ­nh nÄƒng ná»•i báº­t:\nTá»± Ä‘á»™ng Ä‘á»“ng bá»™ tráº¡ng thÃ¡i á»©ng dá»¥ng vá»›i Git. Giao diá»‡n web trá»±c quan Ä‘á»ƒ theo dÃµi tráº¡ng thÃ¡i triá»ƒn khai. Há»— trá»£ Helm, Kustomize, vÃ  cÃ¡c cÃ´ng cá»¥ quáº£n lÃ½ cáº¥u hÃ¬nh khÃ¡c. ğŸ”¹VÃ­ dá»¥ triá»ƒn khai ArgoCD\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 apiVersion: argoproj.io/v1alpha1 kind: Application metadata: name: my-app namespace: argocd spec: destination: namespace: default server: https://kubernetes.default.svc source: repoURL: https://github.com/my-org/my-repo.git targetRevision: HEAD path: manifests syncPolicy: automated: selfHeal: true prune: true FluxCD - Quáº£n lÃ½ triá»ƒn khai tá»± Ä‘á»™ng FluxCD lÃ  má»™t cÃ´ng cá»¥ GitOps giÃºp triá»ƒn khai á»©ng dá»¥ng lÃªn Kubernetes báº±ng cÃ¡ch theo dÃµi Git repository vÃ  tá»± Ä‘á»™ng cáº­p nháº­t há»‡ thá»‘ng khi cÃ³ thay Ä‘á»•i.\nğŸ”¹ TÃ­nh nÄƒng ná»•i báº­t:\nTheo dÃµi repository Git vÃ  triá»ƒn khai á»©ng dá»¥ng tá»± Ä‘á»™ng. Há»— trá»£ Helm, Kustomize, vÃ  nhiá»u há»‡ thá»‘ng CI/CD khÃ¡c. Cung cáº¥p kháº£ nÄƒng cáº­p nháº­t hÃ¬nh áº£nh container tá»± Ä‘á»™ng. ğŸ”¹ VÃ­ dá»¥ triá»ƒn khai FluxCD:\n1 2 3 4 5 6 7 8 9 10 apiVersion: source.toolkit.fluxcd.io/v1beta1 kind: GitRepository metadata: name: my-app-repo namespace: flux-system spec: interval: 1m0s url: https://github.com/my-org/my-repo.git ref: branch: main ğŸ”¥ So sÃ¡nh ArgoCD vÃ  FluxCD TÃ­nh nÄƒng ArgoCD FluxCD UI trá»±c quan âœ… CÃ³ âŒ KhÃ´ng Há»— trá»£ Helm âœ… CÃ³ âœ… CÃ³ Cáº­p nháº­t hÃ¬nh áº£nh container tá»± Ä‘á»™ng âŒ KhÃ´ng âœ… CÃ³ Triá»ƒn khai Canary/Rollback âœ… CÃ³ âœ… CÃ³ ğŸ“Œ Káº¿t luáº­n GitOps giÃºp Ä‘Æ¡n giáº£n hÃ³a quy trÃ¬nh triá»ƒn khai á»©ng dá»¥ng báº±ng cÃ¡ch sá»­ dá»¥ng Git lÃ m trung tÃ¢m kiá»ƒm soÃ¡t. Vá»›i cÃ¡c cÃ´ng cá»¥ nhÆ° ArgoCD vÃ  FluxCD, doanh nghiá»‡p cÃ³ thá»ƒ dá»… dÃ ng tá»± Ä‘á»™ng hÃ³a triá»ƒn khai, Ä‘áº£m báº£o tÃ­nh nháº¥t quÃ¡n vÃ  cáº£i thiá»‡n kháº£ nÄƒng phá»¥c há»“i há»‡ thá»‘ng.\nğŸ”— TÃ i liá»‡u tham kháº£o:\nğŸ“– TÃ i liá»‡u ArgoCD ğŸ“– TÃ i liá»‡u FluxCD ğŸ“˜ HÆ°á»›ng dáº«n GitOps Báº¡n Ä‘Ã£ thá»­ Ã¡p dá»¥ng GitOps vÃ o dá»± Ã¡n cá»§a mÃ¬nh chÆ°a? HÃ£y chia sáº» tráº£i nghiá»‡m cá»§a báº¡n! ğŸš€\nğŸ‘‰ BÆ°á»›c tiáº¿p theo: TÃ¬m hiá»ƒu vá» Service Mesh má»™t lá»›p háº¡ táº§ng pháº§n má»m giÃºp quáº£n lÃ½ giao tiáº¿p giá»¯a cÃ¡c dá»‹ch vá»¥ trong há»‡ thá»‘ng microservices. NÃ³ cung cáº¥p cÃ¡c tÃ­nh nÄƒng nhÆ° cÃ¢n báº±ng táº£i, báº£o máº­t, quan sÃ¡t, kiá»ƒm soÃ¡t lÆ°u lÆ°á»£ng vÃ  kháº¯c phá»¥c lá»—i, giÃºp dá»‹ch vá»¥ giao tiáº¿p vá»›i nhau má»™t cÃ¡ch hiá»‡u quáº£ mÃ  khÃ´ng cáº§n thay Ä‘á»•i mÃ£ nguá»“n á»©ng dá»¥ng.\n","date":"2025-02-25T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/devops/devops-step-twenty.webp","permalink":"https://tech.nguuyen.io.vn/posts/devops/devops-step-twenty/","title":"GitOps - Tá»± Ä‘á»™ng hoÃ¡ triá»ƒn khai vá»›i Git ğŸŒŸ"},{"content":"Giá»›i thiá»‡u Máº«u thiáº¿t káº¿ Ä‘Ã¡m mÃ¢y lÃ  nhá»¯ng giáº£i phÃ¡p cÃ³ thá»ƒ tÃ¡i sá»­ dá»¥ng cho cÃ¡c váº¥n Ä‘á» phá»• biáº¿n trong kiáº¿n trÃºc Ä‘iá»‡n toÃ¡n Ä‘Ã¡m mÃ¢y. CÃ¡c máº«u nÃ y giÃºp giáº£i quyáº¿t cÃ¡c thÃ¡ch thá»©c liÃªn quan Ä‘áº¿n kháº£ nÄƒng má»Ÿ rá»™ng, Ä‘á»™ tin cáº­y, báº£o máº­t vÃ  hiá»‡u suáº¥t trong cÃ¡c há»‡ thá»‘ng phÃ¢n tÃ¡n.\nChÃºng cung cáº¥p cÃ¡c phÆ°Æ¡ng phÃ¡p tá»‘t nháº¥t Ä‘á»ƒ thiáº¿t káº¿ vÃ  triá»ƒn khai á»©ng dá»¥ng Ä‘Ã¡m mÃ¢y, bao gá»“m quáº£n lÃ½ dá»¯ liá»‡u, xá»­ lÃ½ tin nháº¯n, Ä‘áº£m báº£o tÃ­nh kiÃªn cá»‘ (resiliency) vÃ  triá»ƒn khai. Má»™t sá»‘ vÃ­ dá»¥ phá»• biáº¿n:\nCircuit Breaker: NgÄƒn cháº·n lá»—i lan rá»™ng trong há»‡ thá»‘ng báº±ng cÃ¡ch ngáº¯t káº¿t ná»‘i táº¡m thá»i khi phÃ¡t hiá»‡n lá»—i. CQRS (Command Query Responsibility Segregation): TÃ¡ch biá»‡t cÃ¡c thao tÃ¡c Ä‘á»c vÃ  ghi dá»¯ liá»‡u Ä‘á»ƒ cáº£i thiá»‡n hiá»‡u suáº¥t. Sidecar Pattern: TÃ¡ch cÃ¡c thÃ nh pháº§n phá»¥ cá»§a á»©ng dá»¥ng vÃ o má»™t tiáº¿n trÃ¬nh hoáº·c container riÃªng Ä‘á»ƒ tÄƒng tÃ­nh linh hoáº¡t. ğŸ”¹ Kháº£ dá»¥ng (Availability) Kháº£ dá»¥ng (Availability) lÃ  pháº§n trÄƒm thá»i gian há»‡ thá»‘ng hoáº¡t Ä‘á»™ng Ä‘Ãºng nhÆ° mong Ä‘á»£i, cÃ²n Ä‘Æ°á»£c gá»i lÃ  uptime. Yáº¿u tá»‘ nÃ y cÃ³ thá»ƒ bá»‹ áº£nh hÆ°á»Ÿng bá»Ÿi lá»—i pháº§n cá»©ng/pháº§n má»m, váº¥n Ä‘á» háº¡ táº§ng, táº¥n cÃ´ng máº¡ng hoáº·c táº£i há»‡ thá»‘ng quÃ¡ cao.\nCÃ¡c nhÃ  cung cáº¥p dá»‹ch vá»¥ Ä‘Ã¡m mÃ¢y thÆ°á»ng Ä‘Æ°a ra thá»a thuáº­n má»©c dá»‹ch vá»¥ (SLA - Service Level Agreement), quy Ä‘á»‹nh thá»i gian uptime cam káº¿t. VÃ­ dá»¥, má»™t cÃ´ng ty cÃ³ thá»ƒ Ä‘áº£m báº£o 99.99% thá»i gian hoáº¡t Ä‘á»™ng.\nğŸ”¹VÃ­ dá»¥: Má»™t há»‡ thá»‘ng cam káº¿t 99.99% uptime tá»©c lÃ  chá»‰ Ä‘Æ°á»£c phÃ©p ngá»«ng hoáº¡t Ä‘á»™ng tá»‘i Ä‘a 52 phÃºt/nÄƒm.\nğŸ”¹ Quáº£n lÃ½ dá»¯ liá»‡u (Data Management) Quáº£n lÃ½ dá»¯ liá»‡u lÃ  yáº¿u tá»‘ quan trá»ng trong cÃ¡c á»©ng dá»¥ng Ä‘Ã¡m mÃ¢y, áº£nh hÆ°á»Ÿng Ä‘áº¿n háº§u háº¿t cÃ¡c thuá»™c tÃ­nh cháº¥t lÆ°á»£ng. Dá»¯ liá»‡u thÆ°á»ng Ä‘Æ°á»£c lÆ°u trá»¯ á»Ÿ nhiá»u Ä‘á»‹a Ä‘iá»ƒm khÃ¡c nhau Ä‘á»ƒ cáº£i thiá»‡n hiá»‡u suáº¥t, má»Ÿ rá»™ng quy mÃ´ hoáº·c Ä‘áº£m báº£o tÃ­nh sáºµn sÃ ng. Äiá»u nÃ y Ä‘áº·t ra cÃ¡c thÃ¡ch thá»©c nhÆ°:\nDuy trÃ¬ tÃ­nh nháº¥t quÃ¡n dá»¯ liá»‡u khi dá»¯ liá»‡u Ä‘Æ°á»£c Ä‘á»“ng bá»™ trÃªn nhiá»u mÃ¡y chá»§. Báº£o máº­t dá»¯ liá»‡u khi lÆ°u trá»¯, truyá»n táº£i vÃ  cáº¥p quyá»n truy cáº­p. Kháº£ nÄƒng má»Ÿ rá»™ng Ä‘á»ƒ Ä‘Ã¡p á»©ng nhu cáº§u tÄƒng trÆ°á»Ÿng. ğŸ”¹VÃ­ dá»¥: Há»‡ thá»‘ng ngÃ¢n hÃ ng cáº§n Ä‘áº£m báº£o má»i giao dá»‹ch Ä‘á»u Ä‘á»“ng nháº¥t giá»¯a cÃ¡c trung tÃ¢m dá»¯ liá»‡u Ä‘á»ƒ trÃ¡nh sai lá»‡ch sá»‘ dÆ° tÃ i khoáº£n.\nğŸ”¹ Thiáº¿t Káº¿ \u0026amp; triá»ƒn Khai (Design and Implementation) Thiáº¿t káº¿ tá»‘t giÃºp há»‡ thá»‘ng dá»… báº£o trÃ¬, nháº¥t quÃ¡n vÃ  cÃ³ thá»ƒ tÃ¡i sá»­ dá»¥ng trong nhiá»u tÃ¬nh huá»‘ng khÃ¡c nhau. CÃ¡c quyáº¿t Ä‘á»‹nh trong giai Ä‘oáº¡n thiáº¿t káº¿ vÃ  triá»ƒn khai áº£nh hÆ°á»Ÿng trá»±c tiáº¿p Ä‘áº¿n chi phÃ­ vÃ  cháº¥t lÆ°á»£ng tá»•ng thá»ƒ cá»§a á»©ng dá»¥ng Ä‘Ã¡m mÃ¢y.\nNguyÃªn táº¯c thiáº¿t káº¿ quan trá»ng:\nTÃ­nh nháº¥t quÃ¡n: CÃ¡c thÃ nh pháº§n pháº£i tuÃ¢n theo má»™t cáº¥u trÃºc nháº¥t Ä‘á»‹nh. Kháº£ nÄƒng má»Ÿ rá»™ng: Há»‡ thá»‘ng cÃ³ thá»ƒ xá»­ lÃ½ lÆ°u lÆ°á»£ng cao mÃ  khÃ´ng bá»‹ suy giáº£m hiá»‡u suáº¥t. TÃ¡i sá»­ dá»¥ng: CÃ¡c thÃ nh pháº§n cÃ³ thá»ƒ dÃ¹ng láº¡i trong nhiá»u á»©ng dá»¥ng khÃ¡c nhau. ğŸ”¹VÃ­ dá»¥: Má»™t há»‡ thá»‘ng e-commerce sá»­ dá»¥ng kiáº¿n trÃºc microservices Ä‘á»ƒ cÃ³ thá»ƒ dá»… dÃ ng má»Ÿ rá»™ng tá»«ng dá»‹ch vá»¥ riÃªng láº» (vÃ­ dá»¥: thanh toÃ¡n, giá» hÃ ng, tÃ¬m kiáº¿m sáº£n pháº©m).\nğŸ”¹ Quáº£n lÃ½ \u0026amp; giÃ¡m sÃ¡t (Management and Monitoring) Quáº£n lÃ½ vÃ  giÃ¡m sÃ¡t DevOps bao gá»“m toÃ n bá»™ quÃ¡ trÃ¬nh phÃ¡t triá»ƒn tá»« láº­p káº¿ hoáº¡ch, phÃ¡t triá»ƒn, kiá»ƒm thá»­, triá»ƒn khai Ä‘áº¿n váº­n hÃ nh. Má»™t há»‡ thá»‘ng giÃ¡m sÃ¡t tá»‘t giÃºp theo dÃµi tráº¡ng thÃ¡i cá»§a á»©ng dá»¥ng, dá»‹ch vá»¥ vÃ  háº¡ táº§ng trong mÃ´i trÆ°á»ng sáº£n xuáº¥t.\nğŸ”¹ CÃ¡c thÃ nh pháº§n giÃ¡m sÃ¡t quan trá»ng:\nReal-time streaming: Theo dÃµi há»‡ thá»‘ng trong thá»i gian thá»±c. Historical replay: LÆ°u trá»¯ lá»‹ch sá»­ Ä‘á»ƒ phÃ¢n tÃ­ch lá»—i. Visualization: Hiá»ƒn thá»‹ dá»¯ liá»‡u trá»±c quan Ä‘á»ƒ dá»… dÃ ng Ä‘Ã¡nh giÃ¡ há»‡ thá»‘ng. ğŸ”¹ VÃ­ dá»¥: Sá»­ dá»¥ng Prometheus + Grafana Ä‘á»ƒ giÃ¡m sÃ¡t hiá»‡u suáº¥t cá»§a cÃ¡c container Kubernetes.\nğŸ”¥ Káº¿t luáº­n CÃ¡c máº«u thiáº¿t káº¿ Ä‘Ã¡m mÃ¢y giÃºp tá»‘i Æ°u hÃ³a kiáº¿n trÃºc há»‡ thá»‘ng báº±ng cÃ¡ch cung cáº¥p giáº£i phÃ¡p cho cÃ¡c thÃ¡ch thá»©c phá»• biáº¿n nhÆ° hiá»‡u suáº¥t, báº£o máº­t vÃ  kháº£ nÄƒng má»Ÿ rá»™ng. Viá»‡c Ã¡p dá»¥ng cÃ¡c máº«u thiáº¿t káº¿ phÃ¹ há»£p giÃºp doanh nghiá»‡p xÃ¢y dá»±ng há»‡ thá»‘ng máº¡nh máº½, linh hoáº¡t vÃ  dá»… báº£o trÃ¬.\nâœ… Tá»•ng káº¿t: Báº¡n Ä‘Ã£ hoÃ n thÃ nh hÃ nh trÃ¬nh khÃ¡m phÃ¡ vá» DevOps, phÆ°Æ¡ng phÃ¡p káº¿t há»£p phÃ¡t triá»ƒn (Development) vÃ  váº­n hÃ nh (Operations) Ä‘á»ƒ tÄƒng tá»‘c triá»ƒn khai pháº§n má»m, nÃ¢ng cao Ä‘á»™ tin cáº­y há»‡ thá»‘ng vÃ  tá»‘i Æ°u quy trÃ¬nh lÃ m viá»‡c. Cáº£m Æ¡n báº¡n Ä‘Ã£ Ä‘á»“ng hÃ nh, hy vá»ng nhá»¯ng kiáº¿n thá»©c nÃ y sáº½ giÃºp Ã­ch cho báº¡n trong hÃ nh trÃ¬nh tiáº¿p theo! ğŸš€\n","date":"2025-02-25T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/devops/devops-step-twenty-two.webp","permalink":"https://tech.nguuyen.io.vn/posts/devops/devops-step-twenty-two/","title":"Máº«u thiáº¿t káº¿ Ä‘Ã¡m mÃ¢y (Cloud Design Patterns) ğŸŒŸ"},{"content":"ğŸ—ï¸ Artifacts lÃ  gÃ¬? Artifacts lÃ  cÃ¡c sáº£n pháº©m Ä‘Æ°á»£c táº¡o ra trong suá»‘t vÃ²ng Ä‘á»i phÃ¡t triá»ƒn pháº§n má»m. ChÃºng cÃ³ thá»ƒ bao gá»“m:\nğŸ“œ MÃ£ nguá»“n (Source code): CÃ¡c tá»‡p chá»©a logic á»©ng dá»¥ng. ğŸ—ï¸ Binaries: CÃ¡c tá»‡p thá»±c thi hoáº·c thÆ° viá»‡n Ä‘Æ°á»£c biÃªn dá»‹ch. ğŸ“– TÃ i liá»‡u (Documentation): HÆ°á»›ng dáº«n sá»­ dá»¥ng, API specs. âš™ï¸ Tá»‡p cáº¥u hÃ¬nh (Configuration files): CÃ¡c thiáº¿t láº­p cáº§n thiáº¿t Ä‘á»ƒ cháº¡y á»©ng dá»¥ng. ğŸ› ï¸ Káº¿t quáº£ kiá»ƒm thá»­ (Test results): BÃ¡o cÃ¡o tá»« cÃ¡c quy trÃ¬nh kiá»ƒm thá»­. Viá»‡c quáº£n lÃ½ artifacts giÃºp Ä‘áº£m báº£o tÃ­nh nháº¥t quÃ¡n, dá»… dÃ ng theo dÃµi vÃ  triá»ƒn khai pháº§n má»m hiá»‡u quáº£ hÆ¡n.\nğŸ¢ CÃ¡c cÃ´ng cá»¥ quáº£n lÃ½ Artifacts phá»• biáº¿n ğŸš€ 1. Artifactory Artifactory lÃ  má»™t giáº£i phÃ¡p DevOps cho viá»‡c lÆ°u trá»¯, quáº£n lÃ½ vÃ  phÃ¢n phá»‘i cÃ¡c artifacts. NÃ³ há»— trá»£ nhiá»u Ä‘á»‹nh dáº¡ng nhÆ° Docker, npm, Maven, Python, Go, vÃ  hÆ¡n tháº¿ ná»¯a.\nğŸ”§ CÃ i Ä‘áº·t Artifactory trÃªn Docker: 1 2 3 4 5 # KÃ©o image Artifactory docker pull releases-docker.jfrog.io/jfrog/artifactory-oss:latest # Cháº¡y container docker run --name artifactory -d -p 8081:8081 releases-docker.jfrog.io/jfrog/artifactory-oss:latest Sau khi cÃ i Ä‘áº·t, báº¡n cÃ³ thá»ƒ truy cáº­p giao diá»‡n web qua http://localhost:8081.\nğŸ“¦ 2. Nexus Repository Manager Nexus lÃ  má»™t trong nhá»¯ng cÃ´ng cá»¥ phá»• biáº¿n Ä‘á»ƒ quáº£n lÃ½ binary artifacts, Ä‘áº·c biá»‡t trong mÃ´i trÆ°á»ng Java.\nğŸ—ï¸ CÃ i Ä‘áº·t Nexus trÃªn Linux: 1 2 3 4 wget https://download.sonatype.com/nexus/3/latest-unix.tar.gz tar -xvf latest-unix.tar.gz cd nexus-3.* ./bin/nexus start Sau khi cháº¡y, báº¡n cÃ³ thá»ƒ truy cáº­p Nexus táº¡i http://localhost:8081.\nâ˜ï¸ 3. Cloudsmith Cloudsmith lÃ  má»™t ná»n táº£ng quáº£n lÃ½ artifacts dá»±a trÃªn Ä‘Ã¡m mÃ¢y, há»— trá»£ nhiá»u Ä‘á»‹nh dáº¡ng gÃ³i tin nhÆ° Docker, Helm, npm, pip.\nâš¡ CÃ¡ch táº£i vÃ  Ä‘áº©y package lÃªn Cloudsmith: 1 2 3 4 5 # CÃ i Ä‘áº·t CLI cá»§a Cloudsmith pip install cloudsmith-cli # Äáº©y má»™t package lÃªn kho lÆ°u trá»¯ cloudsmith push python my-org/my-repo my-package-1.0.0.tar.gz Cloudsmith giÃºp Ä‘Æ¡n giáº£n hÃ³a quÃ¡ trÃ¬nh quáº£n lÃ½ vÃ  phÃ¢n phá»‘i gÃ³i pháº§n má»m.\nğŸ¯ Káº¿t luáº­n Viá»‡c quáº£n lÃ½ artifacts Ä‘Ã³ng vai trÃ² quan trá»ng trong quy trÃ¬nh phÃ¡t triá»ƒn pháº§n má»m. Sá»­ dá»¥ng cÃ¡c cÃ´ng cá»¥ nhÆ° Artifactory, Nexus, vÃ  Cloudsmith giÃºp Ä‘áº£m báº£o tÃ­nh tá»• chá»©c, báº£o máº­t vÃ  hiá»‡u quáº£ trong viá»‡c lÆ°u trá»¯ vÃ  triá»ƒn khai á»©ng dá»¥ng. TÃ¹y vÃ o nhu cáº§u cá»§a dá»± Ã¡n, báº¡n cÃ³ thá»ƒ chá»n cÃ´ng cá»¥ phÃ¹ há»£p Ä‘á»ƒ tá»‘i Æ°u hÃ³a quy trÃ¬nh DevOps cá»§a mÃ¬nh!\nğŸ› ï¸ Báº¡n Ä‘ang sá»­ dá»¥ng cÃ´ng cá»¥ nÃ o Ä‘á»ƒ quáº£n lÃ½ artifacts? HÃ£y chia sáº» kinh nghiá»‡m cá»§a báº¡n!\nğŸ‘‰ BÆ°á»›c tiáº¿p theo: TÃ¬m hiá»ƒu vá» GitOps quÃ¡ trÃ¬nh cung cáº¥p vÃ  cáº¥u hÃ¬nh tÃ i nguyÃªn (mÃ¡y chá»§, máº¡ng, lÆ°u trá»¯, tÃ i khoáº£n) Ä‘á»ƒ há»‡ thá»‘ng hoáº·c á»©ng dá»¥ng cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng hiá»‡u quáº£.\n","date":"2025-02-25T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/devops/devops-step-nineteen.webp","permalink":"https://tech.nguuyen.io.vn/posts/devops/devops-step-nineteen/","title":"Quáº£n lÃ½ Artifacts trong phÃ¡t triá»ƒn pháº§n má»m ğŸ¢"},{"content":"ğŸ“Œ Giá»›i thiá»‡u Service Mesh lÃ  má»™t lá»›p háº¡ táº§ng pháº§n má»m giÃºp quáº£n lÃ½ giao tiáº¿p giá»¯a cÃ¡c dá»‹ch vá»¥ trong há»‡ thá»‘ng microservices. NÃ³ cung cáº¥p cÃ¡c tÃ­nh nÄƒng nhÆ° cÃ¢n báº±ng táº£i, báº£o máº­t, quan sÃ¡t, kiá»ƒm soÃ¡t lÆ°u lÆ°á»£ng vÃ  kháº¯c phá»¥c lá»—i, giÃºp dá»‹ch vá»¥ giao tiáº¿p vá»›i nhau má»™t cÃ¡ch hiá»‡u quáº£ mÃ  khÃ´ng cáº§n thay Ä‘á»•i mÃ£ nguá»“n á»©ng dá»¥ng.\nCÃ¡c cÃ´ng cá»¥ Service Mesh phá»• biáº¿n gá»“m: Istio, Linkerd, Consul.\nğŸš€ Lá»£i Ã­ch cá»§a Service Mesh âœ… Tá»± Ä‘á»™ng quáº£n lÃ½ giao tiáº¿p giá»¯a cÃ¡c dá»‹ch vá»¥ - KhÃ´ng cáº§n thay Ä‘á»•i mÃ£ nguá»“n á»©ng dá»¥ng.\nâœ… Báº£o máº­t nÃ¢ng cao - MÃ£ hÃ³a TLS, xÃ¡c thá»±c dá»‹ch vá»¥, chÃ­nh sÃ¡ch RBAC.\nâœ… Tá»‘i Æ°u hiá»‡u suáº¥t - Há»— trá»£ cÃ¢n báº±ng táº£i thÃ´ng minh vÃ  kiá»ƒm soÃ¡t lÆ°u lÆ°á»£ng.\nâœ… Quan sÃ¡t toÃ n diá»‡n - Theo dÃµi logs, metrics vÃ  tracing Ä‘á»ƒ giÃ¡m sÃ¡t há»‡ thá»‘ng.\nâœ… Kháº£ nÄƒng phá»¥c há»“i cao - GiÃºp phÃ¡t hiá»‡n vÃ  xá»­ lÃ½ lá»—i tá»± Ä‘á»™ng.\nğŸ› ï¸ CÃ¡c cÃ´ng cá»¥ Service Mesh phá»• biáº¿n 1ï¸âƒ£ Istio - Giáº£i phÃ¡p máº¡nh máº½ nháº¥t Istio lÃ  má»™t ná»n táº£ng Service Mesh mÃ£ nguá»“n má»Ÿ cung cáº¥p kháº£ nÄƒng kiá»ƒm soÃ¡t, báº£o máº­t vÃ  quan sÃ¡t dá»‹ch vá»¥ trong há»‡ thá»‘ng Kubernetes.\nğŸ”¹ TÃ­nh nÄƒng chÃ­nh:\nHá»— trá»£ mTLS Ä‘á»ƒ báº£o máº­t giao tiáº¿p giá»¯a cÃ¡c dá»‹ch vá»¥. CÃ¢n báº±ng táº£i thÃ´ng minh, retry, timeout. Quáº£n lÃ½ API Gateway vÃ  chÃ­nh sÃ¡ch truy cáº­p dá»‹ch vá»¥. ğŸ”¹ VÃ­ dá»¥ cáº¥u hÃ¬nh Istio Gateway:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 apiVersion: networking.istio.io/v1alpha3 kind: Gateway metadata: name: my-gateway spec: selector: istio: ingressgateway servers: - port: number: 80 name: http protocol: HTTP hosts: - \u0026#34;example.com\u0026#34; ğŸ“– TÃ i liá»‡u Istio\n2ï¸âƒ£ Linkerd - Dá»… triá»ƒn khai \u0026amp; hiá»‡u nÄƒng cao Linkerd lÃ  Service Mesh nháº¹, tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t cho Kubernetes, giÃºp giáº£m Ä‘á»™ trá»… vÃ  tÃ i nguyÃªn sá»­ dá»¥ng.\nğŸ”¹ TÃ­nh nÄƒng chÃ­nh:\nTá»± Ä‘á»™ng mÃ£ hÃ³a TLS (mTLS) cho toÃ n bá»™ giao tiáº¿p. Há»— trá»£ giÃ¡m sÃ¡t tracing vÃ  metrics dá»… dÃ ng. CÃ i Ä‘áº·t nhanh chá»‰ vá»›i má»™t lá»‡nh CLI. ğŸ”¹ VÃ­ dá»¥ cáº¥u hÃ¬nh Linkerd:\n1 2 3 4 5 6 7 8 9 10 11 apiVersion: linkerd.io/v1alpha2 kind: ServiceProfile metadata: name: my-service.default.svc.cluster.local spec: routes: - name: \u0026#34;GET /health\u0026#34; condition: method: GET pathRegex: \u0026#34;/health\u0026#34; isRetryable: true ğŸ“– TÃ i liá»‡u Linkerd\n3ï¸âƒ£ Consul - Há»— trá»£ Service Mesh \u0026amp; Service Discovery Consul khÃ´ng chá»‰ lÃ  má»™t Service Mesh, mÃ  cÃ²n cung cáº¥p Service Discovery, quáº£n lÃ½ cáº¥u hÃ¬nh, vÃ  báº£o máº­t giao tiáº¿p giá»¯a cÃ¡c dá»‹ch vá»¥.\nğŸ”¹ TÃ­nh nÄƒng chÃ­nh:\nHá»— trá»£ service discovery cho cáº£ Kubernetes vÃ  há»‡ thá»‘ng truyá»n thá»‘ng. Káº¿t há»£p vá»›i Envoy Proxy Ä‘á»ƒ quáº£n lÃ½ giao tiáº¿p. Cho phÃ©p multi-cluster vÃ  hybrid cloud. ğŸ”¹ VÃ­ dá»¥ cáº¥u hÃ¬nh Consul Service Registration:\n1 2 3 4 5 6 7 { \u0026#34;service\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;web\u0026#34;, \u0026#34;port\u0026#34;: 8080, \u0026#34;connect\u0026#34;: { \u0026#34;sidecar_service\u0026#34;: {} } } } ğŸ“– TÃ i liá»‡u Consul\nğŸ”¥ So sÃ¡nh cÃ¡c Service Mesh phá»• biáº¿n TÃ­nh nÄƒng Istio Linkerd Consul UI trá»±c quan âœ… CÃ³ âŒ KhÃ´ng âœ… CÃ³ Há»— trá»£ mTLS âœ… CÃ³ âœ… CÃ³ âœ… CÃ³ Hiá»‡u nÄƒng cao âš ï¸ Cáº§n tá»‘i Æ°u âœ… Nhanh âš ï¸ Trung bÃ¬nh Há»— trá»£ Service Discovery âŒ KhÃ´ng âŒ KhÃ´ng âœ… CÃ³ ğŸ“Œ Káº¿t luáº­n Service Mesh giÃºp Ä‘Æ¡n giáº£n hÃ³a viá»‡c quáº£n lÃ½ giao tiáº¿p giá»¯a cÃ¡c microservices, Ä‘áº£m báº£o báº£o máº­t, giÃ¡m sÃ¡t vÃ  hiá»‡u suáº¥t cao.\nğŸ’¡ Náº¿u báº¡n Ä‘ang tÃ¬m kiáº¿m má»™t giáº£i phÃ¡p máº¡nh máº½ nháº¥t, hÃ£y thá»­ Istio.\nğŸ’¡ Náº¿u Æ°u tiÃªn hiá»‡u nÄƒng cao vÃ  dá»… triá»ƒn khai, hÃ£y chá»n Linkerd.\nğŸ’¡ Náº¿u báº¡n cáº§n service discovery vÃ  multi-cloud, hÃ£y xem xÃ©t Consul.\nğŸ“– TÃ i liá»‡u tham kháº£o:\nğŸ”— TÃ i liá»‡u Istio\nğŸ”— TÃ i liá»‡u Linkerd\nğŸ”— TÃ i liá»‡u Consul\nBáº¡n Ä‘Ã£ thá»­ triá»ƒn khai Service Mesh nÃ o chÆ°a? HÃ£y chia sáº» tráº£i nghiá»‡m cá»§a báº¡n! ğŸš€\nğŸ‘‰ BÆ°á»›c cuá»‘i cÃ¹ng: TÃ¬m hiá»ƒu vá» Cloud Design Patterns táº­p há»£p cÃ¡c máº«u thiáº¿t káº¿ Ä‘Ã£ Ä‘Æ°á»£c kiá»ƒm chá»©ng, giÃºp xÃ¢y dá»±ng cÃ¡c á»©ng dá»¥ng trÃªn Ä‘Ã¡m mÃ¢y hiá»‡u quáº£, linh hoáº¡t vÃ  cÃ³ kháº£ nÄƒng má»Ÿ rá»™ng. ChÃºng giáº£i quyáº¿t cÃ¡c váº¥n Ä‘á» phá»• biáº¿n nhÆ° tÃ­nh sáºµn sÃ ng cao, kháº£ nÄƒng chá»‹u lá»—i, má»Ÿ rá»™ng theo nhu cáº§u vÃ  báº£o máº­t trong mÃ´i trÆ°á»ng Ä‘iá»‡n toÃ¡n Ä‘Ã¡m mÃ¢y.\n","date":"2025-02-25T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/devops/devops-step-twenty-one.webp","permalink":"https://tech.nguuyen.io.vn/posts/devops/devops-step-twenty-one/","title":"Service Mesh - Quáº£n lÃ½ giao tiáº¿p giá»¯a Microservices ğŸŒ"},{"content":"ğŸ” CI/CD lÃ  gÃ¬? CI/CD (Continuous Integration/Continuous Deployment) lÃ  má»™t phÆ°Æ¡ng phÃ¡p giÃºp tá»± Ä‘á»™ng hÃ³a quÃ¡ trÃ¬nh phÃ¡t triá»ƒn pháº§n má»m, giÃºp giáº£m lá»—i, tÄƒng tá»‘c Ä‘á»™ triá»ƒn khai vÃ  cáº£i thiá»‡n cháº¥t lÆ°á»£ng sáº£n pháº©m.\nContinuous Integration (CI): TÃ­ch há»£p liÃªn tá»¥c, giÃºp phÃ¡t hiá»‡n lá»—i sá»›m báº±ng cÃ¡ch tá»± Ä‘á»™ng kiá»ƒm thá»­ má»—i khi cÃ³ thay Ä‘á»•i trong mÃ£ nguá»“n. Continuous Deployment (CD): Triá»ƒn khai liÃªn tá»¥c, Ä‘áº£m báº£o pháº§n má»m Ä‘Æ°á»£c phÃ¡t hÃ nh má»™t cÃ¡ch tá»± Ä‘á»™ng vÃ  nhanh chÃ³ng. ğŸŒŸ CÃ¡c cÃ´ng cá»¥ CI/CD phá»• biáº¿n ğŸ”§ Jenkins Jenkins lÃ  má»™t mÃ¡y chá»§ tá»± Ä‘á»™ng hÃ³a mÃ£ nguá»“n má»Ÿ phá»• biáº¿n, giÃºp xÃ¢y dá»±ng, kiá»ƒm thá»­ vÃ  triá»ƒn khai pháº§n má»m má»™t cÃ¡ch tá»± Ä‘á»™ng.\nğŸ“Œ Äáº·c Ä‘iá»ƒm ná»•i báº­t:\nHá»— trá»£ nhiá»u plugin, dá»… dÃ ng tÃ­ch há»£p vá»›i cÃ¡c cÃ´ng cá»¥ DevOps. Giao diá»‡n web trá»±c quan, dá»… dÃ ng cáº¥u hÃ¬nh. Há»— trá»£ cáº£ mÃ´i trÆ°á»ng Windows vÃ  Linux. ğŸ’¡ VÃ­ dá»¥: Cáº¥u hÃ¬nh má»™t pipeline Ä‘Æ¡n giáº£n trong Jenkinsfile\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 pipeline { agent any stages { stage(\u0026#39;Build\u0026#39;) { steps { echo \u0026#39;Building the application...\u0026#39; } } stage(\u0026#39;Test\u0026#39;) { steps { echo \u0026#39;Running tests...\u0026#39; } } stage(\u0026#39;Deploy\u0026#39;) { steps { echo \u0026#39;Deploying the application...\u0026#39; } } } } ğŸ“– TÃ i nguyÃªn há»¯u Ã­ch:\nğŸ”— Trang chá»§ Jenkins ğŸ¥ HÆ°á»›ng dáº«n Jenkins tá»« A-Z ğŸ”„ CircleCI CircleCI lÃ  má»™t ná»n táº£ng CI/CD máº¡nh máº½, há»— trá»£ nhiá»u ngÃ´n ngá»¯ láº­p trÃ¬nh vÃ  tÃ­ch há»£p tá»‘t vá»›i GitHub, Bitbucket.\nğŸ“Œ Äáº·c Ä‘iá»ƒm ná»•i báº­t:\nHá»— trá»£ build song song Ä‘á»ƒ tÄƒng tá»‘c Ä‘á»™ xá»­ lÃ½. TÃ­ch há»£p tá»‘t vá»›i Docker vÃ  Kubernetes. CÃ³ phiÃªn báº£n cloud vÃ  self-hosted. ğŸ’¡ VÃ­ dá»¥: Cáº¥u hÃ¬nh má»™t pipeline CircleCI trong .circleci/config.yml\n1 2 3 4 5 6 7 8 9 version: 2.1 jobs: build: docker: - image: circleci/node:14 steps: - checkout - run: npm install - run: npm test ğŸ“– TÃ i nguyÃªn há»¯u Ã­ch:\nğŸ”— Trang chá»§ CircleCI ğŸ¥ Video hÆ°á»›ng dáº«n CircleCI ğŸ› ï¸ GitLab CI/CD GitLab CI/CD lÃ  má»™t há»‡ thá»‘ng tÃ­ch há»£p sáºµn trong GitLab, cho phÃ©p tá»± Ä‘á»™ng hÃ³a quÃ¡ trÃ¬nh kiá»ƒm thá»­ vÃ  triá»ƒn khai ngay trong Git repository.\nğŸ“Œ Äáº·c Ä‘iá»ƒm ná»•i báº­t:\nHá»— trá»£ tá»± Ä‘á»™ng hÃ³a toÃ n bá»™ pipeline tá»« build, test Ä‘áº¿n deploy. CÃ³ sáºµn trong GitLab, khÃ´ng cáº§n cÃ´ng cá»¥ bÃªn ngoÃ i. Há»— trá»£ cáº£ cháº¡y pipeline trÃªn Docker container. ğŸ’¡ VÃ­ dá»¥: Cáº¥u hÃ¬nh pipeline GitLab CI/CD trong .gitlab-ci.yml\n1 2 3 4 5 6 7 8 9 10 stages: - build - test - deploy test: stage: test script: - npm install - npm test ğŸ“– TÃ i nguyÃªn há»¯u Ã­ch:\nğŸ”— Trang chá»§ GitLab ğŸ¥ HÆ°á»›ng dáº«n GitLab CI/CD âš¡ GitHub Actions GitHub Actions lÃ  cÃ´ng cá»¥ CI/CD Ä‘Æ°á»£c tÃ­ch há»£p trá»±c tiáº¿p vÃ o GitHub, giÃºp tá»± Ä‘á»™ng hÃ³a quÃ¡ trÃ¬nh kiá»ƒm thá»­ vÃ  triá»ƒn khai má»—i khi cÃ³ thay Ä‘á»•i trong repository.\nğŸ“Œ Äáº·c Ä‘iá»ƒm ná»•i báº­t:\nTÃ­ch há»£p cháº·t cháº½ vá»›i GitHub, dá»… dÃ ng thiáº¿t láº­p workflow. Há»— trá»£ nhiá»u há»‡ Ä‘iá»u hÃ nh vÃ  ngÃ´n ngá»¯ láº­p trÃ¬nh. CÃ³ thá»ƒ sá»­ dá»¥ng marketplace vá»›i hÃ ng nghÃ¬n actions cÃ³ sáºµn. ğŸ’¡ VÃ­ dá»¥: Workflow GitHub Actions trong .github/workflows/main.yml\n1 2 3 4 5 6 7 8 9 10 11 12 13 name: Node.js CI on: [push, pull_request] jobs: build: runs-on: ubuntu-latest steps: - uses: actions/checkout@v3 - name: Setup Node.js uses: actions/setup-node@v3 with: node-version: 14 - run: npm install - run: npm test ğŸ“– TÃ i nguyÃªn há»¯u Ã­ch:\nğŸ”— Trang chá»§ GitHub Actions ğŸ¥ Video hÆ°á»›ng dáº«n GitHub Actions ğŸ¯ Káº¿t luáº­n CI/CD giÃºp tÄƒng tá»‘c quÃ¡ trÃ¬nh phÃ¡t triá»ƒn pháº§n má»m, giáº£m thiá»ƒu lá»—i vÃ  nÃ¢ng cao cháº¥t lÆ°á»£ng sáº£n pháº©m. TÃ¹y theo nhu cáº§u vÃ  mÃ´i trÆ°á»ng lÃ m viá»‡c, báº¡n cÃ³ thá»ƒ chá»n Jenkins, CircleCI, GitLab CI/CD hoáº·c GitHub Actions Ä‘á»ƒ triá»ƒn khai há»‡ thá»‘ng CI/CD cá»§a mÃ¬nh. ğŸš€\nğŸ‘‰ BÆ°á»›c tiáº¿p theo: TÃ¬m hiá»ƒu vá» Secret Management quÃ¡ trÃ¬nh lÆ°u trá»¯, quáº£n lÃ½ vÃ  báº£o vá»‡ cÃ¡c thÃ´ng tin nháº¡y cáº£m nhÆ° máº­t kháº©u, khÃ³a API, chá»©ng chá»‰ vÃ  token truy cáº­p Ä‘á»ƒ ngÄƒn cháº·n rÃ² rá»‰ dá»¯ liá»‡u vÃ  Ä‘áº£m báº£o báº£o máº­t há»‡ thá»‘ng. ğŸ’¡\n","date":"2025-02-24T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/devops/devops-step-thirteen.webp","permalink":"https://tech.nguuyen.io.vn/posts/devops/devops-step-thirteen/","title":"CI/CD - TÃ­ch há»£p liÃªn tá»¥c vÃ  triá»ƒn khai liÃªn tá»¥c ğŸš€"},{"content":"ğŸ” Container Orchestration lÃ  gÃ¬? Container orchestration lÃ  quÃ¡ trÃ¬nh quáº£n lÃ½ vÃ  tá»± Ä‘á»™ng hÃ³a vÃ²ng Ä‘á»i cá»§a container, bao gá»“m triá»ƒn khai, má»Ÿ rá»™ng vÃ  káº¿t ná»‘i máº¡ng giá»¯a cÃ¡c container trÃªn nhiá»u mÃ¡y chá»§. ÄÃ¢y lÃ  cÃ´ng nghá»‡ quan trá»ng Ä‘á»ƒ cháº¡y cÃ¡c á»©ng dá»¥ng phá»©c táº¡p trong mÃ´i trÆ°á»ng sáº£n xuáº¥t.\nBáº±ng cÃ¡ch sá»­ dá»¥ng cÃ¡c cÃ´ng cá»¥ nhÆ° Kubernetes, Docker Swarm, vÃ  Apache Mesos, cÃ¡c tá»• chá»©c cÃ³ thá»ƒ Ä‘áº£m báº£o tÃ­nh kháº£ dá»¥ng cao, kháº£ nÄƒng má»Ÿ rá»™ng vÃ  Ä‘á»™ tin cáº­y cho á»©ng dá»¥ng cá»§a mÃ¬nh. Container orchestration giÃºp tá»± Ä‘á»™ng hÃ³a cÃ¡c tÃ¡c vá»¥ váº­n hÃ nh vÃ  táº¡o ná»n táº£ng vá»¯ng cháº¯c cho microservices, cloud-native development, vÃ  DevOps.\nğŸ“š TÃ i nguyÃªn miá»…n phÃ­ há»¯u Ã­ch:\nğŸ“¦ Container Orchestration lÃ  gÃ¬? ğŸš€ Kubernetes lÃ  gÃ¬? ğŸ³ Docker Swarm ğŸ¥ Giá»›i thiá»‡u vá» Kubernetes â˜¸ï¸ Kubernetes Kubernetes lÃ  ná»n táº£ng mÃ£ nguá»“n má»Ÿ phá»• biáº¿n nháº¥t Ä‘á»ƒ quáº£n lÃ½ container. NÃ³ cho phÃ©p triá»ƒn khai container trÃªn nhiá»u mÃ¡y chá»§, xÃ¡c Ä‘á»‹nh má»©c Ä‘á»™ sáºµn sÃ ng, logic triá»ƒn khai vÃ  má»Ÿ rá»™ng thÃ´ng qua YAML.\nKubernetes cÃ³ nguá»“n gá»‘c tá»« Borg, ná»n táº£ng ná»™i bá»™ cá»§a Google, vÃ  Ä‘Ã£ trá»Ÿ thÃ nh ká»¹ nÄƒng quan trá»ng Ä‘á»‘i vá»›i cÃ¡c ká»¹ sÆ° DevOps. Nhiá»u tá»• chá»©c Ä‘Ã£ thÃ nh láº­p Ä‘á»™i ngÅ© Platform Engineering chuyÃªn vá» Kubernetes Ä‘á»ƒ há»— trá»£ cÃ¡c nhÃ³m phÃ¡t triá»ƒn sáº£n pháº©m.\nğŸ“š TÃ i nguyÃªn miá»…n phÃ­ há»¯u Ã­ch:\nğŸ—ºï¸ Lá»™ trÃ¬nh Kubernetes chuyÃªn sÃ¢u ğŸŒ Trang web chÃ­nh thá»©c cá»§a Kubernetes ğŸ“– Tá»•ng quan vá» Kubernetes ğŸ¥ KhÃ³a há»c Kubernetes hoÃ n chá»‰nh - Tá»« cÆ¡ báº£n Ä‘áº¿n nÃ¢ng cao ğŸ“Œ VÃ­ dá»¥:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 apiVersion: apps/v1 kind: Deployment metadata: name: my-app spec: replicas: 3 selector: matchLabels: app: my-app template: metadata: labels: app: my-app spec: containers: - name: my-app image: my-app-image:latest â˜ï¸ GKE / EKS / AKS ğŸ”¹ GKE - Google Kubernetes Engine Google Kubernetes Engine (GKE) lÃ  dá»‹ch vá»¥ Kubernetes Ä‘Æ°á»£c quáº£n lÃ½ bá»Ÿi Google Cloud. NÃ³ giÃºp triá»ƒn khai, quáº£n lÃ½ vÃ  má»Ÿ rá»™ng á»©ng dá»¥ng container vá»›i Kubernetes mÃ  khÃ´ng cáº§n tá»± quáº£n lÃ½ cá»¥m mÃ¡y chá»§.\nğŸ”¹ EKS - Amazon Elastic Kubernetes Service Amazon Elastic Kubernetes Service (EKS) lÃ  dá»‹ch vá»¥ Kubernetes Ä‘Æ°á»£c AWS cung cáº¥p. NÃ³ tá»± Ä‘á»™ng quáº£n lÃ½ control plane cá»§a Kubernetes vÃ  tÃ­ch há»£p vá»›i cÃ¡c dá»‹ch vá»¥ AWS khÃ¡c.\nğŸ”¹ AKS - Azure Kubernetes Service Azure Kubernetes Service (AKS) lÃ  dá»‹ch vá»¥ Kubernetes cá»§a Microsoft Azure. AKS há»— trá»£ giÃ¡m sÃ¡t, báº£o máº­t, má»Ÿ rá»™ng tá»± Ä‘á»™ng vÃ  tÃ­ch há»£p vá»›i Azure DevOps.\nğŸ“š TÃ i nguyÃªn miá»…n phÃ­ há»¯u Ã­ch:\nâ˜ï¸ Google Kubernetes Engine (GKE) ğŸŸ§ Amazon Elastic Kubernetes Service (EKS) ğŸ”µ Azure Kubernetes Service (AKS) ğŸ¥ HÆ°á»›ng dáº«n AWS EKS ğŸ¥ Google Kubernetes Engine lÃ  gÃ¬? ğŸš€ ECS / Fargate ECS lÃ  dá»‹ch vá»¥ quáº£n lÃ½ container cháº¡y trÃªn EC2 cá»§a AWS, cho phÃ©p kiá»ƒm soÃ¡t háº¡ táº§ng mÃ¡y chá»§.\nFargate lÃ  dá»‹ch vá»¥ quáº£n lÃ½ container serverless, giÃºp cháº¡y container mÃ  khÃ´ng cáº§n quáº£n lÃ½ mÃ¡y chá»§ hoáº·c cá»¥m mÃ¡y.\nğŸ“š TÃ i nguyÃªn miá»…n phÃ­ há»¯u Ã­ch:\nğŸ“„ TÃ i liá»‡u AWS Fargate ğŸ“„ TÃ i liá»‡u AWS ECS ğŸ¥ Tá»•ng quan vá» AWS Fargate ğŸ¥ HÆ°á»›ng dáº«n AWS ECS ğŸ“Œ VÃ­ dá»¥:\n1 2 3 4 5 6 7 8 9 10 11 { \u0026#34;family\u0026#34;: \u0026#34;my-task\u0026#34;, \u0026#34;containerDefinitions\u0026#34;: [ { \u0026#34;name\u0026#34;: \u0026#34;my-container\u0026#34;, \u0026#34;image\u0026#34;: \u0026#34;my-container-image:latest\u0026#34;, \u0026#34;memory\u0026#34;: 512, \u0026#34;cpu\u0026#34;: 256 } ] } ğŸ³ Docker Swarm Docker Swarm lÃ  táº­p há»£p cÃ¡c mÃ¡y (váº­t lÃ½ hoáº·c áº£o) cháº¡y Docker vÃ  Ä‘Æ°á»£c cáº¥u hÃ¬nh thÃ nh má»™t cá»¥m (cluster). Quáº£n lÃ½ cá»¥m Ä‘Æ°á»£c thá»±c hiá»‡n bá»Ÿi swarm manager, vÃ  cÃ¡c mÃ¡y tham gia cá»¥m Ä‘Æ°á»£c gá»i lÃ  nodes.\nğŸ“š TÃ i nguyÃªn há»¯u Ã­ch:\nğŸ“„ TÃ i liá»‡u Docker Swarm ğŸ”§ Quáº£n lÃ½ Docker Swarm vá»›i Portainer ğŸ“¦ Táº¡o Docker Swarm vá»›i bá»™ nhá»› lÆ°u trá»¯ GlusterFS ğŸ¥ Giá»›i thiá»‡u Docker Swarm | HÆ°á»›ng dáº«n tá»«ng bÆ°á»›c ğŸ“Œ VÃ­ dá»¥:\n1 2 3 4 5 // Khá»Ÿi táº¡o Swarm $ docker swarm init // Triá»ƒn khai dá»‹ch vá»¥ trÃªn Swarm $ docker service create --name web -p 80:80 nginx âœ… Káº¿t luáº­n Container orchestration Ä‘Ã³ng vai trÃ² quan trá»ng trong viá»‡c quáº£n lÃ½ á»©ng dá»¥ng container, giÃºp Ä‘Æ¡n giáº£n hÃ³a váº­n hÃ nh, tá»‘i Æ°u tÃ i nguyÃªn vÃ  tÄƒng cÆ°á»ng tÃ­nh sáºµn sÃ ng. CÃ¡c cÃ´ng cá»¥ nhÆ° Kubernetes, Docker Swarm, ECS, Fargate cung cáº¥p nhiá»u giáº£i phÃ¡p linh hoáº¡t cho cÃ¡c doanh nghiá»‡p hiá»‡n Ä‘áº¡i. Viá»‡c lá»±a chá»n cÃ´ng cá»¥ phÃ¹ há»£p sáº½ giÃºp doanh nghiá»‡p táº­n dá»¥ng tá»‘i Ä‘a sá»©c máº¡nh cá»§a container hÃ³a vÃ  Ä‘iá»‡n toÃ¡n Ä‘Ã¡m mÃ¢y. ğŸš€\nğŸ‘‰ BÆ°á»›c tiáº¿p theo: TÃ¬m hiá»ƒu vá» Application Monitoring theo dÃµi, Ä‘o lÆ°á»ng vÃ  phÃ¢n tÃ­ch hiá»‡u suáº¥t, tráº¡ng thÃ¡i vÃ  hÃ nh vi cá»§a á»©ng dá»¥ng Ä‘á»ƒ phÃ¡t hiá»‡n sá»± cá»‘, tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t vÃ  Ä‘áº£m báº£o tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng tá»‘t. CÃ¡c cÃ´ng cá»¥ phá»• biáº¿n nhÆ° Prometheus, Grafana, Datadog, New Relic giÃºp thu tháº­p dá»¯ liá»‡u tá»« á»©ng dá»¥ng, mÃ¡y chá»§ vÃ  háº¡ táº§ng Ä‘á»ƒ cung cáº¥p cáº£nh bÃ¡o vÃ  bÃ¡o cÃ¡o chi tiáº¿t.\n","date":"2025-02-24T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/devops/devops-step-seventeen.webp","permalink":"https://tech.nguuyen.io.vn/posts/devops/devops-step-seventeen/","title":"Container Orchestration ğŸš¢"},{"content":"ğŸ” GiÃ¡m sÃ¡t háº¡ táº§ng (Infrastructure Monitoring) lÃ  gÃ¬? GiÃ¡m sÃ¡t háº¡ táº§ng lÃ  quÃ¡ trÃ¬nh theo dÃµi hiá»‡u suáº¥t vÃ  tráº¡ng thÃ¡i cá»§a há»‡ thá»‘ng, giÃºp phÃ¡t hiá»‡n sá»± cá»‘ ká»‹p thá»i vÃ  tá»‘i Æ°u hÃ³a hoáº¡t Ä‘á»™ng. ÄÃ¢y lÃ  má»™t lÄ©nh vá»±c rá»™ng lá»›n vá»›i nhiá»u cÃ´ng cá»¥ khÃ¡c nhau, má»—i cÃ´ng cá»¥ cÃ³ Æ°u nhÆ°á»£c Ä‘iá»ƒm riÃªng. Hiá»ƒu rÃµ cÃ¡c cÃ´ng cá»¥ nÃ y sáº½ giÃºp báº¡n chá»n giáº£i phÃ¡p phÃ¹ há»£p vá»›i má»¥c tiÃªu giÃ¡m sÃ¡t cá»§a mÃ¬nh.\nğŸš€ CÃ¡c cÃ´ng cá»¥ giÃ¡m sÃ¡t phá»• biáº¿n Grafana ğŸ“ Giá»›i thiá»‡u: Grafana lÃ  má»™t á»©ng dá»¥ng web mÃ£ nguá»“n má»Ÿ chuyÃªn dÃ¹ng Ä‘á»ƒ phÃ¢n tÃ­ch dá»¯ liá»‡u vÃ  trá»±c quan hÃ³a. NÃ³ káº¿t ná»‘i vá»›i nhiá»u nguá»“n dá»¯ liá»‡u khÃ¡c nhau nhÆ° cÆ¡ sá»Ÿ dá»¯ liá»‡u thá»i gian thá»±c, cÆ¡ sá»Ÿ dá»¯ liá»‡u quan há»‡ vÃ  dá»‹ch vá»¥ Ä‘Ã¡m mÃ¢y.\nğŸ”¹ TÃ­nh nÄƒng ná»•i báº­t:\nTrá»±c quan hÃ³a dá»¯ liá»‡u máº¡nh máº½ vá»›i nhiá»u loáº¡i biá»ƒu Ä‘á»“. Há»— trá»£ nhiá»u plugin má»Ÿ rá»™ng. Há»‡ thá»‘ng cáº£nh bÃ¡o theo thá»i gian thá»±c. XÃ¡c thá»±c ngÆ°á»i dÃ¹ng vÃ  kiá»ƒm soÃ¡t truy cáº­p theo vai trÃ². ğŸ“Œ VÃ­ dá»¥: Sá»­ dá»¥ng Grafana Ä‘á»ƒ giÃ¡m sÃ¡t má»©c sá»­ dá»¥ng CPU vÃ  RAM cá»§a há»‡ thá»‘ng, giÃºp phÃ¡t hiá»‡n vÃ  xá»­ lÃ½ sá»± cá»‘ quÃ¡ táº£i.\nğŸ“š TÃ i nguyÃªn há»¯u Ã­ch:\nğŸ”—Trang chá»§ Grafana ğŸ“–HÆ°á»›ng dáº«n cÃ i Ä‘áº·t vÃ  sá»­ dá»¥ng Prometheus ğŸ“ Giá»›i thiá»‡u: Prometheus lÃ  má»™t cÃ´ng cá»¥ giÃ¡m sÃ¡t vÃ  cáº£nh bÃ¡o mÃ£ nguá»“n má»Ÿ, Ä‘áº·c biá»‡t phÃ¹ há»£p vá»›i cÃ¡c há»‡ thá»‘ng microservices vÃ  container hÃ³a nhÆ° Kubernetes.\nğŸ”¹ TÃ­nh nÄƒng ná»•i báº­t:\nMÃ´ hÃ¬nh dá»¯ liá»‡u Ä‘a chiá»u. Há»— trá»£ ngÃ´n ngá»¯ truy váº¥n PromQL máº¡nh máº½. CÆ¡ cháº¿ thu tháº­p dá»¯ liá»‡u theo mÃ´ hÃ¬nh pull. Quáº£n lÃ½ cáº£nh bÃ¡o thÃ´ng minh vá»›i Alertmanager. ğŸ“Œ VÃ­ dá»¥: Sá»­ dá»¥ng Prometheus Ä‘á»ƒ thu tháº­p vÃ  phÃ¢n tÃ­ch sá»‘ lÆ°á»£ng request Ä‘áº¿n má»™t API, giÃºp xÃ¡c Ä‘á»‹nh thá»i Ä‘iá»ƒm táº£i cao vÃ  tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t.\nğŸ“š TÃ i nguyÃªn há»¯u Ã­ch:\nğŸ”—Trang chá»§ Prometheus ğŸ¥Giá»›i thiá»‡u vá» Prometheus Zabbix ğŸ“ Giá»›i thiá»‡u: Zabbix lÃ  má»™t ná»n táº£ng giÃ¡m sÃ¡t mÃ£ nguá»“n má»Ÿ, há»— trá»£ theo dÃµi toÃ n diá»‡n cÃ¡c thÃ nh pháº§n trong há»‡ thá»‘ng nhÆ° mÃ¡y chá»§, máº¡ng, á»©ng dá»¥ng vÃ  dá»‹ch vá»¥.\nğŸ”¹ TÃ­nh nÄƒng ná»•i báº­t:\nHá»— trá»£ nhiá»u phÆ°Æ¡ng thá»©c thu tháº­p dá»¯ liá»‡u: Agent, SNMP, IPMI, script tÃ¹y chá»‰nh. Cáº£nh bÃ¡o vÃ  thÃ´ng bÃ¡o theo thá»i gian thá»±c. Há»‡ thá»‘ng dashboard vÃ  bÃ¡o cÃ¡o chi tiáº¿t. Má»Ÿ rá»™ng dá»… dÃ ng cho cÃ¡c mÃ´i trÆ°á»ng lá»›n. ğŸ“Œ VÃ­ dá»¥: Sá»­ dá»¥ng Zabbix Ä‘á»ƒ giÃ¡m sÃ¡t tráº¡ng thÃ¡i cá»§a cÃ¡c server trong há»‡ thá»‘ng, phÃ¡t hiá»‡n downtime vÃ  gá»­i cáº£nh bÃ¡o ngay láº­p tá»©c.\nğŸ“š TÃ i nguyÃªn há»¯u Ã­ch:\nğŸ”—Trang chá»§ Zabbix ğŸ“–HÆ°á»›ng dáº«n sá»­ dá»¥ng Zabbix âœ… Káº¿t luáº­n Má»—i cÃ´ng cá»¥ giÃ¡m sÃ¡t cÃ³ Æ°u Ä‘iá»ƒm riÃªng:\nGrafana: Máº¡nh vá» trá»±c quan hÃ³a dá»¯ liá»‡u. Prometheus: PhÃ¹ há»£p vá»›i mÃ´i trÆ°á»ng container vÃ  microservices. Zabbix: Giáº£i phÃ¡p giÃ¡m sÃ¡t tá»•ng thá»ƒ cho há»‡ thá»‘ng lá»›n. TÃ¹y vÃ o nhu cáº§u cá»¥ thá»ƒ, báº¡n cÃ³ thá»ƒ káº¿t há»£p nhiá»u cÃ´ng cá»¥ Ä‘á»ƒ xÃ¢y dá»±ng há»‡ thá»‘ng giÃ¡m sÃ¡t tá»‘i Æ°u cho mÃ¬nh. ğŸš€\nğŸ‘‰ BÆ°á»›c tiáº¿p theo: TÃ¬m hiá»ƒu vá» Logs Management quÃ¡ trÃ¬nh thu tháº­p, lÆ°u trá»¯, xá»­ lÃ½ vÃ  phÃ¢n tÃ­ch log tá»« cÃ¡c há»‡ thá»‘ng, á»©ng dá»¥ng vÃ  thiáº¿t bá»‹ nháº±m theo dÃµi hoáº¡t Ä‘á»™ng, phÃ¡t hiá»‡n sá»± cá»‘, Ä‘áº£m báº£o báº£o máº­t vÃ  há»— trá»£ kháº¯c phá»¥c sá»± cá»‘ nhanh chÃ³ng.\n","date":"2025-02-24T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/devops/devops-step-fifteen.webp","permalink":"https://tech.nguuyen.io.vn/posts/devops/devops-step-fifteen/","title":"GiÃ¡m sÃ¡t háº¡ táº§ng (Infrastructure Monitoring) ğŸ“Š"},{"content":"ğŸ”¹ Provisioning lÃ  gÃ¬? Provisioning Ä‘á» cáº­p Ä‘áº¿n quÃ¡ trÃ¬nh thiáº¿t láº­p vÃ  cáº¥u hÃ¬nh háº¡ táº§ng CNTT cáº§n thiáº¿t Ä‘á»ƒ há»— trá»£ á»©ng dá»¥ng hoáº·c dá»‹ch vá»¥. Äiá»u nÃ y bao gá»“m viá»‡c phÃ¢n bá»• vÃ  chuáº©n bá»‹ tÃ i nguyÃªn nhÆ° mÃ¡y chá»§, lÆ°u trá»¯, máº¡ng vÃ  mÃ´i trÆ°á»ng pháº§n má»m.\nMáº·c dÃ¹ provisioning cÃ³ thá»ƒ Ä‘Æ°á»£c thá»±c hiá»‡n thá»§ cÃ´ng, nhÆ°ng trong DevOps hiá»‡n Ä‘áº¡i, quÃ¡ trÃ¬nh nÃ y thÆ°á»ng Ä‘Æ°á»£c tá»± Ä‘á»™ng hÃ³a báº±ng cÃ¡c cÃ´ng cá»¥ nhÆ° Terraform, Pulumi, CloudFormation. Viá»‡c sá»­ dá»¥ng Infrastructure-as-Code (IaC) giÃºp Ä‘á»‹nh nghÄ©a toÃ n bá»™ quy trÃ¬nh provisioning trong cÃ¡c tá»‡p script Ä‘Æ°á»£c quáº£n lÃ½ phiÃªn báº£n, giÃºp Ä‘áº£m báº£o tÃ­nh nháº¥t quÃ¡n, giáº£m lá»—i do con ngÆ°á»i vÃ  cáº£i thiá»‡n kháº£ nÄƒng má»Ÿ rá»™ng, phá»¥c há»“i sau tháº£m há»a.\nğŸ“– TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu:\nğŸ“„ What is provisioning? - RedHat ğŸ“„ What is provisioning? - IBM ğŸ¥ Open Answers: What is provisioning? ğŸ—ï¸ Terraform - Giáº£i phÃ¡p IaC máº¡nh máº½ Terraform lÃ  cÃ´ng cá»¥ Infrastructure-as-Code (IaC) mÃ£ nguá»“n má»Ÿ do HashiCorp phÃ¡t triá»ƒn, giÃºp Ä‘á»‹nh nghÄ©a, triá»ƒn khai vÃ  quáº£n lÃ½ háº¡ táº§ng trÃªn Ä‘a Ä‘Ã¡m mÃ¢y hoáº·c on-premises báº±ng cÃ¡c táº­p tin cáº¥u hÃ¬nh khai bÃ¡o (declarative).\nğŸŒŸ Lá»£i Ã­ch khi sá»­ dá»¥ng Terraform âœ… Há»— trá»£ Ä‘a ná»n táº£ng: AWS, Azure, Google Cloud, Kubernetes, v.v. âœ… Quáº£n lÃ½ tráº¡ng thÃ¡i (state management): GiÃºp theo dÃµi tÃ i nguyÃªn háº¡ táº§ng. âœ… Kháº£ nÄƒng má»Ÿ rá»™ng vÃ  tÃ¡i sá»­ dá»¥ng: Dá»… dÃ ng modular hÃ³a cáº¥u hÃ¬nh. âœ… TÃ­ch há»£p CI/CD: Tá»± Ä‘á»™ng hÃ³a triá»ƒn khai háº¡ táº§ng.\nğŸ”¨ VÃ­ dá»¥: Táº¡o má»™t EC2 instance trÃªn AWS 1 2 3 4 5 6 7 8 9 10 11 provider \u0026#34;aws\u0026#34; { region = \u0026#34;us-east-1\u0026#34; } resource \u0026#34;aws_instance\u0026#34; \u0026#34;web\u0026#34; { ami = \u0026#34;ami-12345678\u0026#34; instance_type = \u0026#34;t2.micro\u0026#34; tags = { Name = \u0026#34;Terraform-Instance\u0026#34; } } ğŸ“– TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu:\nğŸ“ Lá»™ trÃ¬nh Terraform chi tiáº¿t ğŸ¥ KhÃ³a há»c Terraform hoÃ n chá»‰nh ğŸ“„ TÃ i liá»‡u chÃ­nh thá»©c cá»§a Terraform ğŸ“– CÃ¡ch má»Ÿ rá»™ng háº¡ táº§ng Terraform ğŸ”¥ KhÃ¡m phÃ¡ cÃ¡c bÃ i viáº¿t hÃ ng Ä‘áº§u vá» Terraform ğŸ”¹ AWS CDK - Má»™t sá»± thay tháº¿? AWS Cloud Development Kit (AWS CDK) lÃ  framework mÃ£ nguá»“n má»Ÿ Ä‘á»ƒ provisioning háº¡ táº§ng AWS báº±ng mÃ£ trong cÃ¡c ngÃ´n ngá»¯ nhÆ° TypeScript, Python, Java, C#, Go. AWS CDK sá»­ dá»¥ng CloudFormation Ä‘á»ƒ triá»ƒn khai tÃ i nguyÃªn má»™t cÃ¡ch an toÃ n vÃ  cÃ³ thá»ƒ láº·p láº¡i.\nğŸ“– TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu:\nğŸ¥ KhÃ³a há»c AWS CDK cho ngÆ°á»i má»›i báº¯t Ä‘áº§u ğŸ“„ TÃ i liá»‡u chÃ­nh thá»©c cá»§a AWS CDK ğŸ“‚ CÃ¡c vÃ­ dá»¥ vá» AWS CDK ğŸ”¥ KhÃ¡m phÃ¡ cÃ¡c bÃ i viáº¿t hÃ ng Ä‘áº§u vá» AWS ğŸ“Œ Káº¿t luáº­n Terraform lÃ  cÃ´ng cá»¥ hÃ ng Ä‘áº§u cho Infrastructure-as-Code, mang Ä‘áº¿n sá»± linh hoáº¡t vÃ  kháº£ nÄƒng tá»± Ä‘á»™ng hÃ³a máº¡nh máº½ trÃªn nhiá»u ná»n táº£ng cloud khÃ¡c nhau. Náº¿u báº¡n lÃ m viá»‡c nhiá»u vá»›i AWS vÃ  muá»‘n triá»ƒn khai báº±ng cÃ¡c ngÃ´n ngá»¯ láº­p trÃ¬nh, AWS CDK cÅ©ng lÃ  má»™t lá»±a chá»n Ä‘Ã¡ng cÃ¢n nháº¯c.\nTÃ¹y vÃ o yÃªu cáº§u cá»§a dá»± Ã¡n, báº¡n cÃ³ thá»ƒ lá»±a chá»n cÃ´ng cá»¥ phÃ¹ há»£p Ä‘á»ƒ quáº£n lÃ½ háº¡ táº§ng hiá»‡u quáº£ hÆ¡n. ğŸš€\nğŸ‘‰ BÆ°á»›c tiáº¿p theo: TÃ¬m hiá»ƒu vá» Configuration Management quÃ¡ trÃ¬nh quáº£n lÃ½, giÃ¡m sÃ¡t vÃ  tá»± Ä‘á»™ng hÃ³a cáº¥u hÃ¬nh há»‡ thá»‘ng, pháº§n má»m vÃ  háº¡ táº§ng Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh nháº¥t quÃ¡n, á»•n Ä‘á»‹nh vÃ  dá»… dÃ ng kiá»ƒm soÃ¡t trong suá»‘t vÃ²ng Ä‘á»i cá»§a chÃºng. NÃ³ giÃºp theo dÃµi vÃ  kiá»ƒm soÃ¡t thay Ä‘á»•i, giáº£m lá»—i do cáº¥u hÃ¬nh thá»§ cÃ´ng vÃ  há»— trá»£ triá»ƒn khai nhanh chÃ³ng. CÃ¡c cÃ´ng cá»¥ phá»• biáº¿n bao gá»“m Ansible, Puppet, Chef vÃ  SaltStack.\n","date":"2025-02-24T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/devops/devops-step-eleven.webp","permalink":"https://tech.nguuyen.io.vn/posts/devops/devops-step-eleven/","title":"Infrastructure Provisioning vá»›i Terraform ğŸŸªğŸ”³"},{"content":"ğŸ”§ Quáº£n lÃ½ cáº¥u hÃ¬nh (Configuration Management) Quáº£n lÃ½ cáº¥u hÃ¬nh lÃ  quy trÃ¬nh quáº£n lÃ½ vÃ  duy trÃ¬ tÃ­nh nháº¥t quÃ¡n cá»§a cÃ¡c thÃ nh pháº§n trong há»‡ thá»‘ng cÃ´ng nghá»‡ thÃ´ng tin. Trong lÄ©nh vá»±c pháº§n má»m, nÃ³ bao gá»“m viá»‡c giÃ¡m sÃ¡t, theo dÃµi vÃ  quáº£n lÃ½ cÃ¡c thay Ä‘á»•i cáº¥u hÃ¬nh cá»§a há»‡ thá»‘ng trong suá»‘t vÃ²ng Ä‘á»i sáº£n pháº©m. Viá»‡c Ã¡p dá»¥ng quáº£n lÃ½ cáº¥u hÃ¬nh giÃºp tÄƒng tÃ­nh Ä‘á»“ng bá»™, giáº£m nguy cÆ¡ lá»—i, vÃ  Ä‘áº£m báº£o sá»± tuÃ¢n thá»§ cÃ¡c tiÃªu chuáº©n trong quy trÃ¬nh CI/CD (Continuous Integration and Continuous Deployment).\nğŸŒ CÃ¡c cÃ´ng cá»¥ quáº£n lÃ½ cáº¥u hÃ¬nh phá»• biáº¿n ğŸš€ Ansible Ansible lÃ  má»™t cÃ´ng cá»¥ tá»± Ä‘á»™ng hÃ³a má»Ÿ, chá»§ yáº¿u dÃ¹ng cho quáº£n lÃ½ cáº¥u hÃ¬nh, triá»ƒn khai á»©ng dá»¥ng vÃ  tá»± Ä‘á»™ng hÃ³a tÃ¡c vá»¥.\nğŸ”„ Äáº·c Ä‘iá»ƒm:\nSá»­ dá»¥ng YAML (playbooks) Ä‘á»ƒ xÃ¡c Ä‘á»‹nh tráº¡ng thÃ¡i mong muá»‘n. Hoáº¡t Ä‘á»™ng khÃ´ng cáº§n cÃ i Ä‘áº·t agent. PhÃ¹ há»£p vá»›i quy mÃ´ nhá» Ä‘áº¿n lá»›n. ğŸ’¡ VÃ­ dá»¥ sá»­ dá»¥ng Ansible:\n1 2 3 4 5 6 7 8 9 10 11 12 - name: CÃ i Ä‘áº·t vÃ  khá»Ÿi Ä‘á»™ng Nginx hosts: all become: yes tasks: - name: CÃ i Ä‘áº·t Nginx apt: name: nginx state: present - name: Khá»Ÿi Ä‘á»™ng Nginx service: name: nginx state: started ğŸ“– TÃ i nguyÃªn miá»…n phÃ­ há»¯u Ã­ch:\nğŸ“š KhÃ³a há»c Ansible Ä‘áº§y Ä‘á»§ cho ngÆ°á»i má»›i báº¯t Ä‘áº§u ğŸ”— Trang web chÃ­nh thá»©c cá»§a Ansible ğŸ¥ Ansible trong 100 giÃ¢y ğŸŒŸ Chef Chef (hiá»‡n thuá»™c Progress Chef) lÃ  má»™t trong nhá»¯ng cÃ´ng cá»¥ quáº£n lÃ½ cáº¥u hÃ¬nh Ä‘áº§u tiÃªn. NÃ³ sá»­ dá»¥ng ngÃ´n ngá»¯ Ruby vÃ  Ä‘á» cao tÃ­nh idempotence (Ä‘áº£m báº£o cháº¡y n nhiá»u láº§n váº«n cÃ¹ng káº¿t quáº£).\nğŸ”„ Äáº·c Ä‘iá»ƒm:\nDá»±a trÃªn client/server. CÃ³ Chef-Solo cho triá»ƒn khai Ä‘á»™c láº­p. PhÃ¹ há»£p vá»›i mÃ´i trÆ°á»ng doanh nghiá»‡p. ğŸ’¡ VÃ­ dá»¥ sá»­ dá»¥ng Chef:\n1 2 3 4 5 6 7 package \u0026#39;nginx\u0026#39; do action :install end service \u0026#39;nginx\u0026#39; do action [:enable, :start] end ğŸ“– TÃ i nguyÃªn miá»…n phÃ­ há»¯u Ã­ch:\nğŸ”— Trang web chÃ­nh thá»©c cá»§a Chef ğŸ“š HÆ°á»›ng dáº«n Chef ğŸ¥ Video hÆ°á»›ng dáº«n Chef ğŸ° Puppet Puppet lÃ  má»™t cÃ´ng cá»¥ quáº£n lÃ½ cáº¥u hÃ¬nh theo mÃ´ hÃ¬nh declarative, hoáº¡t Ä‘á»™ng theo kiá»ƒu client/server vÃ  há»— trá»£ nhiá»u há»‡ Ä‘iá»u hÃ nh.\nğŸ”„ Äáº·c Ä‘iá»ƒm:\nQuáº£n lÃ½ quy mÃ´ lá»›n. Kiá»ƒm tra vÃ  Ã¡p dá»¥ng cáº¥u hÃ¬nh Ä‘á»‹nh ká»³. TÃ­ch há»£p vá»›i nhiá»u cÃ´ng cá»¥ DevOps. ğŸ’¡ VÃ­ dá»¥ sá»­ dá»¥ng Puppet:\n1 2 3 4 5 6 7 8 package { \u0026#39;nginx\u0026#39;: ensure =\u0026gt; installed, } service { \u0026#39;nginx\u0026#39;: ensure =\u0026gt; running, enable =\u0026gt; true, } ğŸ“– TÃ i nguyÃªn miá»…n phÃ­ há»¯u Ã­ch:\nğŸ“š KhÃ³a há»c Puppet Ä‘áº§y Ä‘á»§ ğŸ”— Trang web chÃ­nh thá»©c cá»§a Puppet ğŸ¥ BÃ i viáº¿t hay vá» Puppet ğŸ‰ Káº¿t luáº­n Quáº£n lÃ½ cáº¥u hÃ¬nh lÃ  má»™t yáº¿u tá»‘ quan trá»ng trong quy trÃ¬nh DevOps, giÃºp Ä‘áº£m báº£o há»‡ thá»‘ng hoáº¡t Ä‘á»™ng nháº¥t quÃ¡n, giáº£m thiá»ƒu lá»—i vÃ  nÃ¢ng cao Ä‘á»™ tin cáº­y. TÃ¹y thuá»™c vÃ o nhu cáº§u vÃ  quy mÃ´, doanh nghiá»‡p cÃ³ thá»ƒ chá»n Ansible, Chef hoáº·c Puppet Ä‘á»ƒ quáº£n lÃ½ háº¡ táº§ng má»™t cÃ¡ch hiá»‡u quáº£.\nğŸ‘‰ BÆ°á»›c tiáº¿p theo: TÃ¬m hiá»ƒu vá» Continuous Integration and Continuous Deployment (CI/CD), lÃ  quy trÃ¬nh tá»± Ä‘á»™ng hÃ³a trong phÃ¡t triá»ƒn pháº§n má»m giÃºp tÃ­ch há»£p, kiá»ƒm thá»­ vÃ  triá»ƒn khai á»©ng dá»¥ng má»™t cÃ¡ch liÃªn tá»¥c.\n","date":"2025-02-24T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/devops/devops-step-twelve.webp","permalink":"https://tech.nguuyen.io.vn/posts/devops/devops-step-twelve/","title":"Quáº£n lÃ½ cáº¥u hÃ¬nh (Configuration Management)ğŸ”§"},{"content":"ğŸ” Secret Management lÃ  gÃ¬? Secret Management lÃ  quÃ¡ trÃ¬nh báº£o vá»‡, lÆ°u trá»¯ vÃ  phÃ¢n phá»‘i an toÃ n cÃ¡c thÃ´ng tin nháº¡y cáº£m nhÆ° máº­t kháº©u, khÃ³a API vÃ  chá»©ng chá»‰ trong há»‡ thá»‘ng cÃ´ng nghá»‡ thÃ´ng tin cá»§a tá»• chá»©c. NÃ³ giÃºp ngÄƒn cháº·n truy cáº­p trÃ¡i phÃ©p Ä‘á»“ng thá»i Ä‘áº£m báº£o cÃ¡c há»‡ thá»‘ng vÃ  ngÆ°á»i dÃ¹ng Ä‘Æ°á»£c á»§y quyá»n cÃ³ thá»ƒ sá»­ dá»¥ng thÃ´ng tin khi cáº§n thiáº¿t.\nSecret Management thÆ°á»ng bao gá»“m cÃ¡c tÃ­nh nÄƒng:\nMÃ£ hÃ³a dá»¯ liá»‡u khi lÆ°u trá»¯ vÃ  truyá»n táº£i. Kiá»ƒm soÃ¡t truy cáº­p, chá»‰ cho phÃ©p ngÆ°á»i hoáº·c há»‡ thá»‘ng cÃ³ quyá»n má»›i Ä‘Æ°á»£c truy cáº­p. CÆ¡ cháº¿ quay vÃ²ng khÃ³a Ä‘á»ƒ thay Ä‘á»•i máº­t kháº©u Ä‘á»‹nh ká»³. TÃ­ch há»£p vá»›i cÃ¡c há»‡ thá»‘ng DevOps Ä‘á»ƒ tá»± Ä‘á»™ng hÃ³a quy trÃ¬nh báº£o máº­t. ğŸ”— Tham kháº£o thÃªm:\nğŸ“„ CÃ¡ch quáº£n lÃ½ bÃ­ máº­t trong á»©ng dá»¥ng web ğŸ“„ Táº¡i sao DevSecOps cáº§n quáº£n lÃ½ bÃ­ máº­t ğŸ¥ Máº¹o DevOps Ä‘á»ƒ quáº£n lÃ½ bÃ­ máº­t trong mÃ´i trÆ°á»ng sáº£n xuáº¥t ğŸ›ï¸ HashiCorp Vault HashiCorp Vault lÃ  cÃ´ng cá»¥ quáº£n lÃ½ bÃ­ máº­t giÃºp báº£o vá»‡ dá»¯ liá»‡u nháº¡y cáº£m nhÆ° máº­t kháº©u, khÃ³a API vÃ  khÃ³a mÃ£ hÃ³a.\nğŸ”‘ Äáº·c Ä‘iá»ƒm ná»•i báº­t: Quáº£n lÃ½ táº­p trung giÃºp dá»… dÃ ng kiá»ƒm soÃ¡t cÃ¡c bÃ­ máº­t. Há»— trá»£ nhiá»u phÆ°Æ¡ng thá»©c xÃ¡c thá»±c nhÆ° LDAP, Kubernetes. Cung cáº¥p bÃ­ máº­t Ä‘á»™ng (Dynamic Secrets) giÃºp táº¡o bÃ­ máº­t táº¡m thá»i khi cáº§n. MÃ£ hÃ³a dá»¯ liá»‡u máº¡nh máº½ khi lÆ°u trá»¯ vÃ  truyá»n táº£i. ğŸ”— VÃ­ dá»¥:\nLÆ°u trá»¯ vÃ  quáº£n lÃ½ chá»©ng chá»‰ TLS cho má»™t cáº¥u trÃºc microservices.\nTÃ­ch há»£p vá»›i Kubernetes Ä‘á»ƒ cáº¥p bÃ­ máº­t Ä‘á»™ng cho Pod má»—i khi khá»Ÿi cháº¡y.\nTáº¡o máº­t kháº©u táº¡m thá»i cho cÆ¡ sá»Ÿ dá»¯ liá»‡u nháº±m giáº£m rá»§i ro bá»‹ lá»™ thÃ´ng tin.\nğŸ›  VÃ­ dá»¥ thá»±c táº¿: 1ï¸âƒ£ Cáº¥p máº­t kháº©u Ä‘á»™ng cho PostgreSQL báº±ng Vault\nGiáº£ sá»­ báº¡n cÃ³ má»™t cÆ¡ sá»Ÿ dá»¯ liá»‡u PostgreSQL vÃ  muá»‘n cáº¥p tÃ i khoáº£n táº¡m thá»i:\n1 vault write database/creds/postgres-role Lá»‡nh nÃ y sáº½ táº¡o má»™t tÃ i khoáº£n má»›i vá»›i thá»i gian tá»“n táº¡i giá»›i háº¡n.\n2ï¸âƒ£ Sá»­ dá»¥ng Vault Ä‘á»ƒ quáº£n lÃ½ khÃ³a API trong á»©ng dá»¥ng Node.js\nBáº¡n cÃ³ thá»ƒ truy xuáº¥t khÃ³a API tá»« Vault trong mÃ£ nguá»“n cá»§a mÃ¬nh:\n1 2 3 const { execSync } = require(\u0026#39;child_process\u0026#39;); const secret = execSync(\u0026#39;vault kv get -field=value secret/my-api-key\u0026#39;).toString(); console.log(`API Key: ${secret}`); ğŸ”— TÃ i nguyÃªn há»¯u Ã­ch:\nğŸŒ Trang chá»§ HashiCorp Vault ğŸ› ï¸ MÃ£ nguá»“n HashiCorp Vault trÃªn GitHub ğŸ¥ Giá»›i thiá»‡u HashiCorp Vault trong 180 giÃ¢y ğŸ¥ HÆ°á»›ng dáº«n HashiCorp Vault cho ngÆ°á»i má»›i báº¯t Ä‘áº§u â˜ï¸ CÃ´ng cá»¥ quáº£n lÃ½ khoÃ¡ bÃ­ máº­t trÃªn Cloud ğŸ”¥ AWS Secrets Manager Cung cáº¥p dá»‹ch vá»¥ lÆ°u trá»¯ vÃ  quáº£n lÃ½ bÃ­ máº­t an toÃ n trÃªn AWS vá»›i kháº£ nÄƒng tá»± Ä‘á»™ng quay vÃ²ng máº­t kháº©u vÃ  tÃ­ch há»£p vá»›i cÃ¡c dá»‹ch vá»¥ AWS khÃ¡c.\nğŸŒ Google Cloud Secret Manager Giáº£i phÃ¡p quáº£n lÃ½ bÃ­ máº­t trÃªn Google Cloud, cho phÃ©p tá»± Ä‘á»™ng xoay vÃ²ng máº­t kháº©u vÃ  kiá»ƒm soÃ¡t truy cáº­p dá»… dÃ ng.\nğŸ”· Azure Key Vault Dá»‹ch vá»¥ cá»§a Microsoft Azure giÃºp lÆ°u trá»¯ vÃ  quáº£n lÃ½ khÃ³a, máº­t kháº©u vÃ  chá»©ng chá»‰ sá»‘ an toÃ n.\nğŸ”— VÃ­ dá»¥:\nAWS Secrets Manager: LÆ°u trá»¯ API key cá»§a má»™t á»©ng dá»¥ng web, Ä‘áº£m báº£o API key khÃ´ng bá»‹ lá»™ trong mÃ£ nguá»“n.\nHashiCorp Vault: Quáº£n lÃ½ máº­t kháº©u truy cáº­p vÃ o cÆ¡ sá»Ÿ dá»¯ liá»‡u PostgreSQL.\nAzure Key Vault: LÆ°u trá»¯ vÃ  báº£o máº­t cÃ¡c khÃ³a mÃ£ hÃ³a cá»§a á»©ng dá»¥ng.\nğŸ›  VÃ­ dá»¥ thá»±c táº¿: 1ï¸âƒ£ Sá»­ dá»¥ng AWS Secrets Manager Ä‘á»ƒ quáº£n lÃ½ khÃ³a API\nGiáº£ sá»­ báº¡n cÃ³ má»™t á»©ng dá»¥ng web cáº§n truy cáº­p vÃ o dá»‹ch vá»¥ bÃªn thá»© ba thÃ´ng qua API key. Thay vÃ¬ lÆ°u trá»¯ khÃ³a API trong mÃ£ nguá»“n, báº¡n cÃ³ thá»ƒ lÆ°u trá»¯ nÃ³ trong AWS Secrets Manager vÃ  gá»i nÃ³ khi cáº§n:\n1 aws secretsmanager get-secret-value --secret-id my-api-key 2ï¸âƒ£ Táº¡o bÃ­ máº­t Ä‘á»™ng vá»›i HashiCorp Vault\nHashiCorp Vault cÃ³ thá»ƒ táº¡o máº­t kháº©u táº¡m thá»i cho cÆ¡ sá»Ÿ dá»¯ liá»‡u, giÃºp tÄƒng cÆ°á»ng báº£o máº­t. VÃ­ dá»¥, báº¡n cÃ³ thá»ƒ táº¡o má»™t tÃ i khoáº£n táº¡m thá»i cho PostgreSQL:\n1 vault write database/creds/my-role ğŸ”— TÃ i nguyÃªn há»¯u Ã­ch:\nğŸ“„ AWS Secrets Manager â€“ Dá»‹ch vá»¥ quáº£n lÃ½ bÃ­ máº­t cá»§a AWS ğŸ“„ Google Cloud Secret Manager â€“ Dá»‹ch vá»¥ quáº£n lÃ½ bÃ­ máº­t cá»§a Google Cloud ğŸ“„ Azure Key Vault â€“ Dá»‹ch vá»¥ quáº£n lÃ½ khÃ³a vÃ  bÃ­ máº­t cá»§a Azure ğŸ¥ Demo AWS Secrets Manager â€“ HÆ°á»›ng dáº«n sá»­ dá»¥ng AWS Secrets Manager ğŸ¥ Google Cloud Secret Manager â€“ Giá»›i thiá»‡u Google Cloud Secret Manager ğŸ¥ Azure Key Vault vÃ  cÃ¡ch sá»­ dá»¥ng â€“ HÆ°á»›ng dáº«n sá»­ dá»¥ng Azure Key Vault ğŸ” Sealed Secrets Sealed Secrets lÃ  má»™t cÃ´ng cá»¥ cho Kubernetes giÃºp mÃ£ hÃ³a dá»¯ liá»‡u nháº¡y cáº£m thÃ nh cÃ¡c SealedSecrets, cÃ³ thá»ƒ lÆ°u trá»¯ an toÃ n ngay cáº£ trong mÃ´i trÆ°á»ng cÃ´ng khai nhÆ° GitHub.\nğŸ› ï¸ CÃ¡ch hoáº¡t Ä‘á»™ng: MÃ£ hÃ³a: NgÆ°á»i dÃ¹ng táº¡o má»™t SealedSecret tá»« Kubernetes Secret. LÆ°u trá»¯: SealedSecret cÃ³ thá»ƒ Ä‘Æ°á»£c commit vÃ o Git. Giáº£i mÃ£: Chá»‰ cÃ³ Kubernetes Controller trong cluster má»›i cÃ³ thá»ƒ giáº£i mÃ£ vÃ  khÃ´i phá»¥c thÃ nh Kubernetes Secret thÃ´ng thÆ°á»ng. ğŸ’¡ Äiá»ƒm ná»•i báº­t:\nSá»­ dá»¥ng mÃ£ hÃ³a báº¥t Ä‘á»‘i xá»©ng Ä‘áº£m báº£o chá»‰ controller cÃ³ thá»ƒ giáº£i mÃ£ dá»¯ liá»‡u. Há»— trá»£ GitOps giÃºp quáº£n lÃ½ bÃ­ máº­t trong repository Git an toÃ n. Dá»… dÃ ng tÃ­ch há»£p vá»›i Kubernetes Ä‘á»ƒ báº£o vá»‡ dá»¯ liá»‡u nháº¡y cáº£m. ğŸ”— TÃ i nguyÃªn há»¯u Ã­ch:\nğŸ› ï¸ Sealed Secrets trÃªn GitHub ğŸ“„ TÃ i liá»‡u Sealed Secrets ğŸ”„ TÃ­ch há»£p Secret Management vÃ o CI/CD CÃ¡c cÃ´ng cá»¥ CI/CD nhÆ° Azure DevOps, Travis CI vÃ  AWS CodePipeline há»— trá»£ quáº£n lÃ½ bÃ­ máº­t báº±ng cÃ¡ch tÃ­ch há»£p vá»›i cÃ¡c há»‡ thá»‘ng Secret Management Ä‘á»ƒ báº£o vá»‡ thÃ´ng tin nháº¡y cáº£m trong quÃ¡ trÃ¬nh triá»ƒn khai.\nğŸ—ï¸ Azure DevOps Azure DevOps cung cáº¥p Azure Key Vault Ä‘á»ƒ lÆ°u trá»¯ vÃ  quáº£n lÃ½ bÃ­ máº­t an toÃ n. CÃ¡c pipeline trong Azure DevOps cÃ³ thá»ƒ truy xuáº¥t bÃ­ máº­t tá»« Key Vault Ä‘á»ƒ sá»­ dá»¥ng trong quÃ¡ trÃ¬nh triá»ƒn khai.\nğŸš€ Travis CI Travis CI há»— trá»£ mÃ£ hÃ³a biáº¿n mÃ´i trÆ°á»ng, giÃºp báº£o vá»‡ khÃ³a API vÃ  thÃ´ng tin nháº¡y cáº£m trong quÃ¡ trÃ¬nh build.\nğŸŒ©ï¸ AWS CodePipeline AWS CodePipeline cÃ³ thá»ƒ tÃ­ch há»£p vá»›i AWS Secrets Manager Ä‘á»ƒ truy xuáº¥t bÃ­ máº­t trong quÃ¡ trÃ¬nh triá»ƒn khai á»©ng dá»¥ng.\nğŸ¯ Káº¿t luáº­n Quáº£n lÃ½ bÃ­ máº­t Ä‘Ã³ng vai trÃ² quan trá»ng trong báº£o máº­t há»‡ thá»‘ng hiá»‡n Ä‘áº¡i. Viá»‡c sá»­ dá»¥ng cÃ¡c cÃ´ng cá»¥ nhÆ° HashiCorp Vault, AWS Secrets Manager, Google Cloud Secret Manager, Azure Key Vault, Sealed Secrets, Azure DevOps, Travis CI vÃ  AWS CodePipeline giÃºp Ä‘áº£m báº£o an toÃ n cho thÃ´ng tin nháº¡y cáº£m, há»— trá»£ triá»ƒn khai DevOps an toÃ n vÃ  tuÃ¢n thá»§ cÃ¡c tiÃªu chuáº©n báº£o máº­t.\nğŸ‘‰ BÆ°á»›c tiáº¿p theo: GiÃ¡m sÃ¡t háº¡ táº§ng Infrastructure Monitoring quÃ¡ trÃ¬nh theo dÃµi vÃ  phÃ¢n tÃ­ch hiá»‡u suáº¥t, tÃ­nh sáºµn sÃ ng vÃ  tráº¡ng thÃ¡i cá»§a cÃ¡c thÃ nh pháº§n háº¡ táº§ng cÃ´ng nghá»‡ thÃ´ng tin nhÆ° mÃ¡y chá»§, máº¡ng, lÆ°u trá»¯, cÆ¡ sá»Ÿ dá»¯ liá»‡u vÃ  dá»‹ch vá»¥ Ä‘iá»‡n toÃ¡n Ä‘Ã¡m mÃ¢y, giÃºp phÃ¡t hiá»‡n sá»›m sá»± cá»‘, tá»‘i Æ°u hÃ³a tÃ i nguyÃªn vÃ  Ä‘áº£m báº£o há»‡ thá»‘ng hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh. ğŸš€\n","date":"2025-02-24T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/devops/devops-step-fourteen.webp","permalink":"https://tech.nguuyen.io.vn/posts/devops/devops-step-fourteen/","title":"Quáº£n lÃ½ khoÃ¡ bÃ­ máº­t (Secret Management)ğŸ”’"},{"content":"ğŸ” Quáº£n lÃ½ logs lÃ  gÃ¬? Quáº£n lÃ½ logs lÃ  quÃ¡ trÃ¬nh thu tháº­p, tá»•ng há»£p, phÃ¢n tÃ­ch, lÆ°u trá»¯ vÃ  truy xuáº¥t logs tá»« cÃ¡c á»©ng dá»¥ng vÃ  há»‡ thá»‘ng háº¡ táº§ng. Logs chá»©a thÃ´ng tin quan trá»ng vá» hoáº¡t Ä‘á»™ng cá»§a há»‡ thá»‘ng, giÃºp phÃ¡t hiá»‡n sá»± cá»‘, tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t vÃ  Ä‘áº£m báº£o tuÃ¢n thá»§ báº£o máº­t.\nğŸš€ CÃ¡c cÃ´ng cá»¥ quáº£n lÃ½ logs phá»• biáº¿n Elastic Stack (ELK Stack) ğŸ“ Giá»›i thiá»‡u: Elastic Stack, trÆ°á»›c Ä‘Ã¢y gá»i lÃ  ELK Stack, bao gá»“m Elasticsearch (cÃ´ng cá»¥ tÃ¬m kiáº¿m vÃ  phÃ¢n tÃ­ch), Logstash (xá»­ lÃ½ dá»¯ liá»‡u), Kibana (trá»±c quan hÃ³a) vÃ  Beats (thu tháº­p dá»¯ liá»‡u). ÄÃ¢y lÃ  giáº£i phÃ¡p phá»• biáº¿n Ä‘á»ƒ quáº£n lÃ½ logs vá»›i kháº£ nÄƒng má»Ÿ rá»™ng cao.\nğŸ”¹ TÃ­nh nÄƒng ná»•i báº­t:\nTÃ¬m kiáº¿m vÃ  phÃ¢n tÃ­ch logs theo thá»i gian thá»±c. Há»— trá»£ nhiá»u Ä‘á»‹nh dáº¡ng dá»¯ liá»‡u khÃ¡c nhau. Kháº£ nÄƒng má»Ÿ rá»™ng tá»‘t vá»›i mÃ´i trÆ°á»ng doanh nghiá»‡p. Cung cáº¥p giao diá»‡n trá»±c quan vá»›i Kibana. Sá»­ dá»¥ng Elastic Stack Ä‘á»ƒ thu tháº­p logs tá»« cÃ¡c mÃ¡y chá»§ web, phÃ¢n tÃ­ch lá»—i vÃ  táº¡o dashboard giÃ¡m sÃ¡t lÆ°u lÆ°á»£ng truy cáº­p.\nğŸ“š TÃ i nguyÃªn há»¯u Ã­ch:\nğŸ”—Trang chá»§ Elastic Stack ğŸ¥Tá»•ng quan vá» Elastic Stack Loki ğŸ“ Giá»›i thiá»‡u: Loki lÃ  há»‡ thá»‘ng thu tháº­p logs do Grafana Labs phÃ¡t triá»ƒn, tá»‘i Æ°u cho Kubernetes vÃ  container. Loki khÃ´ng lÆ°u trá»¯ toÃ n bá»™ logs mÃ  chá»‰ láº­p chá»‰ má»¥c metadata, giÃºp tiáº¿t kiá»‡m tÃ i nguyÃªn.\nğŸ”¹ TÃ­nh nÄƒng ná»•i báº­t:\nTÃ­ch há»£p cháº·t cháº½ vá»›i Grafana. Sá»­ dá»¥ng LogQL, ngÃ´n ngá»¯ truy váº¥n tÆ°Æ¡ng tá»± PromQL. Tá»‘i Æ°u cho mÃ´i trÆ°á»ng Kubernetes vÃ  container. Tiáº¿t kiá»‡m tÃ i nguyÃªn so vá»›i cÃ¡c giáº£i phÃ¡p khÃ¡c. Sá»­ dá»¥ng Loki Ä‘á»ƒ theo dÃµi logs tá»« cÃ¡c container trong Kubernetes, giÃºp phÃ¡t hiá»‡n lá»—i á»©ng dá»¥ng nhanh chÃ³ng.\nğŸ“š TÃ i nguyÃªn há»¯u Ã­ch:\nğŸ”—Trang chá»§ Loki ğŸ“–TÃ i liá»‡u Loki Graylog ğŸ“ Giá»›i thiá»‡u: Graylog lÃ  ná»n táº£ng quáº£n lÃ½ logs mÃ£ nguá»“n má»Ÿ, há»— trá»£ thu tháº­p, lÆ°u trá»¯ vÃ  phÃ¢n tÃ­ch logs theo thá»i gian thá»±c. Há»‡ thá»‘ng nÃ y cung cáº¥p giao diá»‡n web thÃ¢n thiá»‡n vÃ  há»— trá»£ nhiá»u loáº¡i dá»¯ liá»‡u logs khÃ¡c nhau.\nğŸ”¹ TÃ­nh nÄƒng ná»•i báº­t:\nHá»— trá»£ nhiá»u giao thá»©c thu tháº­p logs nhÆ° Syslog, GELF. Giao diá»‡n tÃ¬m kiáº¿m máº¡nh máº½. TÃ­ch há»£p tÃ­nh nÄƒng cáº£nh bÃ¡o khi phÃ¡t hiá»‡n sá»± cá»‘. Há»— trá»£ truy váº¥n logs theo thá»i gian thá»±c. Sá»­ dá»¥ng Graylog Ä‘á»ƒ theo dÃµi logs tá»« cÃ¡c há»‡ thá»‘ng báº£o máº­t, giÃºp phÃ¡t hiá»‡n hÃ nh vi xÃ¢m nháº­p trÃ¡i phÃ©p.\nğŸ“š TÃ i nguyÃªn há»¯u Ã­ch:\nğŸ”—Trang chá»§ Graylog ğŸ¥HÆ°á»›ng dáº«n sá»­ dá»¥ng Graylog ğŸ”¥ VÃ­ dá»¥ vá» mÃ£ nguá»“n DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡ch gá»­i logs Ä‘áº¿n má»™t há»‡ thá»‘ng thu tháº­p logs báº±ng JavaScript:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 const winston = require(\u0026#39;winston\u0026#39;); const logger = winston.createLogger({ level: \u0026#39;info\u0026#39;, format: winston.format.json(), transports: [ new winston.transports.Console(), new winston.transports.File({ filename: \u0026#39;app.log\u0026#39; }) ] }); // Ghi log logger.info(\u0026#39;á»¨ng dá»¥ng Ä‘Ã£ khá»Ÿi Ä‘á»™ng thÃ nh cÃ´ng\u0026#39;); logger.warn(\u0026#39;Cáº£nh bÃ¡o: Dá»¯ liá»‡u Ä‘áº§u vÃ o khÃ´ng há»£p lá»‡\u0026#39;); logger.error(\u0026#39;Lá»—i: KhÃ´ng thá»ƒ káº¿t ná»‘i cÆ¡ sá»Ÿ dá»¯ liá»‡u\u0026#39;); âœ… Káº¿t luáº­n Quáº£n lÃ½ logs Ä‘Ã³ng vai trÃ² quan trá»ng trong viá»‡c giÃ¡m sÃ¡t há»‡ thá»‘ng vÃ  xá»­ lÃ½ sá»± cá»‘ nhanh chÃ³ng. CÃ¡c cÃ´ng cá»¥ nhÆ° Elastic Stack, Loki, vÃ  Graylog cung cáº¥p giáº£i phÃ¡p máº¡nh máº½ Ä‘á»ƒ thu tháº­p, phÃ¢n tÃ­ch vÃ  trá»±c quan hÃ³a logs. Viá»‡c lá»±a chá»n cÃ´ng cá»¥ phÃ¹ há»£p sáº½ giÃºp nÃ¢ng cao hiá»‡u quáº£ váº­n hÃ nh há»‡ thá»‘ng cá»§a báº¡n. ğŸš€\nğŸ‘‰ BÆ°á»›c tiáº¿p theo: TÃ¬m hiá»ƒu vá» Container Orchestration quÃ¡ trÃ¬nh tá»± Ä‘á»™ng quáº£n lÃ½, triá»ƒn khai, má»Ÿ rá»™ng vÃ  Ä‘iá»u phá»‘i cÃ¡c container trong mÃ´i trÆ°á»ng háº¡ táº§ng, giÃºp Ä‘áº£m báº£o tÃ­nh sáºµn sÃ ng, kháº£ nÄƒng má»Ÿ rá»™ng vÃ  tá»‘i Æ°u tÃ i nguyÃªn há»‡ thá»‘ng. CÃ¡c cÃ´ng cá»¥ phá»• biáº¿n cho Container Orchestration bao gá»“m Kubernetes, Docker Swarm vÃ  Apache Mesos.\n","date":"2025-02-24T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/devops/devops-step-sixteen.webp","permalink":"https://tech.nguuyen.io.vn/posts/devops/devops-step-sixteen/","title":"Quáº£n lÃ½ logs (Logs Management) ğŸ“œ"},{"content":"ğŸš€ Serverless lÃ  gÃ¬? Serverless lÃ  mÃ´ hÃ¬nh Ä‘iá»‡n toÃ¡n Ä‘Ã¡m mÃ¢y nÆ¡i nhÃ  cung cáº¥p dá»‹ch vá»¥ quáº£n lÃ½ hoÃ n toÃ n cÆ¡ sá»Ÿ háº¡ táº§ng, giÃºp láº­p trÃ¬nh viÃªn chá»‰ cáº§n táº­p trung vÃ o viáº¿t mÃ£. Há»‡ thá»‘ng sáº½ tá»± Ä‘á»™ng phÃ¢n bá»• tÃ i nguyÃªn theo nhu cáº§u vÃ  chá»‰ tÃ­nh phÃ­ dá»±a trÃªn tÃ i nguyÃªn thá»±c táº¿ sá»­ dá»¥ng. Kiáº¿n trÃºc serverless thÆ°á»ng Ä‘Æ°á»£c Ã¡p dá»¥ng cho cÃ¡c á»©ng dá»¥ng microservices, xá»­ lÃ½ sá»± kiá»‡n vÃ  giÃºp giáº£m thiá»ƒu chi phÃ­ váº­n hÃ nh.\nğŸ“– TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu:\nğŸ“„ Serverless lÃ  gÃ¬? ğŸ¥ Giá»›i thiá»‡u vá» Serverless ğŸŒ BÃ i viáº¿t hay vá» Serverless âš¡ AWS Lambda AWS Lambda lÃ  má»™t dá»‹ch vá»¥ serverless cá»§a AWS, cho phÃ©p cháº¡y mÃ£ mÃ  khÃ´ng cáº§n quáº£n lÃ½ mÃ¡y chá»§. Lambda tá»± Ä‘á»™ng má»Ÿ rá»™ng theo nhu cáº§u, há»— trá»£ nhiá»u ngÃ´n ngá»¯ láº­p trÃ¬nh vÃ  dá»… dÃ ng tÃ­ch há»£p vá»›i cÃ¡c dá»‹ch vá»¥ khÃ¡c cá»§a AWS. NÃ³ phÃ¹ há»£p vá»›i xá»­ lÃ½ dá»¯ liá»‡u, tá»± Ä‘á»™ng hÃ³a tÃ¡c vá»¥, xÃ¢y dá»±ng microservices.\nğŸ–¥ï¸ VÃ­ dá»¥: Triá»ƒn khai má»™t function trÃªn AWS Lambda\n1 2 3 4 5 6 import json def lambda_handler(event, context): return { \u0026#39;statusCode\u0026#39;: 200, \u0026#39;body\u0026#39;: json.dumps(\u0026#39;Hello from AWS Lambda!\u0026#39;) } ğŸ“– TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu:\nğŸ”— Giá»›i thiá»‡u AWS Lambda ğŸ¥ HÆ°á»›ng dáº«n AWS Lambda tá»« A-Z ğŸŒ BÃ i viáº¿t hay vá» AWS Lambda ğŸŒ Cloudflare Cloudflare lÃ  má»™t cÃ´ng ty cung cáº¥p dá»‹ch vá»¥ CDN, báº£o máº­t, tá»‘i Æ°u hiá»‡u suáº¥t cho website. Cloudflare Ä‘Ã³ng vai trÃ² lÃ  proxy ngÆ°á»£c, giÃºp tÄƒng tá»‘c táº£i trang vÃ  báº£o vá»‡ website khá»i cÃ¡c cuá»™c táº¥n cÃ´ng. CÃ´ng ty Ä‘Æ°á»£c thÃ nh láº­p nÄƒm 2009 vÃ  lÃªn sÃ n chá»©ng khoÃ¡n vÃ o nÄƒm 2019.\nğŸ“– TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu:\nğŸ”— Trang chá»§ Cloudflare ğŸ¥ Giá»›i thiá»‡u vá» Cloudflare ğŸŒ BÃ i viáº¿t hay vá» Cloudflare ğŸŒ Vercel Vercel lÃ  ná»n táº£ng triá»ƒn khai frontend giÃºp Ä‘Æ°a cÃ¡c á»©ng dá»¥ng web lÃªn cloud má»™t cÃ¡ch nhanh chÃ³ng. NÃ³ há»— trá»£ React, Next.js, Vue, Angular, tÃ­ch há»£p vá»›i GitHub, vÃ  cho phÃ©p triá»ƒn khai chá»‰ vá»›i má»™t lá»‡nh push.\nğŸ“– TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu:\nğŸ”— Trang chá»§ Vercel ğŸ“– TÃ i liá»‡u chÃ­nh thá»©c Vercel ğŸ¥ HÆ°á»›ng dáº«n sá»­ dá»¥ng Vercel ğŸŒ BÃ i viáº¿t hay vá» Vercel ğŸ“Œ Káº¿t Luáº­n Serverless giÃºp tá»± Ä‘á»™ng hÃ³a triá»ƒn khai, giáº£m chi phÃ­, dá»… dÃ ng má»Ÿ rá»™ng. CÃ¡c ná»n táº£ng phá»• biáº¿n:\nAWS Lambda: Xá»­ lÃ½ sá»± kiá»‡n khÃ´ng cáº§n mÃ¡y chá»§. Cloudflare: CDN vÃ  báº£o máº­t website. Vercel: Triá»ƒn khai frontend nhanh chÃ³ng. Viá»‡c lá»±a chá»n ná»n táº£ng phá»¥ thuá»™c vÃ o nhu cáº§u, cÃ´ng nghá»‡ vÃ  chi phÃ­ cá»§a báº¡n. ğŸš€\nğŸ‘‰ BÆ°á»›c tiáº¿p theo: TÃ¬m hiá»ƒu vá» Provisioning quÃ¡ trÃ¬nh cung cáº¥p vÃ  cáº¥u hÃ¬nh tÃ i nguyÃªn (mÃ¡y chá»§, máº¡ng, lÆ°u trá»¯, tÃ i khoáº£n) Ä‘á»ƒ há»‡ thá»‘ng hoáº·c á»©ng dá»¥ng cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng hiá»‡u quáº£.\n","date":"2025-02-24T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/devops/devops-step-ten.webp","permalink":"https://tech.nguuyen.io.vn/posts/devops/devops-step-ten/","title":"Serverless vÃ  cÃ¡c ná»n táº£ng liÃªn quan â˜ï¸"},{"content":"Thiáº¿t láº­p cÃ¡c thÃ nh pháº§n máº¡ng quan trá»ng BÃ i viáº¿t nÃ y sáº½ giÃºp báº¡n biáº¿t cÃ¡c thÃ nh pháº§n máº¡ng quan trá»ng:\nğŸ”¹ Forward Proxy\nğŸ”¹ Reverse Proxy\nğŸ”¹ Load Balancer\nğŸ”¹ Firewall\nğŸ”¹ Caching Server\nğŸ”¹ Web Server\nâš–ï¸ Load Balancer Load Balancer hoáº¡t Ä‘á»™ng nhÆ° má»™t \u0026ldquo;cáº£nh sÃ¡t giao thÃ´ng\u0026rdquo; Ä‘á»©ng trÆ°á»›c cÃ¡c mÃ¡y chá»§ vÃ  Ä‘iá»u hÆ°á»›ng yÃªu cáº§u tá»« khÃ¡ch hÃ ng Ä‘áº¿n cÃ¡c mÃ¡y chá»§ phÃ¹ há»£p. Äiá»u nÃ y giÃºp tá»‘i Æ°u hÃ³a tá»‘c Ä‘á»™, táº­n dá»¥ng tÃ i nguyÃªn hiá»‡u quáº£ vÃ  trÃ¡nh tÃ¬nh tráº¡ng quÃ¡ táº£i.\nğŸ”¹ Náº¿u má»™t mÃ¡y chá»§ bá»‹ lá»—i, Load Balancer sáº½ chuyá»ƒn hÆ°á»›ng lÆ°u lÆ°á»£ng sang cÃ¡c mÃ¡y chá»§ cÃ²n láº¡i.\nğŸ”¹ CÃ³ thá»ƒ triá»ƒn khai vá»›i cÃ¡c thuáº­t toÃ¡n nhÆ° Round Robin, Least Connections, IP Hash\u0026hellip;\nğŸ” VÃ­ dá»¥ cáº¥u hÃ¬nh Load Balancer vá»›i Nginx: 1 2 3 4 5 6 7 8 9 10 11 upstream backend_servers { server backend1.example.com; server backend2.example.com; } server { listen 80; location / { proxy_pass http://backend_servers; } } ğŸ“š Tham kháº£o thÃªm:\nğŸ“„ Load Balancing lÃ  gÃ¬?\nğŸ“„ CÃ¡c thuáº­t toÃ¡n Load Balancing\nğŸ“„ Nginx Reverse Proxy \u0026amp; Load Balancing\nğŸ¥ Video: Load Balancer hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o?\nğŸ” Forward Proxy Forward Proxy lÃ  má»™t mÃ¡y chá»§ trung gian Ä‘á»©ng giá»¯a client vÃ  internet, chuyá»ƒn tiáº¿p yÃªu cáº§u tá»« client Ä‘áº¿n server Ä‘Ã­ch. NÃ³ giÃºp áº©n danh, báº£o máº­t, kiá»ƒm soÃ¡t truy cáº­p vÃ  caching ná»™i dung.\nğŸ”¹ ÄÆ°á»£c sá»­ dá»¥ng phá»• biáº¿n trong cÃ¡c máº¡ng doanh nghiá»‡p Ä‘á»ƒ giÃ¡m sÃ¡t vÃ  kiá»ƒm soÃ¡t truy cáº­p.\nğŸ”¹ Há»— trá»£ vÆ°á»£t qua kiá»ƒm duyá»‡t vÃ  háº¡n cháº¿ Ä‘á»‹a lÃ½.\nğŸ” VÃ­ dá»¥ cáº¥u hÃ¬nh Forward Proxy vá»›i Squid: 1 2 3 4 5 6 7 8 9 10 11 apt update \u0026amp;\u0026amp; apt install squid -y # Chá»‰nh sá»­a file cáº¥u hÃ¬nh nano /etc/squid/squid.conf # ThÃªm cáº¥u hÃ¬nh Ä‘Æ¡n giáº£n http_access allow all http_port 3128 # Khá»Ÿi Ä‘á»™ng láº¡i dá»‹ch vá»¥ systemctl restart squid ğŸ“š Tham kháº£o thÃªm:\nğŸ“„ Forward Proxy lÃ  gÃ¬?\nğŸ“„ So sÃ¡nh Forward Proxy vÃ  Reverse Proxy\nğŸ¥ Video: Proxy hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o?\nğŸ”„ Reverse Proxy Reverse Proxy lÃ  má»™t mÃ¡y chá»§ trung gian nháº­n yÃªu cáº§u tá»« client vÃ  chuyá»ƒn tiáº¿p Ä‘áº¿n mÃ¡y chá»§ backend thÃ­ch há»£p. NÃ³ giÃºp cÃ¢n báº±ng táº£i, caching, báº£o máº­t vÃ  SSL termination.\nğŸ”¹ GiÃºp che giáº¥u thÃ´ng tin cá»§a mÃ¡y chá»§ backend Ä‘á»ƒ tÄƒng cÆ°á»ng báº£o máº­t.\nğŸ”¹ Há»— trá»£ phÃ¢n phá»‘i lÆ°u lÆ°á»£ng vÃ  tá»‘i Æ°u hiá»‡u suáº¥t á»©ng dá»¥ng.\nğŸ” VÃ­ dá»¥ cáº¥u hÃ¬nh Reverse Proxy vá»›i Nginx: 1 2 3 4 5 6 7 8 9 10 server { listen 80; server_name example.com; location / { proxy_pass http://backend_server; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; } } ğŸ“š Tham kháº£o thÃªm:\nğŸ“„ Reverse Proxy lÃ  gÃ¬?\nğŸ“„ HÆ°á»›ng dáº«n Nginx Reverse Proxy\nğŸ¥ Video: Reverse Proxy vÃ  á»©ng dá»¥ng thá»±c táº¿\nğŸ”¥ Firewall Firewall lÃ  má»™t thiáº¿t bá»‹ báº£o máº­t máº¡ng giÃ¡m sÃ¡t vÃ  lá»c lÆ°u lÆ°á»£ng vÃ o/ra dá»±a trÃªn chÃ­nh sÃ¡ch báº£o máº­t cá»§a tá»• chá»©c.\nğŸ”¹ NgÄƒn cháº·n truy cáº­p trÃ¡i phÃ©p vÃ o há»‡ thá»‘ng ná»™i bá»™.\nğŸ”¹ Há»— trá»£ cÃ¡c quy táº¯c kiá»ƒm soÃ¡t lÆ°u lÆ°á»£ng dá»¯ liá»‡u.\nğŸ” VÃ­ dá»¥ cáº¥u hÃ¬nh Firewall vá»›i UFW (Uncomplicated Firewall): 1 2 3 4 5 6 7 8 9 10 11 # CÃ i Ä‘áº·t UFW apt install ufw -y # Má»Ÿ cá»•ng SSH ufw allow 22/tcp # Cháº·n táº¥t cáº£ káº¿t ná»‘i khÃ¡c ufw default deny incoming # KÃ­ch hoáº¡t UFW ufw enable ğŸ“š Tham kháº£o thÃªm:\nğŸ“„ Firewall lÃ  gÃ¬?\nğŸ“„ CÃ¡c loáº¡i Firewall phá»• biáº¿n\nğŸ¥ Video: Giá»›i thiá»‡u vá» Firewall\nğŸŒ Nginx Nginx lÃ  má»™t mÃ¡y chá»§ web mÃ£ nguá»“n má»Ÿ, Ä‘Æ°á»£c sá»­ dá»¥ng rá»™ng rÃ£i nhá» kháº£ nÄƒng xá»­ lÃ½ nhiá»u káº¿t ná»‘i Ä‘á»“ng thá»i vá»›i hiá»‡u suáº¥t cao.\nğŸ”¹ Há»— trá»£ web server, reverse proxy, load balancing, caching.\nğŸ”¹ ThÃ­ch há»£p cho há»‡ thá»‘ng microservices vÃ  container.\nğŸ” VÃ­ dá»¥ cáº¥u hÃ¬nh Nginx Ä‘Æ¡n giáº£n: 1 2 3 4 5 6 server { listen 80; server_name example.com; root /var/www/html; index index.html; } ğŸ“š Tham kháº£o thÃªm:\nğŸ“„ HÆ°á»›ng dáº«n cÃ i Ä‘áº·t Nginx trÃªn Ubuntu\nğŸ¥ Video: Nginx trong 100 giÃ¢y\nğŸ›ï¸ Apache Apache lÃ  má»™t trong nhá»¯ng mÃ¡y chá»§ web phá»• biáº¿n nháº¥t, há»— trá»£ nhiá»u module má»Ÿ rá»™ng vÃ  tÆ°Æ¡ng thÃ­ch vá»›i nhiá»u há»‡ Ä‘iá»u hÃ nh.\nğŸ”¹ Dá»… dÃ ng cáº¥u hÃ¬nh vá»›i file .conf.\nğŸ”¹ Há»— trá»£ SSL/TLS, xÃ¡c thá»±c ngÆ°á»i dÃ¹ng, URL rewriting\u0026hellip;\nğŸ” VÃ­ dá»¥ cáº¥u hÃ¬nh Apache Ä‘Æ¡n giáº£n: 1 2 3 4 5 6 7 8 \u0026lt;VirtualHost *:80\u0026gt; ServerName example.com DocumentRoot /var/www/html \u0026lt;Directory /var/www/html\u0026gt; AllowOverride All Require all granted \u0026lt;/Directory\u0026gt; \u0026lt;/VirtualHost\u0026gt; ğŸ“š Tham kháº£o thÃªm:\nğŸ“„ Trang chá»§ Apache\nğŸ¥ Video: CÃ i Ä‘áº·t Apache trÃªn Ubuntu\nâœ… Káº¿t luáº­n ğŸ”¹ Load Balancer giÃºp phÃ¢n phá»‘i lÆ°u lÆ°á»£ng hiá»‡u quáº£, giáº£m táº£i cho mÃ¡y chá»§.\nğŸ”¹ Forward Proxy há»— trá»£ áº©n danh, caching vÃ  kiá»ƒm soÃ¡t truy cáº­p tá»« client.\nğŸ”¹ Reverse Proxy giÃºp tÄƒng cÆ°á»ng báº£o máº­t, caching vÃ  tá»‘i Æ°u há»‡ thá»‘ng backend.\nğŸ”¹ Firewall báº£o vá»‡ há»‡ thá»‘ng khá»i truy cáº­p trÃ¡i phÃ©p.\nğŸ”¹ Nginx \u0026amp; Apache lÃ  hai web server phá»• biáº¿n, phá»¥c vá»¥ ná»™i dung web vÃ  á»©ng dá»¥ng.\nBáº±ng cÃ¡ch triá»ƒn khai cÃ¡c thÃ nh pháº§n nÃ y, báº¡n cÃ³ thá»ƒ xÃ¢y dá»±ng má»™t há»‡ thá»‘ng máº¡ng máº¡nh máº½, báº£o máº­t vÃ  hiá»‡u quáº£. ğŸš€\nğŸ‘‰ BÆ°á»›c tiáº¿p theo: TÃ¬m hiá»ƒu vá» Networking Protocols táº­p há»£p cÃ¡c quy táº¯c vÃ  tiÃªu chuáº©n xÃ¡c Ä‘á»‹nh cÃ¡ch cÃ¡c thiáº¿t bá»‹ trong máº¡ng giao tiáº¿p vá»›i nhau. ChÃºng Ä‘áº£m báº£o dá»¯ liá»‡u Ä‘Æ°á»£c truyá»n táº£i chÃ­nh xÃ¡c, an toÃ n vÃ  hiá»‡u quáº£ giá»¯a cÃ¡c há»‡ thá»‘ng khÃ¡c nhau.\n","date":"2025-02-23T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/devops/devops-step-seven.webp","permalink":"https://tech.nguuyen.io.vn/posts/devops/devops-step-seven/","title":"Application Gateway ğŸŒ"},{"content":"ğŸ“¦ Containers, Docker vÃ  LXC Containers lÃ  mÃ´i trÆ°á»ng nháº¹, di Ä‘á»™ng vÃ  cÃ¡ch ly giÃºp Ä‘Ã³ng gÃ³i á»©ng dá»¥ng cÃ¹ng vá»›i táº¥t cáº£ cÃ¡c phá»¥ thuá»™c cá»§a chÃºng, Ä‘áº£m báº£o triá»ƒn khai Ä‘á»“ng nháº¥t trÃªn nhiá»u mÃ´i trÆ°á»ng khÃ¡c nhau. CÃ´ng nghá»‡ container giÃºp Ä‘Æ¡n giáº£n hÃ³a quÃ¡ trÃ¬nh triá»ƒn khai á»©ng dá»¥ng, há»— trá»£ mÃ´ hÃ¬nh kiáº¿n trÃºc microservices, vÃ  tá»‘i Æ°u hÃ³a tÃ i nguyÃªn há»‡ thá»‘ng.\nğŸ—ï¸ Containers lÃ  gÃ¬? Containers lÃ  má»™t phÆ°Æ¡ng phÃ¡p áº£o hÃ³a á»Ÿ cáº¥p Ä‘á»™ há»‡ Ä‘iá»u hÃ nh, cho phÃ©p cháº¡y nhiá»u á»©ng dá»¥ng cÃ´ láº­p trÃªn cÃ¹ng má»™t kernel. KhÃ´ng giá»‘ng nhÆ° mÃ¡y áº£o (VM) yÃªu cáº§u há»‡ Ä‘iá»u hÃ nh riÃªng biá»‡t cho má»—i mÃ´i trÆ°á»ng, container chá»‰ sá»­ dá»¥ng nhÃ¢n há»‡ Ä‘iá»u hÃ nh cá»§a mÃ¡y chá»§, giÃºp giáº£m chi phÃ­ tÃ i nguyÃªn vÃ  tÄƒng hiá»‡u suáº¥t.\nğŸ¯ Äáº·c Ä‘iá»ƒm chÃ­nh cá»§a Containers ğŸ‹ï¸ Nháº¹: Chia sáº» kernel vá»›i há»‡ Ä‘iá»u hÃ nh mÃ¡y chá»§, giáº£m bá»›t tÃ i nguyÃªn tiÃªu thá»¥. ğŸš€ Di Ä‘á»™ng: Cháº¡y nháº¥t quÃ¡n trÃªn nhiá»u ná»n táº£ng tá»« mÃ¡y cÃ¡ nhÃ¢n Ä‘áº¿n cloud. ğŸ”’ CÃ´ láº­p: á»¨ng dá»¥ng vÃ  thÆ° viá»‡n Ä‘Æ°á»£c Ä‘Ã³ng gÃ³i riÃªng biá»‡t. ğŸ“ˆ Hiá»‡u suáº¥t cao: KhÃ´ng cáº§n khá»Ÿi Ä‘á»™ng há»‡ Ä‘iá»u hÃ nh riÃªng biá»‡t nhÆ° mÃ¡y áº£o. ğŸ³ Docker - Ná»n táº£ng container phá»• biáº¿n nháº¥t Docker lÃ  má»™t ná»n táº£ng mÃ£ nguá»“n má»Ÿ giÃºp tá»± Ä‘á»™ng hÃ³a viá»‡c triá»ƒn khai á»©ng dá»¥ng báº±ng cÃ¡ch sá»­ dá»¥ng cÃ´ng nghá»‡ container. Docker giÃºp Ä‘Ã³ng gÃ³i á»©ng dá»¥ng vá»›i toÃ n bá»™ thÆ° viá»‡n vÃ  cáº¥u hÃ¬nh cáº§n thiáº¿t Ä‘á»ƒ cháº¡y trÃªn nhiá»u mÃ´i trÆ°á»ng khÃ¡c nhau.\nâœ¨ TÃ­nh nÄƒng ná»•i báº­t cá»§a Docker ğŸ“¦ Docker Engine: CÃ´ng cá»¥ Ä‘á»ƒ táº¡o vÃ  cháº¡y container. ğŸ”„ Docker Compose: Quáº£n lÃ½ nhiá»u container trong má»™t á»©ng dá»¥ng. ğŸ—ï¸ Docker Hub: Kho lÆ°u trá»¯ vÃ  chia sáº» hÃ¬nh áº£nh container. ğŸ” VÃ­ dá»¥ sá»­ dá»¥ng Docker: 1 docker run -d -p 80:80 nginx Lá»‡nh trÃªn sáº½ cháº¡y má»™t container Nginx trÃªn cá»•ng 80.\nğŸ“š TÃ i nguyÃªn há»¯u Ã­ch:\nğŸ“– TÃ i liá»‡u Docker ğŸ¥ Docker trong 5 phÃºt ğŸ–¥ï¸ LXC - Linux Containers LXC (Linux Containers) lÃ  má»™t phÆ°Æ¡ng phÃ¡p áº£o hÃ³a cáº¥p há»‡ Ä‘iá»u hÃ nh cho phÃ©p cháº¡y nhiá»u há»‡ thá»‘ng Linux cÃ´ láº­p trÃªn cÃ¹ng má»™t kernel.\nğŸ› ï¸ Äáº·c Ä‘iá»ƒm cá»§a LXC: ğŸ—ï¸ Táº¡o mÃ´i trÆ°á»ng gáº§n giá»‘ng mÃ¡y áº£o nhÆ°ng hiá»‡u suáº¥t cao hÆ¡n. âš¡ Khá»Ÿi Ä‘á»™ng nhanh hÆ¡n so vá»›i VM truyá»n thá»‘ng. ğŸ” Sá»­ dá»¥ng cÃ¡c cÃ´ng nghá»‡ cá»§a Linux nhÆ° cgroups vÃ  namespaces. ğŸ“Œ VÃ­ dá»¥ táº¡o má»™t container LXC: 1 2 lxc-create -n my-container -t ubuntu lxc-start -n my-container -d ğŸ“š TÃ i nguyÃªn há»¯u Ã­ch:\nğŸ“– Trang chá»§ LXC ğŸ¥ HÆ°á»›ng dáº«n sá»­ dá»¥ng LXC ğŸ¯ Káº¿t luáº­n Containers giÃºp triá»ƒn khai á»©ng dá»¥ng nhanh chÃ³ng, hiá»‡u quáº£ vÃ  tiáº¿t kiá»‡m tÃ i nguyÃªn. Docker lÃ  lá»±a chá»n phá»• biáº¿n cho phÃ¡t triá»ƒn á»©ng dá»¥ng, trong khi LXC phÃ¹ há»£p hÆ¡n cho mÃ´ phá»ng há»‡ Ä‘iá»u hÃ nh Ä‘áº§y Ä‘á»§. HÃ£y chá»n cÃ´ng cá»¥ phÃ¹ há»£p vá»›i nhu cáº§u cá»§a báº¡n! ğŸš€\nğŸ‘‰ BÆ°á»›c tiáº¿p theo: TÃ¬m hiá»ƒu vá» Application Gateway má»™t dá»‹ch vá»¥ quáº£n lÃ½ traffic táº§ng á»©ng dá»¥ng giÃºp tá»‘i Æ°u hÃ³a, báº£o máº­t vÃ  kiá»ƒm soÃ¡t luá»“ng truy cáº­p giá»¯a client vÃ  backend. NÃ³ cÃ³ thá»ƒ Ä‘Ã³ng vai trÃ² nhÆ° má»™t reverse proxy, báº£o vá»‡ há»‡ thá»‘ng vÃ  Ä‘áº£m báº£o request Ä‘Æ°á»£c xá»­ lÃ½ Ä‘Ãºng cÃ¡ch.\n","date":"2025-02-23T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/devops/devops-step-six.webp","permalink":"https://tech.nguuyen.io.vn/posts/devops/devops-step-six/","title":"Containers, Docker vÃ  LXC ğŸ—ï¸"},{"content":"ğŸŒ Cloud Providers CÃ¡c nhÃ  cung cáº¥p dá»‹ch vá»¥ Ä‘Ã¡m mÃ¢y cung cáº¥p má»™t lá»›p API Ä‘á»ƒ trá»«u tÆ°á»£ng hÃ³a cÆ¡ sá»Ÿ háº¡ táº§ng, giÃºp triá»ƒn khai tÃ i nguyÃªn dá»±a trÃªn cÃ¡c tiÃªu chuáº©n báº£o máº­t vÃ  mÃ´ hÃ¬nh thanh toÃ¡n. DÃ¹ thá»±c táº¿ cÃ¡c dá»‹ch vá»¥ Ä‘Ã¡m mÃ¢y cháº¡y trÃªn cÃ¡c mÃ¡y chá»§ trong trung tÃ¢m dá»¯ liá»‡u, nhÆ°ng nhá» vÃ o cÃ¡c lá»›p trá»«u tÆ°á»£ng, chÃºng táº¡o cáº£m giÃ¡c nhÆ° Ä‘ang tÆ°Æ¡ng tÃ¡c vá»›i má»™t ná»n táº£ng duy nháº¥t. Kháº£ nÄƒng triá»ƒn khai, cáº¥u hÃ¬nh vÃ  báº£o máº­t tÃ i nguyÃªn nhanh chÃ³ng Ä‘Ã£ giÃºp cloud trá»Ÿ thÃ nh yáº¿u tá»‘ quan trá»ng trong thÃ nh cÃ´ng vÃ  sá»± phá»©c táº¡p cá»§a DevOps hiá»‡n Ä‘áº¡i.\nğŸ“– TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu:\nğŸ“„ Cloud Service Provider ğŸ“„ Cloud Providers lÃ  gÃ¬? ğŸŒ BÃ i viáº¿t hay vá» Cloud â˜ï¸ AWS (Amazon Web Services) AWS lÃ  ná»n táº£ng Ä‘iá»‡n toÃ¡n Ä‘Ã¡m mÃ¢y hÃ ng Ä‘áº§u tá»« nÄƒm 2011, vÆ°á»£t xa Azure vÃ  Google Cloud. AWS cung cáº¥p hÆ¡n 200 dá»‹ch vá»¥, hoáº¡t Ä‘á»™ng trÃªn quy mÃ´ toÃ n cáº§u. AWS mang Ä‘áº¿n giáº£i phÃ¡p tÃ­nh toÃ¡n linh hoáº¡t vÃ  tiáº¿t kiá»‡m chi phÃ­, bao gá»“m: sá»©c máº¡nh tÃ­nh toÃ¡n, lÆ°u trá»¯ dá»¯ liá»‡u, phÃ¢n phá»‘i ná»™i dung, v.v.\nğŸ–¥ï¸ VÃ­ dá»¥: Táº¡o má»™t EC2 instance báº±ng AWS CLI\n1 aws ec2 run-instances --image-id ami-12345678 --count 1 --instance-type t2.micro --key-name MyKeyPair --security-groups MySecurityGroup ğŸ“– TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu:\nğŸ¥ 100 giá» khÃ³a há»c AWS - 2024 ğŸ”— Trang chá»§ AWS ğŸ“„ HÆ°á»›ng dáº«n táº¡o tÃ i khoáº£n AWS ğŸŒ BÃ i viáº¿t hay vá» AWS ğŸ’  Microsoft Azure Azure lÃ  ná»n táº£ng Ä‘iá»‡n toÃ¡n Ä‘Ã¡m mÃ¢y cá»§a Microsoft, cung cáº¥p IaaS, PaaS, SaaS cÃ¹ng nhiá»u dá»‹ch vá»¥ nhÆ° phÃ¢n tÃ­ch, AI, mÃ¡y há»c, báº£o máº­t. Azure há»— trá»£ nhiá»u cÃ´ng cá»¥ vÃ  ngÃ´n ngá»¯ láº­p trÃ¬nh, giÃºp doanh nghiá»‡p phÃ¡t triá»ƒn nhanh chÃ³ng.\nğŸ–¥ï¸ VÃ­ dá»¥: Triá»ƒn khai á»©ng dá»¥ng trÃªn Azure App Service\n1 az webapp create --resource-group MyResourceGroup --plan MyAppServicePlan --name MyUniqueApp --runtime \u0026#34;PYTHON:3.8\u0026#34; ğŸ“– TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu:\nğŸ”— Trang chá»§ Azure ğŸ“– HÆ°á»›ng dáº«n vá» Microsoft Azure ğŸ¥ Chá»©ng chá»‰ Azure Fundamentals (AZ-900) ğŸŒ BÃ i viáº¿t hay vá» Azure â˜ï¸ Google Cloud Platform (GCP) Google Cloud cung cáº¥p hÆ¡n 150 dá»‹ch vá»¥, hoáº¡t Ä‘á»™ng trÃªn cÃ¹ng háº¡ táº§ng vá»›i cÃ¡c sáº£n pháº©m cá»§a Google nhÆ° Search, Gmail, YouTube. Dá»‹ch vá»¥ bao gá»“m: VMs, cÆ¡ sá»Ÿ dá»¯ liá»‡u, AI/ML, Kubernetes, v.v.\nğŸ–¥ï¸ VÃ­ dá»¥: Táº¡o má»™t VM trÃªn Google Cloud\n1 gcloud compute instances create my-instance --machine-type=e2-medium --image-project=debian-cloud --image-family=debian-11 ğŸ“– TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu:\nğŸ”— Trang chá»§ Google Cloud ğŸ“– 5 máº¹o Ä‘á»ƒ trá»Ÿ thÃ nh Google Cloud Certified ğŸ¥ KhÃ³a há»c Google Cloud Platform - 2023 ğŸŒ BÃ i viáº¿t hay vá» Google Cloud ğŸŒŠ DigitalOcean DigitalOcean lÃ  nhÃ  cung cáº¥p cÆ¡ sá»Ÿ háº¡ táº§ng Ä‘Ã¡m mÃ¢y táº­p trung vÃ o sá»± Ä‘Æ¡n giáº£n, chi phÃ­ tháº¥p, dá»… sá»­ dá»¥ng. DigitalOcean cung cáº¥p dá»‹ch vá»¥ nhÆ° mÃ¡y áº£o (Droplets), cÆ¡ sá»Ÿ dá»¯ liá»‡u, Kubernetes, lÆ°u trá»¯ Ä‘á»‘i tÆ°á»£ng, phÃ¹ há»£p vá»›i startup vÃ  developer.\nğŸ–¥ï¸ VÃ­ dá»¥: Táº¡o má»™t Droplet trÃªn DigitalOcean báº±ng API\n1 curl -X POST -H \u0026#34;Content-Type: application/json\u0026#34; -H \u0026#34;Authorization: Bearer YOUR_TOKEN\u0026#34; -d \u0026#39;{\u0026#34;name\u0026#34;:\u0026#34;example-droplet\u0026#34;,\u0026#34;region\u0026#34;:\u0026#34;nyc3\u0026#34;,\u0026#34;size\u0026#34;:\u0026#34;s-1vcpu-1gb\u0026#34;,\u0026#34;image\u0026#34;:\u0026#34;ubuntu-20-04-x64\u0026#34;}\u0026#39; \u0026#34;https://api.digitalocean.com/v2/droplets\u0026#34; ğŸ“– TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu:\nğŸ”— Trang chá»§ DigitalOcean ğŸ“„ Hacktoberfest cá»§a DigitalOcean ğŸ¥ HÆ°á»›ng dáº«n Kubernetes trÃªn DigitalOcean ğŸŒ BÃ i viáº¿t hay vá» DigitalOcean ğŸ“Œ Káº¿t Luáº­n CÃ¡c nhÃ  cung cáº¥p dá»‹ch vá»¥ cloud nhÆ° AWS, Azure, GCP, DigitalOcean cung cáº¥p giáº£i phÃ¡p linh hoáº¡t cho má»i nhu cáº§u mÃ¡y chá»§, lÆ°u trá»¯, AI, DevOps. Má»—i ná»n táº£ng cÃ³ Æ°u Ä‘iá»ƒm riÃªng:\nAWS: ToÃ n diá»‡n, nhiá»u dá»‹ch vá»¥ nháº¥t. Azure: TÃ­ch há»£p tá»‘t vá»›i há»‡ sinh thÃ¡i Microsoft. GCP: Tá»‘i Æ°u cho AI, dá»¯ liá»‡u lá»›n. DigitalOcean: ÄÆ¡n giáº£n, phÃ¹ há»£p vá»›i startup. Viá»‡c chá»n ná»n táº£ng phÃ¹ há»£p phá»¥ thuá»™c vÃ o má»¥c tiÃªu, ngÃ¢n sÃ¡ch, nhu cáº§u ká»¹ thuáº­t cá»§a báº¡n. ğŸš€\nğŸ‘‰ BÆ°á»›c tiáº¿p theo: TÃ¬m hiá»ƒu vá» Serverless mÃ´ hÃ¬nh Ä‘iá»‡n toÃ¡n Ä‘Ã¡m mÃ¢y cho phÃ©p cháº¡y á»©ng dá»¥ng mÃ  khÃ´ng cáº§n quáº£n lÃ½ mÃ¡y chá»§. CÃ¡c nhÃ  cung cáº¥p cloud tá»± Ä‘á»™ng phÃ¢n bá»• tÃ i nguyÃªn, má»Ÿ rá»™ng quy mÃ´ vÃ  tÃ­nh phÃ­ dá»±a trÃªn lÆ°á»£ng tÃ i nguyÃªn thá»±c táº¿ Ä‘Æ°á»£c sá»­ dá»¥ng, giÃºp tá»‘i Æ°u chi phÃ­ vÃ  Ä‘Æ¡n giáº£n hÃ³a triá»ƒn khai.\n","date":"2025-02-23T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/devops/devops-step-nine.webp","permalink":"https://tech.nguuyen.io.vn/posts/devops/devops-step-nine/","title":"Dá»‹ch vá»¥ Cloud ğŸŒ©ï¸"},{"content":"ğŸŒ Dá»‹ch vá»¥ lÆ°u trá»¯ mÃ£ nguá»“n (Repo Hosting Services) Khi lÃ m viá»‡c nhÃ³m, báº¡n cáº§n má»™t nÆ¡i lÆ°u trá»¯ mÃ£ nguá»“n tá»« xa Ä‘á»ƒ má»i ngÆ°á»i cÃ³ thá»ƒ truy cáº­p, táº¡o nhÃ¡nh riÃªng, cÅ©ng nhÆ° táº¡o hoáº·c xem xÃ©t cÃ¡c pull request. CÃ¡c dá»‹ch vá»¥ nÃ y thÆ°á»ng bao gá»“m theo dÃµi váº¥n Ä‘á» (issue tracking), Ä‘Ã¡nh giÃ¡ mÃ£ (code review) vÃ  tÃ­ch há»£p liÃªn tá»¥c (CI/CD). Má»™t sá»‘ lá»±a chá»n phá»• biáº¿n gá»“m GitHub, GitLab, Bitbucket vÃ  AWS CodeCommit.\nğŸ“š TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu thÃªm:\nğŸ”— GitHub ğŸ”— GitLab ğŸ”— BitBucket ğŸ¥ GitHub vs GitLab vs Bitbucket - NÃªn chá»n cÃ¡i nÃ o? ğŸ™ GitHub GitHub lÃ  má»™t ná»n táº£ng quáº£n lÃ½ mÃ£ nguá»“n dá»±a trÃªn Git, cung cáº¥p dá»‹ch vá»¥ lÆ°u trá»¯ kho mÃ£ trÃªn ná»n táº£ng Ä‘Ã¡m mÃ¢y. NÃ³ há»— trá»£ cÃ¡c tÃ­nh nÄƒng nhÆ° theo dÃµi lá»—i, quáº£n lÃ½ nhiá»‡m vá»¥, vÃ  wiki dá»± Ã¡n. GitHub cho phÃ©p Ä‘Ã¡nh giÃ¡ mÃ£ qua pull request, theo dÃµi váº¥n Ä‘á» vÃ  há»— trá»£ láº­p trÃ¬nh cá»™ng tÃ¡c vá»›i cÃ¡c tÃ­nh nÄƒng nhÆ° fork vÃ  star.\nGitHub há»— trá»£ cáº£ kho mÃ£ cÃ´ng khai vÃ  riÃªng tÆ°, giÃºp nÃ³ trá»Ÿ thÃ nh lá»±a chá»n phá»• biáº¿n cho cáº£ dá»± Ã¡n mÃ£ nguá»“n má»Ÿ vÃ  phÃ¡t triá»ƒn cÃ¡ nhÃ¢n. Há»‡ sinh thÃ¡i GitHub bao gá»“m:\nğŸš€ GitHub Actions: Tá»± Ä‘á»™ng hÃ³a quy trÃ¬nh lÃ m viá»‡c. ğŸ“¦ GitHub Packages: Quáº£n lÃ½ gÃ³i pháº§n má»m. ğŸŒ GitHub Pages: LÆ°u trá»¯ trang web tÄ©nh miá»…n phÃ­. ğŸ“š TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu thÃªm:\nğŸ—ºï¸ Lá»™ trÃ¬nh Git \u0026amp; GitHub ğŸ”— Trang chá»§ GitHub ğŸ“– CÃ¡ch sá»­ dá»¥ng Git trong nhÃ³m phÃ¡t triá»ƒn chuyÃªn nghiá»‡p ğŸ¥ GitHub lÃ  gÃ¬? ğŸ“° BÃ i viáº¿t hay vá» GitHub ğŸ¦Š GitLab GitLab lÃ  má»™t cÃ´ng cá»¥ DevOps toÃ n diá»‡n, cung cáº¥p quáº£n lÃ½ kho mÃ£ Git kÃ¨m theo wiki, theo dÃµi váº¥n Ä‘á» vÃ  cÃ¡c tÃ­nh nÄƒng CI/CD tÃ­ch há»£p sáºµn. ÄÃ¢y lÃ  má»™t ná»n táº£ng DevOps hoÃ n chá»‰nh, bao gá»“m táº¥t cáº£ cÃ¡c giai Ä‘oáº¡n tá»« láº­p káº¿ hoáº¡ch, phÃ¡t triá»ƒn, kiá»ƒm thá»­ Ä‘áº¿n triá»ƒn khai vÃ  giÃ¡m sÃ¡t.\nGitLab há»— trá»£ cáº£ phiÃªn báº£n Ä‘Ã¡m mÃ¢y vÃ  tá»± lÆ°u trá»¯, phÃ¹ há»£p vá»›i cÃ¡c tá»• chá»©c cÃ³ yÃªu cáº§u báº£o máº­t cao. Má»™t sá»‘ tÃ­nh nÄƒng ná»•i báº­t cá»§a GitLab gá»“m:\nğŸ”„ TÃ­ch há»£p CI/CD: Há»— trá»£ kiá»ƒm thá»­ vÃ  triá»ƒn khai tá»± Ä‘á»™ng. ğŸ“¦ Container \u0026amp; Package Registry: Quáº£n lÃ½ vÃ  lÆ°u trá»¯ gÃ³i pháº§n má»m. ğŸ” QuÃ©t báº£o máº­t mÃ£ nguá»“n: PhÃ¡t hiá»‡n lá»— há»•ng trong code. ğŸ“š TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu thÃªm:\nğŸ”— Trang chá»§ GitLab ğŸ“– TÃ i liá»‡u chÃ­nh thá»©c cá»§a GitLab ğŸ¥ GitLab lÃ  gÃ¬ vÃ  táº¡i sao nÃªn dÃ¹ng? ğŸ“° BÃ i viáº¿t hay vá» GitLab ğŸ—ï¸ Bitbucket Bitbucket lÃ  má»™t dá»‹ch vá»¥ lÆ°u trá»¯ kho mÃ£ nguá»“n cá»§a Atlassian, há»— trá»£ cáº£ Git vÃ  Mercurial. NÃ³ tÃ­ch há»£p cháº·t cháº½ vá»›i cÃ¡c cÃ´ng cá»¥ Atlassian khÃ¡c nhÆ° Jira vÃ  Trello, giÃºp quáº£n lÃ½ dá»± Ã¡n dá»… dÃ ng hÆ¡n. Bitbucket cung cáº¥p cáº£ phiÃªn báº£n Ä‘Ã¡m mÃ¢y vÃ  tá»± lÆ°u trá»¯.\nMá»™t sá»‘ tÃ­nh nÄƒng Ä‘Ã¡ng chÃº Ã½ cá»§a Bitbucket:\nğŸ” Code Review \u0026amp; Pull Requests: Há»— trá»£ Ä‘Ã¡nh giÃ¡ mÃ£. ğŸ”„ Bitbucket Pipelines: CI/CD tÃ­ch há»£p sáºµn. ğŸ“– Wiki \u0026amp; Issue Tracking: Quáº£n lÃ½ tÃ i liá»‡u vÃ  theo dÃµi váº¥n Ä‘á». ğŸ” Há»— trá»£ repo riÃªng tÆ° miá»…n phÃ­: PhÃ¹ há»£p vá»›i nhÃ³m nhá». ğŸ“š TÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu thÃªm:\nğŸ”— Trang chá»§ Bitbucket ğŸ“– Tá»•ng quan vá» Bitbucket ğŸ“š Giá»›i thiá»‡u vá» Git vÃ  Bitbucket ğŸ¥ HÆ°á»›ng dáº«n sá»­ dá»¥ng Bitbucket Cloud ğŸ“° BÃ i viáº¿t hay vá» Bitbucket ğŸ“Œ Káº¿t luáº­n Viá»‡c lá»±a chá»n dá»‹ch vá»¥ lÆ°u trá»¯ kho mÃ£ nguá»“n phá»¥ thuá»™c vÃ o nhu cáº§u cá»§a nhÃ³m phÃ¡t triá»ƒn. Náº¿u báº¡n cáº§n má»™t ná»n táº£ng phá»• biáº¿n vá»›i há»‡ sinh thÃ¡i rá»™ng lá»›n, GitHub lÃ  má»™t lá»±a chá»n máº¡nh máº½. Náº¿u muá»‘n má»™t giáº£i phÃ¡p DevOps tÃ­ch há»£p Ä‘áº§y Ä‘á»§, GitLab sáº½ phÃ¹ há»£p hÆ¡n. CÃ²n náº¿u báº¡n Ä‘Ã£ sá»­ dá»¥ng há»‡ sinh thÃ¡i Atlassian, Bitbucket sáº½ lÃ  lá»±a chá»n tá»‘t nháº¥t.\nHÃ£y cÃ¢n nháº¯c nhu cáº§u dá»± Ã¡n vÃ  má»©c Ä‘á»™ tÃ­ch há»£p mong muá»‘n Ä‘á»ƒ Ä‘Æ°a ra quyáº¿t Ä‘á»‹nh phÃ¹ há»£p! ğŸš€\nğŸ‘‰ BÆ°á»›c tiáº¿p theo: TÃ¬m hiá»ƒu vá» Containers giÃºp Ä‘Ã³ng gÃ³i á»©ng dá»¥ng cÃ¹ng vá»›i táº¥t cáº£ cÃ¡c thÆ° viá»‡n, cáº¥u hÃ¬nh vÃ  dependencies Ä‘á»ƒ cháº¡y nháº¥t quÃ¡n trÃªn nhiá»u mÃ´i trÆ°á»ng khÃ¡c nhau.\n","date":"2025-02-23T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/devops/devops-step-five.webp","permalink":"https://tech.nguuyen.io.vn/posts/devops/devops-step-five/","title":"Dá»‹ch vá»¥ lÆ°u trá»¯ mÃ£ nguá»“n ğŸ±"},{"content":"ğŸ–§ Giao thá»©c máº¡ng (Networking Protocols) Giao thá»©c máº¡ng lÃ  táº­p há»£p cÃ¡c quy táº¯c chuáº©n hÃ³a giÃºp dá»¯ liá»‡u Ä‘Æ°á»£c truyá»n, nháº­n vÃ  hiá»ƒu Ä‘Ãºng cÃ¡ch trÃªn cÃ¡c máº¡ng mÃ¡y tÃ­nh. ChÃºng xÃ¡c Ä‘á»‹nh Ä‘á»‹nh dáº¡ng, thá»i gian, trÃ¬nh tá»± vÃ  kiá»ƒm soÃ¡t lá»—i trong quÃ¡ trÃ¬nh truyá»n dá»¯ liá»‡u. Má»™t sá»‘ giao thá»©c quan trá»ng bao gá»“m:\nTCP/IP: Bá»™ giao thá»©c ná»n táº£ng cho giao tiáº¿p trÃªn Internet. HTTP/HTTPS: Giao thá»©c truyá»n táº£i siÃªu vÄƒn báº£n dÃ¹ng cho web. FTP/SFTP: Giao thá»©c truyá»n táº£i tá»‡p tin. SMTP/POP3/IMAP: Giao thá»©c truyá»n táº£i email. DNS: Giao thá»©c phÃ¢n giáº£i tÃªn miá»n. DHCP: Giao thá»©c cáº¥p phÃ¡t Ä‘á»‹a chá»‰ IP tá»± Ä‘á»™ng. SSL/TLS: Giao thá»©c báº£o máº­t dá»¯ liá»‡u. UDP: Giao thá»©c truyá»n táº£i khÃ´ng káº¿t ná»‘i, nhanh chÃ³ng. ğŸŒ Há»‡ thá»‘ng tÃªn miá»n (DNS) DNS (Domain Name System) lÃ  há»‡ thá»‘ng phÃ¢n giáº£i tÃªn miá»n, giÃºp chuyá»ƒn Ä‘á»•i tÃªn miá»n dá»… nhá»› (vd: www.example.com) thÃ nh Ä‘á»‹a chá»‰ IP (192.168.1.1) mÃ  mÃ¡y tÃ­nh cÃ³ thá»ƒ hiá»ƒu Ä‘Æ°á»£c.\nğŸ”¹ VÃ­ dá»¥ cáº¥u hÃ¬nh DNS trong Linux: 1 2 3 4 5 6 7 8 9 # Kiá»ƒm tra DNS cá»§a má»™t tÃªn miá»n nslookup example.com dig example.com # Chá»‰nh sá»­a file hosts Ä‘á»ƒ Ã¡nh xáº¡ tÃªn miá»n sudo nano /etc/hosts # ThÃªm dÃ²ng sau: 192.168.1.100 mycustomdomain.com ğŸ”— TÃ i nguyÃªn tham kháº£o:\nğŸ“„ CÃ¡ch hoáº¡t Ä‘á»™ng cá»§a DNS ğŸ¥ Video giáº£i thÃ­ch DNS ğŸŒ Giao thá»©c HTTP HTTP (Hypertext Transfer Protocol) lÃ  giao thá»©c truyá»n táº£i dá»¯ liá»‡u trÃªn web theo mÃ´ hÃ¬nh yÃªu cáº§u - pháº£n há»“i.\nğŸ”¹ VÃ­ dá»¥ gá»­i yÃªu cáº§u HTTP báº±ng cURL: 1 2 3 4 5 6 7 # Gá»­i yÃªu cáº§u GET curl -X GET https://jsonplaceholder.typicode.com/posts/1 # Gá»­i yÃªu cáº§u POST curl -X POST https://jsonplaceholder.typicode.com/posts \\ -H \u0026#34;Content-Type: application/json\u0026#34; \\ -d \u0026#39;{\u0026#34;title\u0026#34;: \u0026#34;Hello\u0026#34;, \u0026#34;body\u0026#34;: \u0026#34;World\u0026#34;}\u0026#39; ğŸ”— TÃ i nguyÃªn tham kháº£o:\nğŸ“„ TÃ¬m hiá»ƒu vá» HTTP ğŸ¥ Video hÆ°á»›ng dáº«n HTTP ğŸ”’ HTTPS vÃ  báº£o máº­t (SSL/TLS) HTTPS lÃ  phiÃªn báº£n báº£o máº­t cá»§a HTTP, sá»­ dá»¥ng SSL/TLS Ä‘á»ƒ mÃ£ hÃ³a dá»¯ liá»‡u, Ä‘áº£m báº£o an toÃ n khi truyá»n táº£i trÃªn Internet.\nğŸ”¹ VÃ­ dá»¥ thiáº¿t láº­p HTTPS vá»›i Nginx: 1 2 3 4 5 6 server { listen 443 ssl; server_name example.com; ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem; ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem; } ğŸ”— TÃ i nguyÃªn tham kháº£o:\nğŸ“„ HTTPS lÃ  gÃ¬? ğŸ¥ Video HTTPS hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o ğŸ”‘ SSH - Káº¿t ná»‘i báº£o máº­t SSH (Secure Shell) lÃ  giao thá»©c giÃºp káº¿t ná»‘i an toÃ n Ä‘áº¿n mÃ¡y chá»§ tá»« xa.\nğŸ”¹ VÃ­ dá»¥ sá»­ dá»¥ng SSH Ä‘á»ƒ káº¿t ná»‘i tá»« xa: 1 2 3 4 5 # Káº¿t ná»‘i Ä‘áº¿n mÃ¡y chá»§ tá»« xa ssh user@example.com # Sao chÃ©p tá»‡p tin tá»« mÃ¡y chá»§ vá» mÃ¡y cá»¥c bá»™ scp user@example.com:/path/to/file ./localfile ğŸ”— TÃ i nguyÃªn tham kháº£o:\nğŸ“„ HÆ°á»›ng dáº«n SSH ğŸ¥ Video cÃ¡ch SSH hoáº¡t Ä‘á»™ng ğŸ¯ Káº¿t Luáº­n Giao thá»©c máº¡ng lÃ  ná»n táº£ng cá»§a má»i há»‡ thá»‘ng trá»±c tuyáº¿n, tá»« duyá»‡t web Ä‘áº¿n gá»­i email. Hiá»ƒu vÃ  biáº¿t cÃ¡ch sá»­ dá»¥ng chÃºng giÃºp cáº£i thiá»‡n báº£o máº­t vÃ  hiá»‡u suáº¥t cá»§a há»‡ thá»‘ng. HÃ£y thá»­ Ã¡p dá»¥ng cÃ¡c lá»‡nh trÃªn Ä‘á»ƒ kiá»ƒm tra vÃ  cáº¥u hÃ¬nh há»‡ thá»‘ng cá»§a báº¡n! ğŸš€\nğŸ‘‰ BÆ°á»›c tiáº¿p theo: TÃ¬m hiá»ƒu vá» Cloud Providers cÃ¡c cÃ´ng ty cung cáº¥p dá»‹ch vá»¥ Ä‘iá»‡n toÃ¡n Ä‘Ã¡m mÃ¢y, cho phÃ©p cÃ¡ nhÃ¢n vÃ  doanh nghiá»‡p truy cáº­p tÃ i nguyÃªn nhÆ° mÃ¡y chá»§, lÆ°u trá»¯, cÆ¡ sá»Ÿ dá»¯ liá»‡u, AI, vÃ  cÃ¡c dá»‹ch vá»¥ khÃ¡c qua internet mÃ  khÃ´ng cáº§n Ä‘áº§u tÆ° háº¡ táº§ng pháº§n cá»©ng.\n","date":"2025-02-23T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/devops/devops-step-eight.webp","permalink":"https://tech.nguuyen.io.vn/posts/devops/devops-step-eight/","title":"Giao thá»©c máº¡ng (Networking Protocols) ğŸ–§"},{"content":"ğŸ”„ Há»‡ thá»‘ng quáº£n lÃ½ phiÃªn báº£n (Version Control Systems) Version control systems (VCS) lÃ  cÃ¡c cÃ´ng cá»¥ giÃºp theo dÃµi sá»± thay Ä‘á»•i cá»§a mÃ£ nguá»“n vÃ  tá»‡p theo thá»i gian. ChÃºng há»— trá»£ lÃ m viá»‡c nhÃ³m, quáº£n lÃ½ lá»‹ch sá»­ thay Ä‘á»•i vÃ  duy trÃ¬ nhiá»u phiÃªn báº£n cá»§a mÃ£ nguá»“n. CÃ³ hai loáº¡i VCS chÃ­nh:\nHá»‡ thá»‘ng táº­p trung (Centralized VCS - CVCS): Sá»­ dá»¥ng má»™t kho lÆ°u trá»¯ trung tÃ¢m, vÃ­ dá»¥ nhÆ° Subversion (SVN), CVS. Há»‡ thá»‘ng phÃ¢n tÃ¡n (Distributed VCS - DVCS): Má»—i ngÆ°á»i dÃ¹ng cÃ³ má»™t báº£n sao Ä‘áº§y Ä‘á»§ cá»§a kho lÆ°u trá»¯, bao gá»“m toÃ n bá»™ lá»‹ch sá»­. VÃ­ dá»¥ phá»• biáº¿n nháº¥t lÃ  Git. Git lÃ  má»™t há»‡ thá»‘ng quáº£n lÃ½ phiÃªn báº£n phÃ¢n tÃ¡n máº¡nh máº½, cho phÃ©p lÃ m viá»‡c ngoáº¡i tuyáº¿n, há»— trá»£ nhanh chÃ³ng cÃ¡c thao tÃ¡c nhÃ¡nh (branching) vÃ  há»£p nháº¥t (merging), giÃºp tÄƒng cÆ°á»ng kháº£ nÄƒng cá»™ng tÃ¡c.\nğŸ› ï¸ Git - CÃ´ng Cá»¥ Quáº£n LÃ½ PhiÃªn Báº£n Phá»• Biáº¿n Nháº¥t ğŸ”¹ CÃ i Äáº·t Git Náº¿u chÆ°a cÃ i Ä‘áº·t Git, báº¡n cÃ³ thá»ƒ táº£i vá» tá»« git-scm.com hoáº·c sá»­ dá»¥ng lá»‡nh sau:\n1 2 3 sudo apt install git # Ubuntu/Debian yum install git # CentOS/RHEL brew install git # macOS XÃ¡c nháº­n cÃ i Ä‘áº·t Git:\n1 2 3 4 git --version # output: # git version 2.47.1.windows.1 ğŸš€ CÃ¡c Lá»‡nh CÆ¡ Báº£n Trong Git DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡c lá»‡nh Git phá»• biáº¿n, Ä‘Æ°á»£c sáº¯p xáº¿p tá»« cÆ¡ báº£n Ä‘áº¿n nÃ¢ng cao:\nKhá»Ÿi Táº¡o \u0026amp; Cáº¥u HÃ¬nh 1 git init # Khá»Ÿi táº¡o kho lÆ°u trá»¯ Git 1 2 git config --global user.name \u0026#34;TÃªn Cá»§a Báº¡n\u0026#34; # Cáº¥u hÃ¬nh tÃªn git config --global user.email \u0026#34;email@example.com\u0026#34; # Cáº¥u hÃ¬nh email LÃ m Viá»‡c Vá»›i Kho LÆ°u Trá»¯ 1 git clone \u0026lt;repo_url\u0026gt; # Sao chÃ©p má»™t kho lÆ°u trá»¯ tá»« xa vá» mÃ¡y 1 git status # Kiá»ƒm tra tráº¡ng thÃ¡i cá»§a cÃ¡c tá»‡p ThÃªm \u0026amp; LÆ°u Thay Äá»•i 1 git add \u0026lt;file\u0026gt; # ThÃªm tá»‡p vÃ o vÃ¹ng táº¡m 1 git commit -m \u0026#34;MÃ´ táº£ thay Ä‘á»•i\u0026#34; # LÆ°u thay Ä‘á»•i vÃ o lá»‹ch sá»­ LÃ m Viá»‡c Vá»›i Kho LÆ°u Trá»¯ Tá»« Xa 1 git remote add origin \u0026lt;repo_url\u0026gt; # LiÃªn káº¿t kho lÆ°u trá»¯ tá»« xa 1 git push -u origin main # Äáº©y thay Ä‘á»•i lÃªn nhÃ¡nh chÃ­nh 1 git pull origin main # Cáº­p nháº­t thay Ä‘á»•i má»›i nháº¥t tá»« kho lÆ°u trá»¯ tá»« xa LÃ m Viá»‡c Vá»›i NhÃ¡nh 1 git branch new-feature # Táº¡o nhÃ¡nh má»›i 1 git checkout new-feature # Chuyá»ƒn sang nhÃ¡nh má»›i 1 git merge new-feature # Gá»™p nhÃ¡nh vÃ o nhÃ¡nh hiá»‡n táº¡i Theo DÃµi Lá»‹ch Sá»­ 1 git log # Xem lá»‹ch sá»­ commit 1 git diff # So sÃ¡nh thay Ä‘á»•i giá»¯a cÃ¡c phiÃªn báº£n ğŸ“š TÃ i NguyÃªn Há»c Git Miá»…n PhÃ­ ğŸ“– TÃ i liá»‡u chÃ­nh thá»©c vá» Git ğŸ“„ Git Cheat Sheet â–¶ï¸ Video hÆ°á»›ng dáº«n Git cho ngÆ°á»i má»›i báº¯t Ä‘áº§u ğŸ“ BÃ i viáº¿t: Há»‡ thá»‘ng quáº£n lÃ½ phiÃªn báº£n lÃ  gÃ¬? ğŸ”š Káº¿t Luáº­n Sá»­ dá»¥ng Git giÃºp quáº£n lÃ½ mÃ£ nguá»“n dá»… dÃ ng hÆ¡n, há»— trá»£ lÃ m viá»‡c nhÃ³m hiá»‡u quáº£ vÃ  báº£o vá»‡ dá»¯ liá»‡u quan trá»ng cá»§a dá»± Ã¡n. Viá»‡c hiá»ƒu vÃ  thÃ nh tháº¡o Git lÃ  ká»¹ nÄƒng cáº§n thiáº¿t cho má»i láº­p trÃ¬nh viÃªn.\nğŸ‘‰ BÆ°á»›c tiáº¿p theo: TÃ¬m hiá»ƒu vá» GitHub \u0026amp; GitLab Ä‘á»ƒ quáº£n lÃ½ kho lÆ°u trá»¯ Git trÃªn ná»n táº£ng Ä‘Ã¡m mÃ¢y.\n","date":"2025-02-23T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/devops/devops-step-four.webp","permalink":"https://tech.nguuyen.io.vn/posts/devops/devops-step-four/","title":"Há»‡ thá»‘ng quáº£n lÃ½ phiÃªn báº£n (Version Control Systems) ğŸ› ï¸"},{"content":"ğŸ–¥ï¸ Kiáº¿n thá»©c vá» Terminal Terminal lÃ  má»™t giao diá»‡n vÄƒn báº£n giÃºp ngÆ°á»i dÃ¹ng tÆ°Æ¡ng tÃ¡c vá»›i há»‡ thá»‘ng mÃ¡y tÃ­nh thÃ´ng qua CLI (Command Line Interface - Giao diá»‡n dÃ²ng lá»‡nh). ÄÃ¢y lÃ  cÃ´ng cá»¥ quan trá»ng Ä‘á»ƒ quáº£n lÃ½ há»‡ thá»‘ng, thá»±c thi lá»‡nh, vÃ  tá»± Ä‘á»™ng hÃ³a cÃ¡c tÃ¡c vá»¥.\nğŸ“š TÃ i NguyÃªn Miá»…n PhÃ­ ğŸ“„ BÃ i viáº¿t: CLI lÃ  gÃ¬? ğŸ” TÃ¬m kiáº¿m trÃªn Google â–¶ï¸ TÃ¬m kiáº¿m trÃªn YouTube ğŸ”¹ VÃ­ dá»¥:\n1 2 ls -l # Liá»‡t kÃª tá»‡p trong thÆ° má»¥c hiá»‡n táº¡i pwd # Hiá»ƒn thá»‹ Ä‘Æ°á»ng dáº«n thÆ° má»¥c hiá»‡n táº¡i ğŸ“Š GiÃ¡m SÃ¡t Tiáº¿n TrÃ¬nh (Process Monitoring) GiÃ¡m sÃ¡t tiáº¿n trÃ¬nh lÃ  quÃ¡ trÃ¬nh quan sÃ¡t vÃ  phÃ¢n tÃ­ch liÃªn tá»¥c cÃ¡c tiáº¿n trÃ¬nh trong há»‡ thá»‘ng IT Ä‘á»ƒ Ä‘áº£m báº£o hiá»‡u suáº¥t, hiá»‡u quáº£ vÃ  tuÃ¢n thá»§ quy Ä‘á»‹nh. NÃ³ giÃºp theo dÃµi cÃ¡c thÃ´ng sá»‘ quan trá»ng nhÆ° tÃ i nguyÃªn sá»­ dá»¥ng, hÃ nh vi cá»§a tá»«ng tiáº¿n trÃ¬nh hoáº·c á»©ng dá»¥ng Ä‘ang cháº¡y trong há»‡ thá»‘ng.\nğŸ† CÃ´ng Cá»¥ ÄÆ°á»£c Äá» Xuáº¥t ğŸŸ£ lsof - Liá»‡t kÃª thÃ´ng tin vá» cÃ¡c tá»‡p Ä‘Æ°á»£c má»Ÿ bá»Ÿi tiáº¿n trÃ¬nh. ğŸ“š TÃ i NguyÃªn Miá»…n PhÃ­ ğŸ“„ Lsof Cheat Sheet ğŸ“– TÃ i liá»‡u lsof â–¶ï¸ Video: Linux Crash Course - Lá»‡nh lsof ğŸ“ BÃ i viáº¿t hay vá» GiÃ¡m sÃ¡t ğŸ”¹ VÃ­ dá»¥:\n1 2 lsof -i :80 # Liá»‡t kÃª tiáº¿n trÃ¬nh sá»­ dá»¥ng cá»•ng 80 ps aux # Hiá»ƒn thá»‹ táº¥t cáº£ tiáº¿n trÃ¬nh Ä‘ang cháº¡y ğŸš€ GiÃ¡m SÃ¡t Hiá»‡u Suáº¥t (Performance Monitoring) GiÃ¡m sÃ¡t hiá»‡u suáº¥t giÃºp thu tháº­p, phÃ¢n tÃ­ch vÃ  bÃ¡o cÃ¡o cÃ¡c chá»‰ sá»‘ hiá»‡u suáº¥t chÃ­nh tá»« á»©ng dá»¥ng, máº¡ng, mÃ¡y chá»§ vÃ  cÆ¡ sá»Ÿ dá»¯ liá»‡u.\nğŸ† CÃ´ng Cá»¥ ÄÆ°á»£c Äá» Xuáº¥t ğŸŸ£ vmstat - CÃ´ng cá»¥ theo dÃµi bá»™ nhá»› áº£o vÃ  hiá»‡u suáº¥t há»‡ thá»‘ng. ğŸ“š TÃ i NguyÃªn Miá»…n PhÃ­ ğŸ“– Lá»‡nh Linux: KhÃ¡m phÃ¡ bá»™ nhá»› áº£o vá»›i vmstat ğŸ“„ TÃ i liá»‡u vmstat â–¶ï¸ HÆ°á»›ng dáº«n vmstat ğŸ“ BÃ i viáº¿t hay vá» GiÃ¡m sÃ¡t ğŸ”¹ VÃ­ dá»¥:\n1 vmstat 5 10 # Cáº­p nháº­t tráº¡ng thÃ¡i há»‡ thá»‘ng má»—i 5 giÃ¢y trong 10 láº§n ğŸŒ CÃ´ng Cá»¥ Máº¡ng (Networking Tools) CÃ¡c cÃ´ng cá»¥ máº¡ng há»— trá»£ giÃ¡m sÃ¡t, phÃ¢n tÃ­ch, kháº¯c phá»¥c sá»± cá»‘ vÃ  quáº£n lÃ½ há»‡ thá»‘ng máº¡ng.\nğŸ† CÃ´ng Cá»¥ ÄÆ°á»£c Äá» Xuáº¥t ğŸŸ£ Wireshark - PhÃ¢n tÃ­ch gÃ³i tin sÃ¢u. ğŸŸ£ Nmap - QuÃ©t máº¡ng vÃ  kiá»ƒm tra báº£o máº­t. Ping - Kiá»ƒm tra káº¿t ná»‘i cÆ¡ báº£n. Traceroute - XÃ¡c Ä‘á»‹nh Ä‘Æ°á»ng Ä‘i cá»§a gÃ³i tin trong máº¡ng. Netstat - Hiá»ƒn thá»‹ káº¿t ná»‘i máº¡ng. Tcpdump - Ghi vÃ  phÃ¢n tÃ­ch gÃ³i tin trÃªn dÃ²ng lá»‡nh. Iperf - Kiá»ƒm tra hiá»‡u suáº¥t máº¡ng. Netcat - Thá»±c hiá»‡n nhiá»u tÃ¡c vá»¥ máº¡ng khÃ¡c nhau. Nslookup/Dig - Truy váº¥n DNS. PuTTY - Káº¿t ná»‘i tá»« xa qua SSH hoáº·c Telnet. ğŸ”¹ VÃ­ dá»¥:\n1 2 ping google.com # Kiá»ƒm tra káº¿t ná»‘i Ä‘áº¿n Google nmap -sS 192.168.1.1 # QuÃ©t cá»•ng mÃ¡y chá»§ ná»™i bá»™ âœ‚ï¸ Xá»­ LÃ½ VÄƒn Báº£n (Text Manipulation) CÃ¡c cÃ´ng cá»¥ há»— trá»£ chá»‰nh sá»­a, xá»­ lÃ½ vÃ  chuyá»ƒn Ä‘á»•i dá»¯ liá»‡u vÄƒn báº£n.\nğŸ† CÃ´ng Cá»¥ ÄÆ°á»£c Äá» Xuáº¥t ğŸŸ£ sed - Chá»‰nh sá»­a luá»“ng dá»¯ liá»‡u. ğŸŸ£ awk - QuÃ©t máº«u vÃ  trÃ­ch xuáº¥t dá»¯ liá»‡u. ğŸŸ£ grep - TÃ¬m kiáº¿m vÄƒn báº£n báº±ng biá»ƒu thá»©c chÃ­nh quy. cut, sort, tr, uniq - CÃ¡c lá»‡nh há»— trá»£ xá»­ lÃ½ dá»¯ liá»‡u vÄƒn báº£n. ğŸ”¹ VÃ­ dá»¥:\n1 2 grep \u0026#34;error\u0026#34; logfile.txt # TÃ¬m tá»« \u0026#34;error\u0026#34; trong logfile.txt awk \u0026#39;{print $1}\u0026#39; data.txt # Láº¥y cá»™t Ä‘áº§u tiÃªn tá»« file data.txt âš¡ Bash Scripts Bash lÃ  má»™t shell máº¡nh máº½ trÃªn Unix/Linux, giÃºp thá»±c hiá»‡n lá»‡nh vÃ  tá»± Ä‘á»™ng hÃ³a tÃ¡c vá»¥.\nğŸ”¹ VÃ­ dá»¥:\n1 2 #!/bin/bash echo \u0026#34;Hello, World!\u0026#34; âœï¸ TrÃ¬nh Soáº¡n Tháº£o (Editors) TrÃ¬nh soáº¡n tháº£o vÄƒn báº£n lÃ  cÃ´ng cá»¥ quan trá»ng Ä‘á»ƒ chá»‰nh sá»­a vÃ  quáº£n lÃ½ tá»‡p vÄƒn báº£n.\nğŸ† CÃ´ng Cá»¥ ÄÆ°á»£c Äá» Xuáº¥t ğŸŸ£ Vim - Máº¡nh máº½, tÃ¹y biáº¿n cao, phÃ¹ há»£p cho láº­p trÃ¬nh viÃªn. ğŸŸ£ Emacs - Linh hoáº¡t, cÃ³ nhiá»u plugin há»— trá»£. Sublime Text - Tá»‘c Ä‘á»™ cao, giao diá»‡n thÃ¢n thiá»‡n. Visual Studio Code - MÃ£ nguá»“n má»Ÿ, há»— trá»£ gá»¡ lá»—i, má»Ÿ rá»™ng, tÃ­ch há»£p cÃ´ng cá»¥ phÃ¡t triá»ƒn. ğŸ”¹ VÃ­ dá»¥:\n1 2 vim myfile.txt # Má»Ÿ tá»‡p báº±ng Vim nano myfile.txt # Má»Ÿ tá»‡p báº±ng Nano ğŸ”š Káº¿t Luáº­n Hiá»ƒu vÃ  sá»­ dá»¥ng thÃ nh tháº¡o cÃ¡c cÃ´ng cá»¥ trÃªn giÃºp báº¡n lÃ m viá»‡c hiá»‡u quáº£ hÆ¡n trong mÃ´i trÆ°á»ng Linux vÃ  DevOps. CÃ¡c cÃ´ng cá»¥ ğŸŸ£ Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u lÃ  nhá»¯ng cÃ´ng cá»¥ phá»• biáº¿n vÃ  máº¡nh máº½ nháº¥t, Ä‘Æ°á»£c nhiá»u chuyÃªn gia khuyáº¿n nghá»‹. Báº¡n cÃ³ thá»ƒ tÃ¬m hiá»ƒu sÃ¢u hÆ¡n thÃ´ng qua cÃ¡c tÃ i nguyÃªn miá»…n phÃ­ Ä‘i kÃ¨m. Náº¿u cÃ³ Ä‘iá»u gÃ¬ cáº§n lÃ m rÃµ hoáº·c bá»• sung, hÃ£y pháº£n há»“i Ä‘á»ƒ mÃ¬nh cáº­p nháº­t nhÃ©!\nğŸ‘‰ BÆ°á»›c tiáº¿p theo: NÃ¢ng cao kiáº¿n thá»©c vá» há»‡ thá»‘ng quáº£n lÃ½ phiÃªn báº£n (Version Control Systems) Ä‘á»ƒ theo dÃµi, quáº£n lÃ½ vÃ  cá»™ng tÃ¡c hiá»‡u quáº£ trÃªn mÃ£ nguá»“n.\n","date":"2025-02-23T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/devops/devops-step-three.webp","permalink":"https://tech.nguuyen.io.vn/posts/devops/devops-step-three/","title":"Kiáº¿n thá»©c vá» Terminal ğŸ“Ÿ"},{"content":"ğŸ“Œ Táº¡i sao Linux quan trá»ng trong DevOps? Linux lÃ  ná»n táº£ng cá»§a háº§u háº¿t cÃ¡c há»‡ thá»‘ng server, container (Docker, Kubernetes), vÃ  cloud. DevOps cáº§n náº¯m vá»¯ng Linux Ä‘á»ƒ:\nâœ… Quáº£n lÃ½ server hiá»‡u quáº£. âœ… Viáº¿t script tá»± Ä‘á»™ng hÃ³a. âœ… Xá»­ lÃ½ file, user, tiáº¿n trÃ¬nh. âœ… Tá»‘i Æ°u há»‡ thá»‘ng vÃ  báº£o máº­t. âš™ï¸ Há»‡ Ä‘iá»u hÃ nh lÃ  gÃ¬? Há»‡ Ä‘iá»u hÃ nh (OS) lÃ  pháº§n má»m quáº£n lÃ½ tÃ i nguyÃªn pháº§n cá»©ng vÃ  pháº§n má»m cá»§a mÃ¡y tÃ­nh, cung cáº¥p dá»‹ch vá»¥ chung cho cÃ¡c chÆ°Æ¡ng trÃ¬nh. NÃ³ Ä‘Ã³ng vai trÃ² trung gian giá»¯a á»©ng dá»¥ng vÃ  pháº§n cá»©ng, xá»­ lÃ½ cÃ¡c nhiá»‡m vá»¥ nhÆ°:\nğŸ”¹ Quáº£n lÃ½ bá»™ nhá»›. ğŸ”¹ Láº­p lá»‹ch tiáº¿n trÃ¬nh. ğŸ”¹ Quáº£n lÃ½ há»‡ thá»‘ng file. ğŸ”¹ Kiá»ƒm soÃ¡t thiáº¿t bá»‹. ğŸŒ CÃ¡c há»‡ Ä‘iá»u hÃ nh phá»• biáº¿n: ğŸ’» MÃ¡y tÃ­nh cÃ¡ nhÃ¢n: Windows, macOS, Linux (Ubuntu, Fedora,\u0026hellip;) ğŸ“± Thiáº¿t bá»‹ di Ä‘á»™ng: iOS, Android ğŸ–¥ï¸ MÃ¡y chá»§: Ubuntu Server, Red Hat Enterprise Linux, Windows Server Má»—i há»‡ Ä‘iá»u hÃ nh cÃ³ Ä‘áº·c Ä‘iá»ƒm, giao diá»‡n vÃ  kháº£ nÄƒng tÆ°Æ¡ng thÃ­ch khÃ¡c nhau. ChÃºng Ä‘Ã³ng vai trÃ² quan trá»ng trong báº£o máº­t há»‡ thá»‘ng, tá»‘i Æ°u hiá»‡u suáº¥t vÃ  cung cáº¥p tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng nháº¥t quÃ¡n.\nğŸ› ï¸ CÃ¡c lá»‡nh Linux cÆ¡ báº£n DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ lá»‡nh Linux quan trá»ng:\nğŸ” Kiá»ƒm tra há»‡ thá»‘ng 1 2 3 uname -a # Hiá»ƒn thá»‹ thÃ´ng tin há»‡ Ä‘iá»u hÃ nh uptime # Thá»i gian hoáº¡t Ä‘á»™ng cá»§a há»‡ thá»‘ng free -m # Kiá»ƒm tra bá»™ nhá»› RAM ğŸ“‚ Quáº£n lÃ½ file \u0026amp; thÆ° má»¥c 1 2 3 ls -l # Liá»‡t kÃª file vá»›i thÃ´ng tin chi tiáº¿t mkdir mydir # Táº¡o thÆ° má»¥c má»›i rm -rf mydir # XÃ³a thÆ° má»¥c vÃ  ná»™i dung bÃªn trong ğŸš€ Quáº£n lÃ½ tiáº¿n trÃ¬nh 1 2 3 top # Hiá»ƒn thá»‹ tiáº¿n trÃ¬nh Ä‘ang cháº¡y ps aux # Liá»‡t kÃª táº¥t cáº£ tiáº¿n trÃ¬nh kill -9 PID # Dá»«ng tiáº¿n trÃ¬nh theo PID ğŸ‘¤ Quáº£n lÃ½ ngÆ°á»i dÃ¹ng 1 2 3 whoami # Xem user hiá»‡n táº¡i sudo useradd devops # Táº¡o user má»›i sudo passwd devops # Äáº·t máº­t kháº©u cho user ğŸ“œ Script Bash kiá»ƒm tra tÃ i nguyÃªn há»‡ thá»‘ng 1 2 3 4 5 6 7 8 9 10 #!/bin/bash echo \u0026#34;==== ThÃ´ng tin há»‡ thá»‘ng ====\u0026#34; uname -a echo \u0026#34;==== Thá»i gian hoáº¡t Ä‘á»™ng ====\u0026#34; uptime echo \u0026#34;==== Bá»™ nhá»› RAM ====\u0026#34; free -m â–¶ï¸ CÃ¡ch cháº¡y script: 1 2 chmod +x system_check.sh # Cáº¥p quyá»n thá»±c thi cho script ./system_check.sh # Cháº¡y script trong terminal ğŸ“š TÃ i nguyÃªn há»c táº­p DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ tÃ i nguyÃªn miá»…n phÃ­ Ä‘á»ƒ tÃ¬m hiá»ƒu thÃªm vá» há»‡ Ä‘iá»u hÃ nh:\nğŸ“– Operating Systems - Wiki ğŸ“– All you need to know about OS ğŸ“– Learn Operating Systems ğŸ¥ What are Operating Systems? ğŸ¥ Operating Systems ğŸ¯ Káº¿t luáº­n âœ… Linux lÃ  ká»¹ nÄƒng báº¯t buá»™c trong DevOps. âœ… Há»c cÃ¡ch dÃ¹ng terminal \u0026amp; Bash scripting. ğŸ‘‰ BÆ°á»›c tiáº¿p theo: TÃ¬m hiá»ƒu sÃ¢u hÆ¡n vá» terminal vÃ  cÃ¡ch sá»­ dá»¥ng CLI Ä‘á»ƒ lÃ m viá»‡c hiá»‡u quáº£ vá»›i há»‡ thá»‘ng.\n","date":"2025-02-22T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/devops/devops-step-two.webp","permalink":"https://tech.nguuyen.io.vn/posts/devops/devops-step-two/","title":"Há»c vá» Linux \u0026 Há»‡ Äiá»u HÃ nh ğŸ–¥ï¸"},{"content":"ğŸ“Œ Táº¡i sao cáº§n chá»n ngÃ´n ngá»¯ láº­p trÃ¬nh? Trong DevOps, báº¡n sáº½ cáº§n sá»­ dá»¥ng ngÃ´n ngá»¯ láº­p trÃ¬nh Ä‘á»ƒ:\nâœ… Viáº¿t script tá»± Ä‘á»™ng hÃ³a. âœ… Quáº£n lÃ½ server vÃ  cloud. âœ… Táº¡o tool há»— trá»£ CI/CD. âœ… XÃ¢y dá»±ng vÃ  triá»ƒn khai háº¡ táº§ng dÆ°á»›i dáº¡ng code (Infrastructure as Code - IaC). Viá»‡c chá»n ngÃ´n ngá»¯ phÃ¹ há»£p giÃºp báº¡n lÃ m viá»‡c hiá»‡u quáº£ hÆ¡n vá»›i há»‡ thá»‘ng, tá»± Ä‘á»™ng hÃ³a nhiá»u quy trÃ¬nh vÃ  cáº£i thiá»‡n tá»‘c Ä‘á»™ phÃ¡t triá»ƒn pháº§n má»m.\nğŸ”¥ NgÃ´n ngá»¯ phÃ¹ há»£p cho DevOps ğŸ Python (Khuyáº¿n nghá»‹ chÃ­nh) ğŸ”¹ LÃ½ do chá»n Python: CÃº phÃ¡p dá»… Ä‘á»c, dá»… há»c. ThÆ° viá»‡n phong phÃº há»— trá»£ tá»± Ä‘á»™ng hÃ³a nhÆ° fabric, paramiko, boto3 (AWS SDK), pyinfra. Há»— trá»£ máº¡nh máº½ trong quáº£n lÃ½ Cloud (AWS, GCP, Azure). ğŸ”¹ á»¨ng dá»¥ng thá»±c táº¿: Viáº¿t script deploy code tá»± Ä‘á»™ng. Táº¡o bot quáº£n lÃ½ server. XÃ¢y dá»±ng API quáº£n lÃ½ há»‡ thá»‘ng. ğŸ“ VÃ­ dá»¥: Script SSH tá»± Ä‘á»™ng deploy vá»›i Paramiko 1 2 3 4 5 6 7 8 9 10 11 import paramiko def deploy_code(host, user, password, command): client = paramiko.SSHClient() client.set_missing_host_key_policy(paramiko.AutoAddPolicy()) client.connect(hostname=host, username=user, password=password) stdin, stdout, stderr = client.exec_command(command) print(stdout.read().decode()) client.close() deploy_code(\u0026#39;192.168.1.100\u0026#39;, \u0026#39;ubuntu\u0026#39;, \u0026#39;yourpassword\u0026#39;, \u0026#39;git pull origin main \u0026amp;\u0026amp; systemctl restart app\u0026#39;) ğŸ–¥ï¸ Bash (Cáº§n biáº¿t cÆ¡ báº£n) ğŸ”¹ LÃ½ do chá»n Bash: LÃ  shell script phá»• biáº¿n nháº¥t trÃªn Linux. GiÃºp báº¡n thao tÃ¡c nhanh vá»›i há»‡ thá»‘ng. Tá»‘i Æ°u cho quáº£n lÃ½ server vÃ  tá»± Ä‘á»™ng hÃ³a task nhá». ğŸ”¹ á»¨ng dá»¥ng thá»±c táº¿: Viáº¿t script tá»± Ä‘á»™ng update server. Táº¡o cron job cháº¡y Ä‘á»‹nh ká»³. Quáº£n lÃ½ user vÃ  permission trÃªn Linux. ğŸ“ VÃ­ dá»¥: Script tá»± Ä‘á»™ng update server 1 2 #!/bin/bash sudo apt update \u0026amp;\u0026amp; sudo apt upgrade -y ğŸš€ Go (Golang) (Náº¿u lÃ m vá»›i Kubernetes) ğŸ”¹ LÃ½ do chá»n Go: Hiá»‡u suáº¥t cao, dá»… dÃ ng biÃªn dá»‹ch thÃ nh binary nhá» gá»n. Kubernetes vÃ  nhiá»u cÃ´ng cá»¥ DevOps nhÆ° Terraform Ä‘Æ°á»£c viáº¿t báº±ng Go. ğŸ”¹ á»¨ng dá»¥ng thá»±c táº¿: Viáº¿t tool quáº£n lÃ½ container. Táº¡o plugin cho Kubernetes. XÃ¢y dá»±ng cÃ¡c cÃ´ng cá»¥ DevOps riÃªng. ğŸ“ VÃ­ dá»¥: In ra thÃ´ng tin há»‡ thá»‘ng báº±ng Go 1 2 3 4 5 6 7 8 9 10 package main import ( \u0026#34;fmt\u0026#34; \u0026#34;os\u0026#34; ) func main() { hostname, _ := os.Hostname() fmt.Println(\u0026#34;Hostname:\u0026#34;, hostname) } âš™ï¸ Groovy (Náº¿u lÃ m viá»‡c vá»›i Jenkins) ğŸ”¹ LÃ½ do chá»n Groovy: LÃ  ngÃ´n ngá»¯ chÃ­nh Ä‘á»ƒ viáº¿t pipeline trong Jenkins. CÃº phÃ¡p linh hoáº¡t, dá»… dÃ ng má»Ÿ rá»™ng vÃ  tÃ­ch há»£p vá»›i Java. ğŸ”¹ á»¨ng dá»¥ng thá»±c táº¿: Viáº¿t pipeline CI/CD cho Jenkins. Táº¡o script quáº£n lÃ½ há»‡ thá»‘ng. Tá»± Ä‘á»™ng hÃ³a cÃ¡c bÆ°á»›c build, test, deploy. ğŸ“ VÃ­ dá»¥: Pipeline cÆ¡ báº£n trong Jenkinsfile 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 pipeline { agent any stages { stage(\u0026#39;Build\u0026#39;) { steps { echo \u0026#39;Building the project...\u0026#39; sh \u0026#39;mvn clean package\u0026#39; } } stage(\u0026#39;Test\u0026#39;) { steps { echo \u0026#39;Running tests...\u0026#39; sh \u0026#39;mvn test\u0026#39; } } stage(\u0026#39;Deploy\u0026#39;) { steps { echo \u0026#39;Deploying application...\u0026#39; sh \u0026#39;./deploy.sh\u0026#39; } } } } ğŸ¯ Káº¿t luáº­n âœ… Python + Bash lÃ  lá»±a chá»n tá»‘t nháº¥t Ä‘á»ƒ báº¯t Ä‘áº§u DevOps. âœ… Náº¿u lÃ m viá»‡c vá»›i Kubernetes, há»c thÃªm Go. âœ… Náº¿u lÃ m viá»‡c vá»›i Jenkins, há»c Groovy Ä‘á»ƒ viáº¿t pipeline. ğŸ‘‰ BÆ°á»›c tiáº¿p theo: Há»c cÆ¡ báº£n vá» Linux \u0026amp; há»‡ Ä‘iá»u hÃ nh.\n","date":"2025-02-21T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/devops/devops-step-one.webp","permalink":"https://tech.nguuyen.io.vn/posts/devops/devops-step-one/","title":"Chá»n ngÃ´n ngá»¯ láº­p trÃ¬nh ğŸ¤—"},{"content":"Hiá»ƒu vá» DevOps DevOps lÃ  sá»± káº¿t há»£p giá»¯a phÃ¡t triá»ƒn pháº§n má»m (development) vÃ  váº­n hÃ nh há»‡ thá»‘ng (operations), nháº±m tÄƒng cÆ°á»ng sá»± há»£p tÃ¡c vÃ  tá»± Ä‘á»™ng hÃ³a trong quy trÃ¬nh phÃ¡t triá»ƒn vÃ  triá»ƒn khai pháº§n má»m.\nHá»c má»™t ngÃ´n ngá»¯ láº­p trÃ¬nh Viá»‡c thÃ nh tháº¡o Ã­t nháº¥t má»™t ngÃ´n ngá»¯ láº­p trÃ¬nh lÃ  cáº§n thiáº¿t Ä‘á»ƒ tá»± Ä‘á»™ng hÃ³a vÃ  quáº£n lÃ½ há»‡ thá»‘ng hiá»‡u quáº£.\nNgÃ´n ngá»¯ phá»• biáº¿n\nPython Go Ruby Náº¯m vá»¯ng kiáº¿n thá»©c vá» há»‡ Ä‘iá»u hÃ nh Linux: Há»‡ Ä‘iá»u hÃ nh phá»• biáº¿n trong mÃ´i trÆ°á»ng server. Windows: Quan trá»ng trong cÃ¡c doanh nghiá»‡p sá»­ dá»¥ng háº¡ táº§ng Microsoft. TÃ¬m hiá»ƒu vá» máº¡ng mÃ¡y tÃ­nh vÃ  báº£o máº­t CÃ¡c chá»§ Ä‘á» cáº§n quan tÃ¢m:\nGiao thá»©c máº¡ng: HTTP, HTTPS, FTP, TCP/IP. Báº£o máº­t máº¡ng: TÆ°á»ng lá»­a, VPN, SSL/TLS. Sá»­ dá»¥ng cÃ¡c cÃ´ng cá»¥ quáº£n lÃ½ mÃ£ nguá»“n Quáº£n lÃ½ mÃ£ nguá»“n hiá»‡u quáº£ lÃ  yáº¿u tá»‘ quan trá»ng trong DevOps.\nGit: Há»‡ thá»‘ng quáº£n lÃ½ phiÃªn báº£n phá»• biáº¿n. Hiá»ƒu vá» quáº£n lÃ½ cáº¥u hÃ¬nh vÃ  háº¡ táº§ng nhÆ° mÃ£ Tá»± Ä‘á»™ng hÃ³a cáº¥u hÃ¬nh giÃºp duy trÃ¬ sá»± nháº¥t quÃ¡n vÃ  hiá»‡u quáº£.\nAnsible: CÃ´ng cá»¥ tá»± Ä‘á»™ng hÃ³a. Terraform: Quáº£n lÃ½ háº¡ táº§ng báº±ng cÃ¡ch Ä‘á»‹nh nghÄ©a nÃ³ trong mÃ£ nguá»“n. ThÃ nh tháº¡o containerization vÃ  orchestration Docker: Ná»n táº£ng container phá»• biáº¿n. Kubernetes: Há»‡ thá»‘ng Ä‘iá»u phá»‘i container máº¡nh máº½. Thiáº¿t láº­p vÃ  quáº£n lÃ½ CI/CD Jenkins: MÃ¡y chá»§ tá»± Ä‘á»™ng hÃ³a mÃ£ nguá»“n má»Ÿ. GitLab CI/CD: Há»— trá»£ CI/CD hiá»‡u quáº£. GiÃ¡m sÃ¡t vÃ  logging Prometheus: Há»‡ thá»‘ng giÃ¡m sÃ¡t. ELK stack: Bá»™ cÃ´ng cá»¥ phÃ¢n tÃ­ch log. TÃ¬m hiá»ƒu vá» dá»‹ch vá»¥ Ä‘Ã¡m mÃ¢y NhÃ  cung cáº¥p phá»• biáº¿n:\nAWS Google Cloud Microsoft Azure Káº¿t luáº­n Trá»Ÿ thÃ nh má»™t ká»¹ sÆ° DevOps Ä‘Ã²i há»i kiáº¿n thá»©c rá»™ng vÃ  ká»¹ nÄƒng thá»±c hÃ nh sÃ¢u. HÃ£y liÃªn tá»¥c há»c há»i vÃ  thá»±c hÃ nh Ä‘á»ƒ Ä‘áº¡t Ä‘Æ°á»£c má»¥c tiÃªu cá»§a báº¡n.\nLÆ°u Ã½: Lá»™ trÃ¬nh nÃ y Ä‘Æ°á»£c tá»•ng há»£p tá»« nhiá»u nguá»“n vÃ  kinh nghiá»‡m thá»±c táº¿, nháº±m mang Ä‘áº¿n cho báº¡n cÃ¡i nhÃ¬n tá»•ng quan vÃ  chi tiáº¿t nháº¥t vá» con Ä‘Æ°á»ng trá»Ÿ thÃ nh ká»¹ sÆ° DevOps. ğŸ¯ğŸš€\nDevOps Roadmap 2025 ","date":"2025-02-20T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/devops/devops-roadmap.webp","permalink":"https://tech.nguuyen.io.vn/posts/devops/devops-roadmap/","title":"Lá»™ trÃ¬nh trá»Ÿ thÃ nh DevOps engineer ğŸ˜"},{"content":"Giá»›i thiá»‡u vá» DevOps? DevOps lÃ  má»™t phÆ°Æ¡ng phÃ¡p káº¿t há»£p giá»¯a phÃ¡t triá»ƒn pháº§n má»m (Development - Dev) vÃ  váº­n hÃ nh há»‡ thá»‘ng (Operations - Ops) nháº±m tá»‘i Æ°u hÃ³a quÃ¡ trÃ¬nh phÃ¡t triá»ƒn, triá»ƒn khai vÃ  váº­n hÃ nh á»©ng dá»¥ng. DevOps giÃºp cÃ¡c nhÃ³m phÃ¡t triá»ƒn vÃ  váº­n hÃ nh lÃ m viá»‡c cÃ¹ng nhau hiá»‡u quáº£ hÆ¡n thÃ´ng qua cÃ¡c cÃ´ng cá»¥, quy trÃ¬nh tá»± Ä‘á»™ng vÃ  vÄƒn hÃ³a lÃ m viá»‡c.\nVÃ¬ sao DevOps quan trá»ng? TÄƒng tá»‘c Ä‘á»™ phÃ¡t triá»ƒn DevOps giÃºp tá»± Ä‘á»™ng hÃ³a cÃ¡c quy trÃ¬nh nhÆ° kiá»ƒm thá»­, triá»ƒn khai vÃ  giÃ¡m sÃ¡t, giÃºp rÃºt ngáº¯n thá»i gian Ä‘Æ°a sáº£n pháº©m ra thá»‹ trÆ°á»ng.\nCáº£i thiá»‡n cháº¥t lÆ°á»£ng sáº£n pháº©m Viá»‡c tÃ­ch há»£p kiá»ƒm thá»­ tá»± Ä‘á»™ng vÃ  CI/CD giÃºp phÃ¡t hiá»‡n lá»—i sá»›m, giáº£m thiá»ƒu rá»§i ro khi triá»ƒn khai pháº§n má»m.\nTÄƒng cÆ°á»ng Ä‘á»™ tin cáº­y CÃ¡c cÃ´ng cá»¥ giÃ¡m sÃ¡t vÃ  logging giÃºp phÃ¡t hiá»‡n sá»± cá»‘ nhanh chÃ³ng, giáº£m downtime vÃ  Ä‘áº£m báº£o há»‡ thá»‘ng luÃ´n hoáº¡t Ä‘á»™ng á»•n Ä‘á»‹nh.\nHá»£p tÃ¡c tá»‘t hÆ¡n giá»¯a cÃ¡c nhÃ³m DevOps giÃºp phÃ¡ bá» rÃ o cáº£n giá»¯a nhÃ³m phÃ¡t triá»ƒn vÃ  váº­n hÃ nh, táº¡o mÃ´i trÆ°á»ng lÃ m viá»‡c chung hiá»‡u quáº£ hÆ¡n.\nCÃ¡c thÃ nh pháº§n chÃ­nh cá»§a DevOps CI/CD (Continuous Integration \u0026amp; Continuous Deployment) CI/CD giÃºp tá»± Ä‘á»™ng hÃ³a quÃ¡ trÃ¬nh tÃ­ch há»£p mÃ£ nguá»“n, kiá»ƒm thá»­ vÃ  triá»ƒn khai, giáº£m thiá»ƒu lá»—i khi Ä‘Æ°a sáº£n pháº©m lÃªn mÃ´i trÆ°á»ng production.\nInfrastructure as Code (IaC) IaC cho phÃ©p quáº£n lÃ½ háº¡ táº§ng nhÆ° code, giÃºp dá»… dÃ ng triá»ƒn khai vÃ  má»Ÿ rá»™ng há»‡ thá»‘ng.\nGiÃ¡m sÃ¡t vÃ  Logging CÃ¡c cÃ´ng cá»¥ nhÆ° Prometheus, Grafana, ELK Stack giÃºp giÃ¡m sÃ¡t vÃ  phÃ¢n tÃ­ch log Ä‘á»ƒ nhanh chÃ³ng xá»­ lÃ½ sá»± cá»‘.\nContainerization vÃ  Orchestration Docker vÃ  Kubernetes giÃºp Ä‘Ã³ng gÃ³i, quáº£n lÃ½ vÃ  má»Ÿ rá»™ng á»©ng dá»¥ng linh hoáº¡t.\nCÃ¡c cÃ´ng cá»¥ phá»• biáº¿n trong DevOps CI/CD: Jenkins, GitHub Actions, GitLab CI/CD IaC: Terraform, Ansible, CloudFormation GiÃ¡m sÃ¡t: Prometheus, Grafana, ELK Stack Container \u0026amp; Orchestration: Docker, Kubernetes Quáº£n lÃ½ mÃ£ nguá»“n: Git, GitHub, GitLab Káº¿t luáº­n DevOps lÃ  má»™t phÆ°Æ¡ng phÃ¡p quan trá»ng giÃºp cáº£i thiá»‡n tá»‘c Ä‘á»™ phÃ¡t triá»ƒn, cháº¥t lÆ°á»£ng sáº£n pháº©m vÃ  tá»‘i Æ°u hÃ³a váº­n hÃ nh há»‡ thá»‘ng. Trong cÃ¡c bÃ i viáº¿t tiáº¿p theo cá»§a series, chÃºng ta sáº½ tÃ¬m hiá»ƒu sÃ¢u hÆ¡n vá» tá»«ng khÃ­a cáº¡nh cá»§a DevOps, tá»« CI/CD, Infrastructure as Code Ä‘áº¿n giÃ¡m sÃ¡t há»‡ thá»‘ng.\nVÃ­ dá»¥ vá» Docker 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 # Sá»­ dá»¥ng Node.js lÃ m ná»n táº£ng FROM node:18 # Äáº·t thÆ° má»¥c lÃ m viá»‡c trong container WORKDIR /app # Sao chÃ©p file package.json vÃ  cÃ i Ä‘áº·t dependencies COPY package.json . RUN npm install # Sao chÃ©p toÃ n bá»™ mÃ£ nguá»“n vÃ o container COPY . . # Má»Ÿ cá»•ng 3000 cho á»©ng dá»¥ng EXPOSE 3000 # Lá»‡nh cháº¡y á»©ng dá»¥ng CMD [\u0026#34;npm\u0026#34;, \u0026#34;start\u0026#34;] ğŸ’¡ HÃ£y theo dÃµi blog Ä‘á»ƒ cáº­p nháº­t cÃ¡c bÃ i viáº¿t má»›i nháº¥t vá» DevOps!\n","date":"2025-02-19T00:00:00Z","image":"https://tech.nguuyen.io.vn/images/devops/devops-intro.webp","permalink":"https://tech.nguuyen.io.vn/posts/devops/devops-intro/","title":"Devops lÃ  gÃ¬ ?"}]